/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __publicField = (obj, key, value) => {
  __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
  return value;
};

// src/main.ts
var main_exports = {};
__export(main_exports, {
  DEFAULT_SETTINGS: () => DEFAULT_SETTINGS,
  checkActiveFile: () => checkActiveFile,
  default: () => BMOGPT9
});
module.exports = __toCommonJS(main_exports);
var import_obsidian23 = require("obsidian");

// src/view.ts
var import_obsidian6 = require("obsidian");

// src/components/FetchModelResponse.ts
var import_obsidian3 = require("obsidian");

// node_modules/openai/version.mjs
var VERSION = "4.6.0";

// node_modules/openai/streaming.mjs
var Stream = class {
  constructor(response, controller) {
    this.response = response;
    this.controller = controller;
    this.decoder = new SSEDecoder();
  }
  async *iterMessages() {
    if (!this.response.body) {
      this.controller.abort();
      throw new Error(`Attempted to iterate over a response with no body`);
    }
    const lineDecoder = new LineDecoder();
    const iter = readableStreamAsyncIterable(this.response.body);
    for await (const chunk of iter) {
      for (const line of lineDecoder.decode(chunk)) {
        const sse = this.decoder.decode(line);
        if (sse)
          yield sse;
      }
    }
    for (const line of lineDecoder.flush()) {
      const sse = this.decoder.decode(line);
      if (sse)
        yield sse;
    }
  }
  async *[Symbol.asyncIterator]() {
    let done = false;
    try {
      for await (const sse of this.iterMessages()) {
        if (done)
          continue;
        if (sse.data.startsWith("[DONE]")) {
          done = true;
          continue;
        }
        if (sse.event === null) {
          try {
            yield JSON.parse(sse.data);
          } catch (e) {
            console.error(`Could not parse message into JSON:`, sse.data);
            console.error(`From chunk:`, sse.raw);
            throw e;
          }
        }
      }
      done = true;
    } catch (e) {
      if (e instanceof Error && e.name === "AbortError")
        return;
      throw e;
    } finally {
      if (!done)
        this.controller.abort();
    }
  }
};
var SSEDecoder = class {
  constructor() {
    this.event = null;
    this.data = [];
    this.chunks = [];
  }
  decode(line) {
    if (line.endsWith("\r")) {
      line = line.substring(0, line.length - 1);
    }
    if (!line) {
      if (!this.event && !this.data.length)
        return null;
      const sse = {
        event: this.event,
        data: this.data.join("\n"),
        raw: this.chunks
      };
      this.event = null;
      this.data = [];
      this.chunks = [];
      return sse;
    }
    this.chunks.push(line);
    if (line.startsWith(":")) {
      return null;
    }
    let [fieldname, _, value] = partition(line, ":");
    if (value.startsWith(" ")) {
      value = value.substring(1);
    }
    if (fieldname === "event") {
      this.event = value;
    } else if (fieldname === "data") {
      this.data.push(value);
    }
    return null;
  }
};
var LineDecoder = class {
  constructor() {
    this.buffer = [];
    this.trailingCR = false;
  }
  decode(chunk) {
    let text = this.decodeText(chunk);
    if (this.trailingCR) {
      text = "\r" + text;
      this.trailingCR = false;
    }
    if (text.endsWith("\r")) {
      this.trailingCR = true;
      text = text.slice(0, -1);
    }
    if (!text) {
      return [];
    }
    const trailingNewline = LineDecoder.NEWLINE_CHARS.has(text[text.length - 1] || "");
    let lines = text.split(LineDecoder.NEWLINE_REGEXP);
    if (lines.length === 1 && !trailingNewline) {
      this.buffer.push(lines[0]);
      return [];
    }
    if (this.buffer.length > 0) {
      lines = [this.buffer.join("") + lines[0], ...lines.slice(1)];
      this.buffer = [];
    }
    if (!trailingNewline) {
      this.buffer = [lines.pop() || ""];
    }
    return lines;
  }
  decodeText(bytes) {
    var _a2;
    if (bytes == null)
      return "";
    if (typeof bytes === "string")
      return bytes;
    if (typeof Buffer !== "undefined") {
      if (bytes instanceof Buffer) {
        return bytes.toString();
      }
      if (bytes instanceof Uint8Array) {
        return Buffer.from(bytes).toString();
      }
      throw new Error(
        `Unexpected: received non-Uint8Array (${bytes.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`
      );
    }
    if (typeof TextDecoder !== "undefined") {
      if (bytes instanceof Uint8Array || bytes instanceof ArrayBuffer) {
        (_a2 = this.textDecoder) !== null && _a2 !== void 0 ? _a2 : this.textDecoder = new TextDecoder("utf8");
        return this.textDecoder.decode(bytes);
      }
      throw new Error(
        `Unexpected: received non-Uint8Array/ArrayBuffer (${bytes.constructor.name}) in a web platform. Please report this error.`
      );
    }
    throw new Error(
      `Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.`
    );
  }
  flush() {
    if (!this.buffer.length && !this.trailingCR) {
      return [];
    }
    const lines = [this.buffer.join("")];
    this.buffer = [];
    this.trailingCR = false;
    return lines;
  }
};
LineDecoder.NEWLINE_CHARS = /* @__PURE__ */ new Set(["\n", "\r", "\v", "\f", "", "", "", "\x85", "\u2028", "\u2029"]);
LineDecoder.NEWLINE_REGEXP = /\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;
function partition(str, delimiter) {
  const index = str.indexOf(delimiter);
  if (index !== -1) {
    return [str.substring(0, index), delimiter, str.substring(index + delimiter.length)];
  }
  return [str, "", ""];
}
function readableStreamAsyncIterable(stream) {
  if (stream[Symbol.asyncIterator])
    return stream;
  const reader = stream.getReader();
  return {
    async next() {
      try {
        const result = await reader.read();
        if (result === null || result === void 0 ? void 0 : result.done)
          reader.releaseLock();
        return result;
      } catch (e) {
        reader.releaseLock();
        throw e;
      }
    },
    async return() {
      const cancelPromise = reader.cancel();
      reader.releaseLock();
      await cancelPromise;
      return { done: true, value: void 0 };
    },
    [Symbol.asyncIterator]() {
      return this;
    }
  };
}

// node_modules/openai/error.mjs
var error_exports = {};
__export(error_exports, {
  APIConnectionError: () => APIConnectionError,
  APIConnectionTimeoutError: () => APIConnectionTimeoutError,
  APIError: () => APIError,
  APIUserAbortError: () => APIUserAbortError,
  AuthenticationError: () => AuthenticationError,
  BadRequestError: () => BadRequestError,
  ConflictError: () => ConflictError,
  InternalServerError: () => InternalServerError,
  NotFoundError: () => NotFoundError,
  PermissionDeniedError: () => PermissionDeniedError,
  RateLimitError: () => RateLimitError,
  UnprocessableEntityError: () => UnprocessableEntityError
});
var APIError = class extends Error {
  constructor(status, error, message, headers) {
    super(APIError.makeMessage(error, message));
    this.status = status;
    this.headers = headers;
    const data = error;
    this.error = data;
    this.code = data === null || data === void 0 ? void 0 : data["code"];
    this.param = data === null || data === void 0 ? void 0 : data["param"];
    this.type = data === null || data === void 0 ? void 0 : data["type"];
  }
  static makeMessage(error, message) {
    return (error === null || error === void 0 ? void 0 : error.message) ? typeof error.message === "string" ? error.message : JSON.stringify(error.message) : error ? JSON.stringify(error) : message || "Unknown error occurred";
  }
  static generate(status, errorResponse, message, headers) {
    if (!status) {
      return new APIConnectionError({ cause: castToError(errorResponse) });
    }
    const error = errorResponse === null || errorResponse === void 0 ? void 0 : errorResponse["error"];
    if (status === 400) {
      return new BadRequestError(status, error, message, headers);
    }
    if (status === 401) {
      return new AuthenticationError(status, error, message, headers);
    }
    if (status === 403) {
      return new PermissionDeniedError(status, error, message, headers);
    }
    if (status === 404) {
      return new NotFoundError(status, error, message, headers);
    }
    if (status === 409) {
      return new ConflictError(status, error, message, headers);
    }
    if (status === 422) {
      return new UnprocessableEntityError(status, error, message, headers);
    }
    if (status === 429) {
      return new RateLimitError(status, error, message, headers);
    }
    if (status >= 500) {
      return new InternalServerError(status, error, message, headers);
    }
    return new APIError(status, error, message, headers);
  }
};
var APIUserAbortError = class extends APIError {
  constructor({ message } = {}) {
    super(void 0, void 0, message || "Request was aborted.", void 0);
    this.status = void 0;
  }
};
var APIConnectionError = class extends APIError {
  constructor({ message, cause }) {
    super(void 0, void 0, message || "Connection error.", void 0);
    this.status = void 0;
    if (cause)
      this.cause = cause;
  }
};
var APIConnectionTimeoutError = class extends APIConnectionError {
  constructor({ message } = {}) {
    super({ message: message !== null && message !== void 0 ? message : "Request timed out." });
  }
};
var BadRequestError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 400;
  }
};
var AuthenticationError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 401;
  }
};
var PermissionDeniedError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 403;
  }
};
var NotFoundError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 404;
  }
};
var ConflictError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 409;
  }
};
var UnprocessableEntityError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 422;
  }
};
var RateLimitError = class extends APIError {
  constructor() {
    super(...arguments);
    this.status = 429;
  }
};
var InternalServerError = class extends APIError {
};

// node_modules/openai/_shims/agent.mjs
var getDefaultAgent = (url) => {
  return void 0;
};

// node_modules/openai/_shims/fetch.mjs
var _fetch = fetch.bind(void 0);
var isPolyfilled = false;

// node_modules/openai/_shims/form-data.mjs
var _FormData = FormData;
var _File = typeof File !== "undefined" ? File : (
  // Bun doesn't implement File yet, so just make a shim that throws a helpful error message
  class File2 extends Blob {
    constructor() {
      throw new Error(`file uploads aren't supported in this environment yet as 'File' is not defined`);
    }
  }
);

// node_modules/openai/_shims/getMultipartRequestOptions.mjs
async function getMultipartRequestOptions(form, opts) {
  return { ...opts, body: new MultipartBody(form) };
}

// node_modules/openai/_shims/fileFromPath.mjs
async function fileFromPath() {
  throw new Error(
    "The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads"
  );
}

// node_modules/openai/_shims/node-readable.mjs
function isFsReadStream(value) {
  return false;
}

// node_modules/openai/uploads.mjs
var isResponseLike = (value) => value != null && typeof value === "object" && typeof value.url === "string" && typeof value.blob === "function";
var isFileLike = (value) => value != null && typeof value === "object" && typeof value.name === "string" && typeof value.lastModified === "number" && isBlobLike(value);
var isBlobLike = (value) => value != null && typeof value === "object" && typeof value.size === "number" && typeof value.type === "string" && typeof value.text === "function" && typeof value.slice === "function" && typeof value.arrayBuffer === "function";
var isUploadable = (value) => {
  return isFileLike(value) || isResponseLike(value) || isFsReadStream(value);
};
async function toFile(value, name, options2 = {}) {
  var _a2, _b, _c;
  value = await value;
  if (isResponseLike(value)) {
    const blob = await value.blob();
    name || (name = (_a2 = new URL(value.url).pathname.split(/[\\/]/).pop()) !== null && _a2 !== void 0 ? _a2 : "unknown_file");
    return new _File([blob], name, options2);
  }
  const bits = await getBytes(value);
  name || (name = (_b = getName(value)) !== null && _b !== void 0 ? _b : "unknown_file");
  if (!options2.type) {
    const type = (_c = bits[0]) === null || _c === void 0 ? void 0 : _c.type;
    if (typeof type === "string") {
      options2 = { ...options2, type };
    }
  }
  return new _File(bits, name, options2);
}
async function getBytes(value) {
  var _a2;
  let parts = [];
  if (typeof value === "string" || ArrayBuffer.isView(value) || // includes Uint8Array, Buffer, etc.
  value instanceof ArrayBuffer) {
    parts.push(value);
  } else if (isBlobLike(value)) {
    parts.push(await value.arrayBuffer());
  } else if (isAsyncIterableIterator(value)) {
    for await (const chunk of value) {
      parts.push(chunk);
    }
  } else {
    throw new Error(
      `Unexpected data type: ${typeof value}; constructor: ${(_a2 = value === null || value === void 0 ? void 0 : value.constructor) === null || _a2 === void 0 ? void 0 : _a2.name}; props: ${propsForError(value)}`
    );
  }
  return parts;
}
function propsForError(value) {
  const props = Object.getOwnPropertyNames(value);
  return `[${props.map((p) => `"${p}"`).join(", ")}]`;
}
function getName(value) {
  var _a2;
  return getStringFromMaybeBuffer(value.name) || getStringFromMaybeBuffer(value.filename) || // For fs.ReadStream
  ((_a2 = getStringFromMaybeBuffer(value.path)) === null || _a2 === void 0 ? void 0 : _a2.split(/[\\/]/).pop());
}
var getStringFromMaybeBuffer = (x) => {
  if (typeof x === "string")
    return x;
  if (typeof Buffer !== "undefined" && x instanceof Buffer)
    return String(x);
  return void 0;
};
var isAsyncIterableIterator = (value) => value != null && typeof value === "object" && typeof value[Symbol.asyncIterator] === "function";
var MultipartBody = class {
  constructor(body) {
    this.body = body;
  }
  get [Symbol.toStringTag]() {
    return "MultipartBody";
  }
};
var isMultipartBody = (body) => body && typeof body === "object" && body.body && body[Symbol.toStringTag] === "MultipartBody";
var multipartFormRequestOptions = async (opts) => {
  const form = await createForm(opts.body);
  return getMultipartRequestOptions(form, opts);
};
var createForm = async (body) => {
  const form = new _FormData();
  await Promise.all(Object.entries(body || {}).map(([key, value]) => addFormValue(form, key, value)));
  return form;
};
var addFormValue = async (form, key, value) => {
  if (value === void 0)
    return;
  if (value == null) {
    throw new TypeError(
      `Received null for "${key}"; to pass null in FormData, you must use the string 'null'`
    );
  }
  if (typeof value === "string" || typeof value === "number" || typeof value === "boolean") {
    form.append(key, String(value));
  } else if (isUploadable(value)) {
    const file = await toFile(value);
    form.append(key, file);
  } else if (Array.isArray(value)) {
    await Promise.all(value.map((entry) => addFormValue(form, key + "[]", entry)));
  } else if (typeof value === "object") {
    await Promise.all(
      Object.entries(value).map(([name, prop]) => addFormValue(form, `${key}[${name}]`, prop))
    );
  } else {
    throw new TypeError(
      `Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${value} instead`
    );
  }
};

// node_modules/openai/core.mjs
var __classPrivateFieldSet = function(receiver, state, value, kind, f) {
  if (kind === "m")
    throw new TypeError("Private method is not writable");
  if (kind === "a" && !f)
    throw new TypeError("Private accessor was defined without a setter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
    throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
};
var __classPrivateFieldGet = function(receiver, state, kind, f) {
  if (kind === "a" && !f)
    throw new TypeError("Private accessor was defined without a getter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver))
    throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var _AbstractPage_client;
var MAX_RETRIES = 2;
async function defaultParseResponse(props) {
  const { response } = props;
  if (props.options.stream) {
    return new Stream(response, props.controller);
  }
  const contentType = response.headers.get("content-type");
  if (contentType === null || contentType === void 0 ? void 0 : contentType.includes("application/json")) {
    const json = await response.json();
    debug("response", response.status, response.url, response.headers, json);
    return json;
  }
  const text = await response.text();
  debug("response", response.status, response.url, response.headers, text);
  return text;
}
var APIPromise = class extends Promise {
  constructor(responsePromise, parseResponse = defaultParseResponse) {
    super((resolve) => {
      resolve(null);
    });
    this.responsePromise = responsePromise;
    this.parseResponse = parseResponse;
  }
  _thenUnwrap(transform) {
    return new APIPromise(this.responsePromise, async (props) => transform(await this.parseResponse(props)));
  }
  /**
   * Gets the raw `Response` instance instead of parsing the response
   * data.
   *
   * If you want to parse the response body but still get the `Response`
   * instance, you can use {@link withResponse()}.
   */
  asResponse() {
    return this.responsePromise.then((p) => p.response);
  }
  /**
   * Gets the parsed response data and the raw `Response` instance.
   *
   * If you just want to get the raw `Response` instance without parsing it,
   * you can use {@link asResponse()}.
   */
  async withResponse() {
    const [data, response] = await Promise.all([this.parse(), this.asResponse()]);
    return { data, response };
  }
  parse() {
    if (!this.parsedPromise) {
      this.parsedPromise = this.responsePromise.then(this.parseResponse);
    }
    return this.parsedPromise;
  }
  then(onfulfilled, onrejected) {
    return this.parse().then(onfulfilled, onrejected);
  }
  catch(onrejected) {
    return this.parse().catch(onrejected);
  }
  finally(onfinally) {
    return this.parse().finally(onfinally);
  }
};
var APIClient = class {
  constructor({
    baseURL,
    maxRetries,
    timeout = 6e5,
    // 10 minutes
    httpAgent,
    fetch: overridenFetch
  }) {
    this.baseURL = baseURL;
    this.maxRetries = validatePositiveInteger(
      "maxRetries",
      maxRetries !== null && maxRetries !== void 0 ? maxRetries : MAX_RETRIES
    );
    this.timeout = validatePositiveInteger("timeout", timeout);
    this.httpAgent = httpAgent;
    this.fetch = overridenFetch !== null && overridenFetch !== void 0 ? overridenFetch : _fetch;
  }
  authHeaders(opts) {
    return {};
  }
  /**
   * Override this to add your own default headers, for example:
   *
   *  {
   *    ...super.defaultHeaders(),
   *    Authorization: 'Bearer 123',
   *  }
   */
  defaultHeaders(opts) {
    return {
      Accept: "application/json",
      "Content-Type": "application/json",
      "User-Agent": this.getUserAgent(),
      ...getPlatformHeaders(),
      ...this.authHeaders(opts)
    };
  }
  /**
   * Override this to add your own headers validation:
   */
  validateHeaders(headers, customHeaders) {
  }
  defaultIdempotencyKey() {
    return `stainless-node-retry-${uuid4()}`;
  }
  get(path, opts) {
    return this.methodRequest("get", path, opts);
  }
  post(path, opts) {
    return this.methodRequest("post", path, opts);
  }
  patch(path, opts) {
    return this.methodRequest("patch", path, opts);
  }
  put(path, opts) {
    return this.methodRequest("put", path, opts);
  }
  delete(path, opts) {
    return this.methodRequest("delete", path, opts);
  }
  methodRequest(method, path, opts) {
    return this.request(Promise.resolve(opts).then((opts2) => ({ method, path, ...opts2 })));
  }
  getAPIList(path, Page2, opts) {
    return this.requestAPIList(Page2, { method: "get", path, ...opts });
  }
  calculateContentLength(body) {
    if (typeof body === "string") {
      if (typeof Buffer !== "undefined") {
        return Buffer.byteLength(body, "utf8").toString();
      }
      if (typeof TextEncoder !== "undefined") {
        const encoder = new TextEncoder();
        const encoded = encoder.encode(body);
        return encoded.length.toString();
      }
    }
    return null;
  }
  buildRequest(options2) {
    var _a2, _b, _c, _d, _e, _f;
    const { method, path, query, headers = {} } = options2;
    const body = isMultipartBody(options2.body) ? options2.body.body : options2.body ? JSON.stringify(options2.body, null, 2) : null;
    const contentLength = this.calculateContentLength(body);
    const url = this.buildURL(path, query);
    if ("timeout" in options2)
      validatePositiveInteger("timeout", options2.timeout);
    const timeout = (_a2 = options2.timeout) !== null && _a2 !== void 0 ? _a2 : this.timeout;
    const httpAgent = (_c = (_b = options2.httpAgent) !== null && _b !== void 0 ? _b : this.httpAgent) !== null && _c !== void 0 ? _c : getDefaultAgent(url);
    const minAgentTimeout = timeout + 1e3;
    if (typeof ((_d = httpAgent === null || httpAgent === void 0 ? void 0 : httpAgent.options) === null || _d === void 0 ? void 0 : _d.timeout) === "number" && minAgentTimeout > ((_e = httpAgent.options.timeout) !== null && _e !== void 0 ? _e : 0)) {
      httpAgent.options.timeout = minAgentTimeout;
    }
    if (this.idempotencyHeader && method !== "get") {
      if (!options2.idempotencyKey)
        options2.idempotencyKey = this.defaultIdempotencyKey();
      headers[this.idempotencyHeader] = options2.idempotencyKey;
    }
    const reqHeaders = {
      ...contentLength && { "Content-Length": contentLength },
      ...this.defaultHeaders(options2),
      ...headers
    };
    if (isMultipartBody(options2.body) && !isPolyfilled) {
      delete reqHeaders["Content-Type"];
    }
    Object.keys(reqHeaders).forEach((key) => reqHeaders[key] === null && delete reqHeaders[key]);
    const req = {
      method,
      ...body && { body },
      headers: reqHeaders,
      ...httpAgent && { agent: httpAgent },
      // @ts-ignore node-fetch uses a custom AbortSignal type that is
      // not compatible with standard web types
      signal: (_f = options2.signal) !== null && _f !== void 0 ? _f : null
    };
    this.validateHeaders(reqHeaders, headers);
    return { req, url, timeout };
  }
  /**
   * Used as a callback for mutating the given `RequestInit` object.
   *
   * This is useful for cases where you want to add certain headers based off of
   * the request properties, e.g. `method` or `url`.
   */
  async prepareRequest(request, { url, options: options2 }) {
  }
  parseHeaders(headers) {
    return !headers ? {} : Symbol.iterator in headers ? Object.fromEntries(Array.from(headers).map((header) => [...header])) : { ...headers };
  }
  makeStatusError(status, error, message, headers) {
    return APIError.generate(status, error, message, headers);
  }
  request(options2, remainingRetries = null) {
    return new APIPromise(this.makeRequest(options2, remainingRetries));
  }
  async makeRequest(optionsInput, retriesRemaining) {
    var _a2, _b, _c;
    const options2 = await optionsInput;
    if (retriesRemaining == null) {
      retriesRemaining = (_a2 = options2.maxRetries) !== null && _a2 !== void 0 ? _a2 : this.maxRetries;
    }
    const { req, url, timeout } = this.buildRequest(options2);
    await this.prepareRequest(req, { url, options: options2 });
    debug("request", url, options2, req.headers);
    if ((_b = options2.signal) === null || _b === void 0 ? void 0 : _b.aborted) {
      throw new APIUserAbortError();
    }
    const controller = new AbortController();
    const response = await this.fetchWithTimeout(url, req, timeout, controller).catch(castToError);
    if (response instanceof Error) {
      if ((_c = options2.signal) === null || _c === void 0 ? void 0 : _c.aborted) {
        throw new APIUserAbortError();
      }
      if (retriesRemaining) {
        return this.retryRequest(options2, retriesRemaining);
      }
      if (response.name === "AbortError") {
        throw new APIConnectionTimeoutError();
      }
      throw new APIConnectionError({ cause: response });
    }
    const responseHeaders = createResponseHeaders(response.headers);
    if (!response.ok) {
      if (retriesRemaining && this.shouldRetry(response)) {
        return this.retryRequest(options2, retriesRemaining, responseHeaders);
      }
      const errText = await response.text().catch(() => "Unknown");
      const errJSON = safeJSON(errText);
      const errMessage = errJSON ? void 0 : errText;
      debug("response", response.status, url, responseHeaders, errMessage);
      const err = this.makeStatusError(response.status, errJSON, errMessage, responseHeaders);
      throw err;
    }
    return { response, options: options2, controller };
  }
  requestAPIList(Page2, options2) {
    const request = this.makeRequest(options2, null);
    return new PagePromise(this, request, Page2);
  }
  buildURL(path, query) {
    const url = isAbsoluteURL(path) ? new URL(path) : new URL(this.baseURL + (this.baseURL.endsWith("/") && path.startsWith("/") ? path.slice(1) : path));
    const defaultQuery = this.defaultQuery();
    if (!isEmptyObj(defaultQuery)) {
      query = { ...defaultQuery, ...query };
    }
    if (query) {
      url.search = this.stringifyQuery(query);
    }
    return url.toString();
  }
  stringifyQuery(query) {
    return Object.entries(query).filter(([_, value]) => typeof value !== "undefined").map(([key, value]) => {
      if (typeof value === "string" || typeof value === "number" || typeof value === "boolean") {
        return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;
      }
      if (value === null) {
        return `${encodeURIComponent(key)}=`;
      }
      throw new Error(
        `Cannot stringify type ${typeof value}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`
      );
    }).join("&");
  }
  async fetchWithTimeout(url, init, ms, controller) {
    const { signal, ...options2 } = init || {};
    if (signal)
      signal.addEventListener("abort", () => controller.abort());
    const timeout = setTimeout(() => controller.abort(), ms);
    return this.getRequestClient().fetch(url, { signal: controller.signal, ...options2 }).finally(() => {
      clearTimeout(timeout);
    });
  }
  getRequestClient() {
    return { fetch: this.fetch };
  }
  shouldRetry(response) {
    const shouldRetryHeader = response.headers.get("x-should-retry");
    if (shouldRetryHeader === "true")
      return true;
    if (shouldRetryHeader === "false")
      return false;
    if (response.status === 409)
      return true;
    if (response.status === 429)
      return true;
    if (response.status >= 500)
      return true;
    return false;
  }
  async retryRequest(options2, retriesRemaining, responseHeaders) {
    var _a2;
    retriesRemaining -= 1;
    const retryAfter = parseInt(
      (responseHeaders === null || responseHeaders === void 0 ? void 0 : responseHeaders["retry-after"]) || ""
    );
    const maxRetries = (_a2 = options2.maxRetries) !== null && _a2 !== void 0 ? _a2 : this.maxRetries;
    const timeout = this.calculateRetryTimeoutSeconds(retriesRemaining, retryAfter, maxRetries) * 1e3;
    await sleep(timeout);
    return this.makeRequest(options2, retriesRemaining);
  }
  calculateRetryTimeoutSeconds(retriesRemaining, retryAfter, maxRetries) {
    const initialRetryDelay = 0.5;
    const maxRetryDelay = 2;
    if (Number.isInteger(retryAfter) && retryAfter <= 60) {
      return retryAfter;
    }
    const numRetries = maxRetries - retriesRemaining;
    const sleepSeconds = Math.min(initialRetryDelay * Math.pow(numRetries - 1, 2), maxRetryDelay);
    const jitter = Math.random() - 0.5;
    return sleepSeconds + jitter;
  }
  getUserAgent() {
    return `${this.constructor.name}/JS ${VERSION}`;
  }
};
var AbstractPage = class {
  constructor(client, response, body, options2) {
    _AbstractPage_client.set(this, void 0);
    __classPrivateFieldSet(this, _AbstractPage_client, client, "f");
    this.options = options2;
    this.response = response;
    this.body = body;
  }
  hasNextPage() {
    const items = this.getPaginatedItems();
    if (!items.length)
      return false;
    return this.nextPageInfo() != null;
  }
  async getNextPage() {
    const nextInfo = this.nextPageInfo();
    if (!nextInfo) {
      throw new Error(
        "No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`."
      );
    }
    const nextOptions = { ...this.options };
    if ("params" in nextInfo) {
      nextOptions.query = { ...nextOptions.query, ...nextInfo.params };
    } else if ("url" in nextInfo) {
      const params = [...Object.entries(nextOptions.query || {}), ...nextInfo.url.searchParams.entries()];
      for (const [key, value] of params) {
        nextInfo.url.searchParams.set(key, value);
      }
      nextOptions.query = void 0;
      nextOptions.path = nextInfo.url.toString();
    }
    return await __classPrivateFieldGet(this, _AbstractPage_client, "f").requestAPIList(
      this.constructor,
      nextOptions
    );
  }
  async *iterPages() {
    let page = this;
    yield page;
    while (page.hasNextPage()) {
      page = await page.getNextPage();
      yield page;
    }
  }
  async *[(_AbstractPage_client = /* @__PURE__ */ new WeakMap(), Symbol.asyncIterator)]() {
    for await (const page of this.iterPages()) {
      for (const item of page.getPaginatedItems()) {
        yield item;
      }
    }
  }
};
var PagePromise = class extends APIPromise {
  constructor(client, request, Page2) {
    super(
      request,
      async (props) => new Page2(client, props.response, await defaultParseResponse(props), props.options)
    );
  }
  /**
   * Allow auto-paginating iteration on an unawaited list call, eg:
   *
   *    for await (const item of client.items.list()) {
   *      console.log(item)
   *    }
   */
  async *[Symbol.asyncIterator]() {
    const page = await this;
    for await (const item of page) {
      yield item;
    }
  }
};
var createResponseHeaders = (headers) => {
  return new Proxy(
    Object.fromEntries(
      // @ts-ignore
      headers.entries()
    ),
    {
      get(target, name) {
        const key = name.toString();
        return target[key.toLowerCase()] || target[key];
      }
    }
  );
};
var requestOptionsKeys = {
  method: true,
  path: true,
  query: true,
  body: true,
  headers: true,
  maxRetries: true,
  stream: true,
  timeout: true,
  httpAgent: true,
  signal: true,
  idempotencyKey: true
};
var isRequestOptions = (obj) => {
  return typeof obj === "object" && obj !== null && !isEmptyObj(obj) && Object.keys(obj).every((k) => hasOwn(requestOptionsKeys, k));
};
var getPlatformProperties = () => {
  if (typeof Deno !== "undefined" && Deno.build != null) {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": normalizePlatform(Deno.build.os),
      "X-Stainless-Arch": normalizeArch(Deno.build.arch),
      "X-Stainless-Runtime": "deno",
      "X-Stainless-Runtime-Version": Deno.version
    };
  }
  if (typeof EdgeRuntime !== "undefined") {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": "Unknown",
      "X-Stainless-Arch": `other:${EdgeRuntime}`,
      "X-Stainless-Runtime": "edge",
      "X-Stainless-Runtime-Version": process.version
    };
  }
  if (Object.prototype.toString.call(typeof process !== "undefined" ? process : 0) === "[object process]") {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": normalizePlatform(process.platform),
      "X-Stainless-Arch": normalizeArch(process.arch),
      "X-Stainless-Runtime": "node",
      "X-Stainless-Runtime-Version": process.version
    };
  }
  const browserInfo = getBrowserInfo();
  if (browserInfo) {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": "Unknown",
      "X-Stainless-Arch": "unknown",
      "X-Stainless-Runtime": `browser:${browserInfo.browser}`,
      "X-Stainless-Runtime-Version": browserInfo.version
    };
  }
  return {
    "X-Stainless-Lang": "js",
    "X-Stainless-Package-Version": VERSION,
    "X-Stainless-OS": "Unknown",
    "X-Stainless-Arch": "unknown",
    "X-Stainless-Runtime": "unknown",
    "X-Stainless-Runtime-Version": "unknown"
  };
};
function getBrowserInfo() {
  if (typeof navigator === "undefined" || !navigator) {
    return null;
  }
  const browserPatterns = [
    { key: "edge", pattern: /Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "ie", pattern: /MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "ie", pattern: /Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "chrome", pattern: /Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "firefox", pattern: /Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "safari", pattern: /(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/ }
  ];
  for (const { key, pattern } of browserPatterns) {
    const match = pattern.exec(navigator.userAgent);
    if (match) {
      const major = match[1] || 0;
      const minor = match[2] || 0;
      const patch = match[3] || 0;
      return { browser: key, version: `${major}.${minor}.${patch}` };
    }
  }
  return null;
}
var normalizeArch = (arch) => {
  if (arch === "x32")
    return "x32";
  if (arch === "x86_64" || arch === "x64")
    return "x64";
  if (arch === "arm")
    return "arm";
  if (arch === "aarch64" || arch === "arm64")
    return "arm64";
  if (arch)
    return `other:${arch}`;
  return "unknown";
};
var normalizePlatform = (platform) => {
  platform = platform.toLowerCase();
  if (platform.includes("ios"))
    return "iOS";
  if (platform === "android")
    return "Android";
  if (platform === "darwin")
    return "MacOS";
  if (platform === "win32")
    return "Windows";
  if (platform === "freebsd")
    return "FreeBSD";
  if (platform === "openbsd")
    return "OpenBSD";
  if (platform === "linux")
    return "Linux";
  if (platform)
    return `Other:${platform}`;
  return "Unknown";
};
var _platformHeaders;
var getPlatformHeaders = () => {
  return _platformHeaders !== null && _platformHeaders !== void 0 ? _platformHeaders : _platformHeaders = getPlatformProperties();
};
var safeJSON = (text) => {
  try {
    return JSON.parse(text);
  } catch (err) {
    return void 0;
  }
};
var startsWithSchemeRegexp = new RegExp("^(?:[a-z]+:)?//", "i");
var isAbsoluteURL = (url) => {
  return startsWithSchemeRegexp.test(url);
};
var sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));
var validatePositiveInteger = (name, n) => {
  if (typeof n !== "number" || !Number.isInteger(n)) {
    throw new Error(`${name} must be an integer`);
  }
  if (n < 0) {
    throw new Error(`${name} must be a positive integer`);
  }
  return n;
};
var castToError = (err) => {
  if (err instanceof Error)
    return err;
  return new Error(err);
};
var readEnv = (env) => {
  var _a2, _b, _c, _d;
  if (typeof process !== "undefined") {
    return (_b = (_a2 = process.env) === null || _a2 === void 0 ? void 0 : _a2[env]) !== null && _b !== void 0 ? _b : void 0;
  }
  if (typeof Deno !== "undefined") {
    return (_d = (_c = Deno.env) === null || _c === void 0 ? void 0 : _c.get) === null || _d === void 0 ? void 0 : _d.call(_c, env);
  }
  return void 0;
};
function isEmptyObj(obj) {
  if (!obj)
    return true;
  for (const _k in obj)
    return false;
  return true;
}
function hasOwn(obj, key) {
  return Object.prototype.hasOwnProperty.call(obj, key);
}
function debug(action, ...args) {
  if (typeof process !== "undefined" && process.env["DEBUG"] === "true") {
    console.log(`OpenAI:DEBUG:${action}`, ...args);
  }
}
var uuid4 = () => {
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (c) => {
    const r = Math.random() * 16 | 0;
    const v = c === "x" ? r : r & 3 | 8;
    return v.toString(16);
  });
};
var isRunningInBrowser = () => {
  return (
    // @ts-ignore
    typeof window !== "undefined" && // @ts-ignore
    typeof window.document !== "undefined" && // @ts-ignore
    typeof navigator !== "undefined"
  );
};

// node_modules/openai/pagination.mjs
var Page = class extends AbstractPage {
  constructor(client, response, body, options2) {
    super(client, response, body, options2);
    this.object = body.object;
    this.data = body.data;
  }
  getPaginatedItems() {
    return this.data;
  }
  // @deprecated Please use `nextPageInfo()` instead
  /**
   * This page represents a response that isn't actually paginated at the API level
   * so there will never be any next page params.
   */
  nextPageParams() {
    return null;
  }
  nextPageInfo() {
    return null;
  }
};
var CursorPage = class extends AbstractPage {
  constructor(client, response, body, options2) {
    super(client, response, body, options2);
    this.data = body.data;
  }
  getPaginatedItems() {
    return this.data;
  }
  // @deprecated Please use `nextPageInfo()` instead
  nextPageParams() {
    const info = this.nextPageInfo();
    if (!info)
      return null;
    if ("params" in info)
      return info.params;
    const params = Object.fromEntries(info.url.searchParams);
    if (!Object.keys(params).length)
      return null;
    return params;
  }
  nextPageInfo() {
    var _a2, _b;
    if (!((_a2 = this.data) === null || _a2 === void 0 ? void 0 : _a2.length)) {
      return null;
    }
    const next = (_b = this.data[this.data.length - 1]) === null || _b === void 0 ? void 0 : _b.id;
    if (!next)
      return null;
    return { params: { after: next } };
  }
};

// node_modules/openai/resource.mjs
var APIResource = class {
  constructor(client) {
    this.client = client;
    this.get = client.get.bind(client);
    this.post = client.post.bind(client);
    this.patch = client.patch.bind(client);
    this.put = client.put.bind(client);
    this.delete = client.delete.bind(client);
    this.getAPIList = client.getAPIList.bind(client);
  }
};

// node_modules/openai/resources/audio/transcriptions.mjs
var Transcriptions = class extends APIResource {
  /**
   * Transcribes audio into the input language.
   */
  create(body, options2) {
    return this.post("/audio/transcriptions", multipartFormRequestOptions({ body, ...options2 }));
  }
};
(function(Transcriptions2) {
})(Transcriptions || (Transcriptions = {}));

// node_modules/openai/resources/audio/translations.mjs
var Translations = class extends APIResource {
  /**
   * Translates audio into English.
   */
  create(body, options2) {
    return this.post("/audio/translations", multipartFormRequestOptions({ body, ...options2 }));
  }
};
(function(Translations2) {
})(Translations || (Translations = {}));

// node_modules/openai/resources/audio/audio.mjs
var Audio = class extends APIResource {
  constructor() {
    super(...arguments);
    this.transcriptions = new Transcriptions(this.client);
    this.translations = new Translations(this.client);
  }
};
(function(Audio2) {
  Audio2.Transcriptions = Transcriptions;
  Audio2.Translations = Translations;
})(Audio || (Audio = {}));

// node_modules/openai/resources/chat/completions.mjs
var Completions = class extends APIResource {
  create(body, options2) {
    var _a2;
    return this.post("/chat/completions", {
      body,
      ...options2,
      stream: (_a2 = body.stream) !== null && _a2 !== void 0 ? _a2 : false
    });
  }
};
(function(Completions3) {
})(Completions || (Completions = {}));

// node_modules/openai/resources/chat/chat.mjs
var Chat = class extends APIResource {
  constructor() {
    super(...arguments);
    this.completions = new Completions(this.client);
  }
};
(function(Chat2) {
  Chat2.Completions = Completions;
})(Chat || (Chat = {}));

// node_modules/openai/resources/completions.mjs
var Completions2 = class extends APIResource {
  create(body, options2) {
    var _a2;
    return this.post("/completions", {
      body,
      ...options2,
      stream: (_a2 = body.stream) !== null && _a2 !== void 0 ? _a2 : false
    });
  }
};
(function(Completions3) {
})(Completions2 || (Completions2 = {}));

// node_modules/openai/resources/embeddings.mjs
var Embeddings = class extends APIResource {
  /**
   * Creates an embedding vector representing the input text.
   */
  create(body, options2) {
    return this.post("/embeddings", { body, ...options2 });
  }
};
(function(Embeddings2) {
})(Embeddings || (Embeddings = {}));

// node_modules/openai/resources/edits.mjs
var Edits = class extends APIResource {
  /**
   * Creates a new edit for the provided input, instruction, and parameters.
   *
   * @deprecated The Edits API is deprecated; please use Chat Completions instead.
   *
   * https://openai.com/blog/gpt-4-api-general-availability#deprecation-of-the-edits-api
   */
  create(body, options2) {
    return this.post("/edits", { body, ...options2 });
  }
};
(function(Edits2) {
})(Edits || (Edits = {}));

// node_modules/openai/resources/files.mjs
var Files = class extends APIResource {
  /**
   * Upload a file that contains document(s) to be used across various
   * endpoints/features. Currently, the size of all the files uploaded by one
   * organization can be up to 1 GB. Please contact us if you need to increase the
   * storage limit.
   */
  create(body, options2) {
    return this.post("/files", multipartFormRequestOptions({ body, ...options2 }));
  }
  /**
   * Returns information about a specific file.
   */
  retrieve(fileId, options2) {
    return this.get(`/files/${fileId}`, options2);
  }
  /**
   * Returns a list of files that belong to the user's organization.
   */
  list(options2) {
    return this.getAPIList("/files", FileObjectsPage, options2);
  }
  /**
   * Delete a file.
   */
  del(fileId, options2) {
    return this.delete(`/files/${fileId}`, options2);
  }
  /**
   * Returns the contents of the specified file
   */
  retrieveContent(fileId, options2) {
    return this.get(`/files/${fileId}/content`, {
      ...options2,
      headers: {
        Accept: "application/json",
        ...options2 === null || options2 === void 0 ? void 0 : options2.headers
      }
    });
  }
  /**
   * Waits for the given file to be processed, default timeout is 30 mins.
   */
  async waitForProcessing(id, { pollInterval = 5e3, maxWait = 30 * 60 * 1e3 } = {}) {
    const TERMINAL_STATES = /* @__PURE__ */ new Set(["processed", "error", "deleted"]);
    const start = Date.now();
    let file = await this.retrieve(id);
    while (!file.status || !TERMINAL_STATES.has(file.status)) {
      await sleep(pollInterval);
      file = await this.retrieve(id);
      if (Date.now() - start > maxWait) {
        throw new APIConnectionTimeoutError({
          message: `Giving up on waiting for file ${id} to finish processing after ${maxWait} milliseconds.`
        });
      }
    }
    return file;
  }
};
var FileObjectsPage = class extends Page {
};
(function(Files2) {
})(Files || (Files = {}));

// node_modules/openai/resources/fine-tunes.mjs
var FineTunes = class extends APIResource {
  /**
   * Creates a job that fine-tunes a specified model from a given dataset.
   *
   * Response includes details of the enqueued job including job status and the name
   * of the fine-tuned models once complete.
   *
   * [Learn more about fine-tuning](/docs/guides/legacy-fine-tuning)
   */
  create(body, options2) {
    return this.post("/fine-tunes", { body, ...options2 });
  }
  /**
   * Gets info about the fine-tune job.
   *
   * [Learn more about fine-tuning](/docs/guides/legacy-fine-tuning)
   */
  retrieve(fineTuneId, options2) {
    return this.get(`/fine-tunes/${fineTuneId}`, options2);
  }
  /**
   * List your organization's fine-tuning jobs
   */
  list(options2) {
    return this.getAPIList("/fine-tunes", FineTunesPage, options2);
  }
  /**
   * Immediately cancel a fine-tune job.
   */
  cancel(fineTuneId, options2) {
    return this.post(`/fine-tunes/${fineTuneId}/cancel`, options2);
  }
  listEvents(fineTuneId, query, options2) {
    var _a2;
    return this.get(`/fine-tunes/${fineTuneId}/events`, {
      query,
      timeout: 864e5,
      ...options2,
      stream: (_a2 = query === null || query === void 0 ? void 0 : query.stream) !== null && _a2 !== void 0 ? _a2 : false
    });
  }
};
var FineTunesPage = class extends Page {
};
(function(FineTunes2) {
})(FineTunes || (FineTunes = {}));

// node_modules/openai/resources/fine-tuning/jobs.mjs
var Jobs = class extends APIResource {
  /**
   * Creates a job that fine-tunes a specified model from a given dataset.
   *
   * Response includes details of the enqueued job including job status and the name
   * of the fine-tuned models once complete.
   *
   * [Learn more about fine-tuning](/docs/guides/fine-tuning)
   */
  create(body, options2) {
    return this.post("/fine_tuning/jobs", { body, ...options2 });
  }
  /**
   * Get info about a fine-tuning job.
   *
   * [Learn more about fine-tuning](/docs/guides/fine-tuning)
   */
  retrieve(fineTuningJobId, options2) {
    return this.get(`/fine_tuning/jobs/${fineTuningJobId}`, options2);
  }
  list(query = {}, options2) {
    if (isRequestOptions(query)) {
      return this.list({}, query);
    }
    return this.getAPIList("/fine_tuning/jobs", FineTuningJobsPage, { query, ...options2 });
  }
  /**
   * Immediately cancel a fine-tune job.
   */
  cancel(fineTuningJobId, options2) {
    return this.post(`/fine_tuning/jobs/${fineTuningJobId}/cancel`, options2);
  }
  listEvents(fineTuningJobId, query = {}, options2) {
    if (isRequestOptions(query)) {
      return this.listEvents(fineTuningJobId, {}, query);
    }
    return this.getAPIList(`/fine_tuning/jobs/${fineTuningJobId}/events`, FineTuningJobEventsPage, {
      query,
      ...options2
    });
  }
};
var FineTuningJobsPage = class extends CursorPage {
};
var FineTuningJobEventsPage = class extends CursorPage {
};
(function(Jobs2) {
})(Jobs || (Jobs = {}));

// node_modules/openai/resources/fine-tuning/fine-tuning.mjs
var FineTuning = class extends APIResource {
  constructor() {
    super(...arguments);
    this.jobs = new Jobs(this.client);
  }
};
(function(FineTuning2) {
  FineTuning2.Jobs = Jobs;
  FineTuning2.FineTuningJobsPage = FineTuningJobsPage;
  FineTuning2.FineTuningJobEventsPage = FineTuningJobEventsPage;
})(FineTuning || (FineTuning = {}));

// node_modules/openai/resources/images.mjs
var Images = class extends APIResource {
  /**
   * Creates a variation of a given image.
   */
  createVariation(body, options2) {
    return this.post("/images/variations", multipartFormRequestOptions({ body, ...options2 }));
  }
  /**
   * Creates an edited or extended image given an original image and a prompt.
   */
  edit(body, options2) {
    return this.post("/images/edits", multipartFormRequestOptions({ body, ...options2 }));
  }
  /**
   * Creates an image given a prompt.
   */
  generate(body, options2) {
    return this.post("/images/generations", { body, ...options2 });
  }
};
(function(Images2) {
})(Images || (Images = {}));

// node_modules/openai/resources/models.mjs
var Models = class extends APIResource {
  /**
   * Retrieves a model instance, providing basic information about the model such as
   * the owner and permissioning.
   */
  retrieve(model, options2) {
    return this.get(`/models/${model}`, options2);
  }
  /**
   * Lists the currently available models, and provides basic information about each
   * one such as the owner and availability.
   */
  list(options2) {
    return this.getAPIList("/models", ModelsPage, options2);
  }
  /**
   * Delete a fine-tuned model. You must have the Owner role in your organization to
   * delete a model.
   */
  del(model, options2) {
    return this.delete(`/models/${model}`, options2);
  }
};
var ModelsPage = class extends Page {
};
(function(Models2) {
})(Models || (Models = {}));

// node_modules/openai/resources/moderations.mjs
var Moderations = class extends APIResource {
  /**
   * Classifies if text violates OpenAI's Content Policy
   */
  create(body, options2) {
    return this.post("/moderations", { body, ...options2 });
  }
};
(function(Moderations2) {
})(Moderations || (Moderations = {}));

// node_modules/openai/index.mjs
var _a;
var OpenAI = class extends APIClient {
  /**
   * API Client for interfacing with the OpenAI API.
   *
   * @param {string} [opts.apiKey=process.env['OPENAI_API_KEY']] - The API Key to send to the API.
   * @param {string} [opts.baseURL] - Override the default base URL for the API.
   * @param {number} [opts.timeout=10 minutes] - The maximum amount of time (in milliseconds) the client will wait for a response before timing out.
   * @param {number} [opts.httpAgent] - An HTTP agent used to manage HTTP(s) connections.
   * @param {Core.Fetch} [opts.fetch] - Specify a custom `fetch` function implementation.
   * @param {number} [opts.maxRetries=2] - The maximum number of times the client will retry a request.
   * @param {Core.Headers} opts.defaultHeaders - Default headers to include with every request to the API.
   * @param {Core.DefaultQuery} opts.defaultQuery - Default query parameters to include with every request to the API.
   * @param {boolean} [opts.dangerouslyAllowBrowser=false] - By default, client-side use of this library is not allowed, as it risks exposing your secret API credentials to attackers.
   * @param {string | null} [opts.organization]
   */
  constructor(_b) {
    var _c, _d, _e;
    var {
      apiKey = readEnv("OPENAI_API_KEY"),
      organization = (_c = readEnv("OPENAI_ORG_ID")) !== null && _c !== void 0 ? _c : null,
      ...opts
    } = _b === void 0 ? {} : _b;
    if (apiKey === void 0) {
      throw new Error(
        "The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'my apiKey' })."
      );
    }
    const options2 = {
      apiKey,
      organization,
      ...opts,
      baseURL: (_d = opts.baseURL) !== null && _d !== void 0 ? _d : `https://api.openai.com/v1`
    };
    if (!options2.dangerouslyAllowBrowser && isRunningInBrowser()) {
      throw new Error(
        "It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n"
      );
    }
    super({
      baseURL: options2.baseURL,
      timeout: (_e = options2.timeout) !== null && _e !== void 0 ? _e : 6e5,
      httpAgent: options2.httpAgent,
      maxRetries: options2.maxRetries,
      fetch: options2.fetch
    });
    this.completions = new Completions2(this);
    this.chat = new Chat(this);
    this.edits = new Edits(this);
    this.embeddings = new Embeddings(this);
    this.files = new Files(this);
    this.images = new Images(this);
    this.audio = new Audio(this);
    this.moderations = new Moderations(this);
    this.models = new Models(this);
    this.fineTuning = new FineTuning(this);
    this.fineTunes = new FineTunes(this);
    this._options = options2;
    this.apiKey = apiKey;
    this.organization = organization;
  }
  defaultQuery() {
    return this._options.defaultQuery;
  }
  defaultHeaders(opts) {
    return {
      ...super.defaultHeaders(opts),
      "OpenAI-Organization": this.organization,
      ...this._options.defaultHeaders
    };
  }
  authHeaders(opts) {
    return { Authorization: `Bearer ${this.apiKey}` };
  }
};
_a = OpenAI;
OpenAI.OpenAI = _a;
OpenAI.APIError = APIError;
OpenAI.APIConnectionError = APIConnectionError;
OpenAI.APIConnectionTimeoutError = APIConnectionTimeoutError;
OpenAI.APIUserAbortError = APIUserAbortError;
OpenAI.NotFoundError = NotFoundError;
OpenAI.ConflictError = ConflictError;
OpenAI.RateLimitError = RateLimitError;
OpenAI.BadRequestError = BadRequestError;
OpenAI.AuthenticationError = AuthenticationError;
OpenAI.InternalServerError = InternalServerError;
OpenAI.PermissionDeniedError = PermissionDeniedError;
OpenAI.UnprocessableEntityError = UnprocessableEntityError;
var {
  APIError: APIError2,
  APIConnectionError: APIConnectionError2,
  APIConnectionTimeoutError: APIConnectionTimeoutError2,
  APIUserAbortError: APIUserAbortError2,
  NotFoundError: NotFoundError2,
  ConflictError: ConflictError2,
  RateLimitError: RateLimitError2,
  BadRequestError: BadRequestError2,
  AuthenticationError: AuthenticationError2,
  InternalServerError: InternalServerError2,
  PermissionDeniedError: PermissionDeniedError2,
  UnprocessableEntityError: UnprocessableEntityError2
} = error_exports;
(function(OpenAI2) {
  OpenAI2.toFile = toFile;
  OpenAI2.fileFromPath = fileFromPath;
  OpenAI2.Page = Page;
  OpenAI2.CursorPage = CursorPage;
  OpenAI2.Completions = Completions2;
  OpenAI2.Chat = Chat;
  OpenAI2.Edits = Edits;
  OpenAI2.Embeddings = Embeddings;
  OpenAI2.Files = Files;
  OpenAI2.FileObjectsPage = FileObjectsPage;
  OpenAI2.Images = Images;
  OpenAI2.Audio = Audio;
  OpenAI2.Moderations = Moderations;
  OpenAI2.Models = Models;
  OpenAI2.ModelsPage = ModelsPage;
  OpenAI2.FineTuning = FineTuning;
  OpenAI2.FineTunes = FineTunes;
  OpenAI2.FineTunesPage = FineTunesPage;
})(OpenAI || (OpenAI = {}));
var openai_default = OpenAI;

// node_modules/marked/lib/marked.esm.js
function getDefaults() {
  return {
    async: false,
    baseUrl: null,
    breaks: false,
    extensions: null,
    gfm: true,
    headerIds: true,
    headerPrefix: "",
    highlight: null,
    hooks: null,
    langPrefix: "language-",
    mangle: true,
    pedantic: false,
    renderer: null,
    sanitize: false,
    sanitizer: null,
    silent: false,
    smartypants: false,
    tokenizer: null,
    walkTokens: null,
    xhtml: false
  };
}
var defaults = getDefaults();
function changeDefaults(newDefaults) {
  defaults = newDefaults;
}
var escapeTest = /[&<>"']/;
var escapeReplace = new RegExp(escapeTest.source, "g");
var escapeTestNoEncode = /[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/;
var escapeReplaceNoEncode = new RegExp(escapeTestNoEncode.source, "g");
var escapeReplacements = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#39;"
};
var getEscapeReplacement = (ch) => escapeReplacements[ch];
function escape(html, encode) {
  if (encode) {
    if (escapeTest.test(html)) {
      return html.replace(escapeReplace, getEscapeReplacement);
    }
  } else {
    if (escapeTestNoEncode.test(html)) {
      return html.replace(escapeReplaceNoEncode, getEscapeReplacement);
    }
  }
  return html;
}
var unescapeTest = /&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;
function unescape(html) {
  return html.replace(unescapeTest, (_, n) => {
    n = n.toLowerCase();
    if (n === "colon")
      return ":";
    if (n.charAt(0) === "#") {
      return n.charAt(1) === "x" ? String.fromCharCode(parseInt(n.substring(2), 16)) : String.fromCharCode(+n.substring(1));
    }
    return "";
  });
}
var caret = /(^|[^\[])\^/g;
function edit(regex, opt) {
  regex = typeof regex === "string" ? regex : regex.source;
  opt = opt || "";
  const obj = {
    replace: (name, val) => {
      val = val.source || val;
      val = val.replace(caret, "$1");
      regex = regex.replace(name, val);
      return obj;
    },
    getRegex: () => {
      return new RegExp(regex, opt);
    }
  };
  return obj;
}
var nonWordAndColonTest = /[^\w:]/g;
var originIndependentUrl = /^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;
function cleanUrl(sanitize, base, href) {
  if (sanitize) {
    let prot;
    try {
      prot = decodeURIComponent(unescape(href)).replace(nonWordAndColonTest, "").toLowerCase();
    } catch (e) {
      return null;
    }
    if (prot.indexOf("javascript:") === 0 || prot.indexOf("vbscript:") === 0 || prot.indexOf("data:") === 0) {
      return null;
    }
  }
  if (base && !originIndependentUrl.test(href)) {
    href = resolveUrl(base, href);
  }
  try {
    href = encodeURI(href).replace(/%25/g, "%");
  } catch (e) {
    return null;
  }
  return href;
}
var baseUrls = {};
var justDomain = /^[^:]+:\/*[^/]*$/;
var protocol = /^([^:]+:)[\s\S]*$/;
var domain = /^([^:]+:\/*[^/]*)[\s\S]*$/;
function resolveUrl(base, href) {
  if (!baseUrls[" " + base]) {
    if (justDomain.test(base)) {
      baseUrls[" " + base] = base + "/";
    } else {
      baseUrls[" " + base] = rtrim(base, "/", true);
    }
  }
  base = baseUrls[" " + base];
  const relativeBase = base.indexOf(":") === -1;
  if (href.substring(0, 2) === "//") {
    if (relativeBase) {
      return href;
    }
    return base.replace(protocol, "$1") + href;
  } else if (href.charAt(0) === "/") {
    if (relativeBase) {
      return href;
    }
    return base.replace(domain, "$1") + href;
  } else {
    return base + href;
  }
}
var noopTest = { exec: function noopTest2() {
} };
function splitCells(tableRow, count) {
  const row = tableRow.replace(/\|/g, (match, offset, str) => {
    let escaped = false, curr = offset;
    while (--curr >= 0 && str[curr] === "\\")
      escaped = !escaped;
    if (escaped) {
      return "|";
    } else {
      return " |";
    }
  }), cells = row.split(/ \|/);
  let i = 0;
  if (!cells[0].trim()) {
    cells.shift();
  }
  if (cells.length > 0 && !cells[cells.length - 1].trim()) {
    cells.pop();
  }
  if (cells.length > count) {
    cells.splice(count);
  } else {
    while (cells.length < count)
      cells.push("");
  }
  for (; i < cells.length; i++) {
    cells[i] = cells[i].trim().replace(/\\\|/g, "|");
  }
  return cells;
}
function rtrim(str, c, invert) {
  const l = str.length;
  if (l === 0) {
    return "";
  }
  let suffLen = 0;
  while (suffLen < l) {
    const currChar = str.charAt(l - suffLen - 1);
    if (currChar === c && !invert) {
      suffLen++;
    } else if (currChar !== c && invert) {
      suffLen++;
    } else {
      break;
    }
  }
  return str.slice(0, l - suffLen);
}
function findClosingBracket(str, b) {
  if (str.indexOf(b[1]) === -1) {
    return -1;
  }
  const l = str.length;
  let level = 0, i = 0;
  for (; i < l; i++) {
    if (str[i] === "\\") {
      i++;
    } else if (str[i] === b[0]) {
      level++;
    } else if (str[i] === b[1]) {
      level--;
      if (level < 0) {
        return i;
      }
    }
  }
  return -1;
}
function checkSanitizeDeprecation(opt) {
  if (opt && opt.sanitize && !opt.silent) {
    console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options");
  }
}
function repeatString(pattern, count) {
  if (count < 1) {
    return "";
  }
  let result = "";
  while (count > 1) {
    if (count & 1) {
      result += pattern;
    }
    count >>= 1;
    pattern += pattern;
  }
  return result + pattern;
}
function outputLink(cap, link, raw, lexer2) {
  const href = link.href;
  const title = link.title ? escape(link.title) : null;
  const text = cap[1].replace(/\\([\[\]])/g, "$1");
  if (cap[0].charAt(0) !== "!") {
    lexer2.state.inLink = true;
    const token = {
      type: "link",
      raw,
      href,
      title,
      text,
      tokens: lexer2.inlineTokens(text)
    };
    lexer2.state.inLink = false;
    return token;
  }
  return {
    type: "image",
    raw,
    href,
    title,
    text: escape(text)
  };
}
function indentCodeCompensation(raw, text) {
  const matchIndentToCode = raw.match(/^(\s+)(?:```)/);
  if (matchIndentToCode === null) {
    return text;
  }
  const indentToCode = matchIndentToCode[1];
  return text.split("\n").map((node) => {
    const matchIndentInNode = node.match(/^\s+/);
    if (matchIndentInNode === null) {
      return node;
    }
    const [indentInNode] = matchIndentInNode;
    if (indentInNode.length >= indentToCode.length) {
      return node.slice(indentToCode.length);
    }
    return node;
  }).join("\n");
}
var Tokenizer = class {
  constructor(options2) {
    this.options = options2 || defaults;
  }
  space(src) {
    const cap = this.rules.block.newline.exec(src);
    if (cap && cap[0].length > 0) {
      return {
        type: "space",
        raw: cap[0]
      };
    }
  }
  code(src) {
    const cap = this.rules.block.code.exec(src);
    if (cap) {
      const text = cap[0].replace(/^ {1,4}/gm, "");
      return {
        type: "code",
        raw: cap[0],
        codeBlockStyle: "indented",
        text: !this.options.pedantic ? rtrim(text, "\n") : text
      };
    }
  }
  fences(src) {
    const cap = this.rules.block.fences.exec(src);
    if (cap) {
      const raw = cap[0];
      const text = indentCodeCompensation(raw, cap[3] || "");
      return {
        type: "code",
        raw,
        lang: cap[2] ? cap[2].trim().replace(this.rules.inline._escapes, "$1") : cap[2],
        text
      };
    }
  }
  heading(src) {
    const cap = this.rules.block.heading.exec(src);
    if (cap) {
      let text = cap[2].trim();
      if (/#$/.test(text)) {
        const trimmed = rtrim(text, "#");
        if (this.options.pedantic) {
          text = trimmed.trim();
        } else if (!trimmed || / $/.test(trimmed)) {
          text = trimmed.trim();
        }
      }
      return {
        type: "heading",
        raw: cap[0],
        depth: cap[1].length,
        text,
        tokens: this.lexer.inline(text)
      };
    }
  }
  hr(src) {
    const cap = this.rules.block.hr.exec(src);
    if (cap) {
      return {
        type: "hr",
        raw: cap[0]
      };
    }
  }
  blockquote(src) {
    const cap = this.rules.block.blockquote.exec(src);
    if (cap) {
      const text = cap[0].replace(/^ *>[ \t]?/gm, "");
      const top = this.lexer.state.top;
      this.lexer.state.top = true;
      const tokens = this.lexer.blockTokens(text);
      this.lexer.state.top = top;
      return {
        type: "blockquote",
        raw: cap[0],
        tokens,
        text
      };
    }
  }
  list(src) {
    let cap = this.rules.block.list.exec(src);
    if (cap) {
      let raw, istask, ischecked, indent, i, blankLine, endsWithBlankLine, line, nextLine, rawLine, itemContents, endEarly;
      let bull = cap[1].trim();
      const isordered = bull.length > 1;
      const list = {
        type: "list",
        raw: "",
        ordered: isordered,
        start: isordered ? +bull.slice(0, -1) : "",
        loose: false,
        items: []
      };
      bull = isordered ? `\\d{1,9}\\${bull.slice(-1)}` : `\\${bull}`;
      if (this.options.pedantic) {
        bull = isordered ? bull : "[*+-]";
      }
      const itemRegex = new RegExp(`^( {0,3}${bull})((?:[	 ][^\\n]*)?(?:\\n|$))`);
      while (src) {
        endEarly = false;
        if (!(cap = itemRegex.exec(src))) {
          break;
        }
        if (this.rules.block.hr.test(src)) {
          break;
        }
        raw = cap[0];
        src = src.substring(raw.length);
        line = cap[2].split("\n", 1)[0].replace(/^\t+/, (t) => " ".repeat(3 * t.length));
        nextLine = src.split("\n", 1)[0];
        if (this.options.pedantic) {
          indent = 2;
          itemContents = line.trimLeft();
        } else {
          indent = cap[2].search(/[^ ]/);
          indent = indent > 4 ? 1 : indent;
          itemContents = line.slice(indent);
          indent += cap[1].length;
        }
        blankLine = false;
        if (!line && /^ *$/.test(nextLine)) {
          raw += nextLine + "\n";
          src = src.substring(nextLine.length + 1);
          endEarly = true;
        }
        if (!endEarly) {
          const nextBulletRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`);
          const hrRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`);
          const fencesBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}(?:\`\`\`|~~~)`);
          const headingBeginRegex = new RegExp(`^ {0,${Math.min(3, indent - 1)}}#`);
          while (src) {
            rawLine = src.split("\n", 1)[0];
            nextLine = rawLine;
            if (this.options.pedantic) {
              nextLine = nextLine.replace(/^ {1,4}(?=( {4})*[^ ])/g, "  ");
            }
            if (fencesBeginRegex.test(nextLine)) {
              break;
            }
            if (headingBeginRegex.test(nextLine)) {
              break;
            }
            if (nextBulletRegex.test(nextLine)) {
              break;
            }
            if (hrRegex.test(src)) {
              break;
            }
            if (nextLine.search(/[^ ]/) >= indent || !nextLine.trim()) {
              itemContents += "\n" + nextLine.slice(indent);
            } else {
              if (blankLine) {
                break;
              }
              if (line.search(/[^ ]/) >= 4) {
                break;
              }
              if (fencesBeginRegex.test(line)) {
                break;
              }
              if (headingBeginRegex.test(line)) {
                break;
              }
              if (hrRegex.test(line)) {
                break;
              }
              itemContents += "\n" + nextLine;
            }
            if (!blankLine && !nextLine.trim()) {
              blankLine = true;
            }
            raw += rawLine + "\n";
            src = src.substring(rawLine.length + 1);
            line = nextLine.slice(indent);
          }
        }
        if (!list.loose) {
          if (endsWithBlankLine) {
            list.loose = true;
          } else if (/\n *\n *$/.test(raw)) {
            endsWithBlankLine = true;
          }
        }
        if (this.options.gfm) {
          istask = /^\[[ xX]\] /.exec(itemContents);
          if (istask) {
            ischecked = istask[0] !== "[ ] ";
            itemContents = itemContents.replace(/^\[[ xX]\] +/, "");
          }
        }
        list.items.push({
          type: "list_item",
          raw,
          task: !!istask,
          checked: ischecked,
          loose: false,
          text: itemContents
        });
        list.raw += raw;
      }
      list.items[list.items.length - 1].raw = raw.trimRight();
      list.items[list.items.length - 1].text = itemContents.trimRight();
      list.raw = list.raw.trimRight();
      const l = list.items.length;
      for (i = 0; i < l; i++) {
        this.lexer.state.top = false;
        list.items[i].tokens = this.lexer.blockTokens(list.items[i].text, []);
        if (!list.loose) {
          const spacers = list.items[i].tokens.filter((t) => t.type === "space");
          const hasMultipleLineBreaks = spacers.length > 0 && spacers.some((t) => /\n.*\n/.test(t.raw));
          list.loose = hasMultipleLineBreaks;
        }
      }
      if (list.loose) {
        for (i = 0; i < l; i++) {
          list.items[i].loose = true;
        }
      }
      return list;
    }
  }
  html(src) {
    const cap = this.rules.block.html.exec(src);
    if (cap) {
      const token = {
        type: "html",
        raw: cap[0],
        pre: !this.options.sanitizer && (cap[1] === "pre" || cap[1] === "script" || cap[1] === "style"),
        text: cap[0]
      };
      if (this.options.sanitize) {
        const text = this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]);
        token.type = "paragraph";
        token.text = text;
        token.tokens = this.lexer.inline(text);
      }
      return token;
    }
  }
  def(src) {
    const cap = this.rules.block.def.exec(src);
    if (cap) {
      const tag = cap[1].toLowerCase().replace(/\s+/g, " ");
      const href = cap[2] ? cap[2].replace(/^<(.*)>$/, "$1").replace(this.rules.inline._escapes, "$1") : "";
      const title = cap[3] ? cap[3].substring(1, cap[3].length - 1).replace(this.rules.inline._escapes, "$1") : cap[3];
      return {
        type: "def",
        tag,
        raw: cap[0],
        href,
        title
      };
    }
  }
  table(src) {
    const cap = this.rules.block.table.exec(src);
    if (cap) {
      const item = {
        type: "table",
        header: splitCells(cap[1]).map((c) => {
          return { text: c };
        }),
        align: cap[2].replace(/^ *|\| *$/g, "").split(/ *\| */),
        rows: cap[3] && cap[3].trim() ? cap[3].replace(/\n[ \t]*$/, "").split("\n") : []
      };
      if (item.header.length === item.align.length) {
        item.raw = cap[0];
        let l = item.align.length;
        let i, j, k, row;
        for (i = 0; i < l; i++) {
          if (/^ *-+: *$/.test(item.align[i])) {
            item.align[i] = "right";
          } else if (/^ *:-+: *$/.test(item.align[i])) {
            item.align[i] = "center";
          } else if (/^ *:-+ *$/.test(item.align[i])) {
            item.align[i] = "left";
          } else {
            item.align[i] = null;
          }
        }
        l = item.rows.length;
        for (i = 0; i < l; i++) {
          item.rows[i] = splitCells(item.rows[i], item.header.length).map((c) => {
            return { text: c };
          });
        }
        l = item.header.length;
        for (j = 0; j < l; j++) {
          item.header[j].tokens = this.lexer.inline(item.header[j].text);
        }
        l = item.rows.length;
        for (j = 0; j < l; j++) {
          row = item.rows[j];
          for (k = 0; k < row.length; k++) {
            row[k].tokens = this.lexer.inline(row[k].text);
          }
        }
        return item;
      }
    }
  }
  lheading(src) {
    const cap = this.rules.block.lheading.exec(src);
    if (cap) {
      return {
        type: "heading",
        raw: cap[0],
        depth: cap[2].charAt(0) === "=" ? 1 : 2,
        text: cap[1],
        tokens: this.lexer.inline(cap[1])
      };
    }
  }
  paragraph(src) {
    const cap = this.rules.block.paragraph.exec(src);
    if (cap) {
      const text = cap[1].charAt(cap[1].length - 1) === "\n" ? cap[1].slice(0, -1) : cap[1];
      return {
        type: "paragraph",
        raw: cap[0],
        text,
        tokens: this.lexer.inline(text)
      };
    }
  }
  text(src) {
    const cap = this.rules.block.text.exec(src);
    if (cap) {
      return {
        type: "text",
        raw: cap[0],
        text: cap[0],
        tokens: this.lexer.inline(cap[0])
      };
    }
  }
  escape(src) {
    const cap = this.rules.inline.escape.exec(src);
    if (cap) {
      return {
        type: "escape",
        raw: cap[0],
        text: escape(cap[1])
      };
    }
  }
  tag(src) {
    const cap = this.rules.inline.tag.exec(src);
    if (cap) {
      if (!this.lexer.state.inLink && /^<a /i.test(cap[0])) {
        this.lexer.state.inLink = true;
      } else if (this.lexer.state.inLink && /^<\/a>/i.test(cap[0])) {
        this.lexer.state.inLink = false;
      }
      if (!this.lexer.state.inRawBlock && /^<(pre|code|kbd|script)(\s|>)/i.test(cap[0])) {
        this.lexer.state.inRawBlock = true;
      } else if (this.lexer.state.inRawBlock && /^<\/(pre|code|kbd|script)(\s|>)/i.test(cap[0])) {
        this.lexer.state.inRawBlock = false;
      }
      return {
        type: this.options.sanitize ? "text" : "html",
        raw: cap[0],
        inLink: this.lexer.state.inLink,
        inRawBlock: this.lexer.state.inRawBlock,
        text: this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0]
      };
    }
  }
  link(src) {
    const cap = this.rules.inline.link.exec(src);
    if (cap) {
      const trimmedUrl = cap[2].trim();
      if (!this.options.pedantic && /^</.test(trimmedUrl)) {
        if (!/>$/.test(trimmedUrl)) {
          return;
        }
        const rtrimSlash = rtrim(trimmedUrl.slice(0, -1), "\\");
        if ((trimmedUrl.length - rtrimSlash.length) % 2 === 0) {
          return;
        }
      } else {
        const lastParenIndex = findClosingBracket(cap[2], "()");
        if (lastParenIndex > -1) {
          const start = cap[0].indexOf("!") === 0 ? 5 : 4;
          const linkLen = start + cap[1].length + lastParenIndex;
          cap[2] = cap[2].substring(0, lastParenIndex);
          cap[0] = cap[0].substring(0, linkLen).trim();
          cap[3] = "";
        }
      }
      let href = cap[2];
      let title = "";
      if (this.options.pedantic) {
        const link = /^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(href);
        if (link) {
          href = link[1];
          title = link[3];
        }
      } else {
        title = cap[3] ? cap[3].slice(1, -1) : "";
      }
      href = href.trim();
      if (/^</.test(href)) {
        if (this.options.pedantic && !/>$/.test(trimmedUrl)) {
          href = href.slice(1);
        } else {
          href = href.slice(1, -1);
        }
      }
      return outputLink(cap, {
        href: href ? href.replace(this.rules.inline._escapes, "$1") : href,
        title: title ? title.replace(this.rules.inline._escapes, "$1") : title
      }, cap[0], this.lexer);
    }
  }
  reflink(src, links) {
    let cap;
    if ((cap = this.rules.inline.reflink.exec(src)) || (cap = this.rules.inline.nolink.exec(src))) {
      let link = (cap[2] || cap[1]).replace(/\s+/g, " ");
      link = links[link.toLowerCase()];
      if (!link) {
        const text = cap[0].charAt(0);
        return {
          type: "text",
          raw: text,
          text
        };
      }
      return outputLink(cap, link, cap[0], this.lexer);
    }
  }
  emStrong(src, maskedSrc, prevChar = "") {
    let match = this.rules.inline.emStrong.lDelim.exec(src);
    if (!match)
      return;
    if (match[3] && prevChar.match(/[\p{L}\p{N}]/u))
      return;
    const nextChar = match[1] || match[2] || "";
    if (!nextChar || nextChar && (prevChar === "" || this.rules.inline.punctuation.exec(prevChar))) {
      const lLength = match[0].length - 1;
      let rDelim, rLength, delimTotal = lLength, midDelimTotal = 0;
      const endReg = match[0][0] === "*" ? this.rules.inline.emStrong.rDelimAst : this.rules.inline.emStrong.rDelimUnd;
      endReg.lastIndex = 0;
      maskedSrc = maskedSrc.slice(-1 * src.length + lLength);
      while ((match = endReg.exec(maskedSrc)) != null) {
        rDelim = match[1] || match[2] || match[3] || match[4] || match[5] || match[6];
        if (!rDelim)
          continue;
        rLength = rDelim.length;
        if (match[3] || match[4]) {
          delimTotal += rLength;
          continue;
        } else if (match[5] || match[6]) {
          if (lLength % 3 && !((lLength + rLength) % 3)) {
            midDelimTotal += rLength;
            continue;
          }
        }
        delimTotal -= rLength;
        if (delimTotal > 0)
          continue;
        rLength = Math.min(rLength, rLength + delimTotal + midDelimTotal);
        const raw = src.slice(0, lLength + match.index + (match[0].length - rDelim.length) + rLength);
        if (Math.min(lLength, rLength) % 2) {
          const text2 = raw.slice(1, -1);
          return {
            type: "em",
            raw,
            text: text2,
            tokens: this.lexer.inlineTokens(text2)
          };
        }
        const text = raw.slice(2, -2);
        return {
          type: "strong",
          raw,
          text,
          tokens: this.lexer.inlineTokens(text)
        };
      }
    }
  }
  codespan(src) {
    const cap = this.rules.inline.code.exec(src);
    if (cap) {
      let text = cap[2].replace(/\n/g, " ");
      const hasNonSpaceChars = /[^ ]/.test(text);
      const hasSpaceCharsOnBothEnds = /^ /.test(text) && / $/.test(text);
      if (hasNonSpaceChars && hasSpaceCharsOnBothEnds) {
        text = text.substring(1, text.length - 1);
      }
      text = escape(text, true);
      return {
        type: "codespan",
        raw: cap[0],
        text
      };
    }
  }
  br(src) {
    const cap = this.rules.inline.br.exec(src);
    if (cap) {
      return {
        type: "br",
        raw: cap[0]
      };
    }
  }
  del(src) {
    const cap = this.rules.inline.del.exec(src);
    if (cap) {
      return {
        type: "del",
        raw: cap[0],
        text: cap[2],
        tokens: this.lexer.inlineTokens(cap[2])
      };
    }
  }
  autolink(src, mangle2) {
    const cap = this.rules.inline.autolink.exec(src);
    if (cap) {
      let text, href;
      if (cap[2] === "@") {
        text = escape(this.options.mangle ? mangle2(cap[1]) : cap[1]);
        href = "mailto:" + text;
      } else {
        text = escape(cap[1]);
        href = text;
      }
      return {
        type: "link",
        raw: cap[0],
        text,
        href,
        tokens: [
          {
            type: "text",
            raw: text,
            text
          }
        ]
      };
    }
  }
  url(src, mangle2) {
    let cap;
    if (cap = this.rules.inline.url.exec(src)) {
      let text, href;
      if (cap[2] === "@") {
        text = escape(this.options.mangle ? mangle2(cap[0]) : cap[0]);
        href = "mailto:" + text;
      } else {
        let prevCapZero;
        do {
          prevCapZero = cap[0];
          cap[0] = this.rules.inline._backpedal.exec(cap[0])[0];
        } while (prevCapZero !== cap[0]);
        text = escape(cap[0]);
        if (cap[1] === "www.") {
          href = "http://" + cap[0];
        } else {
          href = cap[0];
        }
      }
      return {
        type: "link",
        raw: cap[0],
        text,
        href,
        tokens: [
          {
            type: "text",
            raw: text,
            text
          }
        ]
      };
    }
  }
  inlineText(src, smartypants2) {
    const cap = this.rules.inline.text.exec(src);
    if (cap) {
      let text;
      if (this.lexer.state.inRawBlock) {
        text = this.options.sanitize ? this.options.sanitizer ? this.options.sanitizer(cap[0]) : escape(cap[0]) : cap[0];
      } else {
        text = escape(this.options.smartypants ? smartypants2(cap[0]) : cap[0]);
      }
      return {
        type: "text",
        raw: cap[0],
        text
      };
    }
  }
};
var block = {
  newline: /^(?: *(?:\n|$))+/,
  code: /^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,
  fences: /^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,
  hr: /^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,
  heading: /^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,
  blockquote: /^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,
  list: /^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,
  html: "^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",
  def: /^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,
  table: noopTest,
  lheading: /^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,
  // regex template, placeholders will be replaced according to different paragraph
  // interruption rules of commonmark and the original markdown spec:
  _paragraph: /^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,
  text: /^[^\n]+/
};
block._label = /(?!\s*\])(?:\\.|[^\[\]\\])+/;
block._title = /(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;
block.def = edit(block.def).replace("label", block._label).replace("title", block._title).getRegex();
block.bullet = /(?:[*+-]|\d{1,9}[.)])/;
block.listItemStart = edit(/^( *)(bull) */).replace("bull", block.bullet).getRegex();
block.list = edit(block.list).replace(/bull/g, block.bullet).replace("hr", "\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def", "\\n+(?=" + block.def.source + ")").getRegex();
block._tag = "address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";
block._comment = /<!--(?!-?>)[\s\S]*?(?:-->|$)/;
block.html = edit(block.html, "i").replace("comment", block._comment).replace("tag", block._tag).replace("attribute", / +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();
block.paragraph = edit(block._paragraph).replace("hr", block.hr).replace("heading", " {0,3}#{1,6} ").replace("|lheading", "").replace("|table", "").replace("blockquote", " {0,3}>").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", block._tag).getRegex();
block.blockquote = edit(block.blockquote).replace("paragraph", block.paragraph).getRegex();
block.normal = { ...block };
block.gfm = {
  ...block.normal,
  table: "^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"
  // Cells
};
block.gfm.table = edit(block.gfm.table).replace("hr", block.hr).replace("heading", " {0,3}#{1,6} ").replace("blockquote", " {0,3}>").replace("code", " {4}[^\\n]").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", block._tag).getRegex();
block.gfm.paragraph = edit(block._paragraph).replace("hr", block.hr).replace("heading", " {0,3}#{1,6} ").replace("|lheading", "").replace("table", block.gfm.table).replace("blockquote", " {0,3}>").replace("fences", " {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list", " {0,3}(?:[*+-]|1[.)]) ").replace("html", "</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag", block._tag).getRegex();
block.pedantic = {
  ...block.normal,
  html: edit(
    `^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`
  ).replace("comment", block._comment).replace(/tag/g, "(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),
  def: /^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,
  heading: /^(#{1,6})(.*)(?:\n+|$)/,
  fences: noopTest,
  // fences not supported
  lheading: /^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,
  paragraph: edit(block.normal._paragraph).replace("hr", block.hr).replace("heading", " *#{1,6} *[^\n]").replace("lheading", block.lheading).replace("blockquote", " {0,3}>").replace("|fences", "").replace("|list", "").replace("|html", "").getRegex()
};
var inline = {
  escape: /^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,
  autolink: /^<(scheme:[^\s\x00-\x1f<>]*|email)>/,
  url: noopTest,
  tag: "^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",
  // CDATA section
  link: /^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,
  reflink: /^!?\[(label)\]\[(ref)\]/,
  nolink: /^!?\[(ref)\](?:\[\])?/,
  reflinkSearch: "reflink|nolink(?!\\()",
  emStrong: {
    lDelim: /^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,
    //        (1) and (2) can only be a Right Delimiter. (3) and (4) can only be Left.  (5) and (6) can be either Left or Right.
    //          () Skip orphan inside strong                                      () Consume to delim     (1) #***                (2) a***#, a***                             (3) #***a, ***a                 (4) ***#              (5) #***#                 (6) a***a
    rDelimAst: /^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,
    rDelimUnd: /^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/
    // ^- Not allowed for _
  },
  code: /^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,
  br: /^( {2,}|\\)\n(?!\s*$)/,
  del: noopTest,
  text: /^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,
  punctuation: /^([\spunctuation])/
};
inline._punctuation = "!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";
inline.punctuation = edit(inline.punctuation).replace(/punctuation/g, inline._punctuation).getRegex();
inline.blockSkip = /\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;
inline.escapedEmSt = /(?:^|[^\\])(?:\\\\)*\\[*_]/g;
inline._comment = edit(block._comment).replace("(?:-->|$)", "-->").getRegex();
inline.emStrong.lDelim = edit(inline.emStrong.lDelim).replace(/punct/g, inline._punctuation).getRegex();
inline.emStrong.rDelimAst = edit(inline.emStrong.rDelimAst, "g").replace(/punct/g, inline._punctuation).getRegex();
inline.emStrong.rDelimUnd = edit(inline.emStrong.rDelimUnd, "g").replace(/punct/g, inline._punctuation).getRegex();
inline._escapes = /\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;
inline._scheme = /[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;
inline._email = /[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;
inline.autolink = edit(inline.autolink).replace("scheme", inline._scheme).replace("email", inline._email).getRegex();
inline._attribute = /\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;
inline.tag = edit(inline.tag).replace("comment", inline._comment).replace("attribute", inline._attribute).getRegex();
inline._label = /(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;
inline._href = /<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;
inline._title = /"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;
inline.link = edit(inline.link).replace("label", inline._label).replace("href", inline._href).replace("title", inline._title).getRegex();
inline.reflink = edit(inline.reflink).replace("label", inline._label).replace("ref", block._label).getRegex();
inline.nolink = edit(inline.nolink).replace("ref", block._label).getRegex();
inline.reflinkSearch = edit(inline.reflinkSearch, "g").replace("reflink", inline.reflink).replace("nolink", inline.nolink).getRegex();
inline.normal = { ...inline };
inline.pedantic = {
  ...inline.normal,
  strong: {
    start: /^__|\*\*/,
    middle: /^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,
    endAst: /\*\*(?!\*)/g,
    endUnd: /__(?!_)/g
  },
  em: {
    start: /^_|\*/,
    middle: /^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,
    endAst: /\*(?!\*)/g,
    endUnd: /_(?!_)/g
  },
  link: edit(/^!?\[(label)\]\((.*?)\)/).replace("label", inline._label).getRegex(),
  reflink: edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label", inline._label).getRegex()
};
inline.gfm = {
  ...inline.normal,
  escape: edit(inline.escape).replace("])", "~|])").getRegex(),
  _extended_email: /[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,
  url: /^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,
  _backpedal: /(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,
  del: /^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,
  text: /^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/
};
inline.gfm.url = edit(inline.gfm.url, "i").replace("email", inline.gfm._extended_email).getRegex();
inline.breaks = {
  ...inline.gfm,
  br: edit(inline.br).replace("{2,}", "*").getRegex(),
  text: edit(inline.gfm.text).replace("\\b_", "\\b_| {2,}\\n").replace(/\{2,\}/g, "*").getRegex()
};
function smartypants(text) {
  return text.replace(/---/g, "\u2014").replace(/--/g, "\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g, "$1\u2018").replace(/'/g, "\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g, "$1\u201C").replace(/"/g, "\u201D").replace(/\.{3}/g, "\u2026");
}
function mangle(text) {
  let out = "", i, ch;
  const l = text.length;
  for (i = 0; i < l; i++) {
    ch = text.charCodeAt(i);
    if (Math.random() > 0.5) {
      ch = "x" + ch.toString(16);
    }
    out += "&#" + ch + ";";
  }
  return out;
}
var Lexer = class {
  constructor(options2) {
    this.tokens = [];
    this.tokens.links = /* @__PURE__ */ Object.create(null);
    this.options = options2 || defaults;
    this.options.tokenizer = this.options.tokenizer || new Tokenizer();
    this.tokenizer = this.options.tokenizer;
    this.tokenizer.options = this.options;
    this.tokenizer.lexer = this;
    this.inlineQueue = [];
    this.state = {
      inLink: false,
      inRawBlock: false,
      top: true
    };
    const rules = {
      block: block.normal,
      inline: inline.normal
    };
    if (this.options.pedantic) {
      rules.block = block.pedantic;
      rules.inline = inline.pedantic;
    } else if (this.options.gfm) {
      rules.block = block.gfm;
      if (this.options.breaks) {
        rules.inline = inline.breaks;
      } else {
        rules.inline = inline.gfm;
      }
    }
    this.tokenizer.rules = rules;
  }
  /**
   * Expose Rules
   */
  static get rules() {
    return {
      block,
      inline
    };
  }
  /**
   * Static Lex Method
   */
  static lex(src, options2) {
    const lexer2 = new Lexer(options2);
    return lexer2.lex(src);
  }
  /**
   * Static Lex Inline Method
   */
  static lexInline(src, options2) {
    const lexer2 = new Lexer(options2);
    return lexer2.inlineTokens(src);
  }
  /**
   * Preprocessing
   */
  lex(src) {
    src = src.replace(/\r\n|\r/g, "\n");
    this.blockTokens(src, this.tokens);
    let next;
    while (next = this.inlineQueue.shift()) {
      this.inlineTokens(next.src, next.tokens);
    }
    return this.tokens;
  }
  /**
   * Lexing
   */
  blockTokens(src, tokens = []) {
    if (this.options.pedantic) {
      src = src.replace(/\t/g, "    ").replace(/^ +$/gm, "");
    } else {
      src = src.replace(/^( *)(\t+)/gm, (_, leading, tabs) => {
        return leading + "    ".repeat(tabs.length);
      });
    }
    let token, lastToken, cutSrc, lastParagraphClipped;
    while (src) {
      if (this.options.extensions && this.options.extensions.block && this.options.extensions.block.some((extTokenizer) => {
        if (token = extTokenizer.call({ lexer: this }, src, tokens)) {
          src = src.substring(token.raw.length);
          tokens.push(token);
          return true;
        }
        return false;
      })) {
        continue;
      }
      if (token = this.tokenizer.space(src)) {
        src = src.substring(token.raw.length);
        if (token.raw.length === 1 && tokens.length > 0) {
          tokens[tokens.length - 1].raw += "\n";
        } else {
          tokens.push(token);
        }
        continue;
      }
      if (token = this.tokenizer.code(src)) {
        src = src.substring(token.raw.length);
        lastToken = tokens[tokens.length - 1];
        if (lastToken && (lastToken.type === "paragraph" || lastToken.type === "text")) {
          lastToken.raw += "\n" + token.raw;
          lastToken.text += "\n" + token.text;
          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;
        } else {
          tokens.push(token);
        }
        continue;
      }
      if (token = this.tokenizer.fences(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.heading(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.hr(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.blockquote(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.list(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.html(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.def(src)) {
        src = src.substring(token.raw.length);
        lastToken = tokens[tokens.length - 1];
        if (lastToken && (lastToken.type === "paragraph" || lastToken.type === "text")) {
          lastToken.raw += "\n" + token.raw;
          lastToken.text += "\n" + token.raw;
          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;
        } else if (!this.tokens.links[token.tag]) {
          this.tokens.links[token.tag] = {
            href: token.href,
            title: token.title
          };
        }
        continue;
      }
      if (token = this.tokenizer.table(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.lheading(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      cutSrc = src;
      if (this.options.extensions && this.options.extensions.startBlock) {
        let startIndex = Infinity;
        const tempSrc = src.slice(1);
        let tempStart;
        this.options.extensions.startBlock.forEach(function(getStartIndex) {
          tempStart = getStartIndex.call({ lexer: this }, tempSrc);
          if (typeof tempStart === "number" && tempStart >= 0) {
            startIndex = Math.min(startIndex, tempStart);
          }
        });
        if (startIndex < Infinity && startIndex >= 0) {
          cutSrc = src.substring(0, startIndex + 1);
        }
      }
      if (this.state.top && (token = this.tokenizer.paragraph(cutSrc))) {
        lastToken = tokens[tokens.length - 1];
        if (lastParagraphClipped && lastToken.type === "paragraph") {
          lastToken.raw += "\n" + token.raw;
          lastToken.text += "\n" + token.text;
          this.inlineQueue.pop();
          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;
        } else {
          tokens.push(token);
        }
        lastParagraphClipped = cutSrc.length !== src.length;
        src = src.substring(token.raw.length);
        continue;
      }
      if (token = this.tokenizer.text(src)) {
        src = src.substring(token.raw.length);
        lastToken = tokens[tokens.length - 1];
        if (lastToken && lastToken.type === "text") {
          lastToken.raw += "\n" + token.raw;
          lastToken.text += "\n" + token.text;
          this.inlineQueue.pop();
          this.inlineQueue[this.inlineQueue.length - 1].src = lastToken.text;
        } else {
          tokens.push(token);
        }
        continue;
      }
      if (src) {
        const errMsg = "Infinite loop on byte: " + src.charCodeAt(0);
        if (this.options.silent) {
          console.error(errMsg);
          break;
        } else {
          throw new Error(errMsg);
        }
      }
    }
    this.state.top = true;
    return tokens;
  }
  inline(src, tokens = []) {
    this.inlineQueue.push({ src, tokens });
    return tokens;
  }
  /**
   * Lexing/Compiling
   */
  inlineTokens(src, tokens = []) {
    let token, lastToken, cutSrc;
    let maskedSrc = src;
    let match;
    let keepPrevChar, prevChar;
    if (this.tokens.links) {
      const links = Object.keys(this.tokens.links);
      if (links.length > 0) {
        while ((match = this.tokenizer.rules.inline.reflinkSearch.exec(maskedSrc)) != null) {
          if (links.includes(match[0].slice(match[0].lastIndexOf("[") + 1, -1))) {
            maskedSrc = maskedSrc.slice(0, match.index) + "[" + repeatString("a", match[0].length - 2) + "]" + maskedSrc.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex);
          }
        }
      }
    }
    while ((match = this.tokenizer.rules.inline.blockSkip.exec(maskedSrc)) != null) {
      maskedSrc = maskedSrc.slice(0, match.index) + "[" + repeatString("a", match[0].length - 2) + "]" + maskedSrc.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);
    }
    while ((match = this.tokenizer.rules.inline.escapedEmSt.exec(maskedSrc)) != null) {
      maskedSrc = maskedSrc.slice(0, match.index + match[0].length - 2) + "++" + maskedSrc.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);
      this.tokenizer.rules.inline.escapedEmSt.lastIndex--;
    }
    while (src) {
      if (!keepPrevChar) {
        prevChar = "";
      }
      keepPrevChar = false;
      if (this.options.extensions && this.options.extensions.inline && this.options.extensions.inline.some((extTokenizer) => {
        if (token = extTokenizer.call({ lexer: this }, src, tokens)) {
          src = src.substring(token.raw.length);
          tokens.push(token);
          return true;
        }
        return false;
      })) {
        continue;
      }
      if (token = this.tokenizer.escape(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.tag(src)) {
        src = src.substring(token.raw.length);
        lastToken = tokens[tokens.length - 1];
        if (lastToken && token.type === "text" && lastToken.type === "text") {
          lastToken.raw += token.raw;
          lastToken.text += token.text;
        } else {
          tokens.push(token);
        }
        continue;
      }
      if (token = this.tokenizer.link(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.reflink(src, this.tokens.links)) {
        src = src.substring(token.raw.length);
        lastToken = tokens[tokens.length - 1];
        if (lastToken && token.type === "text" && lastToken.type === "text") {
          lastToken.raw += token.raw;
          lastToken.text += token.text;
        } else {
          tokens.push(token);
        }
        continue;
      }
      if (token = this.tokenizer.emStrong(src, maskedSrc, prevChar)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.codespan(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.br(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.del(src)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (token = this.tokenizer.autolink(src, mangle)) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      if (!this.state.inLink && (token = this.tokenizer.url(src, mangle))) {
        src = src.substring(token.raw.length);
        tokens.push(token);
        continue;
      }
      cutSrc = src;
      if (this.options.extensions && this.options.extensions.startInline) {
        let startIndex = Infinity;
        const tempSrc = src.slice(1);
        let tempStart;
        this.options.extensions.startInline.forEach(function(getStartIndex) {
          tempStart = getStartIndex.call({ lexer: this }, tempSrc);
          if (typeof tempStart === "number" && tempStart >= 0) {
            startIndex = Math.min(startIndex, tempStart);
          }
        });
        if (startIndex < Infinity && startIndex >= 0) {
          cutSrc = src.substring(0, startIndex + 1);
        }
      }
      if (token = this.tokenizer.inlineText(cutSrc, smartypants)) {
        src = src.substring(token.raw.length);
        if (token.raw.slice(-1) !== "_") {
          prevChar = token.raw.slice(-1);
        }
        keepPrevChar = true;
        lastToken = tokens[tokens.length - 1];
        if (lastToken && lastToken.type === "text") {
          lastToken.raw += token.raw;
          lastToken.text += token.text;
        } else {
          tokens.push(token);
        }
        continue;
      }
      if (src) {
        const errMsg = "Infinite loop on byte: " + src.charCodeAt(0);
        if (this.options.silent) {
          console.error(errMsg);
          break;
        } else {
          throw new Error(errMsg);
        }
      }
    }
    return tokens;
  }
};
var Renderer = class {
  constructor(options2) {
    this.options = options2 || defaults;
  }
  code(code, infostring, escaped) {
    const lang = (infostring || "").match(/\S*/)[0];
    if (this.options.highlight) {
      const out = this.options.highlight(code, lang);
      if (out != null && out !== code) {
        escaped = true;
        code = out;
      }
    }
    code = code.replace(/\n$/, "") + "\n";
    if (!lang) {
      return "<pre><code>" + (escaped ? code : escape(code, true)) + "</code></pre>\n";
    }
    return '<pre><code class="' + this.options.langPrefix + escape(lang) + '">' + (escaped ? code : escape(code, true)) + "</code></pre>\n";
  }
  /**
   * @param {string} quote
   */
  blockquote(quote) {
    return `<blockquote>
${quote}</blockquote>
`;
  }
  html(html) {
    return html;
  }
  /**
   * @param {string} text
   * @param {string} level
   * @param {string} raw
   * @param {any} slugger
   */
  heading(text, level, raw, slugger) {
    if (this.options.headerIds) {
      const id = this.options.headerPrefix + slugger.slug(raw);
      return `<h${level} id="${id}">${text}</h${level}>
`;
    }
    return `<h${level}>${text}</h${level}>
`;
  }
  hr() {
    return this.options.xhtml ? "<hr/>\n" : "<hr>\n";
  }
  list(body, ordered, start) {
    const type = ordered ? "ol" : "ul", startatt = ordered && start !== 1 ? ' start="' + start + '"' : "";
    return "<" + type + startatt + ">\n" + body + "</" + type + ">\n";
  }
  /**
   * @param {string} text
   */
  listitem(text) {
    return `<li>${text}</li>
`;
  }
  checkbox(checked) {
    return "<input " + (checked ? 'checked="" ' : "") + 'disabled="" type="checkbox"' + (this.options.xhtml ? " /" : "") + "> ";
  }
  /**
   * @param {string} text
   */
  paragraph(text) {
    return `<p>${text}</p>
`;
  }
  /**
   * @param {string} header
   * @param {string} body
   */
  table(header, body) {
    if (body)
      body = `<tbody>${body}</tbody>`;
    return "<table>\n<thead>\n" + header + "</thead>\n" + body + "</table>\n";
  }
  /**
   * @param {string} content
   */
  tablerow(content) {
    return `<tr>
${content}</tr>
`;
  }
  tablecell(content, flags) {
    const type = flags.header ? "th" : "td";
    const tag = flags.align ? `<${type} align="${flags.align}">` : `<${type}>`;
    return tag + content + `</${type}>
`;
  }
  /**
   * span level renderer
   * @param {string} text
   */
  strong(text) {
    return `<strong>${text}</strong>`;
  }
  /**
   * @param {string} text
   */
  em(text) {
    return `<em>${text}</em>`;
  }
  /**
   * @param {string} text
   */
  codespan(text) {
    return `<code>${text}</code>`;
  }
  br() {
    return this.options.xhtml ? "<br/>" : "<br>";
  }
  /**
   * @param {string} text
   */
  del(text) {
    return `<del>${text}</del>`;
  }
  /**
   * @param {string} href
   * @param {string} title
   * @param {string} text
   */
  link(href, title, text) {
    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);
    if (href === null) {
      return text;
    }
    let out = '<a href="' + href + '"';
    if (title) {
      out += ' title="' + title + '"';
    }
    out += ">" + text + "</a>";
    return out;
  }
  /**
   * @param {string} href
   * @param {string} title
   * @param {string} text
   */
  image(href, title, text) {
    href = cleanUrl(this.options.sanitize, this.options.baseUrl, href);
    if (href === null) {
      return text;
    }
    let out = `<img src="${href}" alt="${text}"`;
    if (title) {
      out += ` title="${title}"`;
    }
    out += this.options.xhtml ? "/>" : ">";
    return out;
  }
  text(text) {
    return text;
  }
};
var TextRenderer = class {
  // no need for block level renderers
  strong(text) {
    return text;
  }
  em(text) {
    return text;
  }
  codespan(text) {
    return text;
  }
  del(text) {
    return text;
  }
  html(text) {
    return text;
  }
  text(text) {
    return text;
  }
  link(href, title, text) {
    return "" + text;
  }
  image(href, title, text) {
    return "" + text;
  }
  br() {
    return "";
  }
};
var Slugger = class {
  constructor() {
    this.seen = {};
  }
  /**
   * @param {string} value
   */
  serialize(value) {
    return value.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig, "").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g, "").replace(/\s/g, "-");
  }
  /**
   * Finds the next safe (unique) slug to use
   * @param {string} originalSlug
   * @param {boolean} isDryRun
   */
  getNextSafeSlug(originalSlug, isDryRun) {
    let slug = originalSlug;
    let occurenceAccumulator = 0;
    if (this.seen.hasOwnProperty(slug)) {
      occurenceAccumulator = this.seen[originalSlug];
      do {
        occurenceAccumulator++;
        slug = originalSlug + "-" + occurenceAccumulator;
      } while (this.seen.hasOwnProperty(slug));
    }
    if (!isDryRun) {
      this.seen[originalSlug] = occurenceAccumulator;
      this.seen[slug] = 0;
    }
    return slug;
  }
  /**
   * Convert string to unique id
   * @param {object} [options]
   * @param {boolean} [options.dryrun] Generates the next unique slug without
   * updating the internal accumulator.
   */
  slug(value, options2 = {}) {
    const slug = this.serialize(value);
    return this.getNextSafeSlug(slug, options2.dryrun);
  }
};
var Parser = class {
  constructor(options2) {
    this.options = options2 || defaults;
    this.options.renderer = this.options.renderer || new Renderer();
    this.renderer = this.options.renderer;
    this.renderer.options = this.options;
    this.textRenderer = new TextRenderer();
    this.slugger = new Slugger();
  }
  /**
   * Static Parse Method
   */
  static parse(tokens, options2) {
    const parser2 = new Parser(options2);
    return parser2.parse(tokens);
  }
  /**
   * Static Parse Inline Method
   */
  static parseInline(tokens, options2) {
    const parser2 = new Parser(options2);
    return parser2.parseInline(tokens);
  }
  /**
   * Parse Loop
   */
  parse(tokens, top = true) {
    let out = "", i, j, k, l2, l3, row, cell, header, body, token, ordered, start, loose, itemBody, item, checked, task, checkbox, ret;
    const l = tokens.length;
    for (i = 0; i < l; i++) {
      token = tokens[i];
      if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {
        ret = this.options.extensions.renderers[token.type].call({ parser: this }, token);
        if (ret !== false || !["space", "hr", "heading", "code", "table", "blockquote", "list", "html", "paragraph", "text"].includes(token.type)) {
          out += ret || "";
          continue;
        }
      }
      switch (token.type) {
        case "space": {
          continue;
        }
        case "hr": {
          out += this.renderer.hr();
          continue;
        }
        case "heading": {
          out += this.renderer.heading(
            this.parseInline(token.tokens),
            token.depth,
            unescape(this.parseInline(token.tokens, this.textRenderer)),
            this.slugger
          );
          continue;
        }
        case "code": {
          out += this.renderer.code(
            token.text,
            token.lang,
            token.escaped
          );
          continue;
        }
        case "table": {
          header = "";
          cell = "";
          l2 = token.header.length;
          for (j = 0; j < l2; j++) {
            cell += this.renderer.tablecell(
              this.parseInline(token.header[j].tokens),
              { header: true, align: token.align[j] }
            );
          }
          header += this.renderer.tablerow(cell);
          body = "";
          l2 = token.rows.length;
          for (j = 0; j < l2; j++) {
            row = token.rows[j];
            cell = "";
            l3 = row.length;
            for (k = 0; k < l3; k++) {
              cell += this.renderer.tablecell(
                this.parseInline(row[k].tokens),
                { header: false, align: token.align[k] }
              );
            }
            body += this.renderer.tablerow(cell);
          }
          out += this.renderer.table(header, body);
          continue;
        }
        case "blockquote": {
          body = this.parse(token.tokens);
          out += this.renderer.blockquote(body);
          continue;
        }
        case "list": {
          ordered = token.ordered;
          start = token.start;
          loose = token.loose;
          l2 = token.items.length;
          body = "";
          for (j = 0; j < l2; j++) {
            item = token.items[j];
            checked = item.checked;
            task = item.task;
            itemBody = "";
            if (item.task) {
              checkbox = this.renderer.checkbox(checked);
              if (loose) {
                if (item.tokens.length > 0 && item.tokens[0].type === "paragraph") {
                  item.tokens[0].text = checkbox + " " + item.tokens[0].text;
                  if (item.tokens[0].tokens && item.tokens[0].tokens.length > 0 && item.tokens[0].tokens[0].type === "text") {
                    item.tokens[0].tokens[0].text = checkbox + " " + item.tokens[0].tokens[0].text;
                  }
                } else {
                  item.tokens.unshift({
                    type: "text",
                    text: checkbox
                  });
                }
              } else {
                itemBody += checkbox;
              }
            }
            itemBody += this.parse(item.tokens, loose);
            body += this.renderer.listitem(itemBody, task, checked);
          }
          out += this.renderer.list(body, ordered, start);
          continue;
        }
        case "html": {
          out += this.renderer.html(token.text);
          continue;
        }
        case "paragraph": {
          out += this.renderer.paragraph(this.parseInline(token.tokens));
          continue;
        }
        case "text": {
          body = token.tokens ? this.parseInline(token.tokens) : token.text;
          while (i + 1 < l && tokens[i + 1].type === "text") {
            token = tokens[++i];
            body += "\n" + (token.tokens ? this.parseInline(token.tokens) : token.text);
          }
          out += top ? this.renderer.paragraph(body) : body;
          continue;
        }
        default: {
          const errMsg = 'Token with "' + token.type + '" type was not found.';
          if (this.options.silent) {
            console.error(errMsg);
            return;
          } else {
            throw new Error(errMsg);
          }
        }
      }
    }
    return out;
  }
  /**
   * Parse Inline Tokens
   */
  parseInline(tokens, renderer) {
    renderer = renderer || this.renderer;
    let out = "", i, token, ret;
    const l = tokens.length;
    for (i = 0; i < l; i++) {
      token = tokens[i];
      if (this.options.extensions && this.options.extensions.renderers && this.options.extensions.renderers[token.type]) {
        ret = this.options.extensions.renderers[token.type].call({ parser: this }, token);
        if (ret !== false || !["escape", "html", "link", "image", "strong", "em", "codespan", "br", "del", "text"].includes(token.type)) {
          out += ret || "";
          continue;
        }
      }
      switch (token.type) {
        case "escape": {
          out += renderer.text(token.text);
          break;
        }
        case "html": {
          out += renderer.html(token.text);
          break;
        }
        case "link": {
          out += renderer.link(token.href, token.title, this.parseInline(token.tokens, renderer));
          break;
        }
        case "image": {
          out += renderer.image(token.href, token.title, token.text);
          break;
        }
        case "strong": {
          out += renderer.strong(this.parseInline(token.tokens, renderer));
          break;
        }
        case "em": {
          out += renderer.em(this.parseInline(token.tokens, renderer));
          break;
        }
        case "codespan": {
          out += renderer.codespan(token.text);
          break;
        }
        case "br": {
          out += renderer.br();
          break;
        }
        case "del": {
          out += renderer.del(this.parseInline(token.tokens, renderer));
          break;
        }
        case "text": {
          out += renderer.text(token.text);
          break;
        }
        default: {
          const errMsg = 'Token with "' + token.type + '" type was not found.';
          if (this.options.silent) {
            console.error(errMsg);
            return;
          } else {
            throw new Error(errMsg);
          }
        }
      }
    }
    return out;
  }
};
var Hooks = class {
  constructor(options2) {
    this.options = options2 || defaults;
  }
  /**
   * Process markdown before marked
   */
  preprocess(markdown) {
    return markdown;
  }
  /**
   * Process HTML after marked is finished
   */
  postprocess(html) {
    return html;
  }
};
__publicField(Hooks, "passThroughHooks", /* @__PURE__ */ new Set([
  "preprocess",
  "postprocess"
]));
function onError(silent, async, callback) {
  return (e) => {
    e.message += "\nPlease report this to https://github.com/markedjs/marked.";
    if (silent) {
      const msg = "<p>An error occurred:</p><pre>" + escape(e.message + "", true) + "</pre>";
      if (async) {
        return Promise.resolve(msg);
      }
      if (callback) {
        callback(null, msg);
        return;
      }
      return msg;
    }
    if (async) {
      return Promise.reject(e);
    }
    if (callback) {
      callback(e);
      return;
    }
    throw e;
  };
}
function parseMarkdown(lexer2, parser2) {
  return (src, opt, callback) => {
    if (typeof opt === "function") {
      callback = opt;
      opt = null;
    }
    const origOpt = { ...opt };
    opt = { ...marked.defaults, ...origOpt };
    const throwError = onError(opt.silent, opt.async, callback);
    if (typeof src === "undefined" || src === null) {
      return throwError(new Error("marked(): input parameter is undefined or null"));
    }
    if (typeof src !== "string") {
      return throwError(new Error("marked(): input parameter is of type " + Object.prototype.toString.call(src) + ", string expected"));
    }
    checkSanitizeDeprecation(opt);
    if (opt.hooks) {
      opt.hooks.options = opt;
    }
    if (callback) {
      const highlight = opt.highlight;
      let tokens;
      try {
        if (opt.hooks) {
          src = opt.hooks.preprocess(src);
        }
        tokens = lexer2(src, opt);
      } catch (e) {
        return throwError(e);
      }
      const done = function(err) {
        let out;
        if (!err) {
          try {
            if (opt.walkTokens) {
              marked.walkTokens(tokens, opt.walkTokens);
            }
            out = parser2(tokens, opt);
            if (opt.hooks) {
              out = opt.hooks.postprocess(out);
            }
          } catch (e) {
            err = e;
          }
        }
        opt.highlight = highlight;
        return err ? throwError(err) : callback(null, out);
      };
      if (!highlight || highlight.length < 3) {
        return done();
      }
      delete opt.highlight;
      if (!tokens.length)
        return done();
      let pending = 0;
      marked.walkTokens(tokens, function(token) {
        if (token.type === "code") {
          pending++;
          setTimeout(() => {
            highlight(token.text, token.lang, function(err, code) {
              if (err) {
                return done(err);
              }
              if (code != null && code !== token.text) {
                token.text = code;
                token.escaped = true;
              }
              pending--;
              if (pending === 0) {
                done();
              }
            });
          }, 0);
        }
      });
      if (pending === 0) {
        done();
      }
      return;
    }
    if (opt.async) {
      return Promise.resolve(opt.hooks ? opt.hooks.preprocess(src) : src).then((src2) => lexer2(src2, opt)).then((tokens) => opt.walkTokens ? Promise.all(marked.walkTokens(tokens, opt.walkTokens)).then(() => tokens) : tokens).then((tokens) => parser2(tokens, opt)).then((html) => opt.hooks ? opt.hooks.postprocess(html) : html).catch(throwError);
    }
    try {
      if (opt.hooks) {
        src = opt.hooks.preprocess(src);
      }
      const tokens = lexer2(src, opt);
      if (opt.walkTokens) {
        marked.walkTokens(tokens, opt.walkTokens);
      }
      let html = parser2(tokens, opt);
      if (opt.hooks) {
        html = opt.hooks.postprocess(html);
      }
      return html;
    } catch (e) {
      return throwError(e);
    }
  };
}
function marked(src, opt, callback) {
  return parseMarkdown(Lexer.lex, Parser.parse)(src, opt, callback);
}
marked.options = marked.setOptions = function(opt) {
  marked.defaults = { ...marked.defaults, ...opt };
  changeDefaults(marked.defaults);
  return marked;
};
marked.getDefaults = getDefaults;
marked.defaults = defaults;
marked.use = function(...args) {
  const extensions = marked.defaults.extensions || { renderers: {}, childTokens: {} };
  args.forEach((pack) => {
    const opts = { ...pack };
    opts.async = marked.defaults.async || opts.async || false;
    if (pack.extensions) {
      pack.extensions.forEach((ext) => {
        if (!ext.name) {
          throw new Error("extension name required");
        }
        if (ext.renderer) {
          const prevRenderer = extensions.renderers[ext.name];
          if (prevRenderer) {
            extensions.renderers[ext.name] = function(...args2) {
              let ret = ext.renderer.apply(this, args2);
              if (ret === false) {
                ret = prevRenderer.apply(this, args2);
              }
              return ret;
            };
          } else {
            extensions.renderers[ext.name] = ext.renderer;
          }
        }
        if (ext.tokenizer) {
          if (!ext.level || ext.level !== "block" && ext.level !== "inline") {
            throw new Error("extension level must be 'block' or 'inline'");
          }
          if (extensions[ext.level]) {
            extensions[ext.level].unshift(ext.tokenizer);
          } else {
            extensions[ext.level] = [ext.tokenizer];
          }
          if (ext.start) {
            if (ext.level === "block") {
              if (extensions.startBlock) {
                extensions.startBlock.push(ext.start);
              } else {
                extensions.startBlock = [ext.start];
              }
            } else if (ext.level === "inline") {
              if (extensions.startInline) {
                extensions.startInline.push(ext.start);
              } else {
                extensions.startInline = [ext.start];
              }
            }
          }
        }
        if (ext.childTokens) {
          extensions.childTokens[ext.name] = ext.childTokens;
        }
      });
      opts.extensions = extensions;
    }
    if (pack.renderer) {
      const renderer = marked.defaults.renderer || new Renderer();
      for (const prop in pack.renderer) {
        const prevRenderer = renderer[prop];
        renderer[prop] = (...args2) => {
          let ret = pack.renderer[prop].apply(renderer, args2);
          if (ret === false) {
            ret = prevRenderer.apply(renderer, args2);
          }
          return ret;
        };
      }
      opts.renderer = renderer;
    }
    if (pack.tokenizer) {
      const tokenizer = marked.defaults.tokenizer || new Tokenizer();
      for (const prop in pack.tokenizer) {
        const prevTokenizer = tokenizer[prop];
        tokenizer[prop] = (...args2) => {
          let ret = pack.tokenizer[prop].apply(tokenizer, args2);
          if (ret === false) {
            ret = prevTokenizer.apply(tokenizer, args2);
          }
          return ret;
        };
      }
      opts.tokenizer = tokenizer;
    }
    if (pack.hooks) {
      const hooks = marked.defaults.hooks || new Hooks();
      for (const prop in pack.hooks) {
        const prevHook = hooks[prop];
        if (Hooks.passThroughHooks.has(prop)) {
          hooks[prop] = (arg) => {
            if (marked.defaults.async) {
              return Promise.resolve(pack.hooks[prop].call(hooks, arg)).then((ret2) => {
                return prevHook.call(hooks, ret2);
              });
            }
            const ret = pack.hooks[prop].call(hooks, arg);
            return prevHook.call(hooks, ret);
          };
        } else {
          hooks[prop] = (...args2) => {
            let ret = pack.hooks[prop].apply(hooks, args2);
            if (ret === false) {
              ret = prevHook.apply(hooks, args2);
            }
            return ret;
          };
        }
      }
      opts.hooks = hooks;
    }
    if (pack.walkTokens) {
      const walkTokens2 = marked.defaults.walkTokens;
      opts.walkTokens = function(token) {
        let values = [];
        values.push(pack.walkTokens.call(this, token));
        if (walkTokens2) {
          values = values.concat(walkTokens2.call(this, token));
        }
        return values;
      };
    }
    marked.setOptions(opts);
  });
};
marked.walkTokens = function(tokens, callback) {
  let values = [];
  for (const token of tokens) {
    values = values.concat(callback.call(marked, token));
    switch (token.type) {
      case "table": {
        for (const cell of token.header) {
          values = values.concat(marked.walkTokens(cell.tokens, callback));
        }
        for (const row of token.rows) {
          for (const cell of row) {
            values = values.concat(marked.walkTokens(cell.tokens, callback));
          }
        }
        break;
      }
      case "list": {
        values = values.concat(marked.walkTokens(token.items, callback));
        break;
      }
      default: {
        if (marked.defaults.extensions && marked.defaults.extensions.childTokens && marked.defaults.extensions.childTokens[token.type]) {
          marked.defaults.extensions.childTokens[token.type].forEach(function(childTokens) {
            values = values.concat(marked.walkTokens(token[childTokens], callback));
          });
        } else if (token.tokens) {
          values = values.concat(marked.walkTokens(token.tokens, callback));
        }
      }
    }
  }
  return values;
};
marked.parseInline = parseMarkdown(Lexer.lexInline, Parser.parseInline);
marked.Parser = Parser;
marked.parser = Parser.parse;
marked.Renderer = Renderer;
marked.TextRenderer = TextRenderer;
marked.Lexer = Lexer;
marked.lexer = Lexer.lex;
marked.Tokenizer = Tokenizer;
marked.Slugger = Slugger;
marked.Hooks = Hooks;
marked.parse = marked;
var options = marked.options;
var setOptions = marked.setOptions;
var use = marked.use;
var walkTokens = marked.walkTokens;
var parseInline = marked.parseInline;
var parser = Parser.parse;
var lexer = Lexer.lex;

// src/components/PrismaHighlighting.ts
var import_obsidian = require("obsidian");
function prismHighlighting(messageBlock) {
  (0, import_obsidian.loadPrism)().then((Prism) => {
    const codeBlocks = messageBlock == null ? void 0 : messageBlock.querySelectorAll(".messageBlock pre code");
    codeBlocks == null ? void 0 : codeBlocks.forEach((codeBlock) => {
      const language = codeBlock.className.replace("language-", "");
      const code = codeBlock.textContent;
      if (language && Prism.languages[language]) {
        const highlightedCode = Prism.highlight(code, Prism.languages[language]);
        codeBlock.innerHTML = highlightedCode;
      }
    });
  });
}

// src/components/chat/Buttons.ts
var import_obsidian2 = require("obsidian");

// src/components/editor/ReferenceCurrentNote.ts
var referenceCurrentNoteContent = "";
async function getActiveFileContent(settings) {
  const dotElement = document.querySelector(".dotIndicator");
  referenceCurrentNoteContent = "";
  if (settings.general.allowReferenceCurrentNote === true) {
    if (dotElement) {
      dotElement.style.backgroundColor = "#da2c2c";
      referenceCurrentNoteContent = "";
    }
    const activeFile = app.workspace.getActiveFile();
    if ((activeFile == null ? void 0 : activeFile.extension) === "md") {
      if (dotElement) {
        dotElement.style.backgroundColor = "green";
      }
      const content = await app.vault.read(activeFile);
      const clearYamlContent = content.replace(/---[\s\S]+?---/, "").trim();
      referenceCurrentNoteContent = "Reference Note:\n\n" + clearYamlContent + "\n\n";
    }
  }
  return referenceCurrentNoteContent;
}
function getCurrentNoteContent() {
  return referenceCurrentNoteContent;
}

// src/components/chat/Buttons.ts
function regenerateUserButton(settings) {
  const regenerateButton = document.createElement("button");
  regenerateButton.textContent = "regenerate";
  (0, import_obsidian2.setIcon)(regenerateButton, "refresh-ccw");
  regenerateButton.classList.add("regenerate-button");
  regenerateButton.title = "regenerate";
  let lastClickedElement = null;
  regenerateButton.addEventListener("click", async function(event) {
    event.stopPropagation();
    lastClickedElement = event.target;
    while (lastClickedElement && !lastClickedElement.classList.contains("userMessage")) {
      lastClickedElement = lastClickedElement.parentElement;
    }
    let index = -1;
    if (lastClickedElement) {
      const userMessages = Array.from(document.querySelectorAll("#messageContainer .userMessage"));
      index = userMessages.indexOf(lastClickedElement) * 2;
    }
    if (index !== -1) {
      deleteMessage(index + 1);
      if (OPENAI_MODELS.includes(settings.general.model) || settings.APIConnections.openAI.openAIBaseModels.includes(settings.general.model)) {
        try {
          if (settings.APIConnections.openAI.allowOpenAIBaseUrlDataStream) {
            await fetchOpenAIAPIDataStream(settings, index);
          } else {
            await fetchOpenAIAPIData(settings, index);
          }
        } catch (error) {
          new import_obsidian2.Notice("Error occurred while fetching completion: " + error.message);
          console.log(error.message);
        }
      } else if (settings.OllamaConnection.RESTAPIURL && settings.OllamaConnection.ollamaModels.includes(settings.general.model)) {
        if (settings.OllamaConnection.allowOllamaStream) {
          await fetchOllamaDataStream(settings, index);
        } else {
          await fetchOllamaData(settings, index);
        }
      } else if (settings.RESTAPIURLConnection.RESTAPIURLModels.includes(settings.general.model)) {
        if (settings.RESTAPIURLConnection.allowRESTAPIURLDataStream) {
          await fetchRESTAPIURLDataStream(settings, index);
        } else {
          await fetchRESTAPIURLData(settings, index);
        }
      } else if (settings.APIConnections.mistral.mistralModels.includes(settings.general.model)) {
        try {
          if (settings.APIConnections.mistral.allowStream) {
            await fetchMistralDataStream(settings, index);
          } else {
            await fetchMistralData(settings, index);
          }
        } catch (error) {
          console.error("Error:", error);
        }
      } else if (settings.APIConnections.googleGemini.geminiModels.includes(settings.general.model)) {
        try {
          await fetchGoogleGeminiData(settings, index);
        } catch (error) {
          console.error("Error:", error);
        }
      } else if (ANTHROPIC_MODELS.includes(settings.general.model)) {
        try {
          await fetchAnthropicAPIData(settings, index);
        } catch (error) {
          console.error("Error:", error);
        }
      }
    } else {
      new import_obsidian2.Notice("No models detected.");
    }
  });
  return regenerateButton;
}
function displayUserEditButton(settings, userP) {
  const editButton = document.createElement("button");
  editButton.textContent = "edit";
  (0, import_obsidian2.setIcon)(editButton, "edit");
  editButton.classList.add("edit-button");
  editButton.title = "edit";
  let lastClickedElement = null;
  editButton.addEventListener("click", function(event) {
    var _a2;
    const editContainer = document.createElement("div");
    editContainer.classList.add("edit-container");
    const textArea = document.createElement("textarea");
    textArea.classList.add("edit-textarea");
    textArea.value = (_a2 = userP.textContent) != null ? _a2 : "";
    editContainer.appendChild(textArea);
    const textareaEditButton = document.createElement("button");
    textareaEditButton.textContent = "Edit";
    textareaEditButton.classList.add("textarea-edit-button");
    textareaEditButton.title = "edit";
    const cancelButton = document.createElement("button");
    cancelButton.textContent = "Cancel";
    cancelButton.classList.add("textarea-cancel-button");
    cancelButton.title = "cancel";
    event.stopPropagation();
    lastClickedElement = event.target;
    while (lastClickedElement && !lastClickedElement.classList.contains("userMessage")) {
      lastClickedElement = lastClickedElement.parentElement;
    }
    textareaEditButton.addEventListener("click", async function() {
      userP.textContent = textArea.value;
      editContainer.replaceWith(userP);
      if (lastClickedElement) {
        const userMessages = Array.from(document.querySelectorAll("#messageContainer .userMessage"));
        const index = userMessages.indexOf(lastClickedElement) * 2;
        if (index !== -1) {
          messageHistory[index].content = textArea.value;
          deleteMessage(index + 1);
          if (OPENAI_MODELS.includes(settings.general.model) || settings.APIConnections.openAI.openAIBaseModels.includes(settings.general.model)) {
            try {
              if (settings.APIConnections.openAI.allowOpenAIBaseUrlDataStream) {
                await fetchOpenAIAPIDataStream(settings, index);
              } else {
                await fetchOpenAIAPIData(settings, index);
              }
            } catch (error) {
              new import_obsidian2.Notice("Error occurred while fetching completion: " + error.message);
              console.log(error.message);
            }
          } else if (ANTHROPIC_MODELS.includes(settings.general.model)) {
            try {
              await fetchAnthropicAPIData(settings, index);
            } catch (error) {
              console.error("Error:", error);
            }
          } else if (settings.OllamaConnection.RESTAPIURL && settings.OllamaConnection.ollamaModels.includes(settings.general.model)) {
            if (settings.OllamaConnection.allowOllamaStream) {
              await fetchOllamaDataStream(settings, index);
            } else {
              await fetchOllamaData(settings, index);
            }
          } else if (settings.APIConnections.mistral.mistralModels.includes(settings.general.model)) {
            try {
              if (settings.APIConnections.mistral.allowStream) {
                await fetchMistralDataStream(settings, index);
              } else {
                await fetchMistralData(settings, index);
              }
            } catch (error) {
              console.error("Error:", error);
            }
          } else if (settings.APIConnections.googleGemini.geminiModels.includes(settings.general.model)) {
            try {
              await fetchGoogleGeminiData(settings, index);
            } catch (error) {
              console.error("Error:", error);
            }
          } else if (settings.RESTAPIURLConnection.RESTAPIURLModels.includes(settings.general.model)) {
            if (settings.RESTAPIURLConnection.allowRESTAPIURLDataStream) {
              await fetchRESTAPIURLDataStream(settings, index);
            } else {
              await fetchRESTAPIURLData(settings, index);
            }
          }
        } else {
          new import_obsidian2.Notice("No models detected.");
        }
      }
    });
    cancelButton.addEventListener("click", function() {
      editContainer.replaceWith(userP);
    });
    editContainer.appendChild(textareaEditButton);
    editContainer.appendChild(cancelButton);
    if (userP.parentNode !== null) {
      userP.parentNode.replaceChild(editContainer, userP);
    }
  });
  return editButton;
}
function displayBotEditButton(settings, botP) {
  const editButton = document.createElement("button");
  editButton.textContent = "edit";
  (0, import_obsidian2.setIcon)(editButton, "edit");
  editButton.classList.add("edit-button");
  editButton.title = "edit";
  let lastClickedElement = null;
  editButton.addEventListener("click", function(event) {
    var _a2;
    const editContainer = document.createElement("div");
    editContainer.classList.add("edit-container");
    const textArea = document.createElement("textarea");
    textArea.classList.add("edit-textarea");
    textArea.value = (_a2 = botP.textContent) != null ? _a2 : "";
    const textareaEditButton = document.createElement("button");
    textareaEditButton.textContent = "Edit";
    textareaEditButton.classList.add("textarea-edit-button");
    textareaEditButton.title = "edit";
    const cancelButton = document.createElement("button");
    cancelButton.textContent = "Cancel";
    cancelButton.classList.add("textarea-cancel-button");
    cancelButton.title = "cancel";
    editContainer.appendChild(textArea);
    event.stopPropagation();
    lastClickedElement = event.target;
    while (lastClickedElement && !lastClickedElement.classList.contains("botMessage")) {
      lastClickedElement = lastClickedElement.parentElement;
    }
    const messageBlock = lastClickedElement == null ? void 0 : lastClickedElement.querySelector(".messageBlock");
    if (messageBlock) {
      messageBlock.innerHTML = "";
      messageBlock.appendChild(editContainer);
    } else {
      console.log("messageBlock not found");
    }
    textareaEditButton.addEventListener("click", async function() {
      botP.textContent = textArea.value;
      editContainer.replaceWith(botP);
      if (lastClickedElement) {
        const allMessages = Array.from(document.querySelectorAll("#messageContainer div.userMessage, #messageContainer div.botMessage"));
        const index = allMessages.indexOf(lastClickedElement);
        if (index !== -1) {
          messageHistory[index].content = textArea.value;
          const jsonString = JSON.stringify(messageHistory, null, 4);
          try {
            await app.vault.adapter.write(filenameMessageHistoryJSON, jsonString);
          } catch (error) {
            console.error("Error writing to message history file:", error);
          }
        } else {
          new import_obsidian2.Notice("No models detected.");
        }
      }
    });
    cancelButton.addEventListener("click", function() {
      editContainer.replaceWith(botP);
    });
    editContainer.appendChild(textareaEditButton);
    editContainer.appendChild(cancelButton);
    if (botP.parentNode !== null) {
      botP.parentNode.replaceChild(editContainer, botP);
    }
  });
  return editButton;
}
function displayUserCopyButton(userP) {
  const copyButton = document.createElement("button");
  copyButton.textContent = "copy";
  (0, import_obsidian2.setIcon)(copyButton, "copy");
  copyButton.classList.add("copy-button");
  copyButton.title = "copy";
  copyButton.addEventListener("click", function() {
    const messageText = userP.textContent;
    if (messageText !== null) {
      copyMessageToClipboard(messageText);
      new import_obsidian2.Notice("Copied user message.");
    } else {
      console.error("Message content is null. Cannot copy.");
    }
  });
  return copyButton;
}
function displayBotCopyButton(settings, message) {
  const copyButton = document.createElement("button");
  copyButton.textContent = "copy";
  (0, import_obsidian2.setIcon)(copyButton, "copy");
  copyButton.classList.add("copy-button");
  copyButton.title = "copy";
  let messageText = message;
  if (messageText !== null) {
    if (ANTHROPIC_MODELS.includes(settings.general.model)) {
      const fullString = message;
      const cleanString = fullString.split(" ").slice(1).join(" ").trim();
      messageText = cleanString;
    }
  } else {
    new import_obsidian2.Notice("Message content is null. Cannot copy.");
    console.error("Message content is null. Cannot copy.");
  }
  copyButton.addEventListener("click", function() {
    if (messageText !== null) {
      copyMessageToClipboard(messageText);
      new import_obsidian2.Notice("Copied bot message.");
    } else {
      console.error("Message content is null. Cannot copy.");
    }
  });
  return copyButton;
}
function codeBlockCopyButton(messageBlock) {
  const codeBlocks = messageBlock.querySelectorAll(".messageBlock pre code");
  codeBlocks.forEach((codeElement) => {
    const copyButton = document.createElement("button");
    copyButton.textContent = "copy";
    (0, import_obsidian2.setIcon)(copyButton, "copy");
    copyButton.classList.add("copy-button");
    copyButton.title = "copy";
    if (codeElement.parentNode) {
      codeElement.parentNode.insertBefore(copyButton, codeElement.nextSibling);
    }
    copyButton.addEventListener("click", () => {
      var _a2;
      const language = ((_a2 = codeElement.getAttribute("class")) == null ? void 0 : _a2.replace("language-", "")) || "";
      const codeText = `\`\`\`${language}
${codeElement.textContent}\`\`\``;
      if (codeText) {
        navigator.clipboard.writeText(codeText).then(() => {
          new import_obsidian2.Notice("Copied codeblock.");
        }, (err) => {
          console.error("Failed to copy code: ", err);
          new import_obsidian2.Notice("Failed to copy code: ", err);
        });
      }
    });
  });
}
function copyMessageToClipboard(message) {
  navigator.clipboard.writeText(message).then(function() {
  }).catch(function(err) {
    console.error("Unable to copy message: ", err);
  });
}
function displayAppendButton(settings, message) {
  const appendButton = document.createElement("button");
  appendButton.textContent = "append";
  (0, import_obsidian2.setIcon)(appendButton, "plus-square");
  appendButton.classList.add("append-button");
  appendButton.title = "append";
  const messageText = message;
  appendButton.addEventListener("click", async function(event) {
    var _a2, _b;
    if (((_a2 = checkActiveFile) == null ? void 0 : _a2.extension) === "md") {
      if (checkActiveFile !== lastCursorPositionFile) {
        getActiveFileContent(settings);
        const existingContent = await app.vault.read(checkActiveFile);
        const updatedContent = existingContent + "\n" + messageText;
        app.vault.modify(checkActiveFile, updatedContent);
      } else {
        (_b = activeEditor) == null ? void 0 : _b.replaceRange(messageText, lastCursorPosition);
      }
      event.stopPropagation();
      new import_obsidian2.Notice("Appended response.");
    } else {
      new import_obsidian2.Notice("No active Markdown file detected.");
    }
  });
  return appendButton;
}
function displayTrashButton() {
  const trashButton = document.createElement("button");
  trashButton.textContent = "trash";
  (0, import_obsidian2.setIcon)(trashButton, "trash");
  trashButton.classList.add("trash-button");
  trashButton.title = "trash";
  let lastClickedElement = null;
  trashButton.addEventListener("click", function(event) {
    event.stopPropagation();
    lastClickedElement = event.target;
    while (lastClickedElement && !lastClickedElement.classList.contains("userMessage")) {
      lastClickedElement = lastClickedElement.parentElement;
    }
    if (lastClickedElement) {
      const userMessages = Array.from(document.querySelectorAll("#messageContainer .userMessage"));
      const index = userMessages.indexOf(lastClickedElement) * 2;
      if (index !== -1) {
        const modal = new import_obsidian2.Modal(app);
        modal.contentEl.innerHTML = `
                <div class="modal-content">
                    <h2>Delete Message Block.</h2>
                    <p>Are you sure you want to delete this message block?</p>
                    <button id="confirmDelete">Confirm Delete</button>
                </div>
                `;
        const confirmDeleteButton = modal.contentEl.querySelector("#confirmDelete");
        confirmDeleteButton == null ? void 0 : confirmDeleteButton.addEventListener("click", async function() {
          deleteMessage(index);
          new import_obsidian2.Notice("Message deleted.");
          modal.close();
        });
        modal.open();
      }
    }
  });
  return trashButton;
}
async function deleteMessage(index) {
  const messageContainer = document.querySelector("#messageContainer");
  const divElements = messageContainer == null ? void 0 : messageContainer.querySelectorAll("div.botMessage, div.userMessage");
  if (divElements && divElements.length > 0 && index >= 0 && index < divElements.length) {
    messageContainer == null ? void 0 : messageContainer.removeChild(divElements[index]);
    if (index + 1 < divElements.length) {
      const nextMessage = divElements[index + 1];
      if (nextMessage.classList.contains("botMessage")) {
        messageContainer == null ? void 0 : messageContainer.removeChild(nextMessage);
      }
    }
  }
  if (messageHistory[index + 1] && messageHistory[index + 1].role === "assistant") {
    messageHistory.splice(index, 2);
  } else {
    messageHistory.splice(index, 1);
  }
  const jsonString = JSON.stringify(messageHistory, null, 4);
  try {
    await app.vault.adapter.write(filenameMessageHistoryJSON, jsonString);
  } catch (error) {
    console.error("Error writing messageHistory.json", error);
  }
}

// src/components/chat/Message.ts
async function addMessage(input, messageType, settings, index) {
  const messageObj = {
    role: "",
    content: ""
  };
  if (messageType === "userMessage") {
    messageObj.role = "user";
    messageObj.content = input;
  } else if (messageType === "botMessage") {
    messageObj.role = "assistant";
    messageObj.content = input;
    const messageContainerElDivs = document.querySelectorAll("#messageContainer div.userMessage, #messageContainer div.botMessage");
    const targetUserMessage = messageContainerElDivs[index];
    const targetBotMessage = targetUserMessage.nextElementSibling;
    const botMessageToolBarDiv = targetBotMessage == null ? void 0 : targetBotMessage.querySelector(".botMessageToolBar");
    const buttonContainerDiv = document.createElement("div");
    buttonContainerDiv.className = "button-container";
    botMessageToolBarDiv == null ? void 0 : botMessageToolBarDiv.appendChild(buttonContainerDiv);
    const newBotP = document.createElement("p");
    newBotP.innerHTML = messageObj.content;
    if (!messageObj.content.includes('div class="commandBotMessage"') && !messageObj.content.includes("errorBotMessage")) {
      const editButton = displayBotEditButton(settings, newBotP);
      const copyBotButton = displayBotCopyButton(settings, messageObj.content);
      const appendButton = displayAppendButton(settings, messageObj.content);
      buttonContainerDiv.appendChild(editButton);
      buttonContainerDiv.appendChild(copyBotButton);
      buttonContainerDiv.appendChild(appendButton);
    }
  }
  messageHistory.splice(index + 1, 0, messageObj);
  const jsonString = JSON.stringify(messageHistory, null, 4);
  try {
    await this.app.vault.adapter.write(filenameMessageHistoryJSON, jsonString);
  } catch (error) {
    console.error("Error writing to message history file:", error);
  }
}
function addParagraphBreaks(messageBlock) {
  const paragraphs = messageBlock.querySelectorAll("p");
  for (let i = 0; i < paragraphs.length; i++) {
    const p = paragraphs[i];
    const nextSibling = p.nextElementSibling;
    if (nextSibling && nextSibling.nodeName === "P") {
      const br = document.createElement("br");
      const parent = p.parentNode;
      if (parent) {
        parent.insertBefore(br, nextSibling);
      }
    }
  }
}

// src/components/chat/Prompt.ts
async function getPrompt(settings) {
  if (settings.prompts.prompt.trim() === "") {
    return;
  }
  const promptFilePath = settings.prompts.promptFolderPath + "/" + settings.prompts.prompt;
  try {
    const content = await app.vault.adapter.read(promptFilePath);
    const clearYamlContent = content.replace(/---[\s\S]+?---/, "").trim();
    return clearYamlContent;
  } catch (error) {
    console.error(`Error reading file ${promptFilePath}:`, error);
    return null;
  }
}

// src/utils/ColorConverter.ts
function colorToHex(colorValue) {
  if (colorValue.startsWith("hsl")) {
    const match = colorValue.match(/(\d+(\.\d+)?)%?/g);
    if (match === null || match.length < 3) {
      throw new Error("Invalid HSL value");
    }
    const h = parseInt(match[0]) / 360;
    const s = parseInt(match[1]) / 100;
    const l = parseInt(match[2]) / 100;
    const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
    const p = 2 * l - q;
    const r = hue2rgb(p, q, h + 1 / 3);
    const g = hue2rgb(p, q, h);
    const b = hue2rgb(p, q, h - 1 / 3);
    const toHex = function(c) {
      const hex2 = Math.round(c * 255).toString(16);
      return hex2.length === 1 ? "0" + hex2 : hex2;
    };
    const hex = "#" + toHex(r) + toHex(g) + toHex(b);
    return hex;
  } else if (colorValue.startsWith("rgb")) {
    const sep = colorValue.indexOf(",") > -1 ? "," : " ";
    const rgbArray = colorValue.substr(4).split(")")[0].split(sep);
    let r = (+rgbArray[0]).toString(16), g = (+rgbArray[1]).toString(16), b = (+rgbArray[2]).toString(16);
    if (r.length == 1)
      r = "0" + r;
    if (g.length == 1)
      g = "0" + g;
    if (b.length == 1)
      b = "0" + b;
    return "#" + r + g + b;
  } else {
    return colorValue;
  }
}
function hue2rgb(p, q, t) {
  if (t < 0)
    t += 1;
  if (t > 1)
    t -= 1;
  if (t < 1 / 6)
    return p + (q - p) * 6 * t;
  if (t < 1 / 2)
    return q;
  if (t < 2 / 3)
    return p + (q - p) * (2 / 3 - t) * 6;
  return p;
}

// src/components/chat/BotMessage.ts
function displayBotMessage(settings, messageHistory2, message) {
  const botMessageDiv = document.createElement("div");
  botMessageDiv.className = "botMessage";
  botMessageDiv.style.backgroundColor = colorToHex(settings.appearance.botMessageBackgroundColor || getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.appearance.botMessageBackgroundColor).trim());
  const botMessageToolBarDiv = document.createElement("div");
  botMessageToolBarDiv.className = "botMessageToolBar";
  const buttonContainerDiv = document.createElement("div");
  buttonContainerDiv.className = "button-container";
  const botNameSpan = document.createElement("span");
  botNameSpan.textContent = settings.appearance.chatbotName || DEFAULT_SETTINGS.appearance.chatbotName;
  botNameSpan.className = "chatbotName";
  let botP = "";
  const messageText = message;
  if (messageHistory2.length >= 1) {
    if (ANTHROPIC_MODELS.includes(settings.general.model)) {
      const cleanString = messageText.split(" ").slice(1).join(" ").trim();
      botP = marked(cleanString);
    } else if (message.includes("commandBotMessage") || message.includes("errorBotMessage")) {
      botP = message;
    } else {
      botP = marked(message);
    }
  }
  const newBotP = document.createElement("p");
  newBotP.innerHTML = botP;
  botMessageToolBarDiv.appendChild(botNameSpan);
  botMessageToolBarDiv.appendChild(buttonContainerDiv);
  const messageBlockDiv = document.createElement("div");
  messageBlockDiv.className = "messageBlock";
  if (!message.includes("commandBotMessage") && !message.includes("errorBotMessage")) {
    const editButton = displayBotEditButton(settings, newBotP);
    const copyBotButton = displayBotCopyButton(settings, message);
    const appendButton = displayAppendButton(settings, message);
    buttonContainerDiv.appendChild(editButton);
    buttonContainerDiv.appendChild(copyBotButton);
    buttonContainerDiv.appendChild(appendButton);
    prismHighlighting(messageBlockDiv);
    codeBlockCopyButton(messageBlockDiv);
    addParagraphBreaks(messageBlockDiv);
  }
  botMessageDiv.appendChild(botMessageToolBarDiv);
  messageBlockDiv.appendChild(newBotP);
  botMessageDiv.appendChild(messageBlockDiv);
  return botMessageDiv;
}
function displayLoadingBotMessage(settings) {
  const botMessageDiv = document.createElement("div");
  botMessageDiv.className = "botMessage";
  botMessageDiv.style.backgroundColor = colorToHex(settings.appearance.botMessageBackgroundColor || getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.appearance.botMessageBackgroundColor).trim());
  const botMessageToolBarDiv = document.createElement("div");
  botMessageToolBarDiv.className = "botMessageToolBar";
  const botNameSpan = document.createElement("span");
  botNameSpan.textContent = settings.appearance.chatbotName || DEFAULT_SETTINGS.appearance.chatbotName;
  botNameSpan.className = "chatbotName";
  const messageBlockDiv = document.createElement("div");
  messageBlockDiv.className = "messageBlock";
  const loadingEl = document.createElement("span");
  loadingEl.setAttribute("id", "loading");
  for (let i = 0; i < 3; i++) {
    const dotSpan = document.createElement("span");
    dotSpan.textContent = ".";
    loadingEl.appendChild(dotSpan);
  }
  botMessageToolBarDiv.appendChild(botNameSpan);
  botMessageDiv.appendChild(botMessageToolBarDiv);
  botMessageDiv.appendChild(messageBlockDiv);
  botMessageDiv.appendChild(loadingEl);
  return botMessageDiv;
}
function displayCommandBotMessage(settings, messageHistory2, message) {
  const botMessageDiv = document.createElement("div");
  botMessageDiv.className = "botMessage";
  botMessageDiv.style.backgroundColor = colorToHex(settings.appearance.botMessageBackgroundColor || getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.appearance.botMessageBackgroundColor).trim());
  const botMessageToolBarDiv = document.createElement("div");
  botMessageToolBarDiv.className = "botMessageToolBar";
  const botNameSpan = document.createElement("span");
  botNameSpan.textContent = settings.appearance.chatbotName || DEFAULT_SETTINGS.appearance.chatbotName;
  botNameSpan.className = "chatbotName";
  const messageBlockDiv = document.createElement("div");
  messageBlockDiv.className = "messageBlock";
  const displayCommandBotMessageDiv = document.createElement("div");
  displayCommandBotMessageDiv.className = "commandBotMessage";
  displayCommandBotMessageDiv.innerHTML = message;
  messageBlockDiv.appendChild(displayCommandBotMessageDiv);
  botMessageToolBarDiv.appendChild(botNameSpan);
  botMessageDiv.appendChild(botMessageToolBarDiv);
  botMessageDiv.appendChild(messageBlockDiv);
  const index = messageHistory2.length - 1;
  addMessage(messageBlockDiv.innerHTML, "botMessage", this.settings, index);
  return botMessageDiv;
}
function displayErrorBotMessage(settings, messageHistory2, message) {
  const botMessageDiv = document.createElement("div");
  botMessageDiv.className = "botMessage";
  botMessageDiv.style.backgroundColor = colorToHex(settings.appearance.botMessageBackgroundColor || getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.appearance.botMessageBackgroundColor).trim());
  const botMessageToolBarDiv = document.createElement("div");
  botMessageToolBarDiv.className = "botMessageToolBar";
  const botNameSpan = document.createElement("span");
  botNameSpan.textContent = settings.appearance.chatbotName || DEFAULT_SETTINGS.appearance.chatbotName;
  botNameSpan.className = "chatbotName";
  const messageBlockDiv = document.createElement("div");
  messageBlockDiv.className = "messageBlock";
  const displayErrorBotMessageDiv = document.createElement("div");
  displayErrorBotMessageDiv.className = "errorBotMessage";
  const BotP = document.createElement("p");
  BotP.textContent = message;
  console.error(message);
  messageBlockDiv.appendChild(displayErrorBotMessageDiv);
  displayErrorBotMessageDiv.appendChild(BotP);
  botMessageToolBarDiv.appendChild(botNameSpan);
  botMessageDiv.appendChild(botMessageToolBarDiv);
  botMessageDiv.appendChild(messageBlockDiv);
  const index = messageHistory2.length - 1;
  addMessage(messageBlockDiv.innerHTML, "botMessage", this.settings, index);
  return botMessageDiv;
}

// src/components/FetchModelResponse.ts
var abortController = new AbortController();
async function fetchOpenAIAPIData(settings, index) {
  const openai = new openai_default({
    apiKey: settings.APIConnections.openAI.APIKey,
    baseURL: settings.APIConnections.openAI.openAIBaseUrl,
    dangerouslyAllowBrowser: true
    // apiKey is stored within data.json
  });
  let prompt = await getPrompt(settings);
  if (prompt == void 0) {
    prompt = "";
  }
  const filteredMessageHistory = filterMessageHistory(messageHistory);
  const messageHistoryAtIndex = removeConsecutiveUserRoles(filteredMessageHistory);
  const messageContainerEl = document.querySelector("#messageContainer");
  const messageContainerElDivs = document.querySelectorAll("#messageContainer div.userMessage, #messageContainer div.botMessage");
  const botMessageDiv = displayLoadingBotMessage(settings);
  messageContainerEl == null ? void 0 : messageContainerEl.insertBefore(botMessageDiv, messageContainerElDivs[index + 1]);
  botMessageDiv.scrollIntoView({ behavior: "smooth", block: "start" });
  await getActiveFileContent(settings);
  const referenceCurrentNoteContent2 = getCurrentNoteContent();
  try {
    const completion = await openai.chat.completions.create({
      model: settings.general.model,
      max_tokens: parseInt(settings.general.max_tokens),
      stream: false,
      messages: [
        { role: "system", content: referenceCurrentNoteContent2 + settings.general.system_role + prompt },
        ...messageHistoryAtIndex
      ]
    });
    const message = completion.choices[0].message.content;
    if (messageContainerEl) {
      const targetUserMessage = messageContainerElDivs[index != null ? index : messageHistory.length - 1];
      const targetBotMessage = targetUserMessage.nextElementSibling;
      const messageBlock = targetBotMessage == null ? void 0 : targetBotMessage.querySelector(".messageBlock");
      const loadingEl = targetBotMessage == null ? void 0 : targetBotMessage.querySelector("#loading");
      if (messageBlock) {
        if (loadingEl) {
          targetBotMessage == null ? void 0 : targetBotMessage.removeChild(loadingEl);
        }
        messageBlock.innerHTML = marked(message || "", { breaks: true });
        addParagraphBreaks(messageBlock);
        prismHighlighting(messageBlock);
        codeBlockCopyButton(messageBlock);
        targetBotMessage == null ? void 0 : targetBotMessage.appendChild(messageBlock);
      }
      targetBotMessage == null ? void 0 : targetBotMessage.scrollIntoView({ behavior: "smooth", block: "start" });
    }
    if (message != null) {
      addMessage(message, "botMessage", settings, index);
    }
  } catch (error) {
    const targetUserMessage = messageContainerElDivs[index != null ? index : messageHistory.length - 1];
    const targetBotMessage = targetUserMessage.nextElementSibling;
    targetBotMessage == null ? void 0 : targetBotMessage.remove();
    const messageContainer = document.querySelector("#messageContainer");
    const botMessageDiv2 = displayErrorBotMessage(settings, messageHistory, error);
    messageContainer.appendChild(botMessageDiv2);
  }
}
async function fetchOpenAIAPIDataStream(settings, index) {
  var _a2, _b;
  const openai = new openai_default({
    apiKey: settings.APIConnections.openAI.APIKey,
    baseURL: settings.APIConnections.openAI.openAIBaseUrl,
    dangerouslyAllowBrowser: true
    // apiKey is stored within data.json
  });
  abortController = new AbortController();
  let message = "";
  let isScroll = false;
  let prompt = await getPrompt(settings);
  if (prompt == void 0) {
    prompt = "";
  }
  const filteredMessageHistory = filterMessageHistory(messageHistory);
  const messageHistoryAtIndex = removeConsecutiveUserRoles(filteredMessageHistory);
  const messageContainerEl = document.querySelector("#messageContainer");
  const messageContainerElDivs = document.querySelectorAll("#messageContainer div.userMessage, #messageContainer div.botMessage");
  const botMessageDiv = displayLoadingBotMessage(settings);
  messageContainerEl == null ? void 0 : messageContainerEl.insertBefore(botMessageDiv, messageContainerElDivs[index + 1]);
  botMessageDiv.scrollIntoView({ behavior: "smooth", block: "start" });
  const targetUserMessage = messageContainerElDivs[index != null ? index : messageHistory.length - 1];
  const targetBotMessage = targetUserMessage.nextElementSibling;
  await getActiveFileContent(settings);
  const referenceCurrentNoteContent2 = getCurrentNoteContent();
  try {
    const stream = await openai.chat.completions.create({
      model: settings.general.model,
      max_tokens: parseInt(settings.general.max_tokens),
      temperature: parseInt(settings.general.temperature),
      messages: [
        { role: "system", content: referenceCurrentNoteContent2 + settings.general.system_role + prompt },
        ...messageHistoryAtIndex
      ],
      stream: true
    });
    for await (const part of stream) {
      const content = ((_b = (_a2 = part.choices[0]) == null ? void 0 : _a2.delta) == null ? void 0 : _b.content) || "";
      message += content;
      if (messageContainerEl) {
        const messageBlock = targetBotMessage == null ? void 0 : targetBotMessage.querySelector(".messageBlock");
        const loadingEl = targetBotMessage == null ? void 0 : targetBotMessage.querySelector("#loading");
        if (messageBlock) {
          if (loadingEl) {
            targetBotMessage == null ? void 0 : targetBotMessage.removeChild(loadingEl);
          }
          messageBlock.innerHTML = marked(message);
          addParagraphBreaks(messageBlock);
          prismHighlighting(messageBlock);
          codeBlockCopyButton(messageBlock);
        }
        messageContainerEl.addEventListener("wheel", (event) => {
          if (event.deltaY < 0 || event.deltaY > 0) {
            isScroll = true;
          }
        });
        if (!isScroll) {
          targetBotMessage == null ? void 0 : targetBotMessage.scrollIntoView({ behavior: "auto", block: "start" });
        }
      }
      if (abortController.signal.aborted) {
        new import_obsidian3.Notice("Error making API request: The user aborted a request.");
        break;
      }
    }
    addMessage(message, "botMessage", settings, index);
  } catch (error) {
    const targetUserMessage2 = messageContainerElDivs[index != null ? index : messageHistory.length - 1];
    const targetBotMessage2 = targetUserMessage2.nextElementSibling;
    targetBotMessage2 == null ? void 0 : targetBotMessage2.remove();
    const messageContainer = document.querySelector("#messageContainer");
    const botMessageDiv2 = displayErrorBotMessage(settings, messageHistory, error);
    messageContainer.appendChild(botMessageDiv2);
  }
}
async function fetchOllamaData(settings, index) {
  const ollamaRESTAPIURL = settings.OllamaConnection.RESTAPIURL;
  if (!ollamaRESTAPIURL) {
    return;
  }
  let prompt = await getPrompt(settings);
  if (prompt == void 0) {
    prompt = "";
  }
  const filteredMessageHistory = filterMessageHistory(messageHistory);
  const messageHistoryAtIndex = removeConsecutiveUserRoles(filteredMessageHistory);
  const messageContainerEl = document.querySelector("#messageContainer");
  const messageContainerElDivs = document.querySelectorAll("#messageContainer div.userMessage, #messageContainer div.botMessage");
  const botMessageDiv = displayLoadingBotMessage(settings);
  messageContainerEl == null ? void 0 : messageContainerEl.insertBefore(botMessageDiv, messageContainerElDivs[index + 1]);
  botMessageDiv.scrollIntoView({ behavior: "smooth", block: "start" });
  await getActiveFileContent(settings);
  const referenceCurrentNoteContent2 = getCurrentNoteContent();
  try {
    const response = await (0, import_obsidian3.requestUrl)({
      url: ollamaRESTAPIURL + "/api/chat",
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        model: settings.general.model,
        messages: [
          { role: "system", content: referenceCurrentNoteContent2 + settings.general.system_role + prompt },
          ...messageHistoryAtIndex
        ],
        stream: false,
        keep_alive: parseInt(settings.OllamaConnection.ollamaParameters.keep_alive),
        options: ollamaParametersOptions(settings)
      })
    });
    const message = response.json.message.content;
    if (messageContainerEl) {
      const targetUserMessage = messageContainerElDivs[index];
      const targetBotMessage = targetUserMessage.nextElementSibling;
      const messageBlock = targetBotMessage == null ? void 0 : targetBotMessage.querySelector(".messageBlock");
      const loadingEl = targetBotMessage == null ? void 0 : targetBotMessage.querySelector("#loading");
      if (messageBlock) {
        if (loadingEl) {
          targetBotMessage == null ? void 0 : targetBotMessage.removeChild(loadingEl);
        }
        messageBlock.innerHTML = marked(message, { breaks: true });
        addParagraphBreaks(messageBlock);
        prismHighlighting(messageBlock);
        codeBlockCopyButton(messageBlock);
        targetBotMessage == null ? void 0 : targetBotMessage.appendChild(messageBlock);
      }
      targetBotMessage == null ? void 0 : targetBotMessage.scrollIntoView({ behavior: "smooth", block: "start" });
    }
    addMessage(message, "botMessage", settings, index);
  } catch (error) {
    const targetUserMessage = messageContainerElDivs[index != null ? index : messageHistory.length - 1];
    const targetBotMessage = targetUserMessage.nextElementSibling;
    targetBotMessage == null ? void 0 : targetBotMessage.remove();
    const messageContainer = document.querySelector("#messageContainer");
    const botMessageDiv2 = displayErrorBotMessage(settings, messageHistory, error);
    messageContainer.appendChild(botMessageDiv2);
  }
}
async function fetchOllamaDataStream(settings, index) {
  const ollamaRESTAPIURL = settings.OllamaConnection.RESTAPIURL;
  if (!ollamaRESTAPIURL) {
    return;
  }
  const url = ollamaRESTAPIURL + "/api/chat";
  abortController = new AbortController();
  let message = "";
  let isScroll = false;
  let prompt = await getPrompt(settings);
  if (prompt == void 0) {
    prompt = "";
  }
  const filteredMessageHistory = filterMessageHistory(messageHistory);
  const messageHistoryAtIndex = removeConsecutiveUserRoles(filteredMessageHistory);
  const messageContainerEl = document.querySelector("#messageContainer");
  const messageContainerElDivs = document.querySelectorAll("#messageContainer div.userMessage, #messageContainer div.botMessage");
  const botMessageDiv = displayLoadingBotMessage(settings);
  messageContainerEl == null ? void 0 : messageContainerEl.insertBefore(botMessageDiv, messageContainerElDivs[index + 1]);
  botMessageDiv.scrollIntoView({ behavior: "smooth", block: "start" });
  await getActiveFileContent(settings);
  const referenceCurrentNoteContent2 = getCurrentNoteContent();
  try {
    const response = await fetch(url, {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        model: settings.general.model,
        messages: [
          { role: "system", content: referenceCurrentNoteContent2 + settings.general.system_role + prompt },
          ...messageHistoryAtIndex
        ],
        stream: true,
        keep_alive: parseInt(settings.OllamaConnection.ollamaParameters.keep_alive),
        options: ollamaParametersOptions(settings)
      }),
      signal: abortController.signal
    });
    if (!response.ok) {
      new import_obsidian3.Notice(`HTTP error! Status: ${response.status}`);
      throw new Error(`HTTP error! Status: ${response.status}`);
    }
    if (!response.body) {
      new import_obsidian3.Notice("Response body is null or undefined.");
      throw new Error("Response body is null or undefined.");
    }
    const reader = response.body.getReader();
    const decoder = new TextDecoder();
    let reading = true;
    while (reading) {
      const { done, value } = await reader.read();
      if (done) {
        reading = false;
        break;
      }
      const chunk = decoder.decode(value, { stream: true }) || "";
      const parts = chunk.split("\n");
      for (const part of parts.filter(Boolean)) {
        let parsedChunk;
        try {
          parsedChunk = JSON.parse(part);
          if (parsedChunk.done !== true) {
            const content = parsedChunk.message.content;
            message += content;
          }
        } catch (err) {
          console.error("Error parsing JSON:", err);
          console.log("Part with error:", part);
          parsedChunk = { response: "{_e_}" };
        }
      }
      const messageContainerEl2 = document.querySelector("#messageContainer");
      if (messageContainerEl2) {
        const targetUserMessage = messageContainerElDivs[index != null ? index : messageHistory.length - 1];
        const targetBotMessage = targetUserMessage.nextElementSibling;
        const messageBlock = targetBotMessage == null ? void 0 : targetBotMessage.querySelector(".messageBlock");
        const loadingEl = targetBotMessage == null ? void 0 : targetBotMessage.querySelector("#loading");
        if (messageBlock) {
          if (loadingEl) {
            targetBotMessage == null ? void 0 : targetBotMessage.removeChild(loadingEl);
          }
          messageBlock.innerHTML = marked(message, { breaks: true });
          addParagraphBreaks(messageBlock);
          prismHighlighting(messageBlock);
          codeBlockCopyButton(messageBlock);
        }
        messageContainerEl2.addEventListener("wheel", (event) => {
          if (event.deltaY < 0 || event.deltaY > 0) {
            isScroll = true;
          }
        });
        if (!isScroll) {
          targetBotMessage == null ? void 0 : targetBotMessage.scrollIntoView({ behavior: "auto", block: "start" });
        }
      }
    }
    addMessage(message, "botMessage", settings, index);
  } catch (error) {
    addMessage(message, "botMessage", settings, index);
    new import_obsidian3.Notice(error);
    console.error(error);
  }
}
async function fetchRESTAPIURLData(settings, index) {
  let prompt = await getPrompt(settings);
  if (prompt == void 0) {
    prompt = "";
  }
  const filteredMessageHistory = filterMessageHistory(messageHistory);
  const messageHistoryAtIndex = removeConsecutiveUserRoles(filteredMessageHistory);
  const messageContainerEl = document.querySelector("#messageContainer");
  const messageContainerElDivs = document.querySelectorAll("#messageContainer div.userMessage, #messageContainer div.botMessage");
  const botMessageDiv = displayLoadingBotMessage(settings);
  messageContainerEl == null ? void 0 : messageContainerEl.insertBefore(botMessageDiv, messageContainerElDivs[index + 1]);
  botMessageDiv.scrollIntoView({ behavior: "smooth", block: "start" });
  await getActiveFileContent(settings);
  const referenceCurrentNoteContent2 = getCurrentNoteContent();
  const urls = [
    settings.RESTAPIURLConnection.RESTAPIURL + "/v1/chat/completions",
    settings.RESTAPIURLConnection.RESTAPIURL + "/api/v1/chat/completions"
  ];
  let lastError = null;
  for (const url of urls) {
    try {
      const response = await (0, import_obsidian3.requestUrl)({
        url,
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${settings.RESTAPIURLConnection.APIKey}`
        },
        body: JSON.stringify({
          model: settings.general.model,
          messages: [
            { role: "system", content: referenceCurrentNoteContent2 + settings.general.system_role + prompt },
            ...messageHistoryAtIndex
          ],
          max_tokens: parseInt(settings.general.max_tokens) || 4096,
          temperature: parseInt(settings.general.temperature)
        })
      });
      const message = response.json.choices[0].message.content;
      const messageContainerEl2 = document.querySelector("#messageContainer");
      if (messageContainerEl2) {
        const targetUserMessage = messageContainerElDivs[index != null ? index : messageHistory.length - 1];
        const targetBotMessage = targetUserMessage.nextElementSibling;
        const messageBlock = targetBotMessage == null ? void 0 : targetBotMessage.querySelector(".messageBlock");
        const loadingEl = targetBotMessage == null ? void 0 : targetBotMessage.querySelector("#loading");
        if (messageBlock) {
          if (loadingEl) {
            targetBotMessage == null ? void 0 : targetBotMessage.removeChild(loadingEl);
          }
          messageBlock.innerHTML = marked(message, { breaks: true });
          addParagraphBreaks(messageBlock);
          prismHighlighting(messageBlock);
          codeBlockCopyButton(messageBlock);
          targetBotMessage == null ? void 0 : targetBotMessage.appendChild(messageBlock);
        }
        targetBotMessage == null ? void 0 : targetBotMessage.scrollIntoView({ behavior: "smooth", block: "start" });
      }
      addMessage(message, "botMessage", settings, index);
      return;
    } catch (error) {
      lastError = error;
    }
  }
  if (lastError) {
    const targetUserMessage = messageContainerElDivs[index != null ? index : messageHistory.length - 1];
    const targetBotMessage = targetUserMessage.nextElementSibling;
    targetBotMessage == null ? void 0 : targetBotMessage.remove();
    const messageContainer = document.querySelector("#messageContainer");
    const botMessageDiv2 = displayErrorBotMessage(settings, messageHistory, lastError);
    messageContainer.appendChild(botMessageDiv2);
  }
}
async function fetchRESTAPIURLDataStream(settings, index) {
  const RESTAPIURL = settings.RESTAPIURLConnection.RESTAPIURL;
  if (!RESTAPIURL) {
    return;
  }
  const url = RESTAPIURL + "/v1/chat/completions";
  abortController = new AbortController();
  let message = "";
  let isScroll = false;
  let prompt = await getPrompt(settings);
  if (prompt == void 0) {
    prompt = "";
  }
  const filteredMessageHistory = filterMessageHistory(messageHistory);
  const messageHistoryAtIndex = removeConsecutiveUserRoles(filteredMessageHistory);
  const messageContainerEl = document.querySelector("#messageContainer");
  const messageContainerElDivs = document.querySelectorAll("#messageContainer div.userMessage, #messageContainer div.botMessage");
  const botMessageDiv = displayLoadingBotMessage(settings);
  messageContainerEl == null ? void 0 : messageContainerEl.insertBefore(botMessageDiv, messageContainerElDivs[index + 1]);
  botMessageDiv.scrollIntoView({ behavior: "smooth", block: "start" });
  await getActiveFileContent(settings);
  const referenceCurrentNoteContent2 = getCurrentNoteContent();
  try {
    const response = await fetch(url, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${settings.RESTAPIURLConnection.APIKey}`
      },
      body: JSON.stringify({
        model: settings.general.model,
        messages: [
          { role: "system", content: referenceCurrentNoteContent2 + settings.general.system_role + prompt },
          ...messageHistoryAtIndex
        ],
        stream: true,
        temperature: parseInt(settings.general.temperature),
        max_tokens: parseInt(settings.general.max_tokens) || 4096
      }),
      signal: abortController.signal
    });
    if (!response.ok) {
      new import_obsidian3.Notice(`HTTP error! Status: ${response.status}`);
      throw new Error(`HTTP error! Status: ${response.status}`);
    }
    if (!response.body) {
      new import_obsidian3.Notice("Response body is null or undefined.");
      throw new Error("Response body is null or undefined.");
    }
    const reader = response.body.getReader();
    const decoder = new TextDecoder();
    let reading = true;
    while (reading) {
      const { done, value } = await reader.read();
      if (done) {
        reading = false;
        break;
      }
      const chunk = decoder.decode(value, { stream: false }) || "";
      if (chunk.includes("data: [DONE]")) {
        break;
      }
      const trimmedChunk = chunk.replace(/^data: /, "");
      const parts = trimmedChunk.split("\n");
      for (const part of parts.filter(Boolean)) {
        let parsedChunk;
        try {
          parsedChunk = JSON.parse(part);
          if (parsedChunk.done !== true || part !== "data: [DONE]") {
            const content = parsedChunk.choices[0].delta.content;
            message += content;
          }
        } catch (err) {
          console.error("Error parsing JSON:", err);
          console.log("Part with error:", part);
          parsedChunk = { response: "{_e_}" };
        }
      }
      const messageContainerEl2 = document.querySelector("#messageContainer");
      if (messageContainerEl2) {
        const targetUserMessage = messageContainerElDivs[index != null ? index : messageHistory.length - 1];
        const targetBotMessage = targetUserMessage.nextElementSibling;
        const messageBlock = targetBotMessage == null ? void 0 : targetBotMessage.querySelector(".messageBlock");
        const loadingEl = targetBotMessage == null ? void 0 : targetBotMessage.querySelector("#loading");
        if (messageBlock) {
          if (loadingEl) {
            targetBotMessage == null ? void 0 : targetBotMessage.removeChild(loadingEl);
          }
          messageBlock.innerHTML = marked(message, { breaks: true });
          addParagraphBreaks(messageBlock);
          prismHighlighting(messageBlock);
          codeBlockCopyButton(messageBlock);
        }
        messageContainerEl2.addEventListener("wheel", (event) => {
          if (event.deltaY < 0 || event.deltaY > 0) {
            isScroll = true;
          }
        });
        if (!isScroll) {
          targetBotMessage == null ? void 0 : targetBotMessage.scrollIntoView({ behavior: "auto", block: "start" });
        }
      }
    }
    addMessage(message, "botMessage", settings, index);
  } catch (error) {
    addMessage(message, "botMessage", settings, index);
    new import_obsidian3.Notice(error);
    console.error(error);
  }
}
async function fetchMistralData(settings, index) {
  let prompt = await getPrompt(settings);
  if (prompt == void 0) {
    prompt = "";
  }
  const filteredMessageHistory = filterMessageHistory(messageHistory);
  const messageHistoryAtIndex = removeConsecutiveUserRoles(filteredMessageHistory);
  const messageContainerEl = document.querySelector("#messageContainer");
  const messageContainerElDivs = document.querySelectorAll("#messageContainer div.userMessage, #messageContainer div.botMessage");
  const botMessageDiv = displayLoadingBotMessage(settings);
  messageContainerEl == null ? void 0 : messageContainerEl.insertBefore(botMessageDiv, messageContainerElDivs[index + 1]);
  botMessageDiv.scrollIntoView({ behavior: "smooth", block: "start" });
  await getActiveFileContent(settings);
  const referenceCurrentNoteContent2 = getCurrentNoteContent();
  try {
    const response = await (0, import_obsidian3.requestUrl)({
      url: "https://api.mistral.ai/v1/chat/completions",
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${settings.APIConnections.mistral.APIKey}`
      },
      body: JSON.stringify({
        model: settings.general.model,
        messages: [
          { role: "system", content: referenceCurrentNoteContent2 + settings.general.system_role + prompt },
          ...messageHistoryAtIndex
        ],
        max_tokens: parseInt(settings.general.max_tokens) || 4096,
        temperature: parseInt(settings.general.temperature)
      })
    });
    const message = response.json.choices[0].message.content;
    const messageContainerEl2 = document.querySelector("#messageContainer");
    if (messageContainerEl2) {
      const targetUserMessage = messageContainerElDivs[index != null ? index : messageHistory.length - 1];
      const targetBotMessage = targetUserMessage.nextElementSibling;
      const messageBlock = targetBotMessage == null ? void 0 : targetBotMessage.querySelector(".messageBlock");
      const loadingEl = targetBotMessage == null ? void 0 : targetBotMessage.querySelector("#loading");
      if (messageBlock) {
        if (loadingEl) {
          targetBotMessage == null ? void 0 : targetBotMessage.removeChild(loadingEl);
        }
        messageBlock.innerHTML = marked(message, { breaks: true });
        addParagraphBreaks(messageBlock);
        prismHighlighting(messageBlock);
        codeBlockCopyButton(messageBlock);
        targetBotMessage == null ? void 0 : targetBotMessage.appendChild(messageBlock);
      }
      targetBotMessage == null ? void 0 : targetBotMessage.scrollIntoView({ behavior: "smooth", block: "start" });
    }
    addMessage(message, "botMessage", settings, index);
    return;
  } catch (error) {
    const targetUserMessage = messageContainerElDivs[index != null ? index : messageHistory.length - 1];
    const targetBotMessage = targetUserMessage.nextElementSibling;
    targetBotMessage == null ? void 0 : targetBotMessage.remove();
    const messageContainer = document.querySelector("#messageContainer");
    const botMessageDiv2 = displayErrorBotMessage(settings, messageHistory, error);
    messageContainer.appendChild(botMessageDiv2);
  }
}
async function fetchMistralDataStream(settings, index) {
  abortController = new AbortController();
  let message = "";
  let isScroll = false;
  let prompt = await getPrompt(settings);
  if (prompt == void 0) {
    prompt = "";
  }
  const filteredMessageHistory = filterMessageHistory(messageHistory);
  const messageHistoryAtIndex = removeConsecutiveUserRoles(filteredMessageHistory);
  const messageContainerEl = document.querySelector("#messageContainer");
  const messageContainerElDivs = document.querySelectorAll("#messageContainer div.userMessage, #messageContainer div.botMessage");
  const botMessageDiv = displayLoadingBotMessage(settings);
  messageContainerEl == null ? void 0 : messageContainerEl.insertBefore(botMessageDiv, messageContainerElDivs[index + 1]);
  botMessageDiv.scrollIntoView({ behavior: "smooth", block: "start" });
  await getActiveFileContent(settings);
  const referenceCurrentNoteContent2 = getCurrentNoteContent();
  try {
    const response = await fetch("https://api.mistral.ai/v1/chat/completions", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${settings.APIConnections.mistral.APIKey}`
      },
      body: JSON.stringify({
        model: settings.general.model,
        messages: [
          { role: "system", content: referenceCurrentNoteContent2 + settings.general.system_role + prompt },
          ...messageHistoryAtIndex
        ],
        stream: true,
        temperature: parseInt(settings.general.temperature),
        max_tokens: parseInt(settings.general.max_tokens) || 4096
      }),
      signal: abortController.signal
    });
    if (!response.ok) {
      new import_obsidian3.Notice(`HTTP error! Status: ${response.status}`);
      throw new Error(`HTTP error! Status: ${response.status}`);
    }
    if (!response.body) {
      new import_obsidian3.Notice("Response body is null or undefined.");
      throw new Error("Response body is null or undefined.");
    }
    const reader = response.body.getReader();
    const decoder = new TextDecoder();
    let reading = true;
    while (reading) {
      const { done, value } = await reader.read();
      if (done) {
        reading = false;
        break;
      }
      const chunk = decoder.decode(value, { stream: false }) || "";
      const parts = chunk.split("\n");
      for (const part of parts.filter(Boolean)) {
        if (part.includes("data: [DONE]")) {
          break;
        }
        let parsedChunk;
        try {
          parsedChunk = JSON.parse(part.replace(/^data: /, ""));
          if (parsedChunk.choices[0].finish_reason !== "stop") {
            const content = parsedChunk.choices[0].delta.content;
            message += content;
          }
        } catch (err) {
          console.error("Error parsing JSON:", err);
          console.log("Part with error:", part);
          parsedChunk = { response: "{_e_}" };
        }
      }
      const messageContainerEl2 = document.querySelector("#messageContainer");
      if (messageContainerEl2) {
        const targetUserMessage = messageContainerElDivs[index != null ? index : messageHistory.length - 1];
        const targetBotMessage = targetUserMessage.nextElementSibling;
        const messageBlock = targetBotMessage == null ? void 0 : targetBotMessage.querySelector(".messageBlock");
        const loadingEl = targetBotMessage == null ? void 0 : targetBotMessage.querySelector("#loading");
        if (messageBlock) {
          if (loadingEl) {
            targetBotMessage == null ? void 0 : targetBotMessage.removeChild(loadingEl);
          }
          messageBlock.innerHTML = marked(message, { breaks: true });
          addParagraphBreaks(messageBlock);
          prismHighlighting(messageBlock);
          codeBlockCopyButton(messageBlock);
        }
        messageContainerEl2.addEventListener("wheel", (event) => {
          if (event.deltaY < 0 || event.deltaY > 0) {
            isScroll = true;
          }
        });
        if (!isScroll) {
          targetBotMessage == null ? void 0 : targetBotMessage.scrollIntoView({ behavior: "auto", block: "start" });
        }
      }
    }
    addMessage(message, "botMessage", settings, index);
  } catch (error) {
    addMessage(message, "botMessage", settings, index);
    new import_obsidian3.Notice(error);
    console.error(error);
  }
}
async function fetchGoogleGeminiData(settings, index) {
  let prompt = await getPrompt(settings);
  if (prompt == void 0) {
    prompt = "";
  }
  const filteredMessageHistory = filterMessageHistory(messageHistory);
  const messageHistoryAtIndex = removeConsecutiveUserRoles(filteredMessageHistory);
  const messageContainerEl = document.querySelector("#messageContainer");
  const messageContainerElDivs = document.querySelectorAll("#messageContainer div.userMessage, #messageContainer div.botMessage");
  const botMessageDiv = displayLoadingBotMessage(settings);
  messageContainerEl == null ? void 0 : messageContainerEl.insertBefore(botMessageDiv, messageContainerElDivs[index + 1]);
  botMessageDiv.scrollIntoView({ behavior: "smooth", block: "start" });
  await getActiveFileContent(settings);
  const referenceCurrentNoteContent2 = getCurrentNoteContent();
  const convertMessageHistory = (messageHistory2, referenceCurrentNoteContent3) => {
    const modifiedMessageHistory = [...messageHistory2];
    const lastUserMessageIndex = modifiedMessageHistory.map((message, index2) => ({ role: message.role, index: index2 })).filter((message) => message.role === "user").map((message) => message.index).pop();
    if (lastUserMessageIndex !== void 0) {
      modifiedMessageHistory[lastUserMessageIndex].content += "\n\n" + referenceCurrentNoteContent3 + "\n\n" + settings.general.system_role + "\n\n" + prompt;
    }
    const contents = modifiedMessageHistory.map(({ role, content }) => ({
      role: role === "assistant" ? "model" : role,
      // Convert "assistant" to "model"
      parts: [{ text: content }]
    }));
    return { contents };
  };
  const convertedMessageHistory = convertMessageHistory(messageHistoryAtIndex, referenceCurrentNoteContent2);
  try {
    const API_KEY = settings.APIConnections.googleGemini.APIKey;
    const response = await (0, import_obsidian3.requestUrl)({
      url: `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_KEY}`,
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        contents: [
          ...convertedMessageHistory.contents
        ],
        generationConfig: {
          stopSequences: "",
          temperature: parseInt(settings.general.temperature),
          maxOutputTokens: settings.general.max_tokens || 4096,
          topP: 0.8,
          topK: 10
        }
      })
    });
    const message = response.json.candidates[0].content.parts[0].text;
    const messageContainerEl2 = document.querySelector("#messageContainer");
    if (messageContainerEl2) {
      const targetUserMessage = messageContainerElDivs[index != null ? index : messageHistory.length - 1];
      const targetBotMessage = targetUserMessage.nextElementSibling;
      const messageBlock = targetBotMessage == null ? void 0 : targetBotMessage.querySelector(".messageBlock");
      const loadingEl = targetBotMessage == null ? void 0 : targetBotMessage.querySelector("#loading");
      if (messageBlock) {
        if (loadingEl) {
          targetBotMessage == null ? void 0 : targetBotMessage.removeChild(loadingEl);
        }
        messageBlock.innerHTML = marked(message, { breaks: true });
        addParagraphBreaks(messageBlock);
        prismHighlighting(messageBlock);
        codeBlockCopyButton(messageBlock);
        targetBotMessage == null ? void 0 : targetBotMessage.appendChild(messageBlock);
      }
      targetBotMessage == null ? void 0 : targetBotMessage.scrollIntoView({ behavior: "smooth", block: "start" });
    }
    addMessage(message, "botMessage", settings, index);
    return;
  } catch (error) {
    const targetUserMessage = messageContainerElDivs[index != null ? index : messageHistory.length - 1];
    const targetBotMessage = targetUserMessage.nextElementSibling;
    targetBotMessage == null ? void 0 : targetBotMessage.remove();
    const messageContainer = document.querySelector("#messageContainer");
    const botMessageDiv2 = displayErrorBotMessage(settings, messageHistory, error);
    messageContainer.appendChild(botMessageDiv2);
  }
}
async function fetchAnthropicAPIData(settings, index) {
  const headers = {
    "anthropic-version": "2023-06-01",
    "content-type": "application/json",
    "x-api-key": settings.APIConnections.anthropic.APIKey
  };
  let prompt = await getPrompt(settings);
  if (prompt == void 0) {
    prompt = "";
  }
  const filteredMessageHistory = filterMessageHistory(messageHistory);
  const messageHistoryAtIndex = removeConsecutiveUserRoles(filteredMessageHistory);
  const messageHistoryAtIndexString = messageHistoryAtIndex.map((entry) => entry.content).join("\n");
  const messageContainerEl = document.querySelector("#messageContainer");
  const messageContainerElDivs = document.querySelectorAll("#messageContainer div.userMessage, #messageContainer div.botMessage");
  const botMessageDiv = displayLoadingBotMessage(settings);
  messageContainerEl == null ? void 0 : messageContainerEl.insertBefore(botMessageDiv, messageContainerElDivs[index + 1]);
  botMessageDiv.scrollIntoView({ behavior: "smooth", block: "start" });
  await getActiveFileContent(settings);
  const referenceCurrentNoteContent2 = getCurrentNoteContent();
  const requestBody = {
    model: settings.general.model,
    prompt: `

Human: ${referenceCurrentNoteContent2}

${settings.general.system_role}

${prompt}

${messageHistoryAtIndexString}

Assistant:`,
    max_tokens_to_sample: parseInt(settings.general.max_tokens) || 1e5,
    temperature: parseInt(settings.general.temperature),
    stream: true
  };
  try {
    const response = await (0, import_obsidian3.requestUrl)({
      url: "https://api.anthropic.com/v1/complete",
      method: "POST",
      headers,
      body: JSON.stringify(requestBody)
    });
    const message = response.text;
    const lines = message.split("\n");
    let completionText = "";
    for (const line of lines) {
      if (line.startsWith("data:")) {
        const eventData = JSON.parse(line.slice("data:".length));
        if (eventData.completion) {
          completionText += eventData.completion;
        }
      }
    }
    const messageContainerEl2 = document.querySelector("#messageContainer");
    if (messageContainerEl2) {
      const targetUserMessage = messageContainerElDivs[index];
      const targetBotMessage = targetUserMessage.nextElementSibling;
      const messageBlock = targetBotMessage == null ? void 0 : targetBotMessage.querySelector(".messageBlock");
      const loadingEl = targetBotMessage == null ? void 0 : targetBotMessage.querySelector("#loading");
      if (messageBlock) {
        if (loadingEl) {
          targetBotMessage == null ? void 0 : targetBotMessage.removeChild(loadingEl);
        }
        messageBlock.innerHTML = marked(completionText);
        addParagraphBreaks(messageBlock);
        prismHighlighting(messageBlock);
        codeBlockCopyButton(messageBlock);
      }
      targetBotMessage == null ? void 0 : targetBotMessage.scrollIntoView({ behavior: "smooth", block: "start" });
    }
    addMessage("\n\nAssistant: " + completionText, "botMessage", settings, index);
  } catch (error) {
    const targetUserMessage = messageContainerElDivs[index != null ? index : messageHistory.length - 1];
    const targetBotMessage = targetUserMessage.nextElementSibling;
    targetBotMessage == null ? void 0 : targetBotMessage.remove();
    const messageContainer = document.querySelector("#messageContainer");
    const botMessageDiv2 = displayErrorBotMessage(settings, messageHistory, error);
    messageContainer.appendChild(botMessageDiv2);
  }
}
function getAbortController() {
  return abortController;
}
function ollamaParametersOptions(settings) {
  return {
    mirostat: parseInt(settings.OllamaConnection.ollamaParameters.mirostat),
    mirostat_eta: parseFloat(settings.OllamaConnection.ollamaParameters.mirostat_eta),
    mirostat_tau: parseFloat(settings.OllamaConnection.ollamaParameters.mirostat_tau),
    num_ctx: parseInt(settings.OllamaConnection.ollamaParameters.num_ctx),
    num_gqa: parseInt(settings.OllamaConnection.ollamaParameters.num_gqa),
    num_thread: parseInt(settings.OllamaConnection.ollamaParameters.num_thread),
    repeat_last_n: parseInt(settings.OllamaConnection.ollamaParameters.repeat_last_n),
    repeat_penalty: parseFloat(settings.OllamaConnection.ollamaParameters.repeat_penalty),
    temperature: parseInt(settings.general.temperature),
    seed: parseInt(settings.OllamaConnection.ollamaParameters.seed),
    stop: settings.OllamaConnection.ollamaParameters.stop,
    tfs_z: parseFloat(settings.OllamaConnection.ollamaParameters.tfs_z),
    num_predict: parseInt(settings.general.max_tokens) || -1,
    top_k: parseInt(settings.OllamaConnection.ollamaParameters.top_k),
    top_p: parseFloat(settings.OllamaConnection.ollamaParameters.top_p)
  };
}
function filterMessageHistory(messageHistory2) {
  const skipIndexes = /* @__PURE__ */ new Set();
  messageHistory2.forEach((message, index, array) => {
    if (message.role === "user" && message.content.includes("/")) {
      skipIndexes.add(index);
      if (index + 1 < array.length && array[index + 1].role === "assistant") {
        skipIndexes.add(index + 1);
      }
    } else if (message.role === "assistant" && message.content.includes("errorBotMessage")) {
      skipIndexes.add(index);
      if (index > 0) {
        skipIndexes.add(index - 1);
      }
    }
  });
  const filteredMessageHistory = messageHistory2.filter((_, index) => !skipIndexes.has(index));
  return filteredMessageHistory;
}
function removeConsecutiveUserRoles(messageHistory2) {
  const result = [];
  let foundUserMessage = false;
  for (let i = 0; i < messageHistory2.length; i++) {
    if (messageHistory2[i].role === "user") {
      if (!foundUserMessage) {
        result.push(messageHistory2[i]);
        foundUserMessage = true;
      } else {
        break;
      }
    } else {
      result.push(messageHistory2[i]);
      foundUserMessage = false;
    }
  }
  return result;
}

// src/components/chat/Commands.ts
var import_obsidian5 = require("obsidian");

// src/components/editor/FetchRenameNoteTitle.ts
var import_obsidian4 = require("obsidian");
async function fetchModelRenameTitle(settings, referenceCurrentNoteContent2) {
  var _a2, _b;
  const clearYamlContent = referenceCurrentNoteContent2.replace(/---[\s\S]+?---/, "").trim();
  const prompt = `You are a title generator. You will give succinct titles that does not contain backslashes,
                    forward slashes, or colons. Generate a title as your response.

`;
  try {
    if (OPENAI_MODELS.includes(settings.general.model) || settings.APIConnections.openAI.openAIBaseModels.includes(settings.general.model)) {
      const openai = new openai_default({
        apiKey: settings.APIConnections.openAI.APIKey,
        baseURL: settings.APIConnections.openAI.openAIBaseUrl,
        dangerouslyAllowBrowser: true
        // apiKey is stored within data.json
      });
      const chatCompletion = await openai.chat.completions.create({
        model: settings.general.model,
        max_tokens: 40,
        messages: [
          { role: "system", content: prompt + clearYamlContent },
          { role: "user", content: "" }
        ]
      });
      let title = chatCompletion.choices[0].message.content;
      if (title) {
        title = title.replace(/[\\/:"]/g, "");
      }
      return title;
    } else if (settings.OllamaConnection.RESTAPIURL && settings.OllamaConnection.ollamaModels.includes(settings.general.model)) {
      const url = settings.OllamaConnection.RESTAPIURL + "/api/generate";
      const requestBody = {
        prompt: prompt + "\n\n" + clearYamlContent + "\n\n",
        model: settings.general.model,
        stream: false,
        options: {
          temperature: parseInt(settings.general.temperature),
          num_predict: 25
        }
      };
      const response = await (0, import_obsidian4.requestUrl)({
        url,
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(requestBody)
      });
      const parseText = JSON.parse(response.text);
      let title = parseText.response;
      if (title) {
        title = title.replace(/[\\/:"]/g, "");
      }
      return title;
    } else if (settings.RESTAPIURLConnection.RESTAPIURLModels.includes(settings.general.model)) {
      const urls = [
        settings.RESTAPIURLConnection.RESTAPIURL + "/v1/chat/completions",
        settings.RESTAPIURLConnection.RESTAPIURL + "/api/v1/chat/completions"
      ];
      let lastError = null;
      for (const url of urls) {
        try {
          const response = await (0, import_obsidian4.requestUrl)({
            url,
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "Authorization": `Bearer ${settings.RESTAPIURLConnection.APIKey}`
            },
            body: JSON.stringify({
              model: settings.general.model,
              messages: [
                { role: "system", content: prompt + clearYamlContent },
                { role: "user", content: "\n" }
              ],
              max_tokens: 40
            })
          });
          let title = response.json.choices[0].message.content;
          if (title) {
            title = title.replace(/[\\/:"]/g, "");
          }
          return title;
        } catch (error) {
          lastError = error;
        }
      }
      if (lastError) {
        console.error("Error making API request:", lastError);
        throw lastError;
      }
    } else if (settings.APIConnections.mistral.mistralModels.includes(settings.general.model)) {
      try {
        const response = await (0, import_obsidian4.requestUrl)({
          url: "https://api.mistral.ai/v1/chat/completions",
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${settings.APIConnections.mistral.APIKey}`
          },
          body: JSON.stringify({
            model: settings.general.model,
            messages: [
              { role: "system", content: prompt + clearYamlContent },
              { role: "user", content: "\n" }
            ],
            max_tokens: 40
          })
        });
        let title = response.json.choices[0].message.content;
        if (title) {
          title = title.replace(/[\\/:"]/g, "");
        }
        return title;
      } catch (error) {
        console.error(error);
      }
    } else if (settings.APIConnections.googleGemini.geminiModels.includes(settings.general.model)) {
      try {
        const API_KEY = settings.APIConnections.googleGemini.APIKey;
        const requestBody = {
          contents: [{
            parts: [
              { text: prompt + clearYamlContent }
            ]
          }]
        };
        const response = await (0, import_obsidian4.requestUrl)({
          url: `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_KEY}`,
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(requestBody)
        });
        let title = response.json.candidates[0].content.parts[0].text;
        if (title) {
          title = title.replace(/[\\/:"]/g, "");
        }
        return title;
      } catch (error) {
        console.error(error);
      }
    } else if (ANTHROPIC_MODELS.includes(settings.general.model)) {
      const headers = {
        "anthropic-version": "2023-06-01",
        "content-type": "application/json",
        "x-api-key": settings.APIConnections.anthropic.APIKey
      };
      const requestBody = {
        model: settings.general.model,
        prompt: `

Human: ${prompt}

Assistant:`,
        max_tokens_to_sample: 40,
        temperature: parseInt(settings.general.temperature),
        stream: true
      };
      try {
        const response = await (0, import_obsidian4.requestUrl)({
          url: "https://api.anthropic.com/v1/complete",
          method: "POST",
          headers,
          body: JSON.stringify(requestBody)
        });
        const message = response.text;
        const lines = message.split("\n");
        let title = "";
        for (const line of lines) {
          if (line.startsWith("data:")) {
            const eventData = JSON.parse(line.slice("data:".length));
            if (eventData.completion) {
              title += eventData.completion;
            }
          }
        }
        if (title) {
          title = title.replace(/[\\/:"]/g, "");
        }
        return title;
      } catch (error) {
        new import_obsidian4.Notice("Error making API request:", error);
        console.error("Error making API request:", error);
        throw error;
      }
    } else {
      throw new Error("Invalid model selected for renaming note title. Please check your settings.");
    }
  } catch (error) {
    console.log("ERROR");
    throw new Error(((_b = (_a2 = error.response) == null ? void 0 : _a2.data) == null ? void 0 : _b.error) || error.message);
  }
}

// src/components/chat/Commands.ts
function executeCommand(input, settings, plugin) {
  const command = input.split(" ")[0];
  switch (command) {
    case "/commands":
    case "/help":
    case "/h":
      commandHelp(settings);
      break;
    case "/model":
    case "/models":
      return commandModel(input, settings, plugin);
    case "/prompt":
    case "/prompts":
      return commandPrompt(input, settings, plugin);
    case "/reference":
    case "/ref":
      commandReference(input, settings, plugin);
      break;
    case "/temp":
      commandTemperature(input, settings, plugin);
      break;
    case "/maxtokens":
      commandMaxTokens(input, settings, plugin);
      break;
    case "/system":
      commandSystem(input, settings, plugin);
      break;
    case "/append":
      commandAppend(settings);
      break;
    case "/save":
      commandSave(settings);
      break;
    case "/clear":
    case "/c":
      removeMessageThread(0);
      break;
    case "/stop":
    case "/s":
      commandStop();
      break;
    default:
      commandFalse(settings, plugin);
  }
}
async function commandFalse(settings, plugin) {
  const messageContainer = document.querySelector("#messageContainer");
  const botMessageDiv = displayCommandBotMessage(settings, messageHistory, "Command not recognized.");
  messageContainer.appendChild(botMessageDiv);
  await plugin.saveSettings();
}
function commandHelp(settings) {
  const commandBotMessage = `<h2>Commands</h2>
  <p><code>/model "[MODEL-NAME]" or [VALUE]</code> - List or change model.</p>
  <p><code>/prompt "[PROMPT-NAME]" or [VALUE]</code> - List or change prompt.</p>
  <p><code>/prompt clear</code> - Clear prompt.</p>
  <p><code>/system "[PROMPT]"</code> - Change system setting.</p>
  <p><code>/maxtokens [VALUE]</code> - Set max tokens.</p>
  <p><code>/temp [VALUE]</code> - Change temperature range 0 from to 1.</p>
  <p><code>/ref on | off</code> - Turn on or off "reference current note".</p>
  <p><code>/append</code> - Append current chat history to current active note.</p>
  <p><code>/save</code> - Save current chat history to a note.</p>
  <p><code>/clear</code> or <code>/c</code> - Clear chat history.</p>
  <p><code>/stop</code> or <code>/s</code> - [STREAMING MODELS ONLY]: Stop fetching response.</p>`;
  const messageContainer = document.querySelector("#messageContainer");
  const botMessageDiv = displayCommandBotMessage(settings, messageHistory, commandBotMessage);
  messageContainer.appendChild(botMessageDiv);
}
async function commandModel(input, settings, plugin) {
  const messageContainer = document.querySelector("#messageContainer");
  if (!input.split(" ")[1]) {
    const modelListItems = settings.allModels.map((model) => `<li>${model}</li>`).join("");
    let currentModel = settings.general.model;
    if (!currentModel) {
      currentModel = "Empty";
    }
    const commandBotMessage = `<h2>Models</h2>
    <p><b>Current Model:</b> ${currentModel}</p>
    <ol>${modelListItems}</ol>`;
    const botMessageDiv = displayCommandBotMessage(settings, messageHistory, commandBotMessage);
    messageContainer.appendChild(botMessageDiv);
  }
  if (input.split(" ")[1] !== void 0) {
    const inputModel = input.split(" ")[1].replace(/^"(.*)"$/, "$1");
    const modelAliases = {};
    for (let i = 1; i <= settings.allModels.length; i++) {
      const model = settings.allModels[i - 1];
      modelAliases[i] = model;
    }
    if (Object.entries(modelAliases).find(([key, val]) => key === inputModel)) {
      settings.general.model = modelAliases[inputModel];
      const commandBotMessage = `Updated Model to <b>${settings.general.model}</b>`;
      const botMessageDiv = displayCommandBotMessage(settings, messageHistory, commandBotMessage);
      messageContainer.appendChild(botMessageDiv);
    } else if (Object.entries(modelAliases).find(([key, val]) => val === inputModel)) {
      settings.general.model = modelAliases[Object.keys(modelAliases).find((key) => modelAliases[key] === inputModel) || ""];
      const commandBotMessage = `Updated Model to <b>${settings.general.model}</b>`;
      const botMessageDiv = displayCommandBotMessage(settings, messageHistory, commandBotMessage);
      messageContainer.appendChild(botMessageDiv);
    } else {
      const commandBotMessage = `Model '${inputModel}' does not exist for this API key.`;
      const botMessageDiv = displayCommandBotMessage(settings, messageHistory, commandBotMessage);
      messageContainer.appendChild(botMessageDiv);
      new import_obsidian5.Notice("Invalid model.");
    }
    await plugin.saveSettings();
    return settings;
  }
}
async function commandPrompt(input, settings, plugin) {
  const messageContainer = document.querySelector("#messageContainer");
  if (!settings.prompts.promptFolderPath) {
    new import_obsidian5.Notice("Prompt folder path not set.");
    const commandBotMessage = "<p>Prompt folder path not set.</p>";
    const botMessageDiv = displayCommandBotMessage(settings, messageHistory, commandBotMessage);
    messageContainer.appendChild(botMessageDiv);
    return;
  }
  const files = app.vault.getFiles().filter((file) => file.path.startsWith(plugin.settings.prompts.promptFolderPath));
  files.sort((a, b) => a.name.localeCompare(b.name));
  if (!input.split(" ")[1]) {
    const fileListItems = files.map((file) => {
      const fileNameWithoutExtension = file.name.replace(/\.[^/.]+$/, "");
      return `<li>${fileNameWithoutExtension}</li>`;
    }).join("");
    let currentPrompt = settings.prompts.prompt.replace(/\.[^/.]+$/, "");
    if (!currentPrompt) {
      currentPrompt = "Empty";
    }
    const commandBotMessage = `<h2>Prompts</h2>
      <p><b>Current prompt:</b> ${currentPrompt}</p>
      <ol>${fileListItems}</ol>`;
    const botMessageDiv = displayCommandBotMessage(settings, messageHistory, commandBotMessage);
    messageContainer.appendChild(botMessageDiv);
    return;
  }
  if (input.startsWith("/prompt")) {
    let inputValue = input.substring("/prompt ".length).trim();
    if (inputValue.startsWith('"') && inputValue.endsWith('"') || inputValue.startsWith("'") && inputValue.endsWith("'")) {
      inputValue = inputValue.substring(1, inputValue.length - 1);
    }
    if (inputValue === "clear" || inputValue === "c") {
      settings.prompts.prompt = "";
      const commandBotMessage = "Prompt cleared.";
      const botMessageDiv = displayCommandBotMessage(settings, messageHistory, commandBotMessage);
      messageContainer.appendChild(botMessageDiv);
      await plugin.saveSettings();
      return settings;
    }
    const promptAliases = {};
    for (let i = 1; i <= files.length; i++) {
      const fileNameWithoutExtension = files[i - 1].name.replace(/\.[^/.]+$/, "");
      promptAliases[i.toString()] = fileNameWithoutExtension;
    }
    let currentModel;
    if (promptAliases[inputValue]) {
      settings.prompts.prompt = promptAliases[inputValue] + ".md";
      currentModel = settings.prompts.prompt.replace(/\.[^/.]+$/, "");
      const commandBotMessage = `<b>Updated Prompt to</b> '${currentModel}'`;
      const botMessageDiv = displayCommandBotMessage(settings, messageHistory, commandBotMessage);
      messageContainer.appendChild(botMessageDiv);
    } else if (Object.values(promptAliases).includes(inputValue)) {
      settings.prompts.prompt = inputValue + ".md";
      currentModel = settings.prompts.prompt.replace(/\.[^/.]+$/, "");
      const commandBotMessage = `<b>Updated Prompt to</b> '${currentModel}'`;
      const botMessageDiv = displayCommandBotMessage(settings, messageHistory, commandBotMessage);
      messageContainer.appendChild(botMessageDiv);
    } else {
      const commandBotMessage = `Prompt '${inputValue}' does not exist.`;
      const botMessageDiv = displayCommandBotMessage(settings, messageHistory, commandBotMessage);
      messageContainer.appendChild(botMessageDiv);
      new import_obsidian5.Notice("Invalid prompt.");
    }
    await plugin.saveSettings();
    return settings;
  }
}
async function commandReference(input, settings, plugin) {
  var _a2;
  let commandBotMessage = "";
  const referenceCurrentNoteElement = document.getElementById("referenceCurrentNote");
  const inputValue = (_a2 = input.split(" ")[1]) == null ? void 0 : _a2.toLowerCase();
  if (inputValue === "true" || inputValue === "on") {
    settings.general.allowReferenceCurrentNote = true;
    if (referenceCurrentNoteElement) {
      referenceCurrentNoteElement.style.display = "block";
    }
    commandBotMessage += "<p><strong>Reference updated: on</strong></p>";
  } else if (inputValue === "false" || inputValue === "off") {
    settings.general.allowReferenceCurrentNote = false;
    if (referenceCurrentNoteElement) {
      referenceCurrentNoteElement.style.display = "none";
    }
    commandBotMessage += "<p><strong>Reference updated: off</strong></p>";
  } else {
    commandBotMessage += "<p><strong>Type `/ref on` or `/ref off` to turn on/off reference current note.</strong></p>";
  }
  const messageContainer = document.querySelector("#messageContainer");
  const botMessageDiv = displayCommandBotMessage(settings, messageHistory, commandBotMessage);
  messageContainer.appendChild(botMessageDiv);
  await plugin.saveSettings();
}
async function commandTemperature(input, settings, plugin) {
  const inputValue = input.split(" ")[1];
  const floatValue = parseFloat(inputValue);
  let temperatureSettingMessage;
  if (settings && !isNaN(floatValue)) {
    if (floatValue < 0) {
      settings.general.temperature = "0.00";
    } else if (floatValue > 2) {
      settings.general.temperature = "2.00";
    } else {
      settings.general.temperature = floatValue.toFixed(2);
    }
    temperatureSettingMessage = `Temperature updated: ${settings.general.temperature}`;
  } else {
    temperatureSettingMessage = `Current temperature: ${settings.general.temperature}`;
  }
  const commandBotMessage = `<p><strong>${temperatureSettingMessage}</strong></p>`;
  const messageContainer = document.querySelector("#messageContainer");
  const botMessageDiv = displayCommandBotMessage(settings, messageHistory, commandBotMessage);
  messageContainer.appendChild(botMessageDiv);
  await plugin.saveSettings();
}
async function commandMaxTokens(input, settings, plugin) {
  let commandBotMessage = "";
  const commandParts = input.split(" ");
  const commandAction = commandParts[1] ? commandParts[1].toLowerCase() : "";
  let maxTokensSettingMessage;
  if (commandAction === "c" || commandAction === "clear") {
    settings.general.max_tokens = "";
    maxTokensSettingMessage = "Max tokens cleared.";
  } else if (commandAction !== "") {
    const inputValue = parseInt(commandAction);
    if (!isNaN(inputValue) && inputValue >= 0) {
      settings.general.max_tokens = inputValue.toString();
      maxTokensSettingMessage = `Max tokens updated: ${inputValue}`;
    } else {
      maxTokensSettingMessage = "Max tokens update: invalid";
    }
  } else {
    if (settings.general.max_tokens === "") {
      maxTokensSettingMessage = "Current max tokens: Empty";
    } else {
      maxTokensSettingMessage = `Current max tokens: ${settings.general.max_tokens}`;
    }
  }
  commandBotMessage += `<p><strong>${maxTokensSettingMessage}</strong></p>`;
  const messageContainer = document.querySelector("#messageContainer");
  const botMessageDiv = displayCommandBotMessage(settings, messageHistory, commandBotMessage);
  messageContainer.appendChild(botMessageDiv);
  await plugin.saveSettings();
}
async function commandSystem(input, settings, plugin) {
  let commandBotMessage = "";
  const commandParts = input.split(" ");
  const commandAction = commandParts[1] ? commandParts[1].toLowerCase() : "";
  let systemSettingMessage;
  if (commandAction === "c" || commandAction === "clear") {
    settings.general.system_role = "";
    systemSettingMessage = "System cleared.";
  } else if (commandAction !== "") {
    const systemPromptValue = input.match(/['"]([^'"]+)['"]/) || [null, commandAction];
    if (systemPromptValue[1] !== null) {
      settings.general.system_role = systemPromptValue[1];
      systemSettingMessage = `System updated: "${systemPromptValue[1]}"`;
    } else {
      systemSettingMessage = `Current system: "${settings.general.system_role}"`;
    }
  } else {
    systemSettingMessage = `Current system: "${settings.general.system_role}"`;
  }
  commandBotMessage += `<p><strong>${systemSettingMessage}</strong></p>`;
  const messageContainer = document.querySelector("#messageContainer");
  const botMessageDiv = displayCommandBotMessage(settings, messageHistory, commandBotMessage);
  messageContainer.appendChild(botMessageDiv);
  await plugin.saveSettings();
}
async function commandAppend(settings) {
  let markdownContent = "";
  const activeFile = app.workspace.getActiveFile();
  if ((activeFile == null ? void 0 : activeFile.extension) === "md") {
    const existingContent = await app.vault.read(activeFile);
    const userNames = document.querySelectorAll(".userName");
    let userNameText = "USER";
    if (userNames.length > 0) {
      const userNameNode = userNames[0];
      Array.from(userNameNode.childNodes).forEach((node) => {
        if (node.nodeType === Node.TEXT_NODE && node.textContent) {
          userNameText = node.textContent.trim().toUpperCase();
        }
      });
    }
    const chatbotNames = document.querySelectorAll(".chatbotName");
    const chatbotNameText = chatbotNames.length > 0 && chatbotNames[0].textContent ? chatbotNames[0].textContent.toUpperCase() : "ASSISTANT";
    if (await this.app.vault.adapter.exists(filenameMessageHistoryJSON)) {
      try {
        const jsonContent = await this.app.vault.adapter.read(filenameMessageHistoryJSON);
        const messages = JSON.parse(jsonContent);
        let skipNext = false;
        markdownContent += messages.filter((messageHistory2, index, array) => {
          if (skipNext && messageHistory2.role === "assistant") {
            skipNext = false;
            return false;
          }
          if (messageHistory2.content.startsWith("/") || messageHistory2.content.includes("errorBotMessage")) {
            skipNext = index + 1 < array.length && array[index + 1].role === "assistant" || messageHistory2.role === "assistant";
            return false;
          }
          return true;
        }).map((message) => {
          let roleText = message.role.toUpperCase();
          roleText = roleText === "USER" ? userNameText : roleText;
          roleText = roleText === "ASSISTANT" ? chatbotNameText : roleText;
          return `###### ${roleText}
${message.content}
`;
        }).join("\n");
        const commandBotMessage = "<p><strong>Message history appended.</strong></p>";
        const messageContainer = document.querySelector("#messageContainer");
        const botMessageDiv = displayCommandBotMessage(settings, messageHistory, commandBotMessage);
        messageContainer.appendChild(botMessageDiv);
      } catch (error) {
        const messageContainer = document.querySelector("#messageContainer");
        const botMessageDiv = displayCommandBotMessage(settings, messageHistory, error);
        messageContainer.appendChild(botMessageDiv);
        console.error("Error processing message history:", error);
      }
    }
    const updatedContent = existingContent + "\n" + markdownContent;
    await app.vault.modify(activeFile, updatedContent);
    new import_obsidian5.Notice("Appended conversation.");
  } else {
    new import_obsidian5.Notice("No active Markdown file detected.");
  }
}
async function commandSave(settings) {
  let folderName = settings.chatHistory.chatHistoryPath;
  if (!await app.vault.adapter.exists(folderName)) {
    await app.vault.createFolder(folderName);
  }
  const baseFileName = "Chat History";
  const fileExtension = ".md";
  if (folderName && !folderName.endsWith("/")) {
    folderName += "/";
  }
  const now = new Date();
  const dateTimeStamp = now.getFullYear() + "-" + (now.getMonth() + 1).toString().padStart(2, "0") + "-" + now.getDate().toString().padStart(2, "0") + " " + now.getHours().toString().padStart(2, "0") + "-" + now.getMinutes().toString().padStart(2, "0") + "-" + now.getSeconds().toString().padStart(2, "0");
  try {
    let markdownContent = "";
    const allFiles = app.vault.getFiles();
    const modelNameElement = document.querySelector("#modelName");
    let modelName = "Unknown";
    if (modelNameElement && modelNameElement.textContent) {
      modelName = modelNameElement.textContent.replace("Model: ", "").toLowerCase();
    }
    const templateFile = allFiles.find((file2) => file2.path.toLowerCase() === settings.chatHistory.templateFilePath.toLowerCase());
    if (templateFile) {
      let fileContent = await app.vault.read(templateFile);
      if (/^---\s*[\s\S]*?---/.test(fileContent)) {
        fileContent = fileContent.replace(/^---/, `---
model: ${modelName}`);
      } else {
        fileContent = `---
  model: ${modelName}
---
` + fileContent;
      }
      markdownContent += fileContent;
    } else {
      markdownContent += `---
  model: ${modelName}
---
`;
    }
    const userNames = document.querySelectorAll(".userName");
    let userNameText = "USER";
    if (userNames.length > 0) {
      const userNameNode = userNames[0];
      Array.from(userNameNode.childNodes).forEach((node) => {
        if (node.nodeType === Node.TEXT_NODE && node.textContent) {
          userNameText = node.textContent.trim().toUpperCase();
        }
      });
    }
    const chatbotNames = document.querySelectorAll(".chatbotName");
    const chatbotNameText = chatbotNames.length > 0 && chatbotNames[0].textContent ? chatbotNames[0].textContent.toUpperCase() : "ASSISTANT";
    if (await app.vault.adapter.exists(filenameMessageHistoryJSON)) {
      try {
        const jsonContent = await this.app.vault.adapter.read(filenameMessageHistoryJSON);
        const messages = JSON.parse(jsonContent);
        let skipNext = false;
        markdownContent += messages.filter((messageHistory2, index, array) => {
          if (skipNext && messageHistory2.role === "assistant") {
            skipNext = false;
            return false;
          }
          if (messageHistory2.content.startsWith("/") || messageHistory2.content.includes("errorBotMessage")) {
            skipNext = index + 1 < array.length && array[index + 1].role === "assistant" || messageHistory2.role === "assistant";
            return false;
          }
          return true;
        }).map((message) => {
          let roleText = message.role.toUpperCase();
          roleText = roleText === "USER" ? userNameText : roleText;
          roleText = roleText === "ASSISTANT" ? chatbotNameText : roleText;
          return `###### ${roleText}
${message.content}
`;
        }).join("\n");
        const commandBotMessage = "<p><strong>Message history saved.</strong></p>";
        const messageContainer = document.querySelector("#messageContainer");
        const botMessageDiv = displayCommandBotMessage(settings, messageHistory, commandBotMessage);
        messageContainer.appendChild(botMessageDiv);
      } catch (error) {
        const messageContainer = document.querySelector("#messageContainer");
        const botMessageDiv = displayCommandBotMessage(settings, messageHistory, error);
        messageContainer.appendChild(botMessageDiv);
        console.error("Error processing message history:", error);
      }
    }
    let fileName = "";
    if (settings.chatHistory.allowRenameNoteTitle) {
      let uniqueNameFound = false;
      let modelRenameTitle;
      const fileNameExists = (name) => {
        return allFiles.some((file2) => file2.path === folderName + name + fileExtension);
      };
      while (!uniqueNameFound) {
        modelRenameTitle = await fetchModelRenameTitle(settings, markdownContent);
        if (!fileNameExists(modelRenameTitle)) {
          uniqueNameFound = true;
        }
      }
      fileName = folderName + modelRenameTitle + fileExtension;
    } else {
      fileName = folderName + baseFileName + " " + dateTimeStamp + fileExtension;
    }
    const file = await app.vault.create(fileName, markdownContent);
    if (file) {
      new import_obsidian5.Notice("Saved conversation.");
      app.workspace.openLinkText(fileName, "", true, { active: true });
    }
  } catch (error) {
    console.error("Failed to create note:", error);
  }
}
function commandStop() {
  const controller = getAbortController();
  if (controller) {
    controller.abort();
  }
}
async function removeMessageThread(index) {
  const messageContainer = document.querySelector("#messageContainer");
  const divElements = messageContainer == null ? void 0 : messageContainer.querySelectorAll("div.botMessage, div.userMessage");
  if (divElements && divElements.length > 0 && index >= 0 && index < divElements.length) {
    for (let i = index; i < divElements.length; i++) {
      messageContainer == null ? void 0 : messageContainer.removeChild(divElements[i]);
    }
  }
  messageHistory.splice(index);
  const jsonString = JSON.stringify(messageHistory, null, 4);
  try {
    await app.vault.adapter.write(filenameMessageHistoryJSON, jsonString);
  } catch (error) {
    console.error("Error writing messageHistory.json", error);
  }
}

// src/components/chat/UserMessage.ts
function displayUserMessage(settings, message) {
  const userMessageDiv = document.createElement("div");
  userMessageDiv.className = "userMessage";
  userMessageDiv.style.backgroundColor = colorToHex(settings.appearance.userMessageBackgroundColor || getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.appearance.userMessageBackgroundColor).trim());
  const userMessageToolBarDiv = document.createElement("div");
  userMessageToolBarDiv.className = "userMessageToolBar";
  const buttonContainerDiv = document.createElement("div");
  buttonContainerDiv.className = "button-container";
  const userNameSpan = document.createElement("span");
  userNameSpan.className = "userName";
  userNameSpan.textContent = settings.appearance.userName || DEFAULT_SETTINGS.appearance.userName;
  const userP = document.createElement("p");
  const regenerateButton = regenerateUserButton(settings);
  const editButton = displayUserEditButton(settings, userP);
  const copyUserButton = displayUserCopyButton(userP);
  const trashButton = displayTrashButton();
  userMessageToolBarDiv.appendChild(userNameSpan);
  userMessageToolBarDiv.appendChild(buttonContainerDiv);
  if (!message.startsWith("/")) {
    buttonContainerDiv.appendChild(regenerateButton);
    buttonContainerDiv.appendChild(editButton);
  }
  buttonContainerDiv.appendChild(copyUserButton);
  buttonContainerDiv.appendChild(trashButton);
  userMessageDiv.appendChild(userMessageToolBarDiv);
  userMessageDiv.appendChild(userP);
  if (ANTHROPIC_MODELS.includes(settings.general.model)) {
    const fullString = message;
    const cleanString = fullString.split(" ").slice(1).join(" ").trim();
    userP.innerHTML = marked(cleanString);
  } else {
    userP.innerHTML = marked(message);
  }
  return userMessageDiv;
}

// src/view.ts
var VIEW_TYPE_CHATBOT = "chatbot-view";
var filenameMessageHistoryJSON = "./.obsidian/plugins/bmo-chatbot/data/messageHistory.json";
var ANTHROPIC_MODELS = ["claude-instant-1.2", "claude-2.0", "claude-2.1"];
var OPENAI_MODELS = ["gpt-3.5-turbo", "gpt-3.5-turbo-1106", "gpt-4", "gpt-4-turbo-preview"];
var messageHistory = [];
var lastCursorPosition = {
  line: 0,
  ch: 0
};
var lastCursorPositionFile = null;
var activeEditor = null;
var BMOView = class extends import_obsidian6.ItemView {
  constructor(leaf, settings, plugin) {
    super(leaf);
    this.preventEnter = false;
    this.settings = settings;
    this.plugin = plugin;
    this.icon = "bot";
    this.addCursorLogging();
  }
  getViewType() {
    return VIEW_TYPE_CHATBOT;
  }
  getDisplayText() {
    return "BMO Chatbot";
  }
  async onOpen() {
    const container = this.containerEl.children[1];
    container.empty();
    const chatbotContainer = container.createEl("div", {
      attr: {
        class: "chatbotContainer"
      }
    });
    const header = chatbotContainer.createEl("div", {
      attr: {
        id: "header"
      }
    });
    const chatbotNameHeading = chatbotContainer.createEl("h1", {
      text: this.settings.appearance.chatbotName || DEFAULT_SETTINGS.appearance.chatbotName,
      attr: {
        id: "chatbotNameHeading"
      }
    });
    const modelName = chatbotContainer.createEl("p", {
      text: "Model: " + this.settings.general.model || DEFAULT_SETTINGS.general.model,
      attr: {
        id: "modelName"
      }
    });
    const spanElement = chatbotContainer.createEl("span", {
      attr: {
        class: "dotIndicator",
        id: "markDownBoolean"
      }
    });
    const referenceCurrentNoteElement = chatbotContainer.createEl("p", {
      text: "Reference Current Note",
      attr: {
        id: "referenceCurrentNote"
      }
    });
    referenceCurrentNoteElement.appendChild(spanElement);
    referenceCurrentNoteElement.style.display = "none";
    if (referenceCurrentNoteElement) {
      if (this.settings.general.allowReferenceCurrentNote) {
        referenceCurrentNoteElement.style.display = "block";
      } else {
        referenceCurrentNoteElement.style.display = "none";
      }
    }
    const messageContainer = chatbotContainer.createEl("div", {
      attr: {
        id: "messageContainer"
      }
    });
    header.appendChild(chatbotNameHeading);
    header.appendChild(modelName);
    if (this.settings.appearance.allowHeader) {
      header.style.display = "block";
    } else {
      header.style.display = "none";
      messageContainer.style.maxHeight = "calc(100% - 60px)";
      referenceCurrentNoteElement.style.margin = "0.5rem 0 0.5rem 0";
    }
    await loadData();
    messageContainer.id = "messageContainer";
    messageHistory.forEach(async (messageData) => {
      if (messageData.role == "user") {
        const userMessageDiv = displayUserMessage(this.settings, messageData.content);
        messageContainer.appendChild(userMessageDiv);
      }
      if (messageData.role == "assistant") {
        const botMessageDiv = displayBotMessage(this.settings, messageHistory, messageData.content);
        messageContainer.appendChild(botMessageDiv);
        const botMessages = messageContainer.querySelectorAll(".botMessage");
        const lastBotMessage = botMessages[botMessages.length - 1];
        lastBotMessage.scrollIntoView({ behavior: "smooth", block: "start" });
      }
    });
    const parentElement = document.getElementById("parentElementId");
    parentElement == null ? void 0 : parentElement.appendChild(messageContainer);
    const chatbox = chatbotContainer.createEl("div", {
      attr: {
        class: "chatbox"
      }
    });
    const textarea = document.createElement("textarea");
    textarea.setAttribute("contenteditable", true.toString());
    textarea.setAttribute("placeholder", "Start typing...");
    textarea.style.backgroundColor = this.settings.appearance.chatBoxBackgroundColor || DEFAULT_SETTINGS.appearance.chatBoxBackgroundColor;
    textarea.style.borderColor = this.settings.appearance.chatBoxBackgroundColor || DEFAULT_SETTINGS.appearance.chatBoxBackgroundColor;
    chatbox.style.backgroundColor = this.settings.appearance.chatBoxBorderColor || DEFAULT_SETTINGS.appearance.chatBoxBorderColor;
    chatbox.appendChild(textarea);
    this.textareaElement = textarea;
    this.addEventListeners();
  }
  addEventListeners() {
    this.textareaElement.addEventListener("keyup", this.handleKeyup.bind(this));
    this.textareaElement.addEventListener("keydown", this.handleKeydown.bind(this));
    this.textareaElement.addEventListener("input", this.handleInput.bind(this));
    this.textareaElement.addEventListener("blur", this.handleBlur.bind(this));
  }
  async handleKeyup(event) {
    const input = this.textareaElement.value;
    const index = messageHistory.length - 1;
    if (this.settings.OllamaConnection.allowOllamaStream || !this.settings.OllamaConnection.ollamaModels.includes(this.settings.general.model)) {
      if ((input === "/s" || input === "/stop") && event.key === "Enter") {
        this.preventEnter = false;
        executeCommand(input, this.settings, this.plugin);
      }
    }
    if (this.preventEnter === false && !event.shiftKey && event.key === "Enter") {
      loadData();
      event.preventDefault();
      if (input.length === 0) {
        return;
      }
      if (ANTHROPIC_MODELS.includes(this.settings.general.model)) {
        addMessage("\n\nHuman: " + input, "userMessage", this.settings, index);
      } else {
        if (!(input === "/s" || input === "/stop")) {
          addMessage(input, "userMessage", this.settings, index);
        }
      }
      const messageContainer = document.querySelector("#messageContainer");
      if (messageContainer) {
        const userMessageDiv = displayUserMessage(this.settings, input);
        messageContainer.appendChild(userMessageDiv);
        if (input.startsWith("/")) {
          executeCommand(input, this.settings, this.plugin);
          if (input !== "/c" && input !== "/clear") {
            const botMessages = messageContainer.querySelectorAll(".botMessage");
            const lastBotMessage = botMessages[botMessages.length - 1];
            lastBotMessage.scrollIntoView({ behavior: "smooth", block: "start" });
          }
          const modelName = document.querySelector("#modelName");
          if (modelName) {
            modelName.textContent = "Model: " + this.settings.general.model.toLowerCase();
          }
        } else {
          this.preventEnter = true;
          this.BMOchatbot().then(() => {
            this.preventEnter = false;
          }).catch(() => {
            const messageContainer2 = document.querySelector("#messageContainer");
            const botMessageDiv = displayErrorBotMessage(this.settings, messageHistory, "Oops, something went wrong. Please try again.");
            messageContainer2.appendChild(botMessageDiv);
          });
        }
      }
      this.textareaElement.value = "";
      this.textareaElement.style.height = "29px";
      this.textareaElement.value = this.textareaElement.value.replace(/^[\r\n]+|[\r\n]+$/gm, "");
      this.textareaElement.setSelectionRange(0, 0);
    }
  }
  handleKeydown(event) {
    if (event.key === "Enter" && !event.shiftKey) {
      event.preventDefault();
    }
  }
  handleInput(event) {
    this.textareaElement.style.height = "29px";
    this.textareaElement.style.height = this.textareaElement.scrollHeight + "px";
  }
  handleBlur(event) {
    if (!this.textareaElement.value) {
      this.textareaElement.style.height = "29px";
    }
  }
  exportSettings() {
    return this.settings;
  }
  addCursorLogging() {
    const updateCursorPosition = async () => {
      await getActiveFileContent(this.settings);
      const view = this.app.workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
      if (view) {
        const cursor = view.editor.getCursor();
        lastCursorPositionFile = this.app.workspace.getActiveFile();
        if (cursor != null && this.app.workspace.activeEditor != null) {
          lastCursorPosition = cursor;
          activeEditor = view.editor;
        }
      }
    };
    activeWindow.addEventListener("click", updateCursorPosition);
    activeWindow.addEventListener("keyup", updateCursorPosition);
    activeWindow.addEventListener("keydown", updateCursorPosition);
    activeWindow.addEventListener("input", updateCursorPosition);
  }
  cleanup() {
    this.textareaElement.removeEventListener("keyup", this.handleKeyup.bind(this));
    this.textareaElement.addEventListener("keydown", this.handleKeydown.bind(this));
    this.textareaElement.removeEventListener("input", this.handleInput.bind(this));
    this.textareaElement.removeEventListener("blur", this.handleBlur.bind(this));
  }
  async BMOchatbot() {
    await getActiveFileContent(this.settings);
    const index = messageHistory.length - 1;
    if (this.settings.general.model === "") {
      const errorMessage = "Model not found.";
      const messageContainer = document.querySelector("#messageContainer");
      const botMessageDiv = displayErrorBotMessage(this.settings, messageHistory, errorMessage);
      messageContainer.appendChild(botMessageDiv);
      const botMessages = messageContainer.querySelectorAll(".botMessage");
      const lastBotMessage = botMessages[botMessages.length - 1];
      lastBotMessage.scrollIntoView({ behavior: "smooth", block: "start" });
    } else {
      if (OPENAI_MODELS.includes(this.settings.general.model) || this.settings.APIConnections.openAI.openAIBaseModels.includes(this.settings.general.model) && this.settings.APIConnections.openAI.openAIBaseUrl !== DEFAULT_SETTINGS.APIConnections.openAI.openAIBaseUrl) {
        if (this.settings.APIConnections.openAI.allowOpenAIBaseUrlDataStream) {
          await fetchOpenAIAPIDataStream(this.settings, index);
        } else {
          await fetchOpenAIAPIData(this.settings, index);
        }
      } else if (this.settings.OllamaConnection.RESTAPIURL && this.settings.OllamaConnection.ollamaModels.includes(this.settings.general.model)) {
        if (this.settings.OllamaConnection.allowOllamaStream) {
          await fetchOllamaDataStream(this.settings, index);
        } else {
          await fetchOllamaData(this.settings, index);
        }
      } else if (this.settings.RESTAPIURLConnection.RESTAPIURL && this.settings.RESTAPIURLConnection.RESTAPIURLModels.includes(this.settings.general.model)) {
        if (this.settings.RESTAPIURLConnection.allowRESTAPIURLDataStream) {
          await fetchRESTAPIURLDataStream(this.settings, index);
        } else {
          await fetchRESTAPIURLData(this.settings, index);
        }
      } else if (this.settings.APIConnections.mistral.mistralModels.includes(this.settings.general.model)) {
        if (this.settings.APIConnections.mistral.allowStream) {
          await fetchMistralDataStream(this.settings, index);
        } else {
          await fetchMistralData(this.settings, index);
        }
      } else if (this.settings.APIConnections.googleGemini.geminiModels.includes(this.settings.general.model)) {
        await fetchGoogleGeminiData(this.settings, index);
      } else if (ANTHROPIC_MODELS.includes(this.settings.general.model)) {
        await fetchAnthropicAPIData(this.settings, index);
      } else {
        const errorMessage = "Connection not found.";
        const messageContainer = document.querySelector("#messageContainer");
        const botMessageDiv = displayErrorBotMessage(this.settings, messageHistory, errorMessage);
        messageContainer.appendChild(botMessageDiv);
        const botMessages = messageContainer.querySelectorAll(".botMessage");
        const lastBotMessage = botMessages[botMessages.length - 1];
        lastBotMessage.scrollIntoView({ behavior: "smooth", block: "start" });
      }
    }
  }
  async onClose() {
  }
};
async function loadData() {
  if (!await this.app.vault.adapter.exists("./.obsidian/plugins/bmo-chatbot/data/")) {
    this.app.vault.adapter.mkdir("./.obsidian/plugins/bmo-chatbot/data/");
  }
  if (await this.app.vault.adapter.exists(filenameMessageHistoryJSON)) {
    try {
      const fileContent = await this.app.vault.adapter.read(filenameMessageHistoryJSON);
      if (fileContent.trim() === "") {
        messageHistory = [];
      } else {
        messageHistory = JSON.parse(fileContent);
      }
    } catch (error) {
      console.error("Error processing message history:", error);
    }
  } else {
    messageHistory = [];
  }
}

// src/settings.ts
var import_obsidian20 = require("obsidian");

// src/components/settings/GeneralSettings.ts
var import_obsidian8 = require("obsidian");

// src/components/FetchModelList.ts
var import_obsidian7 = require("obsidian");
async function fetchOpenAIBaseModels(plugin) {
  const openai = new openai_default({
    apiKey: plugin.settings.APIConnections.openAI.APIKey,
    baseURL: plugin.settings.APIConnections.openAI.openAIBaseUrl,
    dangerouslyAllowBrowser: true
    // apiKey is stored within data.json
  });
  const list = await openai.models.list();
  const models = list.data.map((model) => model.id);
  plugin.settings.APIConnections.openAI.openAIBaseModels = models;
  return models;
}
async function fetchOllamaModels(plugin) {
  const ollamaRESTAPIURL = plugin.settings.OllamaConnection.RESTAPIURL;
  try {
    new URL(ollamaRESTAPIURL);
  } catch (error) {
    return;
  }
  try {
    const response = await (0, import_obsidian7.requestUrl)({
      url: ollamaRESTAPIURL + "/api/tags",
      method: "GET",
      headers: {
        "Content-Type": "application/json"
      }
    });
    const jsonData = response.json;
    const models = jsonData.models.map((model) => model.name);
    plugin.settings.OllamaConnection.ollamaModels = models;
    return models;
  } catch (error) {
    console.error(error);
  }
}
async function fetchRESTAPIURLModels(plugin) {
  const RESTAPIURL = plugin.settings.RESTAPIURLConnection.RESTAPIURL;
  try {
    new URL(RESTAPIURL);
  } catch (error) {
    console.error("Invalid OpenAI Rest API URL:", RESTAPIURL);
    return;
  }
  const urls = [
    RESTAPIURL + "/v1/models",
    RESTAPIURL + "/api/v1/models"
  ];
  let lastError = null;
  for (const url of urls) {
    try {
      const headers = {
        "Content-Type": "application/json"
      };
      if (plugin.settings.RESTAPIURLConnection.APIKey) {
        headers.Authorization = `Bearer ${plugin.settings.RESTAPIURLConnection.APIKey}`;
      }
      const response = await (0, import_obsidian7.requestUrl)({
        url,
        method: "GET",
        headers
      });
      if (response.json && (response.json.data || Array.isArray(response.json))) {
        let models;
        if (Array.isArray(response.json)) {
          models = response.json.map((model) => model.id);
        } else {
          models = response.json.data.map((model) => model.id);
        }
        plugin.settings.RESTAPIURLConnection.RESTAPIURLModels = models;
        return models;
      }
    } catch (error) {
      lastError = error;
    }
  }
  if (lastError) {
    console.error("Error making API request:", lastError);
    throw lastError;
  }
}
async function fetchMistralModels(plugin) {
  try {
    const response = await (0, import_obsidian7.requestUrl)({
      url: "https://api.mistral.ai/v1/models",
      method: "GET",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${plugin.settings.APIConnections.mistral.APIKey}`
      }
    });
    if (response.json && response.json.data) {
      const models = response.json.data.map((model) => model.id);
      plugin.settings.APIConnections.mistral.mistralModels = models;
      return models;
    }
  } catch (error) {
    console.error(error);
  }
}
async function fetchGoogleGeminiModels(plugin) {
  try {
    const API_KEY = plugin.settings.APIConnections.googleGemini.APIKey;
    const response = await (0, import_obsidian7.requestUrl)({
      url: `https://generativelanguage.googleapis.com/v1beta/models?key=${API_KEY}`,
      method: "GET",
      headers: {
        "Content-Type": "application/json"
      }
    });
    if (response.json && response.json.models) {
      const models = response.json.models.map((model) => model.name).filter((model) => model.endsWith("models/gemini-pro"));
      plugin.settings.APIConnections.googleGemini.geminiModels = models;
      return models;
    }
  } catch (error) {
    console.error(error);
  }
}

// src/components/settings/GeneralSettings.ts
async function addGeneralSettings(containerEl, plugin, SettingTab13) {
  const toggleSettingContainer = containerEl.createDiv({ cls: "toggleSettingContainer" });
  toggleSettingContainer.createEl("h2", { text: "General" });
  const initialState = plugin.settings.toggleGeneralSettings;
  const chevronIcon = toggleSettingContainer.createEl("span", { cls: "chevron-icon" });
  (0, import_obsidian8.setIcon)(chevronIcon, initialState ? "chevron-down" : "chevron-right");
  const settingsContainer = containerEl.createDiv({ cls: "settingsContainer" });
  settingsContainer.style.display = initialState ? "block" : "none";
  toggleSettingContainer.addEventListener("click", async () => {
    const isOpen = settingsContainer.style.display !== "none";
    if (isOpen) {
      (0, import_obsidian8.setIcon)(chevronIcon, "chevron-right");
      settingsContainer.style.display = "none";
      plugin.settings.toggleGeneralSettings = false;
    } else {
      (0, import_obsidian8.setIcon)(chevronIcon, "chevron-down");
      settingsContainer.style.display = "block";
      plugin.settings.toggleGeneralSettings = true;
    }
    await plugin.saveSettings();
  });
  const addOptionsToDropdown = (dropdown, models) => {
    models.forEach((model) => {
      dropdown.addOption(model, model);
    });
  };
  new import_obsidian8.Setting(settingsContainer).setName("Model").setDesc("Choose a model.").addDropdown(async (dropdown) => {
    plugin.settings.allModels = [];
    if (plugin.settings.APIConnections.openAI.APIKey && plugin.settings.APIConnections.openAI.openAIBaseUrl === DEFAULT_SETTINGS.APIConnections.openAI.openAIBaseUrl) {
      addOptionsToDropdown(dropdown, OPENAI_MODELS);
      for (const model of OPENAI_MODELS) {
        if (!plugin.settings.allModels.includes(model)) {
          plugin.settings.allModels.push(model);
        }
      }
    }
    if (plugin.settings.OllamaConnection.RESTAPIURL !== "") {
      const ollamaModels = await fetchOllamaModels(plugin);
      try {
        ollamaModels.forEach((model) => {
          dropdown.addOption(model, model);
          if (!plugin.settings.allModels.includes(model)) {
            plugin.settings.allModels.push(model);
          }
        });
      } catch (error) {
        new import_obsidian8.Notice("Ollama connection error.");
      }
    }
    if (plugin.settings.RESTAPIURLConnection.RESTAPIURL !== "") {
      const RESTAPIURLModels = await fetchRESTAPIURLModels(plugin);
      try {
        RESTAPIURLModels.forEach((model) => {
          dropdown.addOption(model, model);
          if (!plugin.settings.allModels.includes(model)) {
            plugin.settings.allModels.push(model);
          }
        });
      } catch (error) {
        new import_obsidian8.Notice("OpenAI REST API URL connection error.");
      }
    }
    if (plugin.settings.APIConnections.openAI.APIKey && plugin.settings.APIConnections.openAI.openAIBaseUrl !== DEFAULT_SETTINGS.APIConnections.openAI.openAIBaseUrl) {
      const openAIModels = await fetchOpenAIBaseModels(plugin);
      try {
        openAIModels.forEach((model) => {
          dropdown.addOption(model, model);
          if (!plugin.settings.allModels.includes(model)) {
            plugin.settings.allModels.push(model);
          }
        });
      } catch (error) {
        console.error("Error:", error);
        new import_obsidian8.Notice("OpenAI-based url connection error.");
      }
    }
    if (plugin.settings.APIConnections.mistral.APIKey !== "") {
      const mistralModels = await fetchMistralModels(plugin);
      try {
        mistralModels.forEach((model) => {
          dropdown.addOption(model, model);
          if (!plugin.settings.allModels.includes(model)) {
            plugin.settings.allModels.push(model);
          }
        });
      } catch (error) {
        new import_obsidian8.Notice("Mistral connection error.");
      }
    }
    if (plugin.settings.APIConnections.googleGemini.APIKey) {
      const googleGeminiModels = await fetchGoogleGeminiModels(plugin);
      try {
        googleGeminiModels.forEach((model) => {
          dropdown.addOption(model, model);
          if (!plugin.settings.allModels.includes(model)) {
            plugin.settings.allModels.push(model);
          }
        });
      } catch (error) {
        new import_obsidian8.Notice("Google Gemini connection error.");
      }
    }
    if (plugin.settings.APIConnections.anthropic.APIKey) {
      addOptionsToDropdown(dropdown, ANTHROPIC_MODELS);
      for (const model of ANTHROPIC_MODELS) {
        if (!plugin.settings.allModels.includes(model)) {
          plugin.settings.allModels.push(model);
        }
      }
    }
    dropdown.setValue(plugin.settings.general.model || DEFAULT_SETTINGS.general.model).onChange(async (value) => {
      plugin.settings.general.model = value;
      await plugin.saveSettings();
      const modelName = document.querySelector("#modelName");
      if (modelName) {
        modelName.textContent = "Model: " + plugin.settings.general.model.toLowerCase();
      }
    });
  });
  new import_obsidian8.Setting(settingsContainer).setName("System").setDesc("System role prompt.").addTextArea(
    (text) => text.setPlaceholder("You are a helpful assistant.").setValue(plugin.settings.general.system_role !== void 0 ? plugin.settings.general.system_role : DEFAULT_SETTINGS.general.system_role).onChange(async (value) => {
      plugin.settings.general.system_role = value !== void 0 ? value : DEFAULT_SETTINGS.general.system_role;
      await plugin.saveSettings();
    })
  );
  new import_obsidian8.Setting(settingsContainer).setName("Max Tokens").setDesc(descLink("The maximum number of tokens, or words, that the model is allowed to generate in its output.", "https://platform.openai.com/tokenizer")).addText(
    (text) => text.setPlaceholder("4096").setValue(plugin.settings.general.max_tokens).onChange(async (value) => {
      plugin.settings.general.max_tokens = value;
      await plugin.saveSettings();
    })
  );
  new import_obsidian8.Setting(settingsContainer).setName("Temperature").setDesc("Temperature controls how random the generated output is. Lower values make the text more predictable, while higher values make it more creative and unpredictable.").addText(
    (text) => text.setPlaceholder("1.00").setValue(plugin.settings.general.temperature).onChange(async (value) => {
      const floatValue = parseFloat(value);
      if (!isNaN(floatValue)) {
        if (!isNaN(floatValue)) {
          if (floatValue < 0) {
            plugin.settings.general.temperature = "0.00";
          } else if (floatValue > 2) {
            plugin.settings.general.temperature = "2.00";
          } else {
            plugin.settings.general.temperature = floatValue.toFixed(2);
          }
        } else {
          plugin.settings.general.temperature = DEFAULT_SETTINGS.general.temperature;
        }
      } else {
        plugin.settings.general.temperature = DEFAULT_SETTINGS.general.temperature;
      }
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian8.Setting(settingsContainer).setName("Allow Reference Current Note").setDesc("Allow chatbot to reference current active note during conversation.").addToggle(
    (toggle) => toggle.setValue(plugin.settings.general.allowReferenceCurrentNote).onChange((value) => {
      plugin.settings.general.allowReferenceCurrentNote = value;
      plugin.saveSettings();
      const referenceCurrentNoteElement = document.getElementById("referenceCurrentNote");
      if (referenceCurrentNoteElement) {
        if (value) {
          referenceCurrentNoteElement.style.display = "block";
        } else {
          referenceCurrentNoteElement.style.display = "none";
        }
      }
    })
  );
  function descLink(text, link) {
    const frag = new DocumentFragment();
    const desc = document.createElement("span");
    desc.innerText = text + " ";
    frag.appendChild(desc);
    const anchor = document.createElement("a");
    anchor.href = link;
    anchor.target = "_blank";
    anchor.rel = "noopener noreferrer";
    anchor.innerText = "(https://platform.openai.com/tokenizer)";
    frag.appendChild(anchor);
    return frag;
  }
}

// src/components/settings/AppearanceSettings.ts
var import_obsidian9 = require("obsidian");
function addAppearanceSettings(containerEl, plugin, SettingTab13) {
  const toggleSettingContainer = containerEl.createDiv({ cls: "toggleSettingContainer" });
  toggleSettingContainer.createEl("h2", { text: "Appearance" });
  const initialState = plugin.settings.toggleAppearanceSettings;
  const chevronIcon = toggleSettingContainer.createEl("span", { cls: "chevron-icon" });
  (0, import_obsidian9.setIcon)(chevronIcon, initialState ? "chevron-down" : "chevron-right");
  const settingsContainer = containerEl.createDiv({ cls: "settingsContainer" });
  settingsContainer.style.display = initialState ? "block" : "none";
  toggleSettingContainer.addEventListener("click", async () => {
    const isOpen = settingsContainer.style.display !== "none";
    if (isOpen) {
      (0, import_obsidian9.setIcon)(chevronIcon, "chevron-right");
      settingsContainer.style.display = "none";
      plugin.settings.toggleAppearanceSettings = false;
    } else {
      (0, import_obsidian9.setIcon)(chevronIcon, "chevron-down");
      settingsContainer.style.display = "block";
      plugin.settings.toggleAppearanceSettings = true;
    }
    await plugin.saveSettings();
  });
  new import_obsidian9.Setting(settingsContainer).setName("User Name").setDesc("Create a username.").addText(
    (text) => text.setPlaceholder("Enter user name").setValue(plugin.settings.appearance.userName || DEFAULT_SETTINGS.appearance.userName).onChange(async (value) => {
      plugin.settings.appearance.userName = value ? value.toUpperCase() : DEFAULT_SETTINGS.appearance.userName;
      text.inputEl.maxLength = 30;
      await plugin.saveSettings();
      const userNames = document.querySelectorAll(".userName");
      userNames.forEach((userName) => {
        userName.textContent = plugin.settings.appearance.userName;
      });
    })
  );
  new import_obsidian9.Setting(settingsContainer).setName("Chatbot Name").setDesc("Name your chatbot.").addText(
    (text) => text.setPlaceholder("Enter chatbot name").setValue(plugin.settings.appearance.chatbotName || DEFAULT_SETTINGS.appearance.chatbotName).onChange(async (value) => {
      plugin.settings.appearance.chatbotName = value ? value.toUpperCase() : DEFAULT_SETTINGS.appearance.chatbotName;
      text.inputEl.maxLength = 30;
      await plugin.saveSettings();
      const chatbotNameHeading = document.querySelector("#chatbotNameHeading");
      const chatbotNames = document.querySelectorAll(".chatbotName");
      if (chatbotNameHeading) {
        chatbotNameHeading.textContent = plugin.settings.appearance.chatbotName;
      }
      chatbotNames.forEach((chatbotName) => {
        chatbotName.textContent = plugin.settings.appearance.chatbotName;
      });
    })
  );
  let colorPicker1;
  const defaultUserMessageBackgroundColor = getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.appearance.userMessageBackgroundColor).trim();
  new import_obsidian9.Setting(settingsContainer).setName("User Message Background Color").setDesc("Modify the background color of the userMessage element.").addButton(
    (button) => button.setButtonText("Restore Default").setIcon("rotate-cw").setClass("clickable-icon").onClick(async () => {
      const defaultValue = colorToHex(defaultUserMessageBackgroundColor);
      colorPicker1.setValue(defaultValue);
      const messageContainer = document.querySelector("#messageContainer");
      if (messageContainer) {
        const userMessages = messageContainer.querySelectorAll(".userMessage");
        userMessages.forEach((userMessage) => {
          const element = userMessage;
          element.style.backgroundColor = defaultValue;
        });
        await plugin.saveSettings();
      }
    })
  ).addColorPicker((color) => {
    colorPicker1 = color;
    let defaultValue = plugin.settings.appearance.userMessageBackgroundColor;
    if (plugin.settings.appearance.userMessageBackgroundColor == "--background-primary") {
      defaultValue = colorToHex(defaultUserMessageBackgroundColor);
    }
    color.setValue(defaultValue).onChange(async (value) => {
      const hexValue = colorToHex(value);
      plugin.settings.appearance.userMessageBackgroundColor = hexValue;
      const messageContainer = document.querySelector("#messageContainer");
      if (messageContainer) {
        const userMessages = messageContainer.querySelectorAll(".userMessage");
        userMessages.forEach((userMessage) => {
          const element = userMessage;
          element.style.backgroundColor = hexValue;
        });
      }
      await plugin.saveSettings();
    });
  });
  let colorPicker2;
  const defaultBotMessageBackgroundColor = getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.appearance.botMessageBackgroundColor).trim();
  new import_obsidian9.Setting(settingsContainer).setName("Bot Message Background Color").setDesc("Modify the background color of the botMessage element.").addButton(
    (button) => button.setButtonText("Restore Default").setIcon("rotate-cw").setClass("clickable-icon").onClick(async () => {
      const defaultValue = colorToHex(defaultBotMessageBackgroundColor);
      colorPicker2.setValue(defaultValue);
      const messageContainer = document.querySelector("#messageContainer");
      if (messageContainer) {
        const botMessages = messageContainer.querySelectorAll(".botMessage");
        botMessages.forEach((botMessage) => {
          const element = botMessage;
          element.style.backgroundColor = defaultValue;
        });
        await plugin.saveSettings();
      }
    })
  ).addColorPicker((color) => {
    colorPicker2 = color;
    let defaultValue = plugin.settings.appearance.botMessageBackgroundColor;
    if (plugin.settings.appearance.botMessageBackgroundColor == "--background-secondary") {
      defaultValue = colorToHex(defaultBotMessageBackgroundColor);
    }
    color.setValue(defaultValue).onChange(async (value) => {
      const hexValue = colorToHex(value);
      plugin.settings.appearance.botMessageBackgroundColor = hexValue;
      const messageContainer = document.querySelector("#messageContainer");
      if (messageContainer) {
        const botMessages = messageContainer.querySelectorAll(".botMessage");
        botMessages.forEach((botMessage) => {
          const element = botMessage;
          element.style.backgroundColor = hexValue;
        });
      }
      await plugin.saveSettings();
    });
  });
  let colorPicker3;
  const defaultChatBoxBackgroundColor = getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.appearance.chatBoxBackgroundColor).trim();
  new import_obsidian9.Setting(settingsContainer).setName("Chatbox Background Color").setDesc("Modify the background color of the chatbox.").addButton(
    (button) => button.setButtonText("Restore Default").setIcon("rotate-cw").setClass("clickable-icon").onClick(async () => {
      const defaultValue = colorToHex(defaultChatBoxBackgroundColor);
      colorPicker3.setValue(defaultValue);
      const textarea = document.querySelector(".chatbox textarea");
      if (textarea) {
        const element = textarea;
        element.style.backgroundColor = defaultValue;
      }
    })
  ).addColorPicker((color) => {
    colorPicker3 = color;
    let defaultValue = plugin.settings.appearance.chatBoxBackgroundColor;
    if (defaultValue == "--interactive-accent") {
      defaultValue = colorToHex(defaultChatBoxBackgroundColor);
    }
    color.setValue(defaultValue).onChange(async (value) => {
      const hexValue = colorToHex(value);
      plugin.settings.appearance.chatBoxBackgroundColor = hexValue;
      const textarea = document.querySelector(".chatbox textarea");
      if (textarea) {
        const element = textarea;
        element.style.backgroundColor = hexValue;
        element.style.borderColor = hexValue;
      }
      await plugin.saveSettings();
    });
  });
  let colorPicker4;
  const defaultChatBoxBorderColor = getComputedStyle(document.body).getPropertyValue(DEFAULT_SETTINGS.appearance.chatBoxBorderColor).trim();
  new import_obsidian9.Setting(settingsContainer).setName("Chatbox Border Color").setDesc("Modify the border color of the chatbox.").addButton(
    (button) => button.setButtonText("Restore Default").setIcon("rotate-cw").setClass("clickable-icon").onClick(async () => {
      const defaultValue = colorToHex(defaultChatBoxBorderColor);
      colorPicker4.setValue(defaultValue);
      const textarea = document.querySelector(".chatbox");
      if (textarea) {
        const element = textarea;
        element.style.backgroundColor = defaultValue;
      }
    })
  ).addColorPicker((color) => {
    colorPicker4 = color;
    let defaultValue = plugin.settings.appearance.chatBoxBorderColor;
    if (plugin.settings.appearance.chatBoxBorderColor == "--interactive-accent") {
      defaultValue = colorToHex(defaultChatBoxBorderColor);
    }
    color.setValue(defaultValue).onChange(async (value) => {
      const hexValue = colorToHex(value);
      plugin.settings.appearance.chatBoxBorderColor = hexValue;
      const textarea = document.querySelector(".chatbox");
      if (textarea) {
        const element = textarea;
        element.style.backgroundColor = hexValue;
        element.style.borderColor = hexValue;
      }
      await plugin.saveSettings();
    });
  });
  new import_obsidian9.Setting(settingsContainer).setName("Allow Header").setDesc("Display chatbot name and model name in header.").addToggle(
    (toggle) => toggle.setValue(plugin.settings.appearance.allowHeader).onChange((value) => {
      plugin.settings.appearance.allowHeader = value;
      const referenceCurrentNoteElement = document.querySelector("#referenceCurrentNote");
      if (value === true) {
        const header = document.querySelector("#header");
        if (header) {
          header.style.display = "block";
          referenceCurrentNoteElement.style.margin = "-0.5rem 0 0.5rem 0";
        }
      } else {
        const header = document.querySelector("#header");
        const messageContainer = document.querySelector("#messageContainer");
        if (header) {
          header.style.display = "none";
          messageContainer.style.maxHeight = "calc(100% - 60px)";
          referenceCurrentNoteElement.style.margin = "0.5rem 0 0.5rem 0";
        }
      }
      plugin.saveSettings();
    })
  );
}

// src/components/settings/ChatHistorySettings.ts
var import_obsidian10 = require("obsidian");
function addChatHistorySettings(containerEl, plugin, SettingTab13) {
  const toggleSettingContainer = containerEl.createDiv({ cls: "toggleSettingContainer" });
  toggleSettingContainer.createEl("h2", { text: "Chat History" });
  const initialState = plugin.settings.toggleChatHistorySettings;
  const chevronIcon = toggleSettingContainer.createEl("span", { cls: "chevron-icon" });
  (0, import_obsidian10.setIcon)(chevronIcon, initialState ? "chevron-down" : "chevron-right");
  const settingsContainer = containerEl.createDiv({ cls: "settingsContainer" });
  settingsContainer.style.display = initialState ? "block" : "none";
  toggleSettingContainer.addEventListener("click", async () => {
    const isOpen = settingsContainer.style.display !== "none";
    if (isOpen) {
      (0, import_obsidian10.setIcon)(chevronIcon, "chevron-right");
      settingsContainer.style.display = "none";
      plugin.settings.toggleChatHistorySettings = false;
    } else {
      (0, import_obsidian10.setIcon)(chevronIcon, "chevron-down");
      settingsContainer.style.display = "block";
      plugin.settings.toggleChatHistorySettings = true;
    }
    await plugin.saveSettings();
  });
  new import_obsidian10.Setting(settingsContainer).setName("Chat History Folder Path").setDesc("Save your chat history in a specified folder.").addText(
    (text) => text.setPlaceholder("BMO/").setValue(plugin.settings.chatHistory.chatHistoryPath || DEFAULT_SETTINGS.chatHistory.chatHistoryPath).onChange(async (value) => {
      plugin.settings.chatHistory.chatHistoryPath = value ? value : DEFAULT_SETTINGS.chatHistory.chatHistoryPath;
      await plugin.saveSettings();
    })
  );
  new import_obsidian10.Setting(settingsContainer).setName("Template File Path").setDesc("Insert your template file path.").addText(
    (text) => text.setPlaceholder("templates/bmo.md").setValue(plugin.settings.chatHistory.templateFilePath || DEFAULT_SETTINGS.chatHistory.templateFilePath).onChange(async (value) => {
      plugin.settings.chatHistory.templateFilePath = value ? value : DEFAULT_SETTINGS.chatHistory.templateFilePath;
      if (value) {
        if (!plugin.settings.chatHistory.templateFilePath.endsWith(".md")) {
          plugin.settings.chatHistory.templateFilePath += ".md";
        }
        await plugin.saveSettings();
        const allFiles = app.vault.getFiles();
        const fileExists = allFiles.some((file) => file.path.toLowerCase() === plugin.settings.chatHistory.templateFilePath.toLowerCase());
        if (fileExists) {
          text.inputEl.style.borderColor = "";
        } else {
          text.inputEl.style.borderColor = "red";
        }
      } else {
        text.inputEl.style.borderColor = "";
        plugin.settings.chatHistory.templateFilePath = DEFAULT_SETTINGS.chatHistory.templateFilePath;
      }
    })
  );
  new import_obsidian10.Setting(settingsContainer).setName("Allow Rename Note Title").setDesc("Allow model to rename the note title when saving chat history.").addToggle(
    (toggle) => toggle.setValue(plugin.settings.chatHistory.allowRenameNoteTitle).onChange((value) => {
      plugin.settings.chatHistory.allowRenameNoteTitle = value;
      plugin.saveSettings();
    })
  );
}

// src/components/settings/OllamaSettings.ts
var import_obsidian11 = require("obsidian");

// src/utils/DescriptionLink.ts
function addDescriptionLink(text, link, extraWords, innerText) {
  const frag = new DocumentFragment();
  const desc = document.createElement("span");
  desc.innerText = text + " ";
  frag.appendChild(desc);
  const anchor = document.createElement("a");
  anchor.href = link;
  anchor.target = "_blank";
  anchor.rel = "noopener noreferrer";
  anchor.innerText = innerText;
  frag.appendChild(anchor);
  const extra = document.createElement("span");
  extra.innerText = " " + extraWords;
  frag.appendChild(extra);
  return frag;
}

// src/components/settings/OllamaSettings.ts
function addOllamaSettings(containerEl, plugin, SettingTab13) {
  const toggleSettingContainer = containerEl.createDiv({ cls: "toggleSettingContainer" });
  toggleSettingContainer.createEl("h2", { text: "Ollama Connection" });
  const initialState = plugin.settings.toggleOllamaSettings;
  const chevronIcon = toggleSettingContainer.createEl("span", { cls: "chevron-icon" });
  (0, import_obsidian11.setIcon)(chevronIcon, initialState ? "chevron-down" : "chevron-right");
  const settingsContainer = containerEl.createDiv({ cls: "settingsContainer" });
  settingsContainer.style.display = initialState ? "block" : "none";
  toggleSettingContainer.addEventListener("click", async () => {
    const isOpen = settingsContainer.style.display !== "none";
    if (isOpen) {
      (0, import_obsidian11.setIcon)(chevronIcon, "chevron-right");
      settingsContainer.style.display = "none";
      plugin.settings.toggleOllamaSettings = false;
    } else {
      (0, import_obsidian11.setIcon)(chevronIcon, "chevron-down");
      settingsContainer.style.display = "block";
      plugin.settings.toggleOllamaSettings = true;
    }
    await plugin.saveSettings();
  });
  new import_obsidian11.Setting(settingsContainer).setName("OLLAMA REST API URL").setDesc(addDescriptionLink("Enter your REST API URL using", "https://ollama.ai/", "", "Ollama")).addText(
    (text) => text.setPlaceholder("http://localhost:11434").setValue(plugin.settings.OllamaConnection.RESTAPIURL || DEFAULT_SETTINGS.OllamaConnection.RESTAPIURL).onChange(async (value) => {
      plugin.settings.OllamaConnection.ollamaModels = [];
      plugin.settings.OllamaConnection.RESTAPIURL = value ? value : DEFAULT_SETTINGS.OllamaConnection.RESTAPIURL;
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian11.Setting(settingsContainer).setName("Allow Stream").setDesc(addDescriptionLink("Allow Ollama models to stream response. Additional setup required: ", "https://github.com/longy2k/obsidian-bmo-chatbot/wiki/How-to-setup-with-Ollama", "", "[Instructions]")).addToggle(
    (toggle) => toggle.setValue(plugin.settings.OllamaConnection.allowOllamaStream).onChange((value) => {
      plugin.settings.OllamaConnection.allowOllamaStream = value;
      plugin.saveSettings();
    })
  );
  const advancedToggleSettingContainer = settingsContainer.createDiv({ cls: "toggleSettingContainer" });
  advancedToggleSettingContainer.createEl("h2", { text: "Advanced Settings" });
  const advancedInitialState = plugin.settings.toggleAdvancedSettings;
  const advancedChevronIcon = advancedToggleSettingContainer.createEl("span", { cls: "chevron-icon" });
  (0, import_obsidian11.setIcon)(advancedChevronIcon, advancedInitialState ? "chevron-down" : "chevron-right");
  const advancedSettingsContainer = settingsContainer.createDiv({ cls: "settingsContainer" });
  advancedSettingsContainer.style.display = advancedInitialState ? "block" : "none";
  advancedToggleSettingContainer.addEventListener("click", async () => {
    const isOpen = advancedSettingsContainer.style.display !== "none";
    if (isOpen) {
      (0, import_obsidian11.setIcon)(advancedChevronIcon, "chevron-right");
      advancedSettingsContainer.style.display = "none";
      plugin.settings.toggleAdvancedSettings = false;
    } else {
      (0, import_obsidian11.setIcon)(advancedChevronIcon, "chevron-down");
      advancedSettingsContainer.style.display = "block";
      plugin.settings.toggleAdvancedSettings = true;
    }
    await plugin.saveSettings();
  });
  new import_obsidian11.Setting(advancedSettingsContainer).setName("mirostat").setDesc("Enable Mirostat sampling for controlling perplexity. (default: 0, 0 = disabled, 1 = Mirostat, 2 = Mirostat 2.0)").addText(
    (text) => text.setPlaceholder("0").setValue(plugin.settings.OllamaConnection.ollamaParameters.mirostat || DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.mirostat).onChange(async (value) => {
      const intValue = parseInt(value, 10);
      if (isNaN(intValue)) {
        plugin.settings.OllamaConnection.ollamaParameters.mirostat = DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.mirostat;
      } else {
        plugin.settings.OllamaConnection.ollamaParameters.mirostat = intValue.toString();
      }
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian11.Setting(advancedSettingsContainer).setName("mirostat_eta").setDesc("Influences how quickly the algorithm responds to feedback from the generated text. A lower learning rate will result in slower adjustments, while a higher learning rate will make the algorithm more responsive. (Default: 0.1)").addText(
    (text) => text.setPlaceholder("0.1").setValue(plugin.settings.OllamaConnection.ollamaParameters.mirostat_eta || DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.mirostat_eta).onChange(async (value) => {
      const floatValue = parseFloat(value);
      if (!isNaN(floatValue)) {
        if (parseInt(value) === floatValue) {
          plugin.settings.OllamaConnection.ollamaParameters.mirostat_eta = floatValue + ".0";
        } else {
          plugin.settings.OllamaConnection.ollamaParameters.mirostat_eta = floatValue.toString();
        }
      } else {
        plugin.settings.OllamaConnection.ollamaParameters.mirostat_eta = DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.mirostat_eta;
      }
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian11.Setting(advancedSettingsContainer).setName("mirostat_tau").setDesc("Controls the balance between coherence and diversity of the output. A lower value will result in more focused and coherent text. (Default: 5.0)").addText(
    (text) => text.setPlaceholder("5.0").setValue(plugin.settings.OllamaConnection.ollamaParameters.mirostat_tau || DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.mirostat_tau).onChange(async (value) => {
      const floatValue = parseFloat(value);
      if (!isNaN(floatValue)) {
        if (parseInt(value) === floatValue) {
          plugin.settings.OllamaConnection.ollamaParameters.mirostat_tau = floatValue + ".0";
        } else {
          plugin.settings.OllamaConnection.ollamaParameters.mirostat_tau = floatValue.toString();
        }
      } else {
        plugin.settings.OllamaConnection.ollamaParameters.mirostat_tau = DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.mirostat_tau;
      }
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian11.Setting(advancedSettingsContainer).setName("num_ctx").setDesc("Sets the size of the context window used to generate the next token. (Default: 2048)").addText(
    (text) => text.setPlaceholder("2048").setValue(plugin.settings.OllamaConnection.ollamaParameters.num_ctx || DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.num_ctx).onChange(async (value) => {
      const intValue = parseInt(value, 10);
      if (isNaN(intValue)) {
        plugin.settings.OllamaConnection.ollamaParameters.num_ctx = DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.num_ctx;
      } else {
        plugin.settings.OllamaConnection.ollamaParameters.num_ctx = intValue.toString();
      }
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian11.Setting(advancedSettingsContainer).setName("num_gqa").setDesc("The number of GQA groups in the transformer layer. Required for some models, for example it is 8 for llama2:70b.").addText(
    (text) => text.setPlaceholder("0").setValue(plugin.settings.OllamaConnection.ollamaParameters.num_gqa || DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.num_gqa).onChange(async (value) => {
      const intValue = parseInt(value, 10);
      if (isNaN(intValue)) {
        plugin.settings.OllamaConnection.ollamaParameters.num_gqa = DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.num_gqa;
      } else {
        plugin.settings.OllamaConnection.ollamaParameters.num_gqa = intValue.toString();
      }
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian11.Setting(advancedSettingsContainer).setName("num_thread").setDesc("Sets the number of threads to use during computation. By default, Ollama will detect this for optimal performance. It is recommended to set this value to the number of physical CPU cores your system has (as opposed to the logical number of cores).").addText(
    (text) => text.setPlaceholder("0").setValue(plugin.settings.OllamaConnection.ollamaParameters.num_thread || DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.num_thread).onChange(async (value) => {
      const intValue = parseInt(value, 10);
      if (isNaN(intValue)) {
        plugin.settings.OllamaConnection.ollamaParameters.num_thread = DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.num_thread;
      } else {
        plugin.settings.OllamaConnection.ollamaParameters.num_thread = intValue.toString();
      }
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian11.Setting(advancedSettingsContainer).setName("repeat_last_n").setDesc("Sets how far back for the model to look back to prevent repetition. (Default: 64, 0 = disabled, -1 = num_ctx)").addText(
    (text) => text.setPlaceholder("64").setValue(plugin.settings.OllamaConnection.ollamaParameters.repeat_last_n || DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.repeat_last_n).onChange(async (value) => {
      const intValue = parseInt(value, 10);
      if (isNaN(intValue)) {
        plugin.settings.OllamaConnection.ollamaParameters.repeat_last_n = DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.repeat_last_n;
      } else {
        plugin.settings.OllamaConnection.ollamaParameters.repeat_last_n = intValue.toString();
      }
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian11.Setting(advancedSettingsContainer).setName("repeat_penalty").setDesc("Sets how strongly to penalize repetitions. A higher value (e.g., 1.5) will penalize repetitions more strongly, while a lower value (e.g., 0.9) will be more lenient. (Default: 1.1)").addText(
    (text) => text.setPlaceholder("1.1").setValue(plugin.settings.OllamaConnection.ollamaParameters.repeat_penalty || DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.repeat_penalty).onChange(async (value) => {
      const floatValue = parseFloat(value);
      if (!isNaN(floatValue)) {
        if (parseInt(value) === floatValue) {
          plugin.settings.OllamaConnection.ollamaParameters.repeat_penalty = floatValue + ".0";
        } else {
          plugin.settings.OllamaConnection.ollamaParameters.repeat_penalty = floatValue.toString();
        }
      } else {
        plugin.settings.OllamaConnection.ollamaParameters.repeat_penalty = DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.repeat_penalty;
      }
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian11.Setting(advancedSettingsContainer).setName("seed").setDesc("Sets the random number seed to use for generation. Setting this to a specific number will make the model generate the same text for the same prompt.").addText(
    (text) => text.setPlaceholder("0").setValue(plugin.settings.OllamaConnection.ollamaParameters.seed || DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.seed).onChange(async (value) => {
      const intValue = parseInt(value, 10);
      if (isNaN(intValue)) {
        plugin.settings.OllamaConnection.ollamaParameters.seed = DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.seed;
      } else {
        plugin.settings.OllamaConnection.ollamaParameters.seed = intValue.toString();
      }
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian11.Setting(advancedSettingsContainer).setName("stop").setDesc("Sets the stop sequences to use. When this pattern is encountered, the LLM will stop generating text and return. Multiple stop patterns may be set by specifying them as a comma-separated list in the input field.").addText(
    (text) => text.setPlaceholder("stop, \\n, user:").setValue(plugin.settings.OllamaConnection.ollamaParameters.stop && Array.isArray(plugin.settings.OllamaConnection.ollamaParameters.stop) ? plugin.settings.OllamaConnection.ollamaParameters.stop.join(", ") : DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.stop.join(", ")).onChange(async (value) => {
      const stopsArray = value ? value.split(",").map((s) => s.trim()) : [...DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.stop];
      plugin.settings.OllamaConnection.ollamaParameters.stop = stopsArray;
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian11.Setting(advancedSettingsContainer).setName("tfs_z").setDesc("Tail free sampling is used to reduce the impact of less probable tokens from the output. A higher value (e.g., 2.0) will reduce the impact more, while a value of 1.0 disables this setting. (default: 1)").addText(
    (text) => text.setPlaceholder("1.0").setValue(plugin.settings.OllamaConnection.ollamaParameters.tfs_z || DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.tfs_z).onChange(async (value) => {
      const floatValue = parseFloat(value);
      if (!isNaN(floatValue)) {
        if (parseInt(value) === floatValue) {
          plugin.settings.OllamaConnection.ollamaParameters.tfs_z = floatValue + ".0";
        } else {
          plugin.settings.OllamaConnection.ollamaParameters.tfs_z = floatValue.toString();
        }
      } else {
        plugin.settings.OllamaConnection.ollamaParameters.tfs_z = DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.tfs_z;
      }
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian11.Setting(advancedSettingsContainer).setName("top_k").setDesc("Reduces the probability of generating nonsense. A higher value (e.g. 100) will give more diverse answers, while a lower value (e.g. 10) will be more conservative. (Default: 40)").addText(
    (text) => text.setPlaceholder("40").setValue(plugin.settings.OllamaConnection.ollamaParameters.top_k || DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.top_k).onChange(async (value) => {
      const intValue = parseInt(value, 10);
      if (isNaN(intValue)) {
        plugin.settings.OllamaConnection.ollamaParameters.top_k = DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.top_k;
      } else {
        plugin.settings.OllamaConnection.ollamaParameters.top_k = intValue.toString();
      }
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian11.Setting(advancedSettingsContainer).setName("top_p").setDesc("Works together with top-k. A higher value (e.g., 0.95) will lead to more diverse text, while a lower value (e.g., 0.5) will generate more focused and conservative text. (Default: 0.9)").addText(
    (text) => text.setPlaceholder("1.0").setValue(plugin.settings.OllamaConnection.ollamaParameters.top_p || DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.top_p).onChange(async (value) => {
      const floatValue = parseFloat(value);
      if (!isNaN(floatValue)) {
        if (parseInt(value) === floatValue) {
          plugin.settings.OllamaConnection.ollamaParameters.top_p = floatValue + ".0";
        } else {
          plugin.settings.OllamaConnection.ollamaParameters.top_p = floatValue.toString();
        }
      } else {
        plugin.settings.OllamaConnection.ollamaParameters.top_p = DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.top_p;
      }
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian11.Setting(advancedSettingsContainer).setName("keep_alive").setDesc("If set to a positive duration (e.g. 20m, 1hr or 30), the model will stay loaded for the provided duration in seconds. If set to a negative duration (e.g. -1), the model will stay loaded indefinitely. If set to 0, the model will be unloaded immediately once finished. If not set, the model will stay loaded for 5 minutes by default.").addText(
    (text) => text.setPlaceholder("30s").setValue(plugin.settings.OllamaConnection.ollamaParameters.keep_alive || DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.keep_alive).onChange(async (value) => {
      const match = value.match(/^(-?\d+)(m|hr|h)?$/);
      if (match) {
        const num = parseInt(match[1]);
        const unit = match[2];
        let seconds;
        if (unit === "m") {
          seconds = num * 60;
        } else if (unit === "hr" || unit === "h") {
          seconds = num * 3600;
        } else {
          seconds = num;
        }
        plugin.settings.OllamaConnection.ollamaParameters.keep_alive = seconds.toString();
      } else {
        plugin.settings.OllamaConnection.ollamaParameters.keep_alive = DEFAULT_SETTINGS.OllamaConnection.ollamaParameters.keep_alive;
      }
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
}

// src/components/settings/ConnectionSettings.ts
var import_obsidian16 = require("obsidian");

// src/components/settings/APIConnections/OpenAIConnections.ts
var import_obsidian12 = require("obsidian");
function addOpenAIConnectionSettings(containerEl, plugin, SettingTab13) {
  const toggleSettingContainer = containerEl.createDiv({ cls: "toggleSettingContainer" });
  toggleSettingContainer.createEl("h2", { text: "OpenAI" });
  const initialState = plugin.settings.toggleOpenAISettings;
  const chevronIcon = toggleSettingContainer.createEl("span", { cls: "chevron-icon" });
  (0, import_obsidian12.setIcon)(chevronIcon, initialState ? "chevron-down" : "chevron-right");
  const settingsContainer = containerEl.createDiv({ cls: "settingsContainer" });
  settingsContainer.style.display = initialState ? "block" : "none";
  toggleSettingContainer.addEventListener("click", async () => {
    const isOpen = settingsContainer.style.display !== "none";
    if (isOpen) {
      (0, import_obsidian12.setIcon)(chevronIcon, "chevron-right");
      settingsContainer.style.display = "none";
      plugin.settings.toggleOpenAISettings = false;
    } else {
      (0, import_obsidian12.setIcon)(chevronIcon, "chevron-down");
      settingsContainer.style.display = "block";
      plugin.settings.toggleOpenAISettings = true;
    }
    await plugin.saveSettings();
  });
  new import_obsidian12.Setting(settingsContainer).setName("OpenAI API Key").setDesc("Insert OpenAI API Key.").addText(
    (text) => text.setPlaceholder("insert-api-key").setValue(plugin.settings.APIConnections.openAI.APIKey ? `${plugin.settings.APIConnections.openAI.APIKey.slice(0, 6)}-...${plugin.settings.APIConnections.openAI.APIKey.slice(-4)}` : "").onChange(async (value) => {
      plugin.settings.APIConnections.openAI.APIKey = value;
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian12.Setting(settingsContainer).setName("OpenAI-Based URL").setDesc("Enter your custom OpenAI-Based URL.").addButton(
    (button) => button.setButtonText("Restore Default").setIcon("rotate-cw").setClass("clickable-icon").onClick(async () => {
      plugin.settings.APIConnections.openAI.openAIBaseModels = [];
      plugin.settings.APIConnections.openAI.openAIBaseUrl = DEFAULT_SETTINGS.APIConnections.openAI.openAIBaseUrl;
      await plugin.saveSettings();
      SettingTab13.display();
    })
  ).addText(
    (text) => text.setPlaceholder("https://api.openai.com/v1").setValue(plugin.settings.APIConnections.openAI.openAIBaseUrl || DEFAULT_SETTINGS.APIConnections.openAI.openAIBaseUrl).onChange(async (value) => {
      plugin.settings.APIConnections.openAI.openAIBaseUrl = value ? value : DEFAULT_SETTINGS.APIConnections.openAI.openAIBaseUrl;
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian12.Setting(settingsContainer).setName("Allow Stream").setDesc("Allow stream for OpenAI-Based models.").addToggle(
    (toggle) => toggle.setValue(plugin.settings.APIConnections.openAI.allowOpenAIBaseUrlDataStream).onChange(async (value) => {
      plugin.settings.APIConnections.openAI.allowOpenAIBaseUrlDataStream = value;
      await plugin.saveSettings();
    })
  );
}

// src/components/settings/APIConnections/MistralConnections.ts
var import_obsidian13 = require("obsidian");
function addMistralConnectionSettings(containerEl, plugin, SettingTab13) {
  const toggleSettingContainer = containerEl.createDiv({ cls: "toggleSettingContainer" });
  toggleSettingContainer.createEl("h2", { text: "Mistral AI" });
  const initialState = plugin.settings.toggleMistralSettings;
  const chevronIcon = toggleSettingContainer.createEl("span", { cls: "chevron-icon" });
  (0, import_obsidian13.setIcon)(chevronIcon, initialState ? "chevron-down" : "chevron-right");
  const settingsContainer = containerEl.createDiv({ cls: "settingsContainer" });
  settingsContainer.style.display = initialState ? "block" : "none";
  toggleSettingContainer.addEventListener("click", async () => {
    const isOpen = settingsContainer.style.display !== "none";
    if (isOpen) {
      (0, import_obsidian13.setIcon)(chevronIcon, "chevron-right");
      settingsContainer.style.display = "none";
      plugin.settings.toggleMistralSettings = false;
    } else {
      (0, import_obsidian13.setIcon)(chevronIcon, "chevron-down");
      settingsContainer.style.display = "block";
      plugin.settings.toggleMistralSettings = true;
    }
    await plugin.saveSettings();
  });
  new import_obsidian13.Setting(settingsContainer).setName("Mistral API Key").setDesc("Insert Mistral API Key.").addText(
    (text) => text.setPlaceholder("insert-api-key").setValue(plugin.settings.APIConnections.mistral.APIKey ? `${plugin.settings.APIConnections.mistral.APIKey.slice(0, 6)}-...${plugin.settings.APIConnections.mistral.APIKey.slice(-4)}` : "").onChange(async (value) => {
      plugin.settings.APIConnections.mistral.APIKey = value;
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian13.Setting(settingsContainer).setName("Allow Stream").setDesc("Allow stream for Mistral models.").addToggle(
    (toggle) => toggle.setValue(plugin.settings.APIConnections.mistral.allowStream).onChange((value) => {
      plugin.settings.APIConnections.mistral.allowStream = value;
      plugin.saveSettings();
    })
  );
}

// src/components/settings/APIConnections/GoogleGeminiConnections.ts
var import_obsidian14 = require("obsidian");
function addGoogleGeminiConnectionSettings(containerEl, plugin, SettingTab13) {
  const toggleSettingContainer = containerEl.createDiv({ cls: "toggleSettingContainer" });
  toggleSettingContainer.createEl("h2", { text: "Google Gemini" });
  const initialState = plugin.settings.toggleGoogleGeminiSettings;
  const chevronIcon = toggleSettingContainer.createEl("span", { cls: "chevron-icon" });
  (0, import_obsidian14.setIcon)(chevronIcon, initialState ? "chevron-down" : "chevron-right");
  const settingsContainer = containerEl.createDiv({ cls: "settingsContainer" });
  settingsContainer.style.display = initialState ? "block" : "none";
  toggleSettingContainer.addEventListener("click", async () => {
    const isOpen = settingsContainer.style.display !== "none";
    if (isOpen) {
      (0, import_obsidian14.setIcon)(chevronIcon, "chevron-right");
      settingsContainer.style.display = "none";
      plugin.settings.toggleGoogleGeminiSettings = false;
    } else {
      (0, import_obsidian14.setIcon)(chevronIcon, "chevron-down");
      settingsContainer.style.display = "block";
      plugin.settings.toggleGoogleGeminiSettings = true;
    }
    await plugin.saveSettings();
  });
  new import_obsidian14.Setting(settingsContainer).setName("Google Gemini API Key").setDesc("Insert Google Gemini API Key.").addText(
    (text) => text.setPlaceholder("insert-api-key").setValue(plugin.settings.APIConnections.googleGemini.APIKey ? `${plugin.settings.APIConnections.googleGemini.APIKey.slice(0, 6)}-...${plugin.settings.APIConnections.googleGemini.APIKey.slice(-4)}` : "").onChange(async (value) => {
      plugin.settings.APIConnections.googleGemini.APIKey = value;
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
}

// src/components/settings/APIConnections/AnthropicConnections.ts
var import_obsidian15 = require("obsidian");
function addAnthropicConnectionSettings(containerEl, plugin, SettingTab13) {
  const toggleSettingContainer = containerEl.createDiv({ cls: "toggleSettingContainer" });
  toggleSettingContainer.createEl("h2", { text: "Anthropic" });
  const initialState = plugin.settings.toggleAnthropicSettings;
  const chevronIcon = toggleSettingContainer.createEl("span", { cls: "chevron-icon" });
  (0, import_obsidian15.setIcon)(chevronIcon, initialState ? "chevron-down" : "chevron-right");
  const settingsContainer = containerEl.createDiv({ cls: "settingsContainer" });
  settingsContainer.style.display = initialState ? "block" : "none";
  toggleSettingContainer.addEventListener("click", async () => {
    const isOpen = settingsContainer.style.display !== "none";
    if (isOpen) {
      (0, import_obsidian15.setIcon)(chevronIcon, "chevron-right");
      settingsContainer.style.display = "none";
      plugin.settings.toggleAnthropicSettings = false;
    } else {
      (0, import_obsidian15.setIcon)(chevronIcon, "chevron-down");
      settingsContainer.style.display = "block";
      plugin.settings.toggleAnthropicSettings = true;
    }
    await plugin.saveSettings();
  });
  new import_obsidian15.Setting(settingsContainer).setName("Anthropic API Key").setDesc("Insert Anthropic API Key.").addText(
    (text) => text.setPlaceholder("insert-api-key").setValue(plugin.settings.APIConnections.anthropic.APIKey ? `${plugin.settings.APIConnections.anthropic.APIKey.slice(0, 6)}-...${plugin.settings.APIConnections.anthropic.APIKey.slice(-4)}` : "").onChange(async (value) => {
      plugin.settings.APIConnections.anthropic.APIKey = value;
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
}

// src/components/settings/ConnectionSettings.ts
function addAPIConnectionSettings(containerEl, plugin, SettingTab13) {
  const toggleSettingContainer = containerEl.createDiv({ cls: "toggleSettingContainer" });
  toggleSettingContainer.createEl("h2", { text: "API Connections" });
  const initialState = plugin.settings.toggleAPIConnectionSettings;
  const chevronIcon = toggleSettingContainer.createEl("span", { cls: "chevron-icon" });
  (0, import_obsidian16.setIcon)(chevronIcon, initialState ? "chevron-down" : "chevron-right");
  const settingsContainer = containerEl.createDiv({ cls: "settingsContainer" });
  settingsContainer.style.display = initialState ? "block" : "none";
  toggleSettingContainer.addEventListener("click", async () => {
    const isOpen = settingsContainer.style.display !== "none";
    if (isOpen) {
      (0, import_obsidian16.setIcon)(chevronIcon, "chevron-right");
      settingsContainer.style.display = "none";
      plugin.settings.toggleAPIConnectionSettings = false;
    } else {
      (0, import_obsidian16.setIcon)(chevronIcon, "chevron-down");
      settingsContainer.style.display = "block";
      plugin.settings.toggleAPIConnectionSettings = true;
    }
    await plugin.saveSettings();
  });
  addOpenAIConnectionSettings(settingsContainer, plugin, SettingTab13);
  addMistralConnectionSettings(settingsContainer, plugin, SettingTab13);
  addGoogleGeminiConnectionSettings(settingsContainer, plugin, SettingTab13);
  addAnthropicConnectionSettings(settingsContainer, plugin, SettingTab13);
}

// src/components/settings/PromptSettings.ts
var import_obsidian17 = require("obsidian");
function addPromptSettings(containerEl, plugin, SettingTab13) {
  const toggleSettingContainer = containerEl.createDiv({ cls: "toggleSettingContainer" });
  toggleSettingContainer.createEl("h2", { text: "Prompts" });
  const initialState = plugin.settings.togglePromptSettings;
  const chevronIcon = toggleSettingContainer.createEl("span", { cls: "chevron-icon" });
  (0, import_obsidian17.setIcon)(chevronIcon, initialState ? "chevron-down" : "chevron-right");
  const settingsContainer = containerEl.createDiv({ cls: "settingsContainer" });
  settingsContainer.style.display = initialState ? "block" : "none";
  toggleSettingContainer.addEventListener("click", async () => {
    const isOpen = settingsContainer.style.display !== "none";
    if (isOpen) {
      (0, import_obsidian17.setIcon)(chevronIcon, "chevron-right");
      settingsContainer.style.display = "none";
      plugin.settings.togglePromptSettings = false;
    } else {
      (0, import_obsidian17.setIcon)(chevronIcon, "chevron-down");
      settingsContainer.style.display = "block";
      plugin.settings.togglePromptSettings = true;
    }
    await plugin.saveSettings();
  });
  new import_obsidian17.Setting(settingsContainer).setName("Prompt Folder Path").setDesc("Reference your prompts from a specified folder.").addText(
    (text) => text.setPlaceholder("BMO/Prompts/").setValue(plugin.settings.prompts.promptFolderPath || DEFAULT_SETTINGS.prompts.promptFolderPath).onChange(async (value) => {
      plugin.settings.prompts.promptFolderPath = value ? value : DEFAULT_SETTINGS.prompts.promptFolderPath;
      if (value) {
        let folderPath = plugin.settings.prompts.promptFolderPath.trim();
        if (folderPath.endsWith("/")) {
          folderPath = folderPath.substring(0, folderPath.length - 1);
        }
        const folder = app.vault.getAbstractFileByPath(folderPath);
        if (folder && folder instanceof import_obsidian17.TFolder) {
          text.inputEl.style.borderColor = "";
        } else {
          text.inputEl.style.borderColor = "red";
        }
      }
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian17.Setting(settingsContainer).setName("Prompt").setDesc("Select a prompt.").addDropdown((dropdown) => {
    dropdown.addOption("", "--EMPTY--");
    if (plugin.settings.prompts.promptFolderPath !== "") {
      const files = app.vault.getFiles().filter((file) => file.path.startsWith(plugin.settings.prompts.promptFolderPath));
      files.sort((a, b) => a.name.localeCompare(b.name));
      files.forEach((file) => {
        const fileName = file.name.replace(/\.[^/.]+$/, "");
        dropdown.addOption(file.name, fileName);
      });
    }
    dropdown.setValue("");
    dropdown.setValue(plugin.settings.prompts.prompt || DEFAULT_SETTINGS.prompts.prompt).onChange(async (value) => {
      plugin.settings.prompts.prompt = value ? value : DEFAULT_SETTINGS.prompts.prompt;
      await plugin.saveSettings();
    });
  });
}

// src/components/settings/OpenAIRestAPISettings.ts
var import_obsidian18 = require("obsidian");
function addRESTAPIURLSettings(containerEl, plugin, SettingTab13) {
  const toggleSettingContainer = containerEl.createDiv({ cls: "toggleSettingContainer" });
  toggleSettingContainer.createEl("h2", { text: "REST API URL Connection" });
  const initialState = plugin.settings.toggleRESTAPIURLSettings;
  const chevronIcon = toggleSettingContainer.createEl("span", { cls: "chevron-icon" });
  (0, import_obsidian18.setIcon)(chevronIcon, initialState ? "chevron-down" : "chevron-right");
  const settingsContainer = containerEl.createDiv({ cls: "settingsContainer" });
  settingsContainer.style.display = initialState ? "block" : "none";
  toggleSettingContainer.addEventListener("click", async () => {
    const isOpen = settingsContainer.style.display !== "none";
    if (isOpen) {
      (0, import_obsidian18.setIcon)(chevronIcon, "chevron-right");
      settingsContainer.style.display = "none";
      plugin.settings.toggleRESTAPIURLSettings = false;
    } else {
      (0, import_obsidian18.setIcon)(chevronIcon, "chevron-down");
      settingsContainer.style.display = "block";
      plugin.settings.toggleRESTAPIURLSettings = true;
    }
    await plugin.saveSettings();
  });
  new import_obsidian18.Setting(settingsContainer).setName("API Key (Optional)").setDesc("Insert API Key (Optional).").addText(
    (text) => text.setPlaceholder("insert-api-key").setValue(plugin.settings.RESTAPIURLConnection.APIKey ? `${plugin.settings.RESTAPIURLConnection.APIKey.slice(0, 6)}-...${plugin.settings.RESTAPIURLConnection.APIKey.slice(-4)}` : "").onChange(async (value) => {
      plugin.settings.RESTAPIURLConnection.RESTAPIURLModels = [];
      plugin.settings.RESTAPIURLConnection.APIKey = value;
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian18.Setting(settingsContainer).setName("REST API URL").setDesc("Enter your REST API URL.").addText(
    (text) => text.setPlaceholder("http://localhost:1234").setValue(plugin.settings.RESTAPIURLConnection.RESTAPIURL || DEFAULT_SETTINGS.RESTAPIURLConnection.RESTAPIURL).onChange(async (value) => {
      plugin.settings.RESTAPIURLConnection.RESTAPIURLModels = [];
      plugin.settings.RESTAPIURLConnection.RESTAPIURL = value ? value : DEFAULT_SETTINGS.RESTAPIURLConnection.RESTAPIURL;
      await plugin.saveSettings();
    }).inputEl.addEventListener("focusout", async () => {
      SettingTab13.display();
    })
  );
  new import_obsidian18.Setting(settingsContainer).setName("Allow Stream").setDesc(addDescriptionLink("Allow REST API URL models to stream response. Additional setup required: ", "https://github.com/longy2k/obsidian-bmo-chatbot/wiki/How-to-setup-with-LM-Studio", "", "[Instructions]")).addToggle(
    (toggle) => toggle.setValue(plugin.settings.RESTAPIURLConnection.allowRESTAPIURLDataStream).onChange((value) => {
      plugin.settings.RESTAPIURLConnection.allowRESTAPIURLDataStream = value;
      plugin.saveSettings();
    })
  );
}

// src/components/settings/EditorSettings.ts
var import_obsidian19 = require("obsidian");
async function addEditorSettings(containerEl, plugin, SettingTab13) {
  const toggleSettingContainer = containerEl.createDiv({ cls: "toggleSettingContainer" });
  toggleSettingContainer.createEl("h2", { text: "Editor" });
  const initialState = plugin.settings.toggleEditorSettings;
  const chevronIcon = toggleSettingContainer.createEl("span", { cls: "chevron-icon" });
  (0, import_obsidian19.setIcon)(chevronIcon, initialState ? "chevron-down" : "chevron-right");
  const settingsContainer = containerEl.createDiv({ cls: "settingsContainer" });
  settingsContainer.style.display = initialState ? "block" : "none";
  toggleSettingContainer.addEventListener("click", async () => {
    const isOpen = settingsContainer.style.display !== "none";
    if (isOpen) {
      (0, import_obsidian19.setIcon)(chevronIcon, "chevron-right");
      settingsContainer.style.display = "none";
      plugin.settings.toggleEditorSettings = false;
    } else {
      (0, import_obsidian19.setIcon)(chevronIcon, "chevron-down");
      settingsContainer.style.display = "block";
      plugin.settings.toggleEditorSettings = true;
    }
    await plugin.saveSettings();
  });
  new import_obsidian19.Setting(settingsContainer).setName("Prompt Select Generate System").setDesc(addDescriptionLink("System role for Prompt Select Generate.", "https://github.com/longy2k/obsidian-bmo-chatbot/wiki/Prompt---Select---Generate-Command", "", "[Instructions]")).addTextArea(
    (text) => text.setPlaceholder("You are a helpful assistant.").setValue(plugin.settings.editor.system_role_prompt_select_generate !== void 0 ? plugin.settings.editor.system_role_prompt_select_generate : DEFAULT_SETTINGS.editor.system_role_prompt_select_generate).onChange(async (value) => {
      plugin.settings.editor.system_role_prompt_select_generate = value !== void 0 ? value : DEFAULT_SETTINGS.editor.system_role_prompt_select_generate;
      await plugin.saveSettings();
    })
  );
}

// src/settings.ts
var BMOSettingTab = class extends import_obsidian20.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  async display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h1", { text: "BMO Chatbot Settings" });
    const changeLogLink = containerEl.createEl("a", {
      text: "Changelog",
      href: "https://github.com/longy2k/obsidian-bmo-chatbot/releases"
    });
    changeLogLink.style.fontSize = "0.8rem";
    containerEl.createEl("p", { text: "Type `/help` in chat for commands." });
    addGeneralSettings(this.containerEl, this.plugin, this);
    addAppearanceSettings(this.containerEl, this.plugin, this);
    addEditorSettings(this.containerEl, this.plugin, this);
    addChatHistorySettings(this.containerEl, this.plugin, this);
    addPromptSettings(this.containerEl, this.plugin, this);
    const separator = document.createElement("hr");
    separator.style.margin = "1rem 0";
    this.containerEl.appendChild(separator);
    addOllamaSettings(this.containerEl, this.plugin, this);
    addRESTAPIURLSettings(this.containerEl, this.plugin, this);
    addAPIConnectionSettings(this.containerEl, this.plugin, this);
  }
};

// src/components/editor/EditorCommands.ts
var import_obsidian22 = require("obsidian");

// src/components/FetchModelEditor.ts
var import_obsidian21 = require("obsidian");
async function fetchOpenAIBaseAPIDataEditor(settings, selectionString) {
  const openai = new openai_default({
    apiKey: settings.APIConnections.openAI.APIKey,
    baseURL: settings.APIConnections.openAI.openAIBaseUrl,
    dangerouslyAllowBrowser: true
    // apiKey is stored within data.json
  });
  const completion = await openai.chat.completions.create({
    model: settings.general.model,
    max_tokens: parseInt(settings.general.max_tokens),
    messages: [
      { role: "system", content: settings.editor.system_role_prompt_select_generate },
      { role: "user", content: selectionString }
    ]
  });
  const message = completion.choices[0].message.content;
  return message;
}
async function fetchOllamaDataEditor(settings, selectionString) {
  const ollamaRESTAPIURL = settings.OllamaConnection.RESTAPIURL;
  if (!ollamaRESTAPIURL) {
    return;
  }
  try {
    const response = await (0, import_obsidian21.requestUrl)({
      url: ollamaRESTAPIURL + "/api/chat",
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        model: settings.general.model,
        messages: [
          { role: "system", content: settings.editor.system_role_prompt_select_generate },
          { role: "user", content: selectionString }
        ],
        stream: false,
        options: {
          temperature: parseInt(settings.general.temperature),
          num_predict: parseInt(settings.general.max_tokens)
        }
      })
    });
    const message = response.json.message.content;
    return message;
  } catch (error) {
    console.error("Error making API request:", error);
    throw error;
  }
}
async function fetchRESTAPIURLDataEditor(settings, selectionString) {
  const urls = [
    settings.RESTAPIURLConnection.RESTAPIURL + "/v1/chat/completions",
    settings.RESTAPIURLConnection.RESTAPIURL + "/api/v1/chat/completions"
  ];
  let lastError = null;
  for (const url of urls) {
    try {
      const response = await (0, import_obsidian21.requestUrl)({
        url,
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${settings.RESTAPIURLConnection.APIKey}`
        },
        body: JSON.stringify({
          model: settings.general.model,
          messages: [
            { role: "system", content: settings.editor.system_role_prompt_select_generate },
            { role: "user", content: selectionString }
          ],
          max_tokens: parseInt(settings.general.max_tokens),
          temperature: parseInt(settings.general.temperature)
        })
      });
      const message = response.json.choices[0].message.content;
      return message;
    } catch (error) {
      lastError = error;
    }
  }
  if (lastError) {
    console.error("Error making API request:", lastError);
    throw lastError;
  }
}
async function fetchMistralDataEditor(settings, selectionString) {
  try {
    const response = await (0, import_obsidian21.requestUrl)({
      url: "https://api.mistral.ai/v1/chat/completions",
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${settings.APIConnections.mistral.APIKey}`
      },
      body: JSON.stringify({
        model: settings.general.model,
        messages: [
          { role: "system", content: settings.editor.system_role_prompt_select_generate },
          { role: "user", content: selectionString }
        ],
        max_tokens: parseInt(settings.general.max_tokens),
        temperature: parseInt(settings.general.temperature)
      })
    });
    const message = response.json.choices[0].message.content;
    return message;
  } catch (error) {
    console.error(error);
  }
}
async function fetchGoogleGeminiDataEditor(settings, selectionString) {
  try {
    const API_KEY = settings.APIConnections.googleGemini.APIKey;
    const requestBody = {
      contents: [{
        parts: [
          { text: settings.editor.system_role_prompt_select_generate + selectionString }
        ]
      }]
    };
    const response = await (0, import_obsidian21.requestUrl)({
      url: `https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${API_KEY}`,
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(requestBody)
    });
    const message = response.json.candidates[0].content.parts[0].text;
    return message;
  } catch (error) {
    console.error(error);
  }
}
async function fetchAnthropicAPIDataEditor(settings, selectionString) {
  const headers = {
    "anthropic-version": "2023-06-01",
    "content-type": "application/json",
    "x-api-key": settings.APIConnections.anthropic.APIKey
  };
  const requestBody = {
    model: settings.general.model,
    prompt: `

Human: ${settings.editor.system_role_prompt_select_generate}

${selectionString}

Assistant:`,
    max_tokens_to_sample: parseInt(settings.general.max_tokens) || 1e5,
    temperature: parseInt(settings.general.temperature),
    stream: false
  };
  try {
    const response = await (0, import_obsidian21.requestUrl)({
      url: "https://api.anthropic.com/v1/complete",
      method: "POST",
      headers,
      body: JSON.stringify(requestBody)
    });
    return response;
  } catch (error) {
    console.error("Error making API request:", error);
    throw error;
  }
}

// src/components/editor/EditorCommands.ts
async function renameTitleCommand(settings) {
  var _a2, _b, _c;
  let uniqueNameFound = false;
  let modelRenameTitle;
  let folderName = ((_c = (_b = app.vault.getAbstractFileByPath(((_a2 = app.workspace.getActiveFile()) == null ? void 0 : _a2.path) || "")) == null ? void 0 : _b.parent) == null ? void 0 : _c.path) || "";
  const fileExtension = ".md";
  const allFiles = app.vault.getFiles();
  const activeFile = app.workspace.getActiveFile();
  let fileContent = "";
  try {
    new import_obsidian22.Notice("Generating title...");
    if (activeFile) {
      fileContent = await app.vault.read(activeFile);
    }
    if (folderName && !folderName.endsWith("/")) {
      folderName += "/";
    }
    const fileNameExists = (name) => {
      return allFiles.some((file) => file.path === folderName + name + fileExtension);
    };
    while (!uniqueNameFound) {
      modelRenameTitle = await fetchModelRenameTitle(settings, fileContent);
      if (!fileNameExists(modelRenameTitle)) {
        uniqueNameFound = true;
      }
    }
    const fileName = folderName + modelRenameTitle + fileExtension;
    if (activeFile) {
      app.vault.rename(activeFile, fileName);
    }
    new import_obsidian22.Notice("Renamed note title.");
  } catch (error) {
    console.error(error);
  }
}
async function promptSelectGenerateCommand(settings) {
  const view = this.app.workspace.getActiveViewOfType(import_obsidian22.MarkdownView);
  const select = view.editor.getSelection();
  if (view && select && select.trim() !== "") {
    if (OPENAI_MODELS.includes(settings.general.model)) {
      try {
        new import_obsidian22.Notice("Generating...");
        const response = await fetchOpenAIBaseAPIDataEditor(settings, select);
        const cursorStart = view.editor.getCursor("from");
        view.editor.replaceSelection(response);
        const cursorEnd = {
          line: cursorStart.line,
          ch: cursorStart.ch + (response == null ? void 0 : response.length)
        };
        view.editor.setSelection(cursorStart, cursorEnd);
      } catch (error) {
        new import_obsidian22.Notice("Error occurred while fetching completion: " + error.message);
        console.log(error.message);
      }
    } else if (settings.APIConnections.openAI.openAIBaseUrl != DEFAULT_SETTINGS.APIConnections.openAI.openAIBaseUrl && settings.APIConnections.openAI.openAIBaseModels.includes(settings.general.model)) {
      try {
        new import_obsidian22.Notice("Generating...");
        const response = await fetchOpenAIBaseAPIDataEditor(settings, select);
        const cursorStart = view.editor.getCursor("from");
        view.editor.replaceSelection(response);
        const cursorEnd = {
          line: cursorStart.line,
          ch: cursorStart.ch + (response == null ? void 0 : response.length)
        };
        view.editor.setSelection(cursorStart, cursorEnd);
      } catch (error) {
        new import_obsidian22.Notice("Error occurred while fetching completion: " + error.message);
        console.log(error.message);
      }
    } else if (ANTHROPIC_MODELS.includes(settings.general.model)) {
      try {
        new import_obsidian22.Notice("Generating...");
        const response = await fetchAnthropicAPIDataEditor(settings, select);
        view.editor.replaceSelection(response);
      } catch (error) {
        new import_obsidian22.Notice("Error occurred while fetching completion: " + error.message);
        console.log(error.message);
      }
    } else if (settings.OllamaConnection.RESTAPIURL && settings.OllamaConnection.ollamaModels.includes(settings.general.model)) {
      try {
        new import_obsidian22.Notice("Generating...");
        const response = await fetchOllamaDataEditor(settings, select);
        const cursorStart = view.editor.getCursor("from");
        view.editor.replaceSelection(response);
        const cursorEnd = {
          line: cursorStart.line,
          ch: cursorStart.ch + (response == null ? void 0 : response.length)
        };
        view.editor.setSelection(cursorStart, cursorEnd);
      } catch (error) {
        new import_obsidian22.Notice("Error occurred while fetching completion: " + error.message);
        console.log(error.message);
      }
    } else if (settings.RESTAPIURLConnection.RESTAPIURL && settings.RESTAPIURLConnection.RESTAPIURLModels.includes(settings.general.model)) {
      try {
        new import_obsidian22.Notice("Generating...");
        const response = await fetchRESTAPIURLDataEditor(settings, select);
        const cursorStart = view.editor.getCursor("from");
        view.editor.replaceSelection(response);
        const cursorEnd = {
          line: cursorStart.line,
          ch: cursorStart.ch + (response == null ? void 0 : response.length)
        };
        view.editor.setSelection(cursorStart, cursorEnd);
      } catch (error) {
        new import_obsidian22.Notice("Error occurred while fetching completion: " + error.message);
        console.log(error.message);
      }
    } else if (settings.APIConnections.mistral.mistralModels.includes(settings.general.model)) {
      try {
        new import_obsidian22.Notice("Generating...");
        const response = await fetchMistralDataEditor(settings, select);
        const cursorStart = view.editor.getCursor("from");
        view.editor.replaceSelection(response);
        const cursorEnd = {
          line: cursorStart.line,
          ch: cursorStart.ch + (response == null ? void 0 : response.length)
        };
        view.editor.setSelection(cursorStart, cursorEnd);
      } catch (error) {
        new import_obsidian22.Notice("Error occurred while fetching completion: " + error.message);
        console.log(error.message);
      }
    } else if (settings.APIConnections.googleGemini.geminiModels.includes(settings.general.model)) {
      try {
        new import_obsidian22.Notice("Generating...");
        const response = await fetchGoogleGeminiDataEditor(settings, select);
        const cursorStart = view.editor.getCursor("from");
        view.editor.replaceSelection(response);
        const cursorEnd = {
          line: cursorStart.line,
          ch: cursorStart.ch + (response == null ? void 0 : response.length)
        };
        view.editor.setSelection(cursorStart, cursorEnd);
      } catch (error) {
        new import_obsidian22.Notice("Error occurred while fetching completion: " + error.message);
        console.log(error.message);
      }
    }
    new import_obsidian22.Notice("Generation complete.");
  } else {
    new import_obsidian22.Notice("No text selected.");
  }
}

// src/main.ts
var DEFAULT_SETTINGS = {
  general: {
    model: "",
    system_role: "You are a helpful assistant.",
    max_tokens: "",
    temperature: "1.00",
    allowReferenceCurrentNote: false
  },
  appearance: {
    userName: "USER",
    chatbotName: "BMO",
    userMessageBackgroundColor: "--background-primary",
    botMessageBackgroundColor: "--background-secondary",
    chatBoxBackgroundColor: "--interactive-accent",
    chatBoxBorderColor: "--interactive-accent",
    allowHeader: true
  },
  editor: {
    system_role_prompt_select_generate: "You are a helpful assistant."
  },
  chatHistory: {
    chatHistoryPath: "BMO/",
    templateFilePath: "",
    allowRenameNoteTitle: false
  },
  prompts: {
    promptFolderPath: "",
    prompt: ""
  },
  OllamaConnection: {
    RESTAPIURL: "",
    allowOllamaStream: false,
    ollamaModels: [],
    ollamaParameters: {
      keep_alive: "",
      mirostat: "0",
      mirostat_eta: "0.1",
      mirostat_tau: "5.0",
      num_ctx: "2048",
      num_gqa: "",
      num_thread: "",
      repeat_last_n: "64",
      repeat_penalty: "1.1",
      seed: "",
      stop: [],
      tfs_z: "1.0",
      top_k: "40",
      top_p: "0.9"
    }
  },
  RESTAPIURLConnection: {
    APIKey: "",
    RESTAPIURL: "",
    allowRESTAPIURLDataStream: false,
    RESTAPIURLModels: []
  },
  APIConnections: {
    openAI: {
      APIKey: "",
      openAIBaseUrl: "https://api.openai.com/v1",
      allowOpenAIBaseUrlDataStream: true,
      openAIBaseModels: []
    },
    mistral: {
      APIKey: "",
      mistralModels: [],
      allowStream: false
    },
    googleGemini: {
      APIKey: "",
      geminiModels: []
    },
    anthropic: {
      APIKey: ""
    }
  },
  toggleGeneralSettings: true,
  toggleAppearanceSettings: false,
  toggleEditorSettings: false,
  toggleChatHistorySettings: false,
  togglePromptSettings: false,
  toggleAPIConnectionSettings: true,
  toggleOpenAISettings: false,
  toggleMistralSettings: false,
  toggleGoogleGeminiSettings: false,
  toggleAnthropicSettings: false,
  toggleRESTAPIURLSettings: true,
  toggleOllamaSettings: true,
  toggleAdvancedSettings: false,
  allModels: []
};
var checkActiveFile = null;
var BMOGPT9 = class extends import_obsidian23.Plugin {
  async onload() {
    await this.loadSettings();
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", () => {
        this.handleFileSwitch();
      })
    );
    this.registerView(
      VIEW_TYPE_CHATBOT,
      (leaf) => new BMOView(leaf, this.settings, this)
    );
    this.addRibbonIcon("bot", "BMO Chatbot", () => {
      this.activateView();
    });
    this.addCommand({
      id: "open-bmo-chatbot",
      name: "Open BMO Chatbot",
      callback: () => {
        this.activateView();
      },
      hotkeys: [
        {
          modifiers: ["Mod"],
          key: "0"
        }
      ]
    });
    this.addCommand({
      id: "rename-note-title",
      name: "Rename Note Title",
      callback: () => {
        renameTitleCommand(this.settings);
      },
      hotkeys: [
        {
          modifiers: ["Mod"],
          key: "'"
        }
      ]
    });
    this.registerEvent(
      this.app.workspace.on("file-menu", (menu, file) => {
        if (!(file instanceof import_obsidian23.TFile)) {
          return;
        }
        menu.addItem((item) => {
          item.setTitle("BMO Chatbot: Generate new title").onClick(() => renameTitleCommand(this.settings));
        });
      })
    );
    this.addCommand({
      id: "prompt-select-generate",
      name: "Prompt Select Generate",
      callback: () => {
        promptSelectGenerateCommand(this.settings);
      },
      hotkeys: [
        {
          modifiers: ["Mod", "Shift"],
          key: "="
        }
      ]
    });
    this.addSettingTab(new BMOSettingTab(this.app, this));
  }
  handleFileSwitch() {
    checkActiveFile = this.app.workspace.getActiveFile();
  }
  async onunload() {
    this.app.workspace.getLeavesOfType(VIEW_TYPE_CHATBOT).forEach((leaf) => {
      const bmoView = leaf.view;
      if (bmoView) {
        this.saveSettings();
        bmoView.cleanup();
      }
    });
  }
  async activateView() {
    this.app.workspace.detachLeavesOfType(VIEW_TYPE_CHATBOT);
    const rightLeaf = this.app.workspace.getRightLeaf(false);
    await (rightLeaf == null ? void 0 : rightLeaf.setViewState({
      type: VIEW_TYPE_CHATBOT,
      active: true
    }));
    this.app.workspace.revealLeaf(
      this.app.workspace.getLeavesOfType(VIEW_TYPE_CHATBOT)[0]
    );
    const textarea = document.querySelector(".chatbox textarea");
    if (textarea) {
      textarea.style.opacity = "0";
      textarea.style.transition = "opacity 1s ease-in-out";
      setTimeout(() => {
        textarea.focus();
        textarea.style.opacity = "1";
      }, 50);
    }
    this.app.workspace.revealLeaf(
      this.app.workspace.getLeavesOfType(VIEW_TYPE_CHATBOT)[0]
    );
    const messageContainer = document.querySelector("#messageContainer");
    if (messageContainer) {
      messageContainer.scroll({
        top: messageContainer.scrollHeight,
        behavior: "smooth"
      });
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3ZpZXcudHMiLCAic3JjL2NvbXBvbmVudHMvRmV0Y2hNb2RlbFJlc3BvbnNlLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3ZlcnNpb24udHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvc3RyZWFtaW5nLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL2Vycm9yLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL19zaGltcy9hZ2VudC50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL19zaGltcy9mZXRjaC5tanMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9fc2hpbXMvZm9ybS1kYXRhLm1qcyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9fc2hpbXMvZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMudHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvX3NoaW1zL2ZpbGVGcm9tUGF0aC50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9fc2hpbXMvbm9kZS1yZWFkYWJsZS50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy91cGxvYWRzLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL2NvcmUudHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcGFnaW5hdGlvbi50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZS50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvYXVkaW8vdHJhbnNjcmlwdGlvbnMudHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcmVzb3VyY2VzL2F1ZGlvL3RyYW5zbGF0aW9ucy50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvYXVkaW8vYXVkaW8udHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcmVzb3VyY2VzL2NoYXQvY29tcGxldGlvbnMudHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcmVzb3VyY2VzL2NoYXQvY2hhdC50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvY29tcGxldGlvbnMudHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcmVzb3VyY2VzL2VtYmVkZGluZ3MudHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcmVzb3VyY2VzL2VkaXRzLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9maWxlcy50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvZmluZS10dW5lcy50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvZmluZS10dW5pbmcvam9icy50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvZmluZS10dW5pbmcvZmluZS10dW5pbmcudHMiLCAibm9kZV9tb2R1bGVzL29wZW5haS9zcmMvcmVzb3VyY2VzL2ltYWdlcy50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9yZXNvdXJjZXMvbW9kZWxzLnRzIiwgIm5vZGVfbW9kdWxlcy9vcGVuYWkvc3JjL3Jlc291cmNlcy9tb2RlcmF0aW9ucy50cyIsICJub2RlX21vZHVsZXMvb3BlbmFpL3NyYy9pbmRleC50cyIsICJub2RlX21vZHVsZXMvbWFya2VkL2xpYi9tYXJrZWQuZXNtLmpzIiwgInNyYy9jb21wb25lbnRzL1ByaXNtYUhpZ2hsaWdodGluZy50cyIsICJzcmMvY29tcG9uZW50cy9jaGF0L0J1dHRvbnMudHMiLCAic3JjL2NvbXBvbmVudHMvZWRpdG9yL1JlZmVyZW5jZUN1cnJlbnROb3RlLnRzIiwgInNyYy9jb21wb25lbnRzL2NoYXQvTWVzc2FnZS50cyIsICJzcmMvY29tcG9uZW50cy9jaGF0L1Byb21wdC50cyIsICJzcmMvdXRpbHMvQ29sb3JDb252ZXJ0ZXIudHMiLCAic3JjL2NvbXBvbmVudHMvY2hhdC9Cb3RNZXNzYWdlLnRzIiwgInNyYy9jb21wb25lbnRzL2NoYXQvQ29tbWFuZHMudHMiLCAic3JjL2NvbXBvbmVudHMvZWRpdG9yL0ZldGNoUmVuYW1lTm90ZVRpdGxlLnRzIiwgInNyYy9jb21wb25lbnRzL2NoYXQvVXNlck1lc3NhZ2UudHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9jb21wb25lbnRzL3NldHRpbmdzL0dlbmVyYWxTZXR0aW5ncy50cyIsICJzcmMvY29tcG9uZW50cy9GZXRjaE1vZGVsTGlzdC50cyIsICJzcmMvY29tcG9uZW50cy9zZXR0aW5ncy9BcHBlYXJhbmNlU2V0dGluZ3MudHMiLCAic3JjL2NvbXBvbmVudHMvc2V0dGluZ3MvQ2hhdEhpc3RvcnlTZXR0aW5ncy50cyIsICJzcmMvY29tcG9uZW50cy9zZXR0aW5ncy9PbGxhbWFTZXR0aW5ncy50cyIsICJzcmMvdXRpbHMvRGVzY3JpcHRpb25MaW5rLnRzIiwgInNyYy9jb21wb25lbnRzL3NldHRpbmdzL0Nvbm5lY3Rpb25TZXR0aW5ncy50cyIsICJzcmMvY29tcG9uZW50cy9zZXR0aW5ncy9BUElDb25uZWN0aW9ucy9PcGVuQUlDb25uZWN0aW9ucy50cyIsICJzcmMvY29tcG9uZW50cy9zZXR0aW5ncy9BUElDb25uZWN0aW9ucy9NaXN0cmFsQ29ubmVjdGlvbnMudHMiLCAic3JjL2NvbXBvbmVudHMvc2V0dGluZ3MvQVBJQ29ubmVjdGlvbnMvR29vZ2xlR2VtaW5pQ29ubmVjdGlvbnMudHMiLCAic3JjL2NvbXBvbmVudHMvc2V0dGluZ3MvQVBJQ29ubmVjdGlvbnMvQW50aHJvcGljQ29ubmVjdGlvbnMudHMiLCAic3JjL2NvbXBvbmVudHMvc2V0dGluZ3MvUHJvbXB0U2V0dGluZ3MudHMiLCAic3JjL2NvbXBvbmVudHMvc2V0dGluZ3MvT3BlbkFJUmVzdEFQSVNldHRpbmdzLnRzIiwgInNyYy9jb21wb25lbnRzL3NldHRpbmdzL0VkaXRvclNldHRpbmdzLnRzIiwgInNyYy9jb21wb25lbnRzL2VkaXRvci9FZGl0b3JDb21tYW5kcy50cyIsICJzcmMvY29tcG9uZW50cy9GZXRjaE1vZGVsRWRpdG9yLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgeyBQbHVnaW4sIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQk1PVmlldywgVklFV19UWVBFX0NIQVRCT1R9IGZyb20gJy4vdmlldyc7XG5pbXBvcnQgeyBCTU9TZXR0aW5nVGFiIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBwcm9tcHRTZWxlY3RHZW5lcmF0ZUNvbW1hbmQsIHJlbmFtZVRpdGxlQ29tbWFuZCB9IGZyb20gJy4vY29tcG9uZW50cy9lZGl0b3IvRWRpdG9yQ29tbWFuZHMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJNT1NldHRpbmdzIHtcblx0Z2VuZXJhbDoge1xuXHRcdG1vZGVsOiBzdHJpbmcsXG5cdFx0c3lzdGVtX3JvbGU6IHN0cmluZyxcblx0XHRtYXhfdG9rZW5zOiBzdHJpbmcsXG5cdFx0dGVtcGVyYXR1cmU6IHN0cmluZyxcblx0XHRhbGxvd1JlZmVyZW5jZUN1cnJlbnROb3RlOiBib29sZWFuLFxuXHR9LFxuXHRhcHBlYXJhbmNlOiB7XG5cdFx0dXNlck5hbWU6IHN0cmluZyxcblx0XHRjaGF0Ym90TmFtZTogc3RyaW5nLFxuXHRcdHVzZXJNZXNzYWdlQmFja2dyb3VuZENvbG9yOiBzdHJpbmcsXG5cdFx0Ym90TWVzc2FnZUJhY2tncm91bmRDb2xvcjogc3RyaW5nLFxuXHRcdGNoYXRCb3hCYWNrZ3JvdW5kQ29sb3I6IHN0cmluZyxcblx0XHRjaGF0Qm94Qm9yZGVyQ29sb3I6IHN0cmluZyxcblx0XHRhbGxvd0hlYWRlcjogYm9vbGVhbixcblx0fSxcblx0ZWRpdG9yOiB7XG5cdFx0c3lzdGVtX3JvbGVfcHJvbXB0X3NlbGVjdF9nZW5lcmF0ZTogc3RyaW5nLFxuXHR9LFxuXHRjaGF0SGlzdG9yeToge1xuXHRcdGNoYXRIaXN0b3J5UGF0aDogc3RyaW5nLFxuXHRcdHRlbXBsYXRlRmlsZVBhdGg6IHN0cmluZyxcblx0XHRhbGxvd1JlbmFtZU5vdGVUaXRsZTogYm9vbGVhbixcblx0fVxuXHRwcm9tcHRzOiB7XG5cdFx0cHJvbXB0Rm9sZGVyUGF0aDogc3RyaW5nLFxuXHRcdHByb21wdDogc3RyaW5nLFxuXHR9LFxuXHRPbGxhbWFDb25uZWN0aW9uOiB7XG5cdFx0UkVTVEFQSVVSTDogc3RyaW5nLFxuXHRcdGFsbG93T2xsYW1hU3RyZWFtOiBib29sZWFuLFxuXHRcdG9sbGFtYU1vZGVsczogc3RyaW5nW10sXG5cdFx0b2xsYW1hUGFyYW1ldGVyczoge1xuXHRcdFx0bWlyb3N0YXQ6IHN0cmluZyxcblx0XHRcdG1pcm9zdGF0X2V0YTogc3RyaW5nLFxuXHRcdFx0bWlyb3N0YXRfdGF1OiBzdHJpbmcsXG5cdFx0XHRudW1fY3R4OiBzdHJpbmcsXG5cdFx0XHRudW1fZ3FhOiBzdHJpbmcsXG5cdFx0XHRudW1fdGhyZWFkOiBzdHJpbmcsXG5cdFx0XHRyZXBlYXRfbGFzdF9uOiBzdHJpbmcsXG5cdFx0XHRyZXBlYXRfcGVuYWx0eTogc3RyaW5nLFxuXHRcdFx0c2VlZDogc3RyaW5nLFxuXHRcdFx0c3RvcDogc3RyaW5nW10sXG5cdFx0XHR0ZnNfejogc3RyaW5nLFxuXHRcdFx0dG9wX2s6IHN0cmluZyxcblx0XHRcdHRvcF9wOiBzdHJpbmcsXG5cdFx0XHRrZWVwX2FsaXZlOiBzdHJpbmcsXG5cdFx0fSxcblx0fSxcblx0UkVTVEFQSVVSTENvbm5lY3Rpb246IHtcblx0XHRBUElLZXk6IHN0cmluZyxcblx0XHRSRVNUQVBJVVJMOiBzdHJpbmcsXG5cdFx0YWxsb3dSRVNUQVBJVVJMRGF0YVN0cmVhbTogYm9vbGVhbixcblx0XHRSRVNUQVBJVVJMTW9kZWxzOiBzdHJpbmdbXSxcblx0fSxcblx0QVBJQ29ubmVjdGlvbnM6IHtcblx0XHRvcGVuQUk6IHtcblx0XHRcdEFQSUtleTogc3RyaW5nLFxuXHRcdFx0b3BlbkFJQmFzZVVybDogc3RyaW5nLFxuXHRcdFx0YWxsb3dPcGVuQUlCYXNlVXJsRGF0YVN0cmVhbTogYm9vbGVhbixcblx0XHRcdG9wZW5BSUJhc2VNb2RlbHM6IHN0cmluZ1tdLFxuXHRcdH0sXG5cdFx0bWlzdHJhbDoge1xuXHRcdFx0QVBJS2V5OiBzdHJpbmcsXG5cdFx0XHRtaXN0cmFsTW9kZWxzOiBzdHJpbmdbXSxcblx0XHRcdGFsbG93U3RyZWFtOiBib29sZWFuLFxuXHRcdH0sXG5cdFx0Z29vZ2xlR2VtaW5pOiB7XG5cdFx0XHRBUElLZXk6IHN0cmluZyxcblx0XHRcdGdlbWluaU1vZGVsczogc3RyaW5nW10sXG5cdFx0fVxuXHRcdGFudGhyb3BpYzoge1xuXHRcdFx0QVBJS2V5OiBzdHJpbmcsXG5cdFx0fVxuXHR9LFxuXHR0b2dnbGVHZW5lcmFsU2V0dGluZ3M6IGJvb2xlYW4sXG5cdHRvZ2dsZUFwcGVhcmFuY2VTZXR0aW5nczogYm9vbGVhbixcblx0dG9nZ2xlRWRpdG9yU2V0dGluZ3M6IGJvb2xlYW4sXG5cdHRvZ2dsZUNoYXRIaXN0b3J5U2V0dGluZ3M6IGJvb2xlYW4sXG5cdHRvZ2dsZVByb21wdFNldHRpbmdzOiBib29sZWFuLFxuXHR0b2dnbGVBUElDb25uZWN0aW9uU2V0dGluZ3M6IGJvb2xlYW4sXG5cdHRvZ2dsZU9wZW5BSVNldHRpbmdzOiBib29sZWFuLFxuXHR0b2dnbGVNaXN0cmFsU2V0dGluZ3M6IGJvb2xlYW4sXG5cdHRvZ2dsZUdvb2dsZUdlbWluaVNldHRpbmdzOiBib29sZWFuLFxuXHR0b2dnbGVBbnRocm9waWNTZXR0aW5nczogYm9vbGVhbixcblx0dG9nZ2xlUkVTVEFQSVVSTFNldHRpbmdzOiBib29sZWFuLFxuXHR0b2dnbGVPbGxhbWFTZXR0aW5nczogYm9vbGVhbixcblx0dG9nZ2xlQWR2YW5jZWRTZXR0aW5nczogYm9vbGVhbixcblx0YWxsTW9kZWxzOiBzdHJpbmdbXSxcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IEJNT1NldHRpbmdzID0ge1xuXHRnZW5lcmFsOiB7XG5cdFx0bW9kZWw6ICcnLFxuXHRcdHN5c3RlbV9yb2xlOiAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50LicsXG5cdFx0bWF4X3Rva2VuczogJycsXG5cdFx0dGVtcGVyYXR1cmU6ICcxLjAwJyxcblx0XHRhbGxvd1JlZmVyZW5jZUN1cnJlbnROb3RlOiBmYWxzZSxcblx0fSxcblx0YXBwZWFyYW5jZToge1xuXHRcdHVzZXJOYW1lOiAnVVNFUicsXG5cdFx0Y2hhdGJvdE5hbWU6ICdCTU8nLFxuXHRcdHVzZXJNZXNzYWdlQmFja2dyb3VuZENvbG9yOiAnLS1iYWNrZ3JvdW5kLXByaW1hcnknLFxuXHRcdGJvdE1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3I6ICctLWJhY2tncm91bmQtc2Vjb25kYXJ5Jyxcblx0XHRjaGF0Qm94QmFja2dyb3VuZENvbG9yOiAnLS1pbnRlcmFjdGl2ZS1hY2NlbnQnLFxuXHRcdGNoYXRCb3hCb3JkZXJDb2xvcjogJy0taW50ZXJhY3RpdmUtYWNjZW50Jyxcblx0XHRhbGxvd0hlYWRlcjogdHJ1ZSxcblx0fSxcblx0ZWRpdG9yOiB7XG5cdFx0c3lzdGVtX3JvbGVfcHJvbXB0X3NlbGVjdF9nZW5lcmF0ZTogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudC4nLFxuXHR9LFxuXHRjaGF0SGlzdG9yeToge1xuXHRcdGNoYXRIaXN0b3J5UGF0aDogJ0JNTy8nLFxuXHRcdHRlbXBsYXRlRmlsZVBhdGg6ICcnLFxuXHRcdGFsbG93UmVuYW1lTm90ZVRpdGxlOiBmYWxzZSxcblx0fSxcblx0cHJvbXB0czoge1xuXHRcdHByb21wdEZvbGRlclBhdGg6ICcnLFxuXHRcdHByb21wdDogJycsXG5cdH0sXG5cdE9sbGFtYUNvbm5lY3Rpb246IHtcblx0XHRSRVNUQVBJVVJMOiAnJyxcblx0XHRhbGxvd09sbGFtYVN0cmVhbTogZmFsc2UsXG5cdFx0b2xsYW1hTW9kZWxzOiBbXSxcblx0XHRvbGxhbWFQYXJhbWV0ZXJzOiB7XG5cdFx0XHRrZWVwX2FsaXZlOiAnJyxcblx0XHRcdG1pcm9zdGF0OiAnMCcsXG5cdFx0XHRtaXJvc3RhdF9ldGE6ICcwLjEnLFxuXHRcdFx0bWlyb3N0YXRfdGF1OiAnNS4wJyxcblx0XHRcdG51bV9jdHg6ICcyMDQ4Jyxcblx0XHRcdG51bV9ncWE6ICcnLFxuXHRcdFx0bnVtX3RocmVhZDogJycsXG5cdFx0XHRyZXBlYXRfbGFzdF9uOiAnNjQnLFxuXHRcdFx0cmVwZWF0X3BlbmFsdHk6ICcxLjEnLFxuXHRcdFx0c2VlZDogJycsXG5cdFx0XHRzdG9wOiBbXSxcblx0XHRcdHRmc196OiAnMS4wJyxcblx0XHRcdHRvcF9rOiAnNDAnLFxuXHRcdFx0dG9wX3A6ICcwLjknLFxuXHRcdH0sXG5cdH0sXG5cdFJFU1RBUElVUkxDb25uZWN0aW9uOiB7XG5cdFx0QVBJS2V5OiAnJyxcdFxuXHRcdFJFU1RBUElVUkw6ICcnLFxuXHRcdGFsbG93UkVTVEFQSVVSTERhdGFTdHJlYW06IGZhbHNlLFxuXHRcdFJFU1RBUElVUkxNb2RlbHM6IFtdLFxuXHR9LFxuXHRBUElDb25uZWN0aW9uczoge1xuXHRcdG9wZW5BSToge1xuXHRcdFx0QVBJS2V5OiAnJyxcblx0XHRcdG9wZW5BSUJhc2VVcmw6ICdodHRwczovL2FwaS5vcGVuYWkuY29tL3YxJyxcblx0XHRcdGFsbG93T3BlbkFJQmFzZVVybERhdGFTdHJlYW06IHRydWUsXG5cdFx0XHRvcGVuQUlCYXNlTW9kZWxzOiBbXSxcblx0XHR9LFxuXHRcdG1pc3RyYWw6IHtcblx0XHRcdEFQSUtleTogJycsXG5cdFx0XHRtaXN0cmFsTW9kZWxzOiBbXSxcblx0XHRcdGFsbG93U3RyZWFtOiBmYWxzZSxcblx0XHR9LFxuXHRcdGdvb2dsZUdlbWluaToge1xuXHRcdFx0QVBJS2V5OiAnJyxcblx0XHRcdGdlbWluaU1vZGVsczogW10sXG5cdFx0fSxcblx0XHRhbnRocm9waWM6IHtcblx0XHRcdEFQSUtleTogJycsXG5cdFx0fVxuXHR9LFxuXHR0b2dnbGVHZW5lcmFsU2V0dGluZ3M6IHRydWUsXG5cdHRvZ2dsZUFwcGVhcmFuY2VTZXR0aW5nczogZmFsc2UsXG5cdHRvZ2dsZUVkaXRvclNldHRpbmdzOiBmYWxzZSxcblx0dG9nZ2xlQ2hhdEhpc3RvcnlTZXR0aW5nczogZmFsc2UsXG5cdHRvZ2dsZVByb21wdFNldHRpbmdzOiBmYWxzZSxcblx0dG9nZ2xlQVBJQ29ubmVjdGlvblNldHRpbmdzOiB0cnVlLFxuXHR0b2dnbGVPcGVuQUlTZXR0aW5nczogZmFsc2UsXG5cdHRvZ2dsZU1pc3RyYWxTZXR0aW5nczogZmFsc2UsXG5cdHRvZ2dsZUdvb2dsZUdlbWluaVNldHRpbmdzOiBmYWxzZSxcblx0dG9nZ2xlQW50aHJvcGljU2V0dGluZ3M6IGZhbHNlLFxuXHR0b2dnbGVSRVNUQVBJVVJMU2V0dGluZ3M6IHRydWUsXG5cdHRvZ2dsZU9sbGFtYVNldHRpbmdzOiB0cnVlLFxuXHR0b2dnbGVBZHZhbmNlZFNldHRpbmdzOiBmYWxzZSxcblx0YWxsTW9kZWxzOiBbXSxcbn1cblxuZXhwb3J0IGxldCBjaGVja0FjdGl2ZUZpbGU6IFRGaWxlIHwgbnVsbCA9IG51bGw7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJNT0dQVCBleHRlbmRzIFBsdWdpbiB7XG5cdHNldHRpbmdzOiBCTU9TZXR0aW5ncztcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdC8vIEJVRz8/XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignYWN0aXZlLWxlYWYtY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRmlsZVN3aXRjaCgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuXHRcdHRoaXMucmVnaXN0ZXJWaWV3KFxuXHRcdFx0VklFV19UWVBFX0NIQVRCT1QsXG5cdFx0XHQobGVhZikgPT4gbmV3IEJNT1ZpZXcobGVhZiwgdGhpcy5zZXR0aW5ncywgdGhpcylcblx0XHQpO1xuXG5cdFx0dGhpcy5hZGRSaWJib25JY29uKCdib3QnLCAnQk1PIENoYXRib3QnLCAoKSA9PiB7XG5cdFx0XHR0aGlzLmFjdGl2YXRlVmlldygpO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnb3Blbi1ibW8tY2hhdGJvdCcsXG4gICAgICAgICAgICBuYW1lOiAnT3BlbiBCTU8gQ2hhdGJvdCcsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZhdGVWaWV3KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaG90a2V5czogW1xuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bW9kaWZpZXJzOiBbJ01vZCddLFxuXHRcdFx0XHRcdGtleTogJzAnLFxuXHRcdFx0XHR9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdyZW5hbWUtbm90ZS10aXRsZScsXG4gICAgICAgICAgICBuYW1lOiAnUmVuYW1lIE5vdGUgVGl0bGUnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0cmVuYW1lVGl0bGVDb21tYW5kKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhvdGtleXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG1vZGlmaWVyczogWydNb2QnXSxcblx0XHRcdFx0XHRrZXk6ICdcXCcnLFxuXHRcdFx0XHR9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG5cblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQoXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtbWVudScsIChtZW51LCBmaWxlKSA9PiB7XG5cdFx0XHRcdGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdFx0XHRcdGl0ZW1cblx0XHRcdFx0XHRcdC5zZXRUaXRsZSgnQk1PIENoYXRib3Q6IEdlbmVyYXRlIG5ldyB0aXRsZScpXG5cdFx0XHRcdFx0XHQub25DbGljaygoKSA9PiByZW5hbWVUaXRsZUNvbW1hbmQodGhpcy5zZXR0aW5ncykpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG4gICAgICAgICAgICBpZDogJ3Byb21wdC1zZWxlY3QtZ2VuZXJhdGUnLFxuICAgICAgICAgICAgbmFtZTogJ1Byb21wdCBTZWxlY3QgR2VuZXJhdGUnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0cHJvbXB0U2VsZWN0R2VuZXJhdGVDb21tYW5kKHRoaXMuc2V0dGluZ3MpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhvdGtleXM6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdG1vZGlmaWVyczogWydNb2QnLCAnU2hpZnQnXSxcblx0XHRcdFx0XHRrZXk6ICc9Jyxcblx0XHRcdFx0fSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBCTU9TZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cdH1cblxuXHRoYW5kbGVGaWxlU3dpdGNoKCkge1xuXHRcdGNoZWNrQWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cdH1cblxuXHRhc3luYyBvbnVubG9hZCgpIHtcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9DSEFUQk9UKS5mb3JFYWNoKChsZWFmKSA9PiB7XG5cdFx0XHRjb25zdCBibW9WaWV3ID0gbGVhZi52aWV3IGFzIEJNT1ZpZXc7XG5cdFxuXHRcdFx0aWYgKGJtb1ZpZXcpIHtcblx0XHRcdFx0dGhpcy5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0Ym1vVmlldy5jbGVhbnVwKCk7XG5cdFx0XHR9IFxuXHRcdH0pO1xuXHRcdFxuXHR9XG5cblx0YXN5bmMgYWN0aXZhdGVWaWV3KCkge1xuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoVklFV19UWVBFX0NIQVRCT1QpO1xuXHRcblx0XHRjb25zdCByaWdodExlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcblx0XHRhd2FpdCByaWdodExlYWY/LnNldFZpZXdTdGF0ZSh7XG5cdFx0XHR0eXBlOiBWSUVXX1RZUEVfQ0hBVEJPVCxcblx0XHRcdGFjdGl2ZTogdHJ1ZSxcblx0XHR9KTtcblxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKFxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfQ0hBVEJPVClbMF1cblx0XHQpO1xuXHRcblx0XHQvLyBGb2N1cyBvbiB0aGUgdGV4dGFyZWFcblx0XHRjb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0Ym94IHRleHRhcmVhJykgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcblx0XG5cdFx0aWYgKHRleHRhcmVhKSB7XG5cdFx0XHR0ZXh0YXJlYS5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuXHRcdFx0dGV4dGFyZWEuc3R5bGUudHJhbnNpdGlvbiA9ICdvcGFjaXR5IDFzIGVhc2UtaW4tb3V0Jztcblx0XG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0dGV4dGFyZWEuZm9jdXMoKTtcblx0XHRcdFx0dGV4dGFyZWEuc3R5bGUub3BhY2l0eSA9ICcxJztcblx0XHRcdH0sIDUwKTsgXG5cdFx0fVxuXHRcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX0NIQVRCT1QpWzBdXG5cdFx0KTtcblx0XG5cdFx0Y29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJyk7XG5cdFx0aWYgKG1lc3NhZ2VDb250YWluZXIpIHtcblx0XHRcdG1lc3NhZ2VDb250YWluZXIuc2Nyb2xsKHtcblx0XHRcdFx0dG9wOiBtZXNzYWdlQ29udGFpbmVyLnNjcm9sbEhlaWdodCwgXG5cdFx0XHRcdGJlaGF2aW9yOiAnc21vb3RoJyBcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXHRcblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxufSIsICJpbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgVEZpbGUsIE1hcmtkb3duVmlldywgRWRpdG9yLCBFZGl0b3JQb3NpdGlvbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7REVGQVVMVF9TRVRUSU5HUywgQk1PU2V0dGluZ3N9IGZyb20gJy4vbWFpbic7XG5pbXBvcnQgQk1PR1BUIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBmZXRjaE9wZW5BSUFQSURhdGFTdHJlYW0sIGZldGNoT3BlbkFJQVBJRGF0YSwgZmV0Y2hPbGxhbWFEYXRhLCBmZXRjaE9sbGFtYURhdGFTdHJlYW0sIGZldGNoQW50aHJvcGljQVBJRGF0YSwgZmV0Y2hSRVNUQVBJVVJMRGF0YSwgZmV0Y2hSRVNUQVBJVVJMRGF0YVN0cmVhbSwgZmV0Y2hNaXN0cmFsRGF0YSwgZmV0Y2hNaXN0cmFsRGF0YVN0cmVhbSwgZmV0Y2hHb29nbGVHZW1pbmlEYXRhIH0gZnJvbSAnLi9jb21wb25lbnRzL0ZldGNoTW9kZWxSZXNwb25zZSc7XG5pbXBvcnQgeyBleGVjdXRlQ29tbWFuZCB9IGZyb20gJy4vY29tcG9uZW50cy9jaGF0L0NvbW1hbmRzJztcbmltcG9ydCB7IGdldEFjdGl2ZUZpbGVDb250ZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL2VkaXRvci9SZWZlcmVuY2VDdXJyZW50Tm90ZSc7XG5pbXBvcnQgeyBhZGRNZXNzYWdlIH0gZnJvbSAnLi9jb21wb25lbnRzL2NoYXQvTWVzc2FnZSc7XG5pbXBvcnQgeyBkaXNwbGF5VXNlck1lc3NhZ2UgfSBmcm9tICcuL2NvbXBvbmVudHMvY2hhdC9Vc2VyTWVzc2FnZSc7XG5pbXBvcnQgeyBkaXNwbGF5Qm90TWVzc2FnZSwgZGlzcGxheUVycm9yQm90TWVzc2FnZSB9IGZyb20gJy4vY29tcG9uZW50cy9jaGF0L0JvdE1lc3NhZ2UnO1xuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9DSEFUQk9UID0gJ2NoYXRib3Qtdmlldyc7XG5leHBvcnQgY29uc3QgZmlsZW5hbWVNZXNzYWdlSGlzdG9yeUpTT04gPSAnLi8ub2JzaWRpYW4vcGx1Z2lucy9ibW8tY2hhdGJvdC9kYXRhL21lc3NhZ2VIaXN0b3J5Lmpzb24nO1xuXG5leHBvcnQgY29uc3QgQU5USFJPUElDX01PREVMUyA9IFsnY2xhdWRlLWluc3RhbnQtMS4yJywgJ2NsYXVkZS0yLjAnLCAnY2xhdWRlLTIuMSddO1xuZXhwb3J0IGNvbnN0IE9QRU5BSV9NT0RFTFMgPSBbJ2dwdC0zLjUtdHVyYm8nLCAnZ3B0LTMuNS10dXJiby0xMTA2JywgJ2dwdC00JywgJ2dwdC00LXR1cmJvLXByZXZpZXcnXTtcblxuZXhwb3J0IGxldCBtZXNzYWdlSGlzdG9yeTogeyByb2xlOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZyB9W10gPSBbXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyTWVzc2FnZUhpc3RvcnkoKSB7XG4gICAgbWVzc2FnZUhpc3RvcnkgPSBbXTtcbn1cblxuZXhwb3J0IGxldCBsYXN0Q3Vyc29yUG9zaXRpb246IEVkaXRvclBvc2l0aW9uID0ge1xuICAgIGxpbmU6IDAsXG4gICAgY2g6IDAsXG59XG5cbmV4cG9ydCBsZXQgbGFzdEN1cnNvclBvc2l0aW9uRmlsZTogVEZpbGUgfCBudWxsID0gbnVsbDtcbmV4cG9ydCBsZXQgYWN0aXZlRWRpdG9yOiBFZGl0b3IgfCBudWxsIHwgdW5kZWZpbmVkID0gbnVsbDtcblxuZXhwb3J0IGNsYXNzIEJNT1ZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XG4gICAgcHVibGljIHNldHRpbmdzOiBCTU9TZXR0aW5ncztcbiAgICBwcml2YXRlIHRleHRhcmVhRWxlbWVudDogSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgICBwcml2YXRlIHByZXZlbnRFbnRlciA9IGZhbHNlO1xuICAgIHByaXZhdGUgcGx1Z2luOiBCTU9HUFQ7XG5cbiAgICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBzZXR0aW5nczogQk1PU2V0dGluZ3MsIHBsdWdpbjogQk1PR1BUKSB7XG4gICAgICAgIHN1cGVyKGxlYWYpO1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmljb24gPSAnYm90JztcbiAgICAgICAgdGhpcy5hZGRDdXJzb3JMb2dnaW5nKCk7XG4gICAgfVxuXG4gICAgZ2V0Vmlld1R5cGUoKSB7XG4gICAgICAgIHJldHVybiBWSUVXX1RZUEVfQ0hBVEJPVDtcbiAgICB9XG5cbiAgICBnZXREaXNwbGF5VGV4dCgpIHtcbiAgICAgICAgcmV0dXJuICdCTU8gQ2hhdGJvdCc7XG4gICAgfVxuICAgIFxuICAgIGFzeW5jIG9uT3BlbigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jaGlsZHJlblsxXTtcbiAgICAgICAgY29udGFpbmVyLmVtcHR5KCk7XG4gICAgICAgIGNvbnN0IGNoYXRib3RDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgIGF0dHI6IHtcbiAgICAgICAgICAgICAgICBjbGFzczogJ2NoYXRib3RDb250YWluZXInLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgaGVhZGVyID0gY2hhdGJvdENvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIGlkOiAnaGVhZGVyJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgY2hhdGJvdE5hbWVIZWFkaW5nID0gY2hhdGJvdENvbnRhaW5lci5jcmVhdGVFbCgnaDEnLCB7IFxuICAgICAgICAgICAgdGV4dDogdGhpcy5zZXR0aW5ncy5hcHBlYXJhbmNlLmNoYXRib3ROYW1lIHx8IERFRkFVTFRfU0VUVElOR1MuYXBwZWFyYW5jZS5jaGF0Ym90TmFtZSxcbiAgICAgICAgICAgIGF0dHI6IHtcbiAgICAgICAgICAgICAgICBpZDogJ2NoYXRib3ROYW1lSGVhZGluZydcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgbW9kZWxOYW1lID0gY2hhdGJvdENvbnRhaW5lci5jcmVhdGVFbCgncCcsIHtcbiAgICAgICAgICAgIHRleHQ6ICdNb2RlbDogJyArIHRoaXMuc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCB8fCBERUZBVUxUX1NFVFRJTkdTLmdlbmVyYWwubW9kZWwsXG4gICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgaWQ6ICdtb2RlbE5hbWUnXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHNwYW5FbGVtZW50ID0gY2hhdGJvdENvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgICAgIGF0dHI6IHtcbiAgICAgICAgICAgICAgICBjbGFzczogJ2RvdEluZGljYXRvcicsXG4gICAgICAgICAgICAgICAgaWQ6ICdtYXJrRG93bkJvb2xlYW4nXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVmZXJlbmNlQ3VycmVudE5vdGVFbGVtZW50ID0gY2hhdGJvdENvbnRhaW5lci5jcmVhdGVFbCgncCcsIHtcbiAgICAgICAgICAgIHRleHQ6ICdSZWZlcmVuY2UgQ3VycmVudCBOb3RlJyxcbiAgICAgICAgICAgIGF0dHI6IHtcbiAgICAgICAgICAgICAgICBpZDogJ3JlZmVyZW5jZUN1cnJlbnROb3RlJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICByZWZlcmVuY2VDdXJyZW50Tm90ZUVsZW1lbnQuYXBwZW5kQ2hpbGQoc3BhbkVsZW1lbnQpO1xuXG4gICAgICAgIHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBcbiAgICAgICAgaWYgKHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZ2VuZXJhbC5hbGxvd1JlZmVyZW5jZUN1cnJlbnROb3RlKSB7XG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlQ3VycmVudE5vdGVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VDdXJyZW50Tm90ZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIFxuICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gY2hhdGJvdENvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIGlkOiAnbWVzc2FnZUNvbnRhaW5lcicsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQoY2hhdGJvdE5hbWVIZWFkaW5nKTtcbiAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKG1vZGVsTmFtZSk7XG5cbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYXBwZWFyYW5jZS5hbGxvd0hlYWRlcikge1xuICAgICAgICAgICAgaGVhZGVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaGVhZGVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBtZXNzYWdlQ29udGFpbmVyLnN0eWxlLm1heEhlaWdodCA9ICdjYWxjKDEwMCUgLSA2MHB4KSc7XG4gICAgICAgICAgICByZWZlcmVuY2VDdXJyZW50Tm90ZUVsZW1lbnQuc3R5bGUubWFyZ2luID0gJzAuNXJlbSAwIDAuNXJlbSAwJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgYXdhaXQgbG9hZERhdGEoKTtcbiAgICAgICAgXG4gICAgICAgIG1lc3NhZ2VDb250YWluZXIuaWQgPSAnbWVzc2FnZUNvbnRhaW5lcic7XG4gICAgICAgIFxuICAgICAgICBtZXNzYWdlSGlzdG9yeS5mb3JFYWNoKGFzeW5jIChtZXNzYWdlRGF0YSkgPT4geyAgIFxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VEYXRhLnJvbGUgPT0gJ3VzZXInKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlck1lc3NhZ2VEaXYgPSBkaXNwbGF5VXNlck1lc3NhZ2UodGhpcy5zZXR0aW5ncywgbWVzc2FnZURhdGEuY29udGVudCk7XG4gICAgICAgICAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZCh1c2VyTWVzc2FnZURpdik7XG4gICAgICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VEYXRhLnJvbGUgPT0gJ2Fzc2lzdGFudCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBib3RNZXNzYWdlRGl2ID0gZGlzcGxheUJvdE1lc3NhZ2UodGhpcy5zZXR0aW5ncywgbWVzc2FnZUhpc3RvcnksIG1lc3NhZ2VEYXRhLmNvbnRlbnQpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VDb250YWluZXIuYXBwZW5kQ2hpbGQoYm90TWVzc2FnZURpdik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBib3RNZXNzYWdlcyA9IG1lc3NhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmJvdE1lc3NhZ2UnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0Qm90TWVzc2FnZSA9IGJvdE1lc3NhZ2VzW2JvdE1lc3NhZ2VzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgIGxhc3RCb3RNZXNzYWdlLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwYXJlbnRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3BhcmVudEVsZW1lbnRJZCcpO1xuICAgICAgICBwYXJlbnRFbGVtZW50Py5hcHBlbmRDaGlsZChtZXNzYWdlQ29udGFpbmVyKTtcblxuICAgICAgICBjb25zdCBjaGF0Ym94ID0gY2hhdGJvdENvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIGNsYXNzOiAnY2hhdGJveCcsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgICAgICAgdGV4dGFyZWEuc2V0QXR0cmlidXRlKCdjb250ZW50ZWRpdGFibGUnLCB0cnVlLnRvU3RyaW5nKCkpO1xuICAgICAgICB0ZXh0YXJlYS5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgJ1N0YXJ0IHR5cGluZy4uLicpO1xuXG4gICAgICAgIHRleHRhcmVhLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuc2V0dGluZ3MuYXBwZWFyYW5jZS5jaGF0Qm94QmFja2dyb3VuZENvbG9yIHx8IERFRkFVTFRfU0VUVElOR1MuYXBwZWFyYW5jZS5jaGF0Qm94QmFja2dyb3VuZENvbG9yO1xuICAgICAgICB0ZXh0YXJlYS5zdHlsZS5ib3JkZXJDb2xvciA9IHRoaXMuc2V0dGluZ3MuYXBwZWFyYW5jZS5jaGF0Qm94QmFja2dyb3VuZENvbG9yIHx8IERFRkFVTFRfU0VUVElOR1MuYXBwZWFyYW5jZS5jaGF0Qm94QmFja2dyb3VuZENvbG9yO1xuICAgICAgICBjaGF0Ym94LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuc2V0dGluZ3MuYXBwZWFyYW5jZS5jaGF0Qm94Qm9yZGVyQ29sb3IgfHwgREVGQVVMVF9TRVRUSU5HUy5hcHBlYXJhbmNlLmNoYXRCb3hCb3JkZXJDb2xvcjtcblxuICAgICAgICBjaGF0Ym94LmFwcGVuZENoaWxkKHRleHRhcmVhKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMudGV4dGFyZWFFbGVtZW50ID0gdGV4dGFyZWEgYXMgSFRNTFRleHRBcmVhRWxlbWVudDtcbiAgICAgICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICAgIH1cblxuICAgIGFkZEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLnRleHRhcmVhRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuaGFuZGxlS2V5dXAuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMudGV4dGFyZWFFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLmhhbmRsZUtleWRvd24uYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMudGV4dGFyZWFFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdGhpcy5oYW5kbGVJbnB1dC5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy50ZXh0YXJlYUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMuaGFuZGxlQmx1ci5iaW5kKHRoaXMpKTtcbiAgICB9XG4gICAgXG4gICAgYXN5bmMgaGFuZGxlS2V5dXAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLnRleHRhcmVhRWxlbWVudC52YWx1ZTtcbiAgICAgICAgY29uc3QgaW5kZXggPSBtZXNzYWdlSGlzdG9yeS5sZW5ndGggLSAxO1xuXG4gICAgICAgIC8vIE9ubHkgYWxsb3cgL3N0b3AgY29tbWFuZCB0byBiZSBleGVjdXRlZCBkdXJpbmcgZmV0Y2hcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5hbGxvd09sbGFtYVN0cmVhbSB8fCAhdGhpcy5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYU1vZGVscy5pbmNsdWRlcyh0aGlzLnNldHRpbmdzLmdlbmVyYWwubW9kZWwpKSB7XG4gICAgICAgICAgICBpZiAoKGlucHV0ID09PSAnL3MnIHx8IGlucHV0ID09PSAnL3N0b3AnKSAmJiBldmVudC5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZXZlbnRFbnRlciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGV4ZWN1dGVDb21tYW5kKGlucHV0LCB0aGlzLnNldHRpbmdzLCB0aGlzLnBsdWdpbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5wcmV2ZW50RW50ZXIgPT09IGZhbHNlICYmICFldmVudC5zaGlmdEtleSAmJiBldmVudC5rZXkgPT09ICdFbnRlcicpIHtcbiAgICAgICAgICAgIGxvYWREYXRhKCk7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgaWYgKGlucHV0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKEFOVEhST1BJQ19NT0RFTFMuaW5jbHVkZXModGhpcy5zZXR0aW5ncy5nZW5lcmFsLm1vZGVsKSkge1xuICAgICAgICAgICAgICAgIGFkZE1lc3NhZ2UoJ1xcblxcbkh1bWFuOiAnICsgaW5wdXQsICd1c2VyTWVzc2FnZScsIHRoaXMuc2V0dGluZ3MsIGluZGV4KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKCEoaW5wdXQgPT09ICcvcycgfHwgaW5wdXQgPT09ICcvc3RvcCcpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZE1lc3NhZ2UoaW5wdXQsICd1c2VyTWVzc2FnZScsIHRoaXMuc2V0dGluZ3MsIGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2VDb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyTWVzc2FnZURpdiA9IGRpc3BsYXlVc2VyTWVzc2FnZSh0aGlzLnNldHRpbmdzLCBpbnB1dCk7XG4gICAgICAgICAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZCh1c2VyTWVzc2FnZURpdik7XG5cbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVDb21tYW5kKGlucHV0LCB0aGlzLnNldHRpbmdzLCB0aGlzLnBsdWdpbik7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0ICE9PSAnL2MnICYmIGlucHV0ICE9PSAnL2NsZWFyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYm90TWVzc2FnZXMgPSBtZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ib3RNZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsYXN0Qm90TWVzc2FnZSA9IGJvdE1lc3NhZ2VzW2JvdE1lc3NhZ2VzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEJvdE1lc3NhZ2Uuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RlbE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9kZWxOYW1lJykgYXMgSFRNTEhlYWRpbmdFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9kZWxOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbE5hbWUudGV4dENvbnRlbnQgPSAnTW9kZWw6ICcgKyB0aGlzLnNldHRpbmdzLmdlbmVyYWwubW9kZWwudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gICBcbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2ZW50RW50ZXIgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENhbGwgdGhlIGNoYXRib3QgZnVuY3Rpb24gd2l0aCB0aGUgdXNlcidzIGlucHV0XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQk1PY2hhdGJvdCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2ZW50RW50ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkaXNwbGF5RXJyb3JCb3RNZXNzYWdlKHRoaXMuc2V0dGluZ3MsIG1lc3NhZ2VIaXN0b3J5LCAnT29wcywgc29tZXRoaW5nIHdlbnQgd3JvbmcuIFBsZWFzZSB0cnkgYWdhaW4uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RNZXNzYWdlRGl2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy50ZXh0YXJlYUVsZW1lbnQudmFsdWUgPSAnJztcbiAgICAgICAgICAgIHRoaXMudGV4dGFyZWFFbGVtZW50LnN0eWxlLmhlaWdodCA9ICcyOXB4JztcbiAgICAgICAgICAgIHRoaXMudGV4dGFyZWFFbGVtZW50LnZhbHVlID0gdGhpcy50ZXh0YXJlYUVsZW1lbnQudmFsdWUucmVwbGFjZSgvXltcXHJcXG5dK3xbXFxyXFxuXSskL2dtLCcnKTsgLy8gcmVtb3ZlIG5ld2xpbmVzIG9ubHkgYXQgYmVnaW5uaW5nIG9yIGVuZCBvZiBpbnB1dFxuICAgICAgICAgICAgdGhpcy50ZXh0YXJlYUVsZW1lbnQuc2V0U2VsZWN0aW9uUmFuZ2UoMCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgfVxuXG4gICAgaGFuZGxlS2V5ZG93bihldmVudDogS2V5Ym9hcmRFdmVudCkge1xuICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInICYmICFldmVudC5zaGlmdEtleSkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUlucHV0KGV2ZW50OiBFdmVudCkge1xuICAgICAgICB0aGlzLnRleHRhcmVhRWxlbWVudC5zdHlsZS5oZWlnaHQgPSAnMjlweCc7XG4gICAgICAgIHRoaXMudGV4dGFyZWFFbGVtZW50LnN0eWxlLmhlaWdodCA9IHRoaXMudGV4dGFyZWFFbGVtZW50LnNjcm9sbEhlaWdodCArICdweCc7XG4gICAgfVxuXG4gICAgaGFuZGxlQmx1cihldmVudDogRXZlbnQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRleHRhcmVhRWxlbWVudC52YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy50ZXh0YXJlYUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gJzI5cHgnO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXhwb3J0U2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzO1xuICAgIH1cblxuICAgIGFkZEN1cnNvckxvZ2dpbmcoKSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZUN1cnNvclBvc2l0aW9uID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgYXdhaXQgZ2V0QWN0aXZlRmlsZUNvbnRlbnQodGhpcy5zZXR0aW5ncyk7IFxuICAgICAgICAgICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgICAgICBpZiAodmlldykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnNvciA9IHZpZXcuZWRpdG9yLmdldEN1cnNvcigpO1xuICAgICAgICAgICAgICAgIGxhc3RDdXJzb3JQb3NpdGlvbkZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICAgICAgICAgIGlmIChjdXJzb3IgIT0gbnVsbCAmJiB0aGlzLmFwcC53b3Jrc3BhY2UuYWN0aXZlRWRpdG9yICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdEN1cnNvclBvc2l0aW9uID0gY3Vyc29yO1xuICAgICAgICAgICAgICAgICAgICBhY3RpdmVFZGl0b3IgPSB2aWV3LmVkaXRvcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgYWN0aXZlV2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdXBkYXRlQ3Vyc29yUG9zaXRpb24pO1xuICAgICAgICBhY3RpdmVXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB1cGRhdGVDdXJzb3JQb3NpdGlvbik7XG4gICAgICAgIGFjdGl2ZVdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdXBkYXRlQ3Vyc29yUG9zaXRpb24pO1xuICAgICAgICBhY3RpdmVXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB1cGRhdGVDdXJzb3JQb3NpdGlvbik7XG4gICAgfVxuXG4gICAgXG4gICAgY2xlYW51cCgpIHtcbiAgICAgICAgdGhpcy50ZXh0YXJlYUVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLmhhbmRsZUtleXVwLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnRleHRhcmVhRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5oYW5kbGVLZXlkb3duLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLnRleHRhcmVhRWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMuaGFuZGxlSW5wdXQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMudGV4dGFyZWFFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLmhhbmRsZUJsdXIuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgYXN5bmMgQk1PY2hhdGJvdCgpIHsgICAgICAgIFxuICAgICAgICBhd2FpdCBnZXRBY3RpdmVGaWxlQ29udGVudCh0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgY29uc3QgaW5kZXggPSBtZXNzYWdlSGlzdG9yeS5sZW5ndGggLSAxO1xuXG4gICAgICAgIC8vIElmIG1vZGVsIGRvZXMgbm90IGV4aXN0LlxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5nZW5lcmFsLm1vZGVsID09PSAnJykge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gJ01vZGVsIG5vdCBmb3VuZC4nO1xuXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkaXNwbGF5RXJyb3JCb3RNZXNzYWdlKHRoaXMuc2V0dGluZ3MsIG1lc3NhZ2VIaXN0b3J5LCBlcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RNZXNzYWdlRGl2KTtcblxuICAgICAgICAgICAgY29uc3QgYm90TWVzc2FnZXMgPSBtZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ib3RNZXNzYWdlJyk7XG4gICAgICAgICAgICBjb25zdCBsYXN0Qm90TWVzc2FnZSA9IGJvdE1lc3NhZ2VzW2JvdE1lc3NhZ2VzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgbGFzdEJvdE1lc3NhZ2Uuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pO1xuICAgICAgICB9IFxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZldGNoIE9wZW5BSSBBUElcbiAgICAgICAgICAgIGlmIChPUEVOQUlfTU9ERUxTLmluY2x1ZGVzKHRoaXMuc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCkgfHwgKHRoaXMuc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMub3BlbkFJLm9wZW5BSUJhc2VNb2RlbHMuaW5jbHVkZXModGhpcy5zZXR0aW5ncy5nZW5lcmFsLm1vZGVsKSAmJiB0aGlzLnNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm9wZW5BSS5vcGVuQUlCYXNlVXJsICE9PSBERUZBVUxUX1NFVFRJTkdTLkFQSUNvbm5lY3Rpb25zLm9wZW5BSS5vcGVuQUlCYXNlVXJsKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm9wZW5BSS5hbGxvd09wZW5BSUJhc2VVcmxEYXRhU3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoT3BlbkFJQVBJRGF0YVN0cmVhbSh0aGlzLnNldHRpbmdzLCBpbmRleCk7IFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2hPcGVuQUlBUElEYXRhKHRoaXMuc2V0dGluZ3MsIGluZGV4KTsgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLlJFU1RBUElVUkwgJiYgdGhpcy5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYU1vZGVscy5pbmNsdWRlcyh0aGlzLnNldHRpbmdzLmdlbmVyYWwubW9kZWwpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5hbGxvd09sbGFtYVN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaE9sbGFtYURhdGFTdHJlYW0odGhpcy5zZXR0aW5ncywgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2hPbGxhbWFEYXRhKHRoaXMuc2V0dGluZ3MsIGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnNldHRpbmdzLlJFU1RBUElVUkxDb25uZWN0aW9uLlJFU1RBUElVUkwgJiYgdGhpcy5zZXR0aW5ncy5SRVNUQVBJVVJMQ29ubmVjdGlvbi5SRVNUQVBJVVJMTW9kZWxzLmluY2x1ZGVzKHRoaXMuc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCkpe1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLlJFU1RBUElVUkxDb25uZWN0aW9uLmFsbG93UkVTVEFQSVVSTERhdGFTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2hSRVNUQVBJVVJMRGF0YVN0cmVhbSh0aGlzLnNldHRpbmdzLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaFJFU1RBUElVUkxEYXRhKHRoaXMuc2V0dGluZ3MsIGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm1pc3RyYWwubWlzdHJhbE1vZGVscy5pbmNsdWRlcyh0aGlzLnNldHRpbmdzLmdlbmVyYWwubW9kZWwpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMubWlzdHJhbC5hbGxvd1N0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaE1pc3RyYWxEYXRhU3RyZWFtKHRoaXMuc2V0dGluZ3MsIGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoTWlzdHJhbERhdGEodGhpcy5zZXR0aW5ncywgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMuZ29vZ2xlR2VtaW5pLmdlbWluaU1vZGVscy5pbmNsdWRlcyh0aGlzLnNldHRpbmdzLmdlbmVyYWwubW9kZWwpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2hHb29nbGVHZW1pbmlEYXRhKHRoaXMuc2V0dGluZ3MsIGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKEFOVEhST1BJQ19NT0RFTFMuaW5jbHVkZXModGhpcy5zZXR0aW5ncy5nZW5lcmFsLm1vZGVsKSkge1xuICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoQW50aHJvcGljQVBJRGF0YSh0aGlzLnNldHRpbmdzLCBpbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSAnQ29ubmVjdGlvbiBub3QgZm91bmQuJztcblxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgICAgICAgICAgICAgIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkaXNwbGF5RXJyb3JCb3RNZXNzYWdlKHRoaXMuc2V0dGluZ3MsIG1lc3NhZ2VIaXN0b3J5LCBlcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VDb250YWluZXIuYXBwZW5kQ2hpbGQoYm90TWVzc2FnZURpdik7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBib3RNZXNzYWdlcyA9IG1lc3NhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmJvdE1lc3NhZ2UnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsYXN0Qm90TWVzc2FnZSA9IGJvdE1lc3NhZ2VzW2JvdE1lc3NhZ2VzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgIGxhc3RCb3RNZXNzYWdlLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdCTU8gc2V0dGluZ3M6JywgdGhpcy5zZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgYXN5bmMgb25DbG9zZSgpIHtcbiAgICAgICAgLy8gTm90aGluZyB0byBjbGVhbiB1cC5cbiAgICB9XG5cbn1cblxuLy8gQ3JlYXRlIGRhdGEgZm9sZGVyIGFuZCBsb2FkIEpTT04gZmlsZVxuYXN5bmMgZnVuY3Rpb24gbG9hZERhdGEoKSB7XG4gICAgaWYgKCFhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cygnLi8ub2JzaWRpYW4vcGx1Z2lucy9ibW8tY2hhdGJvdC9kYXRhLycpKSB7XG4gICAgICAgIHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIubWtkaXIoJy4vLm9ic2lkaWFuL3BsdWdpbnMvYm1vLWNoYXRib3QvZGF0YS8nKTtcbiAgICB9XG5cbiAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmlsZW5hbWVNZXNzYWdlSGlzdG9yeUpTT04pKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBmaWxlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChmaWxlbmFtZU1lc3NhZ2VIaXN0b3J5SlNPTik7XG5cbiAgICAgICAgICAgIGlmIChmaWxlQ29udGVudC50cmltKCkgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZUhpc3RvcnkgPSBbXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbWVzc2FnZUhpc3RvcnkgPSBKU09OLnBhcnNlKGZpbGVDb250ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgbWVzc2FnZSBoaXN0b3J5OicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAgIG1lc3NhZ2VIaXN0b3J5ID0gW107XG4gICAgfVxufSIsICJpbXBvcnQgeyBOb3RpY2UsIHJlcXVlc3RVcmwgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBCTU9TZXR0aW5ncyB9IGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgbWVzc2FnZUhpc3RvcnkgfSBmcm9tICcuLi92aWV3JztcbmltcG9ydCBPcGVuQUkgZnJvbSAnb3BlbmFpJztcbmltcG9ydCB7IENoYXRDb21wbGV0aW9uTWVzc2FnZVBhcmFtIH0gZnJvbSAnb3BlbmFpL3Jlc291cmNlcy9jaGF0JztcbmltcG9ydCB7IG1hcmtlZCB9IGZyb20gJ21hcmtlZCc7XG5pbXBvcnQgeyBwcmlzbUhpZ2hsaWdodGluZyB9IGZyb20gJ3NyYy9jb21wb25lbnRzL1ByaXNtYUhpZ2hsaWdodGluZyc7XG5pbXBvcnQgeyBhZGRNZXNzYWdlLCBhZGRQYXJhZ3JhcGhCcmVha3MgfSBmcm9tICcuL2NoYXQvTWVzc2FnZSc7XG5pbXBvcnQgeyBjb2RlQmxvY2tDb3B5QnV0dG9uIH0gZnJvbSAnLi9jaGF0L0J1dHRvbnMnO1xuaW1wb3J0IHsgZ2V0UHJvbXB0IH0gZnJvbSAnLi9jaGF0L1Byb21wdCc7XG5pbXBvcnQgeyBkaXNwbGF5RXJyb3JCb3RNZXNzYWdlLCBkaXNwbGF5TG9hZGluZ0JvdE1lc3NhZ2UgfSBmcm9tICcuL2NoYXQvQm90TWVzc2FnZSc7XG5pbXBvcnQgeyBnZXRBY3RpdmVGaWxlQ29udGVudCwgZ2V0Q3VycmVudE5vdGVDb250ZW50IH0gZnJvbSAnLi9lZGl0b3IvUmVmZXJlbmNlQ3VycmVudE5vdGUnO1xuXG5sZXQgYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXG4vLyBGZXRjaCBPcGVuQUktQmFzZWQgQVBJXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hPcGVuQUlBUElEYXRhKHNldHRpbmdzOiBCTU9TZXR0aW5ncywgaW5kZXg6IG51bWJlcikge1xuICAgIGNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoe1xuICAgICAgICBhcGlLZXk6IHNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm9wZW5BSS5BUElLZXksXG4gICAgICAgIGJhc2VVUkw6IHNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm9wZW5BSS5vcGVuQUlCYXNlVXJsLFxuICAgICAgICBkYW5nZXJvdXNseUFsbG93QnJvd3NlcjogdHJ1ZSwgLy8gYXBpS2V5IGlzIHN0b3JlZCB3aXRoaW4gZGF0YS5qc29uXG4gICAgfSk7XG5cbiAgICBsZXQgcHJvbXB0ID0gYXdhaXQgZ2V0UHJvbXB0KHNldHRpbmdzKTtcblxuICAgIGlmIChwcm9tcHQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHByb21wdCA9ICcnO1xuICAgIH1cblxuICAgIGNvbnN0IGZpbHRlcmVkTWVzc2FnZUhpc3RvcnkgPSBmaWx0ZXJNZXNzYWdlSGlzdG9yeShtZXNzYWdlSGlzdG9yeSk7XG4gICAgY29uc3QgbWVzc2FnZUhpc3RvcnlBdEluZGV4ID0gcmVtb3ZlQ29uc2VjdXRpdmVVc2VyUm9sZXMoZmlsdGVyZWRNZXNzYWdlSGlzdG9yeSk7XG5cbiAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpO1xuICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXJFbERpdnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjbWVzc2FnZUNvbnRhaW5lciBkaXYudXNlck1lc3NhZ2UsICNtZXNzYWdlQ29udGFpbmVyIGRpdi5ib3RNZXNzYWdlJyk7XG5cbiAgICBjb25zdCBib3RNZXNzYWdlRGl2ID0gZGlzcGxheUxvYWRpbmdCb3RNZXNzYWdlKHNldHRpbmdzKTtcbiAgICBcbiAgICBtZXNzYWdlQ29udGFpbmVyRWw/Lmluc2VydEJlZm9yZShib3RNZXNzYWdlRGl2LCBtZXNzYWdlQ29udGFpbmVyRWxEaXZzW2luZGV4KzFdKTtcbiAgICBib3RNZXNzYWdlRGl2LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KTtcblxuICAgIGF3YWl0IGdldEFjdGl2ZUZpbGVDb250ZW50KHNldHRpbmdzKTtcbiAgICBjb25zdCByZWZlcmVuY2VDdXJyZW50Tm90ZUNvbnRlbnQgPSBnZXRDdXJyZW50Tm90ZUNvbnRlbnQoKTtcblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNvbXBsZXRpb24gPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgICAgICAgbW9kZWw6IHNldHRpbmdzLmdlbmVyYWwubW9kZWwsXG4gICAgICAgICAgICBtYXhfdG9rZW5zOiBwYXJzZUludChzZXR0aW5ncy5nZW5lcmFsLm1heF90b2tlbnMpLFxuICAgICAgICAgICAgc3RyZWFtOiBmYWxzZSxcbiAgICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogcmVmZXJlbmNlQ3VycmVudE5vdGVDb250ZW50ICsgc2V0dGluZ3MuZ2VuZXJhbC5zeXN0ZW1fcm9sZSArIHByb21wdH0sXG4gICAgICAgICAgICAgICAgLi4ubWVzc2FnZUhpc3RvcnlBdEluZGV4IGFzIENoYXRDb21wbGV0aW9uTWVzc2FnZVBhcmFtW11cbiAgICAgICAgICAgIF0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBjb21wbGV0aW9uLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50O1xuICAgICAgICBcbiAgICAgICAgaWYgKG1lc3NhZ2VDb250YWluZXJFbCkge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0VXNlck1lc3NhZ2UgPSBtZXNzYWdlQ29udGFpbmVyRWxEaXZzW2luZGV4ID8/IG1lc3NhZ2VIaXN0b3J5Lmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0Qm90TWVzc2FnZSA9IHRhcmdldFVzZXJNZXNzYWdlLm5leHRFbGVtZW50U2libGluZztcblxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZUJsb2NrID0gdGFyZ2V0Qm90TWVzc2FnZT8ucXVlcnlTZWxlY3RvcignLm1lc3NhZ2VCbG9jaycpO1xuICAgICAgICAgICAgY29uc3QgbG9hZGluZ0VsID0gdGFyZ2V0Qm90TWVzc2FnZT8ucXVlcnlTZWxlY3RvcignI2xvYWRpbmcnKTtcblxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VCbG9jaykge1xuICAgICAgICAgICAgICAgIGlmIChsb2FkaW5nRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Qm90TWVzc2FnZT8ucmVtb3ZlQ2hpbGQobG9hZGluZ0VsKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtZXNzYWdlQmxvY2suaW5uZXJIVE1MID0gbWFya2VkKG1lc3NhZ2UgfHwgJycsIHsgYnJlYWtzOiB0cnVlIH0pO1xuXG4gICAgICAgICAgICAgICAgYWRkUGFyYWdyYXBoQnJlYWtzKG1lc3NhZ2VCbG9jayk7XG4gICAgICAgICAgICAgICAgcHJpc21IaWdobGlnaHRpbmcobWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgICAgICBjb2RlQmxvY2tDb3B5QnV0dG9uKG1lc3NhZ2VCbG9jayk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGFyZ2V0Qm90TWVzc2FnZT8uYXBwZW5kQ2hpbGQobWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhcmdldEJvdE1lc3NhZ2U/LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChtZXNzYWdlICE9IG51bGwpIHtcbiAgICAgICAgICAgIGFkZE1lc3NhZ2UobWVzc2FnZSwgJ2JvdE1lc3NhZ2UnLCBzZXR0aW5ncywgaW5kZXgpO1xuICAgICAgICB9XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zdCB0YXJnZXRVc2VyTWVzc2FnZSA9IG1lc3NhZ2VDb250YWluZXJFbERpdnNbaW5kZXggPz8gbWVzc2FnZUhpc3RvcnkubGVuZ3RoIC0gMV07XG4gICAgICAgIGNvbnN0IHRhcmdldEJvdE1lc3NhZ2UgPSB0YXJnZXRVc2VyTWVzc2FnZS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgIHRhcmdldEJvdE1lc3NhZ2U/LnJlbW92ZSgpO1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgICAgICBjb25zdCBib3RNZXNzYWdlRGl2ID0gZGlzcGxheUVycm9yQm90TWVzc2FnZShzZXR0aW5ncywgbWVzc2FnZUhpc3RvcnksIGVycm9yKTtcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RNZXNzYWdlRGl2KTtcbiAgICB9XG59XG5cbi8vIEZldGNoIE9wZW5BSS1CYXNlZCBBUEkgQ2hhdFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoT3BlbkFJQVBJRGF0YVN0cmVhbShzZXR0aW5nczogQk1PU2V0dGluZ3MsIGluZGV4OiBudW1iZXIpIHtcbiAgICBjb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHtcbiAgICAgICAgYXBpS2V5OiBzZXR0aW5ncy5BUElDb25uZWN0aW9ucy5vcGVuQUkuQVBJS2V5LFxuICAgICAgICBiYXNlVVJMOiBzZXR0aW5ncy5BUElDb25uZWN0aW9ucy5vcGVuQUkub3BlbkFJQmFzZVVybCxcbiAgICAgICAgZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXI6IHRydWUsIC8vIGFwaUtleSBpcyBzdG9yZWQgd2l0aGluIGRhdGEuanNvblxuICAgIH0pO1xuXG4gICAgYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXG4gICAgbGV0IG1lc3NhZ2UgPSAnJztcbiAgICBsZXQgaXNTY3JvbGwgPSBmYWxzZTtcblxuICAgIGxldCBwcm9tcHQgPSBhd2FpdCBnZXRQcm9tcHQoc2V0dGluZ3MpO1xuXG4gICAgaWYgKHByb21wdCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJvbXB0ID0gJyc7XG4gICAgfVxuXG4gICAgY29uc3QgZmlsdGVyZWRNZXNzYWdlSGlzdG9yeSA9IGZpbHRlck1lc3NhZ2VIaXN0b3J5KG1lc3NhZ2VIaXN0b3J5KTtcbiAgICBjb25zdCBtZXNzYWdlSGlzdG9yeUF0SW5kZXggPSByZW1vdmVDb25zZWN1dGl2ZVVzZXJSb2xlcyhmaWx0ZXJlZE1lc3NhZ2VIaXN0b3J5KTtcblxuICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJyk7XG4gICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lckVsRGl2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNtZXNzYWdlQ29udGFpbmVyIGRpdi51c2VyTWVzc2FnZSwgI21lc3NhZ2VDb250YWluZXIgZGl2LmJvdE1lc3NhZ2UnKTtcblxuICAgIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkaXNwbGF5TG9hZGluZ0JvdE1lc3NhZ2Uoc2V0dGluZ3MpO1xuXG4gICAgbWVzc2FnZUNvbnRhaW5lckVsPy5pbnNlcnRCZWZvcmUoYm90TWVzc2FnZURpdiwgbWVzc2FnZUNvbnRhaW5lckVsRGl2c1tpbmRleCsxXSk7XG4gICAgYm90TWVzc2FnZURpdi5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSk7XG5cbiAgICBjb25zdCB0YXJnZXRVc2VyTWVzc2FnZSA9IG1lc3NhZ2VDb250YWluZXJFbERpdnNbaW5kZXggPz8gbWVzc2FnZUhpc3RvcnkubGVuZ3RoIC0gMV07XG4gICAgY29uc3QgdGFyZ2V0Qm90TWVzc2FnZSA9IHRhcmdldFVzZXJNZXNzYWdlLm5leHRFbGVtZW50U2libGluZztcblxuICAgIGF3YWl0IGdldEFjdGl2ZUZpbGVDb250ZW50KHNldHRpbmdzKTtcbiAgICBjb25zdCByZWZlcmVuY2VDdXJyZW50Tm90ZUNvbnRlbnQgPSBnZXRDdXJyZW50Tm90ZUNvbnRlbnQoKTtcblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IGF3YWl0IG9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gICAgICAgICAgICBtb2RlbDogc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCxcbiAgICAgICAgICAgIG1heF90b2tlbnM6IHBhcnNlSW50KHNldHRpbmdzLmdlbmVyYWwubWF4X3Rva2VucyksXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZTogcGFyc2VJbnQoc2V0dGluZ3MuZ2VuZXJhbC50ZW1wZXJhdHVyZSksXG4gICAgICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IHJlZmVyZW5jZUN1cnJlbnROb3RlQ29udGVudCArIHNldHRpbmdzLmdlbmVyYWwuc3lzdGVtX3JvbGUgKyBwcm9tcHR9LFxuICAgICAgICAgICAgICAgIC4uLm1lc3NhZ2VIaXN0b3J5QXRJbmRleCBhcyBDaGF0Q29tcGxldGlvbk1lc3NhZ2VQYXJhbVtdXG4gICAgICAgICAgICBdLFxuICAgICAgICAgICAgc3RyZWFtOiB0cnVlLFxuICAgICAgICB9KTtcblxuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IHBhcnQgb2Ygc3RyZWFtKSB7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBwYXJ0LmNob2ljZXNbMF0/LmRlbHRhPy5jb250ZW50IHx8ICcnO1xuXG4gICAgICAgICAgICBtZXNzYWdlICs9IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmIChtZXNzYWdlQ29udGFpbmVyRWwpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlQmxvY2sgPSB0YXJnZXRCb3RNZXNzYWdlPy5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZUJsb2NrJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9hZGluZ0VsID0gdGFyZ2V0Qm90TWVzc2FnZT8ucXVlcnlTZWxlY3RvcignI2xvYWRpbmcnKTtcblxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlQmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvYWRpbmdFbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Qm90TWVzc2FnZT8ucmVtb3ZlQ2hpbGQobG9hZGluZ0VsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCbG9jay5pbm5lckhUTUwgPSBtYXJrZWQobWVzc2FnZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgYWRkUGFyYWdyYXBoQnJlYWtzKG1lc3NhZ2VCbG9jayk7XG4gICAgICAgICAgICAgICAgICAgIHByaXNtSGlnaGxpZ2h0aW5nKG1lc3NhZ2VCbG9jayk7XG4gICAgICAgICAgICAgICAgICAgIGNvZGVCbG9ja0NvcHlCdXR0b24obWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtZXNzYWdlQ29udGFpbmVyRWwuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCAoZXZlbnQ6IFdoZWVsRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgc2Nyb2xscyB1cCBvciBkb3duLCBzdG9wIGF1dG8tc2Nyb2xsaW5nXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5kZWx0YVkgPCAwIHx8IGV2ZW50LmRlbHRhWSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2Nyb2xsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFpc1Njcm9sbCkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRCb3RNZXNzYWdlPy5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnYXV0bycsIGJsb2NrOiAnc3RhcnQnIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgICAgICBpZiAoYWJvcnRDb250cm9sbGVyLnNpZ25hbC5hYm9ydGVkKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgbWFraW5nIEFQSSByZXF1ZXN0OiBUaGUgdXNlciBhYm9ydGVkIGEgcmVxdWVzdC4nKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBhZGRNZXNzYWdlKG1lc3NhZ2UsICdib3RNZXNzYWdlJywgc2V0dGluZ3MsIGluZGV4KTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldFVzZXJNZXNzYWdlID0gbWVzc2FnZUNvbnRhaW5lckVsRGl2c1tpbmRleCA/PyBtZXNzYWdlSGlzdG9yeS5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgdGFyZ2V0Qm90TWVzc2FnZSA9IHRhcmdldFVzZXJNZXNzYWdlLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgdGFyZ2V0Qm90TWVzc2FnZT8ucmVtb3ZlKCk7XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJykgYXMgSFRNTERpdkVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkaXNwbGF5RXJyb3JCb3RNZXNzYWdlKHNldHRpbmdzLCBtZXNzYWdlSGlzdG9yeSwgZXJyb3IpO1xuICAgICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGJvdE1lc3NhZ2VEaXYpO1xuICAgIH1cbn1cblxuLy8gUmVxdWVzdCByZXNwb25zZSBmcm9tIE9sbGFtYVxuLy8gTk9URTogQWJvcnQgZG9lcyBub3Qgd29yayBmb3IgcmVxdWVzdFVybFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoT2xsYW1hRGF0YShzZXR0aW5nczogQk1PU2V0dGluZ3MsIGluZGV4OiBudW1iZXIpIHtcbiAgICBjb25zdCBvbGxhbWFSRVNUQVBJVVJMID0gc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5SRVNUQVBJVVJMO1xuXG4gICAgaWYgKCFvbGxhbWFSRVNUQVBJVVJMKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgcHJvbXB0ID0gYXdhaXQgZ2V0UHJvbXB0KHNldHRpbmdzKTtcblxuICAgIGlmIChwcm9tcHQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHByb21wdCA9ICcnO1xuICAgIH1cblxuICAgIGNvbnN0IGZpbHRlcmVkTWVzc2FnZUhpc3RvcnkgPSBmaWx0ZXJNZXNzYWdlSGlzdG9yeShtZXNzYWdlSGlzdG9yeSk7XG4gICAgY29uc3QgbWVzc2FnZUhpc3RvcnlBdEluZGV4ID0gcmVtb3ZlQ29uc2VjdXRpdmVVc2VyUm9sZXMoZmlsdGVyZWRNZXNzYWdlSGlzdG9yeSk7XG5cbiAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpO1xuICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXJFbERpdnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjbWVzc2FnZUNvbnRhaW5lciBkaXYudXNlck1lc3NhZ2UsICNtZXNzYWdlQ29udGFpbmVyIGRpdi5ib3RNZXNzYWdlJyk7XG5cbiAgICBjb25zdCBib3RNZXNzYWdlRGl2ID0gZGlzcGxheUxvYWRpbmdCb3RNZXNzYWdlKHNldHRpbmdzKTtcblxuICAgIG1lc3NhZ2VDb250YWluZXJFbD8uaW5zZXJ0QmVmb3JlKGJvdE1lc3NhZ2VEaXYsIG1lc3NhZ2VDb250YWluZXJFbERpdnNbaW5kZXgrMV0pO1xuICAgIGJvdE1lc3NhZ2VEaXYuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pO1xuXG4gICAgYXdhaXQgZ2V0QWN0aXZlRmlsZUNvbnRlbnQoc2V0dGluZ3MpO1xuICAgIGNvbnN0IHJlZmVyZW5jZUN1cnJlbnROb3RlQ29udGVudCA9IGdldEN1cnJlbnROb3RlQ29udGVudCgpO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgIHVybDogb2xsYW1hUkVTVEFQSVVSTCArICcvYXBpL2NoYXQnLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgbW9kZWw6IHNldHRpbmdzLmdlbmVyYWwubW9kZWwsXG4gICAgICAgICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogcmVmZXJlbmNlQ3VycmVudE5vdGVDb250ZW50ICsgc2V0dGluZ3MuZ2VuZXJhbC5zeXN0ZW1fcm9sZSArIHByb21wdH0sXG4gICAgICAgICAgICAgICAgICAgIC4uLm1lc3NhZ2VIaXN0b3J5QXRJbmRleFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgc3RyZWFtOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBrZWVwX2FsaXZlOiBwYXJzZUludChzZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMua2VlcF9hbGl2ZSksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogb2xsYW1hUGFyYW1ldGVyc09wdGlvbnMoc2V0dGluZ3MpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSByZXNwb25zZS5qc29uLm1lc3NhZ2UuY29udGVudDtcblxuICAgICAgICBpZiAobWVzc2FnZUNvbnRhaW5lckVsKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRVc2VyTWVzc2FnZSA9IG1lc3NhZ2VDb250YWluZXJFbERpdnNbaW5kZXhdO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0Qm90TWVzc2FnZSA9IHRhcmdldFVzZXJNZXNzYWdlLm5leHRFbGVtZW50U2libGluZztcblxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZUJsb2NrID0gdGFyZ2V0Qm90TWVzc2FnZT8ucXVlcnlTZWxlY3RvcignLm1lc3NhZ2VCbG9jaycpO1xuICAgICAgICAgICAgY29uc3QgbG9hZGluZ0VsID0gdGFyZ2V0Qm90TWVzc2FnZT8ucXVlcnlTZWxlY3RvcignI2xvYWRpbmcnKTtcblxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VCbG9jaykge1xuICAgICAgICAgICAgICAgIGlmIChsb2FkaW5nRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Qm90TWVzc2FnZT8ucmVtb3ZlQ2hpbGQobG9hZGluZ0VsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbWVzc2FnZUJsb2NrLmlubmVySFRNTCA9IG1hcmtlZChtZXNzYWdlLCB7IGJyZWFrczogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhZGRQYXJhZ3JhcGhCcmVha3MobWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgICAgICBwcmlzbUhpZ2hsaWdodGluZyhtZXNzYWdlQmxvY2spO1xuICAgICAgICAgICAgICAgIGNvZGVCbG9ja0NvcHlCdXR0b24obWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0YXJnZXRCb3RNZXNzYWdlPy5hcHBlbmRDaGlsZChtZXNzYWdlQmxvY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFyZ2V0Qm90TWVzc2FnZT8uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgIH1cblxuICAgICAgICBhZGRNZXNzYWdlKG1lc3NhZ2UsICdib3RNZXNzYWdlJywgc2V0dGluZ3MsIGluZGV4KTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldFVzZXJNZXNzYWdlID0gbWVzc2FnZUNvbnRhaW5lckVsRGl2c1tpbmRleCA/PyBtZXNzYWdlSGlzdG9yeS5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgdGFyZ2V0Qm90TWVzc2FnZSA9IHRhcmdldFVzZXJNZXNzYWdlLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgdGFyZ2V0Qm90TWVzc2FnZT8ucmVtb3ZlKCk7XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJykgYXMgSFRNTERpdkVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkaXNwbGF5RXJyb3JCb3RNZXNzYWdlKHNldHRpbmdzLCBtZXNzYWdlSGlzdG9yeSwgZXJyb3IpO1xuICAgICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGJvdE1lc3NhZ2VEaXYpO1xuICAgIH1cbn1cblxuLy8gRmV0Y2ggT2xsYW1hIEFQSSB2aWEgc3RyZWFtXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hPbGxhbWFEYXRhU3RyZWFtKHNldHRpbmdzOiBCTU9TZXR0aW5ncywgaW5kZXg6IG51bWJlcikge1xuICAgIGNvbnN0IG9sbGFtYVJFU1RBUElVUkwgPSBzZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLlJFU1RBUElVUkw7XG5cbiAgICBpZiAoIW9sbGFtYVJFU1RBUElVUkwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHVybCA9IG9sbGFtYVJFU1RBUElVUkwgKyAnL2FwaS9jaGF0JztcblxuICAgIGFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcblxuICAgIGxldCBtZXNzYWdlID0gJyc7XG5cbiAgICBsZXQgaXNTY3JvbGwgPSBmYWxzZTtcblxuICAgIGxldCBwcm9tcHQgPSBhd2FpdCBnZXRQcm9tcHQoc2V0dGluZ3MpO1xuXG4gICAgaWYgKHByb21wdCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJvbXB0ID0gJyc7XG4gICAgfVxuXG4gICAgY29uc3QgZmlsdGVyZWRNZXNzYWdlSGlzdG9yeSA9IGZpbHRlck1lc3NhZ2VIaXN0b3J5KG1lc3NhZ2VIaXN0b3J5KTtcbiAgICBjb25zdCBtZXNzYWdlSGlzdG9yeUF0SW5kZXggPSByZW1vdmVDb25zZWN1dGl2ZVVzZXJSb2xlcyhmaWx0ZXJlZE1lc3NhZ2VIaXN0b3J5KTtcbiAgICBcbiAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpO1xuICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXJFbERpdnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjbWVzc2FnZUNvbnRhaW5lciBkaXYudXNlck1lc3NhZ2UsICNtZXNzYWdlQ29udGFpbmVyIGRpdi5ib3RNZXNzYWdlJyk7XG5cbiAgICBjb25zdCBib3RNZXNzYWdlRGl2ID0gZGlzcGxheUxvYWRpbmdCb3RNZXNzYWdlKHNldHRpbmdzKTtcblxuICAgIG1lc3NhZ2VDb250YWluZXJFbD8uaW5zZXJ0QmVmb3JlKGJvdE1lc3NhZ2VEaXYsIG1lc3NhZ2VDb250YWluZXJFbERpdnNbaW5kZXgrMV0pO1xuICAgIGJvdE1lc3NhZ2VEaXYuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pO1xuXG4gICAgYXdhaXQgZ2V0QWN0aXZlRmlsZUNvbnRlbnQoc2V0dGluZ3MpO1xuICAgIGNvbnN0IHJlZmVyZW5jZUN1cnJlbnROb3RlQ29udGVudCA9IGdldEN1cnJlbnROb3RlQ29udGVudCgpO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG1vZGVsOiBzZXR0aW5ncy5nZW5lcmFsLm1vZGVsLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IHJlZmVyZW5jZUN1cnJlbnROb3RlQ29udGVudCArIHNldHRpbmdzLmdlbmVyYWwuc3lzdGVtX3JvbGUgKyBwcm9tcHR9LFxuICAgICAgICAgICAgICAgICAgICAuLi5tZXNzYWdlSGlzdG9yeUF0SW5kZXhcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHN0cmVhbTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBrZWVwX2FsaXZlOiBwYXJzZUludChzZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMua2VlcF9hbGl2ZSksXG4gICAgICAgICAgICAgICAgb3B0aW9uczogb2xsYW1hUGFyYW1ldGVyc09wdGlvbnMoc2V0dGluZ3MpLFxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICBzaWduYWw6IGFib3J0Q29udHJvbGxlci5zaWduYWxcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEhUVFAgZXJyb3IhIFN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgZXJyb3IhIFN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXJlc3BvbnNlLmJvZHkpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1Jlc3BvbnNlIGJvZHkgaXMgbnVsbCBvciB1bmRlZmluZWQuJyk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jlc3BvbnNlIGJvZHkgaXMgbnVsbCBvciB1bmRlZmluZWQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZWFkZXIgPSByZXNwb25zZS5ib2R5LmdldFJlYWRlcigpO1xuICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgICAgIGxldCByZWFkaW5nID0gdHJ1ZTtcblxuICAgICAgICB3aGlsZSAocmVhZGluZykge1xuICAgICAgICAgICAgY29uc3QgeyBkb25lLCB2YWx1ZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgcmVhZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjaHVuayA9IGRlY29kZXIuZGVjb2RlKHZhbHVlLCB7IHN0cmVhbTogdHJ1ZSB9KSB8fCAnJztcbiAgICAgICAgICAgIC8vIFNwbGl0dGluZyB0aGUgY2h1bmsgdG8gcGFyc2UgSlNPTiBtZXNzYWdlcyBzZXBhcmF0ZWx5XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IGNodW5rLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cy5maWx0ZXIoQm9vbGVhbikpIHsgLy8gRmlsdGVyIG91dCBlbXB0eSBwYXJ0c1xuICAgICAgICAgICAgICAgIGxldCBwYXJzZWRDaHVuaztcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBwYXJzZWRDaHVuayA9IEpTT04ucGFyc2UocGFydCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWRDaHVuay5kb25lICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gcGFyc2VkQ2h1bmsubWVzc2FnZS5jb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSArPSBjb250ZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgSlNPTjonLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUGFydCB3aXRoIGVycm9yOicsIHBhcnQpO1xuICAgICAgICAgICAgICAgICAgICBwYXJzZWRDaHVuayA9IHtyZXNwb25zZTogJ3tfZV99J307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2VDb250YWluZXJFbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFVzZXJNZXNzYWdlID0gbWVzc2FnZUNvbnRhaW5lckVsRGl2c1tpbmRleCA/PyBtZXNzYWdlSGlzdG9yeS5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRCb3RNZXNzYWdlID0gdGFyZ2V0VXNlck1lc3NhZ2UubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VCbG9jayA9IHRhcmdldEJvdE1lc3NhZ2U/LnF1ZXJ5U2VsZWN0b3IoJy5tZXNzYWdlQmxvY2snKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2FkaW5nRWwgPSB0YXJnZXRCb3RNZXNzYWdlPy5xdWVyeVNlbGVjdG9yKCcjbG9hZGluZycpO1xuXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VCbG9jaykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGluZ0VsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRCb3RNZXNzYWdlPy5yZW1vdmVDaGlsZChsb2FkaW5nRWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUJsb2NrLmlubmVySFRNTCA9IG1hcmtlZChtZXNzYWdlLCB7IGJyZWFrczogdHJ1ZSB9KTtcblxuICAgICAgICAgICAgICAgICAgICBhZGRQYXJhZ3JhcGhCcmVha3MobWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgICAgICAgICAgcHJpc21IaWdobGlnaHRpbmcobWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgICAgICAgICAgY29kZUJsb2NrQ29weUJ1dHRvbihtZXNzYWdlQmxvY2spO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgbWVzc2FnZUNvbnRhaW5lckVsLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgKGV2ZW50OiBXaGVlbEV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZSB1c2VyIHNjcm9sbHMgdXAgb3IgZG93biwgc3RvcCBhdXRvLXNjcm9sbGluZ1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQuZGVsdGFZIDwgMCB8fCBldmVudC5kZWx0YVkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc1Njcm9sbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGlmICghaXNTY3JvbGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Qm90TWVzc2FnZT8uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ2F1dG8nLCBibG9jazogJ3N0YXJ0JyB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgICBhZGRNZXNzYWdlKG1lc3NhZ2UsICdib3RNZXNzYWdlJywgc2V0dGluZ3MsIGluZGV4KTtcbiAgICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgYWRkTWVzc2FnZShtZXNzYWdlLCAnYm90TWVzc2FnZScsIHNldHRpbmdzLCBpbmRleCk7IC8vIFRoaXMgd2lsbCBzYXZlIG1pZC1zdHJlYW0gY29udmVyc2F0aW9uLlxuICAgICAgICBuZXcgTm90aWNlKGVycm9yKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfVxufVxuXG4vLyBSZXF1ZXN0IHJlc3BvbnNlIGZyb20gb3BlbmFpLWJhc2VkIHJlc3QgYXBpIHVybFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoUkVTVEFQSVVSTERhdGEoc2V0dGluZ3M6IEJNT1NldHRpbmdzLCBpbmRleDogbnVtYmVyKSB7XG4gICAgbGV0IHByb21wdCA9IGF3YWl0IGdldFByb21wdChzZXR0aW5ncyk7XG5cbiAgICBpZiAocHJvbXB0ID09IHVuZGVmaW5lZCkge1xuICAgICAgICBwcm9tcHQgPSAnJztcbiAgICB9XG5cbiAgICBjb25zdCBmaWx0ZXJlZE1lc3NhZ2VIaXN0b3J5ID0gZmlsdGVyTWVzc2FnZUhpc3RvcnkobWVzc2FnZUhpc3RvcnkpO1xuICAgIGNvbnN0IG1lc3NhZ2VIaXN0b3J5QXRJbmRleCA9IHJlbW92ZUNvbnNlY3V0aXZlVXNlclJvbGVzKGZpbHRlcmVkTWVzc2FnZUhpc3RvcnkpO1xuICAgIFxuICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJyk7XG4gICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lckVsRGl2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNtZXNzYWdlQ29udGFpbmVyIGRpdi51c2VyTWVzc2FnZSwgI21lc3NhZ2VDb250YWluZXIgZGl2LmJvdE1lc3NhZ2UnKTtcblxuICAgIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkaXNwbGF5TG9hZGluZ0JvdE1lc3NhZ2Uoc2V0dGluZ3MpO1xuXG4gICAgbWVzc2FnZUNvbnRhaW5lckVsPy5pbnNlcnRCZWZvcmUoYm90TWVzc2FnZURpdiwgbWVzc2FnZUNvbnRhaW5lckVsRGl2c1tpbmRleCsxXSk7XG4gICAgYm90TWVzc2FnZURpdi5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSk7XG5cbiAgICBhd2FpdCBnZXRBY3RpdmVGaWxlQ29udGVudChzZXR0aW5ncyk7XG4gICAgY29uc3QgcmVmZXJlbmNlQ3VycmVudE5vdGVDb250ZW50ID0gZ2V0Q3VycmVudE5vdGVDb250ZW50KCk7XG4gICAgXG4gICAgY29uc3QgdXJscyA9IFtcbiAgICAgICAgc2V0dGluZ3MuUkVTVEFQSVVSTENvbm5lY3Rpb24uUkVTVEFQSVVSTCArICcvdjEvY2hhdC9jb21wbGV0aW9ucycsXG4gICAgICAgIHNldHRpbmdzLlJFU1RBUElVUkxDb25uZWN0aW9uLlJFU1RBUElVUkwgKyAnL2FwaS92MS9jaGF0L2NvbXBsZXRpb25zJ1xuICAgIF07XG5cbiAgICBsZXQgbGFzdEVycm9yID0gbnVsbDtcblxuICAgIGZvciAoY29uc3QgdXJsIG9mIHVybHMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtzZXR0aW5ncy5SRVNUQVBJVVJMQ29ubmVjdGlvbi5BUElLZXl9YFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBtb2RlbDogc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXM6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IHJlZmVyZW5jZUN1cnJlbnROb3RlQ29udGVudCArIHNldHRpbmdzLmdlbmVyYWwuc3lzdGVtX3JvbGUgKyBwcm9tcHR9LFxuICAgICAgICAgICAgICAgICAgICAgICAgLi4ubWVzc2FnZUhpc3RvcnlBdEluZGV4XG4gICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IHBhcnNlSW50KHNldHRpbmdzLmdlbmVyYWwubWF4X3Rva2VucykgfHwgNDA5NixcbiAgICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHBhcnNlSW50KHNldHRpbmdzLmdlbmVyYWwudGVtcGVyYXR1cmUpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSByZXNwb25zZS5qc29uLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50O1xuXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2VDb250YWluZXJFbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldFVzZXJNZXNzYWdlID0gbWVzc2FnZUNvbnRhaW5lckVsRGl2c1tpbmRleCA/PyBtZXNzYWdlSGlzdG9yeS5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRCb3RNZXNzYWdlID0gdGFyZ2V0VXNlck1lc3NhZ2UubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VCbG9jayA9IHRhcmdldEJvdE1lc3NhZ2U/LnF1ZXJ5U2VsZWN0b3IoJy5tZXNzYWdlQmxvY2snKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsb2FkaW5nRWwgPSB0YXJnZXRCb3RNZXNzYWdlPy5xdWVyeVNlbGVjdG9yKCcjbG9hZGluZycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VCbG9jaykge1xuICAgICAgICAgICAgICAgICAgICBpZiAobG9hZGluZ0VsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRCb3RNZXNzYWdlPy5yZW1vdmVDaGlsZChsb2FkaW5nRWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCbG9jay5pbm5lckhUTUwgPSBtYXJrZWQobWVzc2FnZSwgeyBicmVha3M6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBhZGRQYXJhZ3JhcGhCcmVha3MobWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgICAgICAgICAgcHJpc21IaWdobGlnaHRpbmcobWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgICAgICAgICAgY29kZUJsb2NrQ29weUJ1dHRvbihtZXNzYWdlQmxvY2spO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Qm90TWVzc2FnZT8uYXBwZW5kQ2hpbGQobWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGFyZ2V0Qm90TWVzc2FnZT8uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhZGRNZXNzYWdlKG1lc3NhZ2UsICdib3RNZXNzYWdlJywgc2V0dGluZ3MsIGluZGV4KTtcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbGFzdEVycm9yID0gZXJyb3I7IC8vIFN0b3JlIHRoZSBsYXN0IGVycm9yIGFuZCBjb250aW51ZVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgYWxsIHJlcXVlc3RzIGZhaWxlZCwgdGhyb3cgdGhlIGxhc3QgZW5jb3VudGVyZWQgZXJyb3JcbiAgICBpZiAobGFzdEVycm9yKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldFVzZXJNZXNzYWdlID0gbWVzc2FnZUNvbnRhaW5lckVsRGl2c1tpbmRleCA/PyBtZXNzYWdlSGlzdG9yeS5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgdGFyZ2V0Qm90TWVzc2FnZSA9IHRhcmdldFVzZXJNZXNzYWdlLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgdGFyZ2V0Qm90TWVzc2FnZT8ucmVtb3ZlKCk7XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJykgYXMgSFRNTERpdkVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkaXNwbGF5RXJyb3JCb3RNZXNzYWdlKHNldHRpbmdzLCBtZXNzYWdlSGlzdG9yeSwgbGFzdEVycm9yKTtcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RNZXNzYWdlRGl2KTtcbiAgICB9XG59XG5cbi8vIEZldGNoIFJFU1QgQVBJIHZpYSBzdHJlYW1cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaFJFU1RBUElVUkxEYXRhU3RyZWFtKHNldHRpbmdzOiBCTU9TZXR0aW5ncywgaW5kZXg6IG51bWJlcikge1xuICAgIGNvbnN0IFJFU1RBUElVUkwgPSBzZXR0aW5ncy5SRVNUQVBJVVJMQ29ubmVjdGlvbi5SRVNUQVBJVVJMO1xuXG4gICAgaWYgKCFSRVNUQVBJVVJMKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB1cmwgPSBSRVNUQVBJVVJMICsgJy92MS9jaGF0L2NvbXBsZXRpb25zJztcblxuICAgIGFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcblxuICAgIGxldCBtZXNzYWdlID0gJyc7XG5cbiAgICBsZXQgaXNTY3JvbGwgPSBmYWxzZTtcblxuICAgIGxldCBwcm9tcHQgPSBhd2FpdCBnZXRQcm9tcHQoc2V0dGluZ3MpO1xuXG4gICAgaWYgKHByb21wdCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcHJvbXB0ID0gJyc7XG4gICAgfVxuXG4gICAgY29uc3QgZmlsdGVyZWRNZXNzYWdlSGlzdG9yeSA9IGZpbHRlck1lc3NhZ2VIaXN0b3J5KG1lc3NhZ2VIaXN0b3J5KTtcbiAgICBjb25zdCBtZXNzYWdlSGlzdG9yeUF0SW5kZXggPSByZW1vdmVDb25zZWN1dGl2ZVVzZXJSb2xlcyhmaWx0ZXJlZE1lc3NhZ2VIaXN0b3J5KTtcblxuICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJyk7XG4gICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lckVsRGl2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNtZXNzYWdlQ29udGFpbmVyIGRpdi51c2VyTWVzc2FnZSwgI21lc3NhZ2VDb250YWluZXIgZGl2LmJvdE1lc3NhZ2UnKTtcblxuICAgIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkaXNwbGF5TG9hZGluZ0JvdE1lc3NhZ2Uoc2V0dGluZ3MpO1xuXG4gICAgbWVzc2FnZUNvbnRhaW5lckVsPy5pbnNlcnRCZWZvcmUoYm90TWVzc2FnZURpdiwgbWVzc2FnZUNvbnRhaW5lckVsRGl2c1tpbmRleCsxXSk7XG4gICAgYm90TWVzc2FnZURpdi5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSk7XG5cbiAgICBhd2FpdCBnZXRBY3RpdmVGaWxlQ29udGVudChzZXR0aW5ncyk7XG4gICAgY29uc3QgcmVmZXJlbmNlQ3VycmVudE5vdGVDb250ZW50ID0gZ2V0Q3VycmVudE5vdGVDb250ZW50KCk7XG5cbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtzZXR0aW5ncy5SRVNUQVBJVVJMQ29ubmVjdGlvbi5BUElLZXl9YFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBtb2RlbDogc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiByZWZlcmVuY2VDdXJyZW50Tm90ZUNvbnRlbnQgKyBzZXR0aW5ncy5nZW5lcmFsLnN5c3RlbV9yb2xlICsgcHJvbXB0fSxcbiAgICAgICAgICAgICAgICAgICAgLi4ubWVzc2FnZUhpc3RvcnlBdEluZGV4XG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzdHJlYW06IHRydWUsXG4gICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHBhcnNlSW50KHNldHRpbmdzLmdlbmVyYWwudGVtcGVyYXR1cmUpLFxuICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IHBhcnNlSW50KHNldHRpbmdzLmdlbmVyYWwubWF4X3Rva2VucykgfHwgNDA5NixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgc2lnbmFsOiBhYm9ydENvbnRyb2xsZXIuc2lnbmFsXG4gICAgICAgIH0pXG5cbiAgICAgICAgXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEhUVFAgZXJyb3IhIFN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgZXJyb3IhIFN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXJlc3BvbnNlLmJvZHkpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1Jlc3BvbnNlIGJvZHkgaXMgbnVsbCBvciB1bmRlZmluZWQuJyk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jlc3BvbnNlIGJvZHkgaXMgbnVsbCBvciB1bmRlZmluZWQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZWFkZXIgPSByZXNwb25zZS5ib2R5LmdldFJlYWRlcigpO1xuICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgICAgIGxldCByZWFkaW5nID0gdHJ1ZTtcblxuICAgICAgICB3aGlsZSAocmVhZGluZykge1xuICAgICAgICAgICAgY29uc3QgeyBkb25lLCB2YWx1ZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgcmVhZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjaHVuayA9IGRlY29kZXIuZGVjb2RlKHZhbHVlLCB7IHN0cmVhbTogZmFsc2UgfSkgfHwgJyc7XG5cbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGNodW5rIGNvbnRhaW5zICdkYXRhOiBbRE9ORV0nXG4gICAgICAgICAgICBpZiAoY2h1bmsuaW5jbHVkZXMoJ2RhdGE6IFtET05FXScpKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHRyaW1tZWRDaHVuayA9IGNodW5rLnJlcGxhY2UoL15kYXRhOiAvLCAnJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNwbGl0dGluZyB0aGUgY2h1bmsgdG8gcGFyc2UgSlNPTiBtZXNzYWdlcyBzZXBhcmF0ZWx5XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IHRyaW1tZWRDaHVuay5zcGxpdCgnXFxuJyk7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBwYXJ0cy5maWx0ZXIoQm9vbGVhbikpIHsgLy8gRmlsdGVyIG91dCBlbXB0eSBwYXJ0c1xuICAgICAgICAgICAgICAgIGxldCBwYXJzZWRDaHVuaztcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBwYXJzZWRDaHVuayA9IEpTT04ucGFyc2UocGFydCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgocGFyc2VkQ2h1bmsuZG9uZSAhPT0gdHJ1ZSkgfHwgcGFydCAhPT0gJ2RhdGE6IFtET05FXScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBwYXJzZWRDaHVuay5jaG9pY2VzWzBdLmRlbHRhLmNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlICs9IGNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyBKU09OOicsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQYXJ0IHdpdGggZXJyb3I6JywgcGFydCk7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZENodW5rID0ge3Jlc3BvbnNlOiAne19lX30nfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJyk7XG4gICAgICAgICAgICBpZiAobWVzc2FnZUNvbnRhaW5lckVsKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0VXNlck1lc3NhZ2UgPSBtZXNzYWdlQ29udGFpbmVyRWxEaXZzW2luZGV4ID8/IG1lc3NhZ2VIaXN0b3J5Lmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldEJvdE1lc3NhZ2UgPSB0YXJnZXRVc2VyTWVzc2FnZS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUJsb2NrID0gdGFyZ2V0Qm90TWVzc2FnZT8ucXVlcnlTZWxlY3RvcignLm1lc3NhZ2VCbG9jaycpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxvYWRpbmdFbCA9IHRhcmdldEJvdE1lc3NhZ2U/LnF1ZXJ5U2VsZWN0b3IoJyNsb2FkaW5nJyk7XG5cbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZUJsb2NrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsb2FkaW5nRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEJvdE1lc3NhZ2U/LnJlbW92ZUNoaWxkKGxvYWRpbmdFbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlQmxvY2suaW5uZXJIVE1MID0gbWFya2VkKG1lc3NhZ2UsIHsgYnJlYWtzOiB0cnVlIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIGFkZFBhcmFncmFwaEJyZWFrcyhtZXNzYWdlQmxvY2spO1xuICAgICAgICAgICAgICAgICAgICBwcmlzbUhpZ2hsaWdodGluZyhtZXNzYWdlQmxvY2spO1xuICAgICAgICAgICAgICAgICAgICBjb2RlQmxvY2tDb3B5QnV0dG9uKG1lc3NhZ2VCbG9jayk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtZXNzYWdlQ29udGFpbmVyRWwuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCAoZXZlbnQ6IFdoZWVsRXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIHVzZXIgc2Nyb2xscyB1cCBvciBkb3duLCBzdG9wIGF1dG8tc2Nyb2xsaW5nXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5kZWx0YVkgPCAwIHx8IGV2ZW50LmRlbHRhWSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzU2Nyb2xsID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFpc1Njcm9sbCkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRCb3RNZXNzYWdlPy5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnYXV0bycsIGJsb2NrOiAnc3RhcnQnIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGFkZE1lc3NhZ2UobWVzc2FnZSwgJ2JvdE1lc3NhZ2UnLCBzZXR0aW5ncywgaW5kZXgpO1xuICAgICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBhZGRNZXNzYWdlKG1lc3NhZ2UsICdib3RNZXNzYWdlJywgc2V0dGluZ3MsIGluZGV4KTsgLy8gVGhpcyB3aWxsIHNhdmUgbWlkLXN0cmVhbSBjb252ZXJzYXRpb24uXG4gICAgICAgIG5ldyBOb3RpY2UoZXJyb3IpO1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9XG59XG5cbi8vIFJlcXVlc3QgcmVzcG9uc2UgZnJvbSBNaXN0cmFsXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hNaXN0cmFsRGF0YShzZXR0aW5nczogQk1PU2V0dGluZ3MsIGluZGV4OiBudW1iZXIpIHtcbiAgICBsZXQgcHJvbXB0ID0gYXdhaXQgZ2V0UHJvbXB0KHNldHRpbmdzKTtcblxuICAgIGlmIChwcm9tcHQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHByb21wdCA9ICcnO1xuICAgIH1cblxuICAgIGNvbnN0IGZpbHRlcmVkTWVzc2FnZUhpc3RvcnkgPSBmaWx0ZXJNZXNzYWdlSGlzdG9yeShtZXNzYWdlSGlzdG9yeSk7XG4gICAgY29uc3QgbWVzc2FnZUhpc3RvcnlBdEluZGV4ID0gcmVtb3ZlQ29uc2VjdXRpdmVVc2VyUm9sZXMoZmlsdGVyZWRNZXNzYWdlSGlzdG9yeSk7XG4gICAgXG4gICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKTtcbiAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyRWxEaXZzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI21lc3NhZ2VDb250YWluZXIgZGl2LnVzZXJNZXNzYWdlLCAjbWVzc2FnZUNvbnRhaW5lciBkaXYuYm90TWVzc2FnZScpO1xuXG4gICAgY29uc3QgYm90TWVzc2FnZURpdiA9IGRpc3BsYXlMb2FkaW5nQm90TWVzc2FnZShzZXR0aW5ncyk7XG5cbiAgICBtZXNzYWdlQ29udGFpbmVyRWw/Lmluc2VydEJlZm9yZShib3RNZXNzYWdlRGl2LCBtZXNzYWdlQ29udGFpbmVyRWxEaXZzW2luZGV4KzFdKTtcbiAgICBib3RNZXNzYWdlRGl2LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KTtcblxuICAgIGF3YWl0IGdldEFjdGl2ZUZpbGVDb250ZW50KHNldHRpbmdzKTtcbiAgICBjb25zdCByZWZlcmVuY2VDdXJyZW50Tm90ZUNvbnRlbnQgPSBnZXRDdXJyZW50Tm90ZUNvbnRlbnQoKTtcblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgICAgICB1cmw6ICdodHRwczovL2FwaS5taXN0cmFsLmFpL3YxL2NoYXQvY29tcGxldGlvbnMnLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtzZXR0aW5ncy5BUElDb25uZWN0aW9ucy5taXN0cmFsLkFQSUtleX1gXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG1vZGVsOiBzZXR0aW5ncy5nZW5lcmFsLm1vZGVsLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IHJlZmVyZW5jZUN1cnJlbnROb3RlQ29udGVudCArIHNldHRpbmdzLmdlbmVyYWwuc3lzdGVtX3JvbGUgKyBwcm9tcHR9LFxuICAgICAgICAgICAgICAgICAgICAuLi5tZXNzYWdlSGlzdG9yeUF0SW5kZXhcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IHBhcnNlSW50KHNldHRpbmdzLmdlbmVyYWwubWF4X3Rva2VucykgfHwgNDA5NixcbiAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogcGFyc2VJbnQoc2V0dGluZ3MuZ2VuZXJhbC50ZW1wZXJhdHVyZSksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHJlc3BvbnNlLmpzb24uY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQ7XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKTtcbiAgICAgICAgaWYgKG1lc3NhZ2VDb250YWluZXJFbCkge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0VXNlck1lc3NhZ2UgPSBtZXNzYWdlQ29udGFpbmVyRWxEaXZzW2luZGV4ID8/IG1lc3NhZ2VIaXN0b3J5Lmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0Qm90TWVzc2FnZSA9IHRhcmdldFVzZXJNZXNzYWdlLm5leHRFbGVtZW50U2libGluZztcblxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZUJsb2NrID0gdGFyZ2V0Qm90TWVzc2FnZT8ucXVlcnlTZWxlY3RvcignLm1lc3NhZ2VCbG9jaycpO1xuICAgICAgICAgICAgY29uc3QgbG9hZGluZ0VsID0gdGFyZ2V0Qm90TWVzc2FnZT8ucXVlcnlTZWxlY3RvcignI2xvYWRpbmcnKTtcbiAgICAgICAgXG4gICAgICAgICAgICBpZiAobWVzc2FnZUJsb2NrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxvYWRpbmdFbCkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRCb3RNZXNzYWdlPy5yZW1vdmVDaGlsZChsb2FkaW5nRWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBtZXNzYWdlQmxvY2suaW5uZXJIVE1MID0gbWFya2VkKG1lc3NhZ2UsIHsgYnJlYWtzOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGFkZFBhcmFncmFwaEJyZWFrcyhtZXNzYWdlQmxvY2spO1xuICAgICAgICAgICAgICAgIHByaXNtSGlnaGxpZ2h0aW5nKG1lc3NhZ2VCbG9jayk7XG4gICAgICAgICAgICAgICAgY29kZUJsb2NrQ29weUJ1dHRvbihtZXNzYWdlQmxvY2spO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRhcmdldEJvdE1lc3NhZ2U/LmFwcGVuZENoaWxkKG1lc3NhZ2VCbG9jayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0YXJnZXRCb3RNZXNzYWdlPy5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgfVxuXG4gICAgICAgIGFkZE1lc3NhZ2UobWVzc2FnZSwgJ2JvdE1lc3NhZ2UnLCBzZXR0aW5ncywgaW5kZXgpO1xuICAgICAgICByZXR1cm47XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zdCB0YXJnZXRVc2VyTWVzc2FnZSA9IG1lc3NhZ2VDb250YWluZXJFbERpdnNbaW5kZXggPz8gbWVzc2FnZUhpc3RvcnkubGVuZ3RoIC0gMV07XG4gICAgICAgIGNvbnN0IHRhcmdldEJvdE1lc3NhZ2UgPSB0YXJnZXRVc2VyTWVzc2FnZS5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICAgIHRhcmdldEJvdE1lc3NhZ2U/LnJlbW92ZSgpO1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgICAgICBjb25zdCBib3RNZXNzYWdlRGl2ID0gZGlzcGxheUVycm9yQm90TWVzc2FnZShzZXR0aW5ncywgbWVzc2FnZUhpc3RvcnksIGVycm9yKTtcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RNZXNzYWdlRGl2KTtcbiAgICB9XG5cbn1cblxuLy8gRmV0Y2ggTWlzdHJhbCBBUEkgdmlhIHN0cmVhbVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoTWlzdHJhbERhdGFTdHJlYW0oc2V0dGluZ3M6IEJNT1NldHRpbmdzLCBpbmRleDogbnVtYmVyKSB7XG4gICAgYWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXG4gICAgbGV0IG1lc3NhZ2UgPSAnJztcblxuICAgIGxldCBpc1Njcm9sbCA9IGZhbHNlO1xuXG4gICAgbGV0IHByb21wdCA9IGF3YWl0IGdldFByb21wdChzZXR0aW5ncyk7XG5cbiAgICBpZiAocHJvbXB0ID09IHVuZGVmaW5lZCkge1xuICAgICAgICBwcm9tcHQgPSAnJztcbiAgICB9XG5cbiAgICBjb25zdCBmaWx0ZXJlZE1lc3NhZ2VIaXN0b3J5ID0gZmlsdGVyTWVzc2FnZUhpc3RvcnkobWVzc2FnZUhpc3RvcnkpO1xuICAgIGNvbnN0IG1lc3NhZ2VIaXN0b3J5QXRJbmRleCA9IHJlbW92ZUNvbnNlY3V0aXZlVXNlclJvbGVzKGZpbHRlcmVkTWVzc2FnZUhpc3RvcnkpO1xuXG4gICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKTtcbiAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyRWxEaXZzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI21lc3NhZ2VDb250YWluZXIgZGl2LnVzZXJNZXNzYWdlLCAjbWVzc2FnZUNvbnRhaW5lciBkaXYuYm90TWVzc2FnZScpO1xuXG4gICAgY29uc3QgYm90TWVzc2FnZURpdiA9IGRpc3BsYXlMb2FkaW5nQm90TWVzc2FnZShzZXR0aW5ncyk7XG5cbiAgICBtZXNzYWdlQ29udGFpbmVyRWw/Lmluc2VydEJlZm9yZShib3RNZXNzYWdlRGl2LCBtZXNzYWdlQ29udGFpbmVyRWxEaXZzW2luZGV4KzFdKTtcbiAgICBib3RNZXNzYWdlRGl2LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KTtcblxuICAgIGF3YWl0IGdldEFjdGl2ZUZpbGVDb250ZW50KHNldHRpbmdzKTtcbiAgICBjb25zdCByZWZlcmVuY2VDdXJyZW50Tm90ZUNvbnRlbnQgPSBnZXRDdXJyZW50Tm90ZUNvbnRlbnQoKTtcblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLm1pc3RyYWwuYWkvdjEvY2hhdC9jb21wbGV0aW9ucycsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7c2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMubWlzdHJhbC5BUElLZXl9YFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBtb2RlbDogc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiByZWZlcmVuY2VDdXJyZW50Tm90ZUNvbnRlbnQgKyBzZXR0aW5ncy5nZW5lcmFsLnN5c3RlbV9yb2xlICsgcHJvbXB0fSxcbiAgICAgICAgICAgICAgICAgICAgLi4ubWVzc2FnZUhpc3RvcnlBdEluZGV4XG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzdHJlYW06IHRydWUsXG4gICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHBhcnNlSW50KHNldHRpbmdzLmdlbmVyYWwudGVtcGVyYXR1cmUpLFxuICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IHBhcnNlSW50KHNldHRpbmdzLmdlbmVyYWwubWF4X3Rva2VucykgfHwgNDA5NixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgc2lnbmFsOiBhYm9ydENvbnRyb2xsZXIuc2lnbmFsXG4gICAgICAgIH0pXG5cbiAgICAgICAgXG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYEhUVFAgZXJyb3IhIFN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgZXJyb3IhIFN0YXR1czogJHtyZXNwb25zZS5zdGF0dXN9YCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXJlc3BvbnNlLmJvZHkpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1Jlc3BvbnNlIGJvZHkgaXMgbnVsbCBvciB1bmRlZmluZWQuJyk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jlc3BvbnNlIGJvZHkgaXMgbnVsbCBvciB1bmRlZmluZWQuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZWFkZXIgPSByZXNwb25zZS5ib2R5LmdldFJlYWRlcigpO1xuICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgICAgIGxldCByZWFkaW5nID0gdHJ1ZTtcblxuICAgICAgICB3aGlsZSAocmVhZGluZykge1xuICAgICAgICAgICAgY29uc3QgeyBkb25lLCB2YWx1ZSB9ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgcmVhZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjaHVuayA9IGRlY29kZXIuZGVjb2RlKHZhbHVlLCB7IHN0cmVhbTogZmFsc2UgfSkgfHwgJyc7XG5cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiY2h1bmtcIixjaHVuayk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gY2h1bmsuc3BsaXQoJ1xcbicpO1xuXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInBhcnRzXCIsIHBhcnRzKVxuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcGFydHMuZmlsdGVyKEJvb2xlYW4pKSB7IC8vIEZpbHRlciBvdXQgZW1wdHkgcGFydHNcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBjaHVuayBjb250YWlucyAnZGF0YTogW0RPTkVdJ1xuICAgICAgICAgICAgICAgIGlmIChwYXJ0LmluY2x1ZGVzKCdkYXRhOiBbRE9ORV0nKSkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgbGV0IHBhcnNlZENodW5rO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZENodW5rID0gSlNPTi5wYXJzZShwYXJ0LnJlcGxhY2UoL15kYXRhOiAvLCAnJykpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKHBhcnNlZENodW5rLmNob2ljZXNbMF0uZmluaXNoX3JlYXNvbiAhPT0gJ3N0b3AnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IHBhcnNlZENodW5rLmNob2ljZXNbMF0uZGVsdGEuY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UgKz0gY29udGVudDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIEpTT046JywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BhcnQgd2l0aCBlcnJvcjonLCBwYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkQ2h1bmsgPSB7cmVzcG9uc2U6ICd7X2VffSd9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlQ29udGFpbmVyRWwpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRVc2VyTWVzc2FnZSA9IG1lc3NhZ2VDb250YWluZXJFbERpdnNbaW5kZXggPz8gbWVzc2FnZUhpc3RvcnkubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Qm90TWVzc2FnZSA9IHRhcmdldFVzZXJNZXNzYWdlLm5leHRFbGVtZW50U2libGluZztcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlQmxvY2sgPSB0YXJnZXRCb3RNZXNzYWdlPy5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZUJsb2NrJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgbG9hZGluZ0VsID0gdGFyZ2V0Qm90TWVzc2FnZT8ucXVlcnlTZWxlY3RvcignI2xvYWRpbmcnKTtcblxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlQmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvYWRpbmdFbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Qm90TWVzc2FnZT8ucmVtb3ZlQ2hpbGQobG9hZGluZ0VsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCbG9jay5pbm5lckhUTUwgPSBtYXJrZWQobWVzc2FnZSwgeyBicmVha3M6IHRydWUgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgYWRkUGFyYWdyYXBoQnJlYWtzKG1lc3NhZ2VCbG9jayk7XG4gICAgICAgICAgICAgICAgICAgIHByaXNtSGlnaGxpZ2h0aW5nKG1lc3NhZ2VCbG9jayk7XG4gICAgICAgICAgICAgICAgICAgIGNvZGVCbG9ja0NvcHlCdXR0b24obWVzc2FnZUJsb2NrKTtcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG1lc3NhZ2VDb250YWluZXJFbC5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIChldmVudDogV2hlZWxFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdXNlciBzY3JvbGxzIHVwIG9yIGRvd24sIHN0b3AgYXV0by1zY3JvbGxpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LmRlbHRhWSA8IDAgfHwgZXZlbnQuZGVsdGFZID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNTY3JvbGwgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWlzU2Nyb2xsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldEJvdE1lc3NhZ2U/LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdhdXRvJywgYmxvY2s6ICdzdGFydCcgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgYWRkTWVzc2FnZShtZXNzYWdlLCAnYm90TWVzc2FnZScsIHNldHRpbmdzLCBpbmRleCk7XG4gICAgICAgIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGFkZE1lc3NhZ2UobWVzc2FnZSwgJ2JvdE1lc3NhZ2UnLCBzZXR0aW5ncywgaW5kZXgpOyAvLyBUaGlzIHdpbGwgc2F2ZSBtaWQtc3RyZWFtIGNvbnZlcnNhdGlvbi5cbiAgICAgICAgbmV3IE5vdGljZShlcnJvcik7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoR29vZ2xlR2VtaW5pRGF0YShzZXR0aW5nczogQk1PU2V0dGluZ3MsIGluZGV4OiBudW1iZXIpIHtcbiAgICBsZXQgcHJvbXB0ID0gYXdhaXQgZ2V0UHJvbXB0KHNldHRpbmdzKTtcblxuICAgIGlmIChwcm9tcHQgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHByb21wdCA9ICcnO1xuICAgIH1cblxuICAgIGNvbnN0IGZpbHRlcmVkTWVzc2FnZUhpc3RvcnkgPSBmaWx0ZXJNZXNzYWdlSGlzdG9yeShtZXNzYWdlSGlzdG9yeSk7XG4gICAgY29uc3QgbWVzc2FnZUhpc3RvcnlBdEluZGV4ID0gcmVtb3ZlQ29uc2VjdXRpdmVVc2VyUm9sZXMoZmlsdGVyZWRNZXNzYWdlSGlzdG9yeSk7XG4gICAgXG4gICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKTtcbiAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyRWxEaXZzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI21lc3NhZ2VDb250YWluZXIgZGl2LnVzZXJNZXNzYWdlLCAjbWVzc2FnZUNvbnRhaW5lciBkaXYuYm90TWVzc2FnZScpO1xuXG4gICAgY29uc3QgYm90TWVzc2FnZURpdiA9IGRpc3BsYXlMb2FkaW5nQm90TWVzc2FnZShzZXR0aW5ncyk7XG5cbiAgICBtZXNzYWdlQ29udGFpbmVyRWw/Lmluc2VydEJlZm9yZShib3RNZXNzYWdlRGl2LCBtZXNzYWdlQ29udGFpbmVyRWxEaXZzW2luZGV4KzFdKTtcbiAgICBib3RNZXNzYWdlRGl2LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ3N0YXJ0JyB9KTtcblxuICAgIGF3YWl0IGdldEFjdGl2ZUZpbGVDb250ZW50KHNldHRpbmdzKTtcbiAgICBjb25zdCByZWZlcmVuY2VDdXJyZW50Tm90ZUNvbnRlbnQgPSBnZXRDdXJyZW50Tm90ZUNvbnRlbnQoKTtcblxuICAgIC8vIEZ1bmN0aW9uIHRvIGNvbnZlcnQgbWVzc2FnZUhpc3RvcnkgdG8gR29vZ2xlIEdlbWluaSBmb3JtYXRcbiAgICBjb25zdCBjb252ZXJ0TWVzc2FnZUhpc3RvcnkgPSAobWVzc2FnZUhpc3Rvcnk6IHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfVtdLCByZWZlcmVuY2VDdXJyZW50Tm90ZUNvbnRlbnQ6IHN0cmluZykgPT4ge1xuICAgICAgICAvLyBDbG9uZSB0aGUgbWVzc2FnZUhpc3RvcnkgdG8gYXZvaWQgbXV0YXRpbmcgdGhlIG9yaWdpbmFsIGFycmF5XG4gICAgICAgIGNvbnN0IG1vZGlmaWVkTWVzc2FnZUhpc3RvcnkgPSBbLi4ubWVzc2FnZUhpc3RvcnldO1xuICAgICAgICBcbiAgICAgICAgLy8gRmluZCB0aGUgbGFzdCB1c2VyIG1lc3NhZ2UgaW5kZXhcbiAgICAgICAgY29uc3QgbGFzdFVzZXJNZXNzYWdlSW5kZXggPSBtb2RpZmllZE1lc3NhZ2VIaXN0b3J5Lm1hcCgobWVzc2FnZSwgaW5kZXgpID0+ICh7IHJvbGU6IG1lc3NhZ2Uucm9sZSwgaW5kZXggfSkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihtZXNzYWdlID0+IG1lc3NhZ2Uucm9sZSA9PT0gJ3VzZXInKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAobWVzc2FnZSA9PiBtZXNzYWdlLmluZGV4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5wb3AoKTtcblxuICAgICAgICAvLyBBcHBlbmQgcmVmZXJlbmNlQ3VycmVudE5vdGVDb250ZW50IHRvIHRoZSBsYXN0IHVzZXIgbWVzc2FnZSwgaWYgZm91bmRcbiAgICAgICAgaWYgKGxhc3RVc2VyTWVzc2FnZUluZGV4ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIG1vZGlmaWVkTWVzc2FnZUhpc3RvcnlbbGFzdFVzZXJNZXNzYWdlSW5kZXhdLmNvbnRlbnQgKz0gJ1xcblxcbicgKyByZWZlcmVuY2VDdXJyZW50Tm90ZUNvbnRlbnQgKyAnXFxuXFxuJyArIHNldHRpbmdzLmdlbmVyYWwuc3lzdGVtX3JvbGUgKyAnXFxuXFxuJyArIHByb21wdDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvbnRlbnRzID0gbW9kaWZpZWRNZXNzYWdlSGlzdG9yeS5tYXAoKHsgcm9sZSwgY29udGVudCB9KSA9PiAoe1xuICAgICAgICAgICAgcm9sZTogcm9sZSA9PT0gJ2Fzc2lzdGFudCcgPyAnbW9kZWwnIDogcm9sZSwgLy8gQ29udmVydCBcImFzc2lzdGFudFwiIHRvIFwibW9kZWxcIlxuICAgICAgICAgICAgcGFydHM6IFt7IHRleHQ6IGNvbnRlbnQgfV1cbiAgICAgICAgfSkpO1xuXG4gICAgICAgIHJldHVybiB7IGNvbnRlbnRzIH07XG4gICAgfTtcbiAgICBcbiAgICAvLyBVc2UgdGhlIGZ1bmN0aW9uIHRvIGNvbnZlcnQgeW91ciBtZXNzYWdlIGhpc3RvcnlcbiAgICBjb25zdCBjb252ZXJ0ZWRNZXNzYWdlSGlzdG9yeSA9IGNvbnZlcnRNZXNzYWdlSGlzdG9yeShtZXNzYWdlSGlzdG9yeUF0SW5kZXgsIHJlZmVyZW5jZUN1cnJlbnROb3RlQ29udGVudCk7XG5cbiAgICB0cnkgeyAgICAgICAgXG4gICAgICAgIC8vIEFzc3VtaW5nIHNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLmdvb2dsZUdlbWluaS5BUElLZXkgY29udGFpbnMgeW91ciBBUEkga2V5XG4gICAgICAgIGNvbnN0IEFQSV9LRVkgPSBzZXR0aW5ncy5BUElDb25uZWN0aW9ucy5nb29nbGVHZW1pbmkuQVBJS2V5O1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgIHVybDogYGh0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxYmV0YS9tb2RlbHMvZ2VtaW5pLXBybzpnZW5lcmF0ZUNvbnRlbnQ/a2V5PSR7QVBJX0tFWX1gLFxuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBjb250ZW50czogW1xuICAgICAgICAgICAgICAgICAgICAuLi5jb252ZXJ0ZWRNZXNzYWdlSGlzdG9yeS5jb250ZW50cyxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGdlbmVyYXRpb25Db25maWc6IHtcbiAgICAgICAgICAgICAgICAgICAgc3RvcFNlcXVlbmNlczogJycsXG4gICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiBwYXJzZUludChzZXR0aW5ncy5nZW5lcmFsLnRlbXBlcmF0dXJlKSxcbiAgICAgICAgICAgICAgICAgICAgbWF4T3V0cHV0VG9rZW5zOiBzZXR0aW5ncy5nZW5lcmFsLm1heF90b2tlbnMgfHwgNDA5NixcbiAgICAgICAgICAgICAgICAgICAgdG9wUDogMC44LFxuICAgICAgICAgICAgICAgICAgICB0b3BLOiAxMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSByZXNwb25zZS5qc29uLmNhbmRpZGF0ZXNbMF0uY29udGVudC5wYXJ0c1swXS50ZXh0O1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJyk7XG4gICAgICAgIGlmIChtZXNzYWdlQ29udGFpbmVyRWwpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldFVzZXJNZXNzYWdlID0gbWVzc2FnZUNvbnRhaW5lckVsRGl2c1tpbmRleCA/PyBtZXNzYWdlSGlzdG9yeS5sZW5ndGggLSAxXTtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldEJvdE1lc3NhZ2UgPSB0YXJnZXRVc2VyTWVzc2FnZS5uZXh0RWxlbWVudFNpYmxpbmc7XG5cbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VCbG9jayA9IHRhcmdldEJvdE1lc3NhZ2U/LnF1ZXJ5U2VsZWN0b3IoJy5tZXNzYWdlQmxvY2snKTtcbiAgICAgICAgICAgIGNvbnN0IGxvYWRpbmdFbCA9IHRhcmdldEJvdE1lc3NhZ2U/LnF1ZXJ5U2VsZWN0b3IoJyNsb2FkaW5nJyk7XG4gICAgICAgIFxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VCbG9jaykge1xuICAgICAgICAgICAgICAgIGlmIChsb2FkaW5nRWwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Qm90TWVzc2FnZT8ucmVtb3ZlQ2hpbGQobG9hZGluZ0VsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbWVzc2FnZUJsb2NrLmlubmVySFRNTCA9IG1hcmtlZChtZXNzYWdlLCB7IGJyZWFrczogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhZGRQYXJhZ3JhcGhCcmVha3MobWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgICAgICBwcmlzbUhpZ2hsaWdodGluZyhtZXNzYWdlQmxvY2spO1xuICAgICAgICAgICAgICAgIGNvZGVCbG9ja0NvcHlCdXR0b24obWVzc2FnZUJsb2NrKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0YXJnZXRCb3RNZXNzYWdlPy5hcHBlbmRDaGlsZChtZXNzYWdlQmxvY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFyZ2V0Qm90TWVzc2FnZT8uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnc3RhcnQnIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgIH1cblxuICAgICAgICBhZGRNZXNzYWdlKG1lc3NhZ2UsICdib3RNZXNzYWdlJywgc2V0dGluZ3MsIGluZGV4KTtcbiAgICAgICAgcmV0dXJuO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0VXNlck1lc3NhZ2UgPSBtZXNzYWdlQ29udGFpbmVyRWxEaXZzW2luZGV4ID8/IG1lc3NhZ2VIaXN0b3J5Lmxlbmd0aCAtIDFdO1xuICAgICAgICBjb25zdCB0YXJnZXRCb3RNZXNzYWdlID0gdGFyZ2V0VXNlck1lc3NhZ2UubmV4dEVsZW1lbnRTaWJsaW5nO1xuICAgICAgICB0YXJnZXRCb3RNZXNzYWdlPy5yZW1vdmUoKTtcblxuICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgICAgY29uc3QgYm90TWVzc2FnZURpdiA9IGRpc3BsYXlFcnJvckJvdE1lc3NhZ2Uoc2V0dGluZ3MsIG1lc3NhZ2VIaXN0b3J5LCBlcnJvcik7XG4gICAgICAgIG1lc3NhZ2VDb250YWluZXIuYXBwZW5kQ2hpbGQoYm90TWVzc2FnZURpdik7XG4gICAgfVxuXG59XG5cbi8vIFJlcXVlc3QgcmVzcG9uc2UgZnJvbSBBbnRocm9waWMgXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hBbnRocm9waWNBUElEYXRhKHNldHRpbmdzOiBCTU9TZXR0aW5ncywgaW5kZXg6IG51bWJlcikge1xuICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAnYW50aHJvcGljLXZlcnNpb24nOiAnMjAyMy0wNi0wMScsXG4gICAgICAnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ3gtYXBpLWtleSc6IHNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLmFudGhyb3BpYy5BUElLZXksXG4gICAgfTtcbiAgXG4gICAgbGV0IHByb21wdCA9IGF3YWl0IGdldFByb21wdChzZXR0aW5ncyk7XG5cbiAgICBpZiAocHJvbXB0ID09IHVuZGVmaW5lZCkge1xuICAgICAgICBwcm9tcHQgPSAnJztcbiAgICB9XG5cbiAgICBjb25zdCBmaWx0ZXJlZE1lc3NhZ2VIaXN0b3J5ID0gZmlsdGVyTWVzc2FnZUhpc3RvcnkobWVzc2FnZUhpc3RvcnkpO1xuICAgIGNvbnN0IG1lc3NhZ2VIaXN0b3J5QXRJbmRleCA9IHJlbW92ZUNvbnNlY3V0aXZlVXNlclJvbGVzKGZpbHRlcmVkTWVzc2FnZUhpc3RvcnkpO1xuXG4gICAgY29uc3QgbWVzc2FnZUhpc3RvcnlBdEluZGV4U3RyaW5nID0gbWVzc2FnZUhpc3RvcnlBdEluZGV4Lm1hcChlbnRyeSA9PiBlbnRyeS5jb250ZW50KS5qb2luKCdcXG4nKTtcbiAgICAgICAgICAgIFxuICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJyk7XG4gICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lckVsRGl2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNtZXNzYWdlQ29udGFpbmVyIGRpdi51c2VyTWVzc2FnZSwgI21lc3NhZ2VDb250YWluZXIgZGl2LmJvdE1lc3NhZ2UnKTtcblxuICAgIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkaXNwbGF5TG9hZGluZ0JvdE1lc3NhZ2Uoc2V0dGluZ3MpO1xuXG4gICAgbWVzc2FnZUNvbnRhaW5lckVsPy5pbnNlcnRCZWZvcmUoYm90TWVzc2FnZURpdiwgbWVzc2FnZUNvbnRhaW5lckVsRGl2c1tpbmRleCsxXSk7XG4gICAgYm90TWVzc2FnZURpdi5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSk7XG5cbiAgICBhd2FpdCBnZXRBY3RpdmVGaWxlQ29udGVudChzZXR0aW5ncyk7XG4gICAgY29uc3QgcmVmZXJlbmNlQ3VycmVudE5vdGVDb250ZW50ID0gZ2V0Q3VycmVudE5vdGVDb250ZW50KCk7XG5cbiAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcbiAgICAgICAgbW9kZWw6IHNldHRpbmdzLmdlbmVyYWwubW9kZWwsXG4gICAgICAgIHByb21wdDogIGBcXG5cXG5IdW1hbjogJHtyZWZlcmVuY2VDdXJyZW50Tm90ZUNvbnRlbnR9XFxuXFxuJHtzZXR0aW5ncy5nZW5lcmFsLnN5c3RlbV9yb2xlfVxcblxcbiR7cHJvbXB0fVxcblxcbiR7bWVzc2FnZUhpc3RvcnlBdEluZGV4U3RyaW5nfVxcblxcbkFzc2lzdGFudDpgLFxuICAgICAgICBtYXhfdG9rZW5zX3RvX3NhbXBsZTogcGFyc2VJbnQoc2V0dGluZ3MuZ2VuZXJhbC5tYXhfdG9rZW5zKSB8fCAxMDAwMDAsXG4gICAgICAgIHRlbXBlcmF0dXJlOiBwYXJzZUludChzZXR0aW5ncy5nZW5lcmFsLnRlbXBlcmF0dXJlKSxcbiAgICAgICAgc3RyZWFtOiB0cnVlLFxuICAgIH07XG4gIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICB1cmw6ICdodHRwczovL2FwaS5hbnRocm9waWMuY29tL3YxL2NvbXBsZXRlJyxcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgIGhlYWRlcnMsXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSxcbiAgICAgIH0pO1xuICBcbiAgICAgIGNvbnN0IG1lc3NhZ2UgPSByZXNwb25zZS50ZXh0O1xuICAgICAgY29uc3QgbGluZXMgPSBtZXNzYWdlLnNwbGl0KCdcXG4nKTtcbiAgICAgIGxldCBjb21wbGV0aW9uVGV4dCA9ICcnO1xuICBcbiAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgICBpZiAobGluZS5zdGFydHNXaXRoKCdkYXRhOicpKSB7XG4gICAgICAgICAgY29uc3QgZXZlbnREYXRhID0gSlNPTi5wYXJzZShsaW5lLnNsaWNlKCdkYXRhOicubGVuZ3RoKSk7XG4gICAgICAgICAgaWYgKGV2ZW50RGF0YS5jb21wbGV0aW9uKSB7XG4gICAgICAgICAgICBjb21wbGV0aW9uVGV4dCArPSBldmVudERhdGEuY29tcGxldGlvbjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKTtcbiAgICAgIGlmIChtZXNzYWdlQ29udGFpbmVyRWwpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0VXNlck1lc3NhZ2UgPSBtZXNzYWdlQ29udGFpbmVyRWxEaXZzW2luZGV4XTtcbiAgICAgICAgY29uc3QgdGFyZ2V0Qm90TWVzc2FnZSA9IHRhcmdldFVzZXJNZXNzYWdlLm5leHRFbGVtZW50U2libGluZztcblxuICAgICAgICBjb25zdCBtZXNzYWdlQmxvY2sgPSB0YXJnZXRCb3RNZXNzYWdlPy5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZUJsb2NrJyk7XG4gICAgICAgIGNvbnN0IGxvYWRpbmdFbCA9IHRhcmdldEJvdE1lc3NhZ2U/LnF1ZXJ5U2VsZWN0b3IoJyNsb2FkaW5nJyk7XG5cbiAgICAgICAgICBpZiAobWVzc2FnZUJsb2NrKSB7XG4gICAgICAgICAgICBpZiAobG9hZGluZ0VsKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0Qm90TWVzc2FnZT8ucmVtb3ZlQ2hpbGQobG9hZGluZ0VsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1lc3NhZ2VCbG9jay5pbm5lckhUTUwgPSBtYXJrZWQoY29tcGxldGlvblRleHQpO1xuICAgICAgICAgIFxuICAgICAgICAgICAgYWRkUGFyYWdyYXBoQnJlYWtzKG1lc3NhZ2VCbG9jayk7XG4gICAgICAgICAgICBwcmlzbUhpZ2hsaWdodGluZyhtZXNzYWdlQmxvY2spO1xuICAgICAgICAgICAgY29kZUJsb2NrQ29weUJ1dHRvbihtZXNzYWdlQmxvY2spO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0YXJnZXRCb3RNZXNzYWdlPy5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiAnc21vb3RoJywgYmxvY2s6ICdzdGFydCcgfSk7XG4gICAgICB9XG5cbiAgICAgIGFkZE1lc3NhZ2UoJ1xcblxcbkFzc2lzdGFudDogJyArIGNvbXBsZXRpb25UZXh0LCAnYm90TWVzc2FnZScsIHNldHRpbmdzLCBpbmRleCk7XG4gIFxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldFVzZXJNZXNzYWdlID0gbWVzc2FnZUNvbnRhaW5lckVsRGl2c1tpbmRleCA/PyBtZXNzYWdlSGlzdG9yeS5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgdGFyZ2V0Qm90TWVzc2FnZSA9IHRhcmdldFVzZXJNZXNzYWdlLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgdGFyZ2V0Qm90TWVzc2FnZT8ucmVtb3ZlKCk7XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJykgYXMgSFRNTERpdkVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkaXNwbGF5RXJyb3JCb3RNZXNzYWdlKHNldHRpbmdzLCBtZXNzYWdlSGlzdG9yeSwgZXJyb3IpO1xuICAgICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGJvdE1lc3NhZ2VEaXYpO1xuICAgIH1cbn1cblxuLy8gQWJvcnQgY29udHJvbGxlclxuZXhwb3J0IGZ1bmN0aW9uIGdldEFib3J0Q29udHJvbGxlcigpIHtcbiAgICByZXR1cm4gYWJvcnRDb250cm9sbGVyO1xufVxuXG5mdW5jdGlvbiBvbGxhbWFQYXJhbWV0ZXJzT3B0aW9ucyhzZXR0aW5nczogQk1PU2V0dGluZ3MpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBtaXJvc3RhdDogcGFyc2VJbnQoc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLm1pcm9zdGF0KSxcbiAgICAgICAgbWlyb3N0YXRfZXRhOiBwYXJzZUZsb2F0KHNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5taXJvc3RhdF9ldGEpLFxuICAgICAgICBtaXJvc3RhdF90YXU6IHBhcnNlRmxvYXQoc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLm1pcm9zdGF0X3RhdSksXG4gICAgICAgIG51bV9jdHg6IHBhcnNlSW50KHNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5udW1fY3R4KSxcbiAgICAgICAgbnVtX2dxYTogcGFyc2VJbnQoc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLm51bV9ncWEpLFxuICAgICAgICBudW1fdGhyZWFkOiBwYXJzZUludChzZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMubnVtX3RocmVhZCksXG4gICAgICAgIHJlcGVhdF9sYXN0X246IHBhcnNlSW50KHNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5yZXBlYXRfbGFzdF9uKSxcbiAgICAgICAgcmVwZWF0X3BlbmFsdHk6IHBhcnNlRmxvYXQoc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLnJlcGVhdF9wZW5hbHR5KSxcbiAgICAgICAgdGVtcGVyYXR1cmU6IHBhcnNlSW50KHNldHRpbmdzLmdlbmVyYWwudGVtcGVyYXR1cmUpLFxuICAgICAgICBzZWVkOiBwYXJzZUludChzZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMuc2VlZCksXG4gICAgICAgIHN0b3A6IHNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5zdG9wLFxuICAgICAgICB0ZnNfejogcGFyc2VGbG9hdChzZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMudGZzX3opLFxuICAgICAgICBudW1fcHJlZGljdDogcGFyc2VJbnQoc2V0dGluZ3MuZ2VuZXJhbC5tYXhfdG9rZW5zKSB8fCAtMSxcbiAgICAgICAgdG9wX2s6IHBhcnNlSW50KHNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy50b3BfayksXG4gICAgICAgIHRvcF9wOiBwYXJzZUZsb2F0KHNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy50b3BfcCksXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZmlsdGVyTWVzc2FnZUhpc3RvcnkobWVzc2FnZUhpc3Rvcnk6IHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfVtdKSB7XG4gICAgY29uc3Qgc2tpcEluZGV4ZXMgPSBuZXcgU2V0KCk7IC8vIFN0b3JlIGluZGV4ZXMgb2YgbWVzc2FnZXMgdG8gc2tpcFxuXG4gICAgbWVzc2FnZUhpc3RvcnkuZm9yRWFjaCgobWVzc2FnZSwgaW5kZXgsIGFycmF5KSA9PiB7XG4gICAgICAgIC8vIENoZWNrIGZvciB1c2VyIG1lc3NhZ2Ugd2l0aCBzbGFzaFxuICAgICAgICBpZiAobWVzc2FnZS5yb2xlID09PSAndXNlcicgJiYgbWVzc2FnZS5jb250ZW50LmluY2x1ZGVzKCcvJykpIHtcbiAgICAgICAgICAgIHNraXBJbmRleGVzLmFkZChpbmRleCk7IC8vIFNraXAgdGhpcyBtZXNzYWdlXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBuZXh0IG1lc3NhZ2UgaXMgZnJvbSB0aGUgYXNzaXN0YW50IGFuZCBza2lwIGl0IGFzIHdlbGxcbiAgICAgICAgICAgIGlmIChpbmRleCArIDEgPCBhcnJheS5sZW5ndGggJiYgYXJyYXlbaW5kZXggKyAxXS5yb2xlID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICAgICAgICAgIHNraXBJbmRleGVzLmFkZChpbmRleCArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrIGZvciBhc3Npc3RhbnQgbWVzc2FnZSB3aXRoIGRpc3BsYXlFcnJvckJvdE1lc3NhZ2VcbiAgICAgICAgZWxzZSBpZiAobWVzc2FnZS5yb2xlID09PSAnYXNzaXN0YW50JyAmJiBtZXNzYWdlLmNvbnRlbnQuaW5jbHVkZXMoJ2Vycm9yQm90TWVzc2FnZScpKSB7XG4gICAgICAgICAgICBza2lwSW5kZXhlcy5hZGQoaW5kZXgpOyAvLyBTa2lwIHRoaXMgbWVzc2FnZVxuICAgICAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgICAgIHNraXBJbmRleGVzLmFkZChpbmRleCAtIDEpOyAvLyBBbHNvIHNraXAgcHJldmlvdXMgbWVzc2FnZSBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gRmlsdGVyIHRoZSBtZXNzYWdlIGhpc3RvcnksIHNraXBwaW5nIG1hcmtlZCBtZXNzYWdlc1xuICAgIGNvbnN0IGZpbHRlcmVkTWVzc2FnZUhpc3RvcnkgPSBtZXNzYWdlSGlzdG9yeS5maWx0ZXIoKF8sIGluZGV4KSA9PiAhc2tpcEluZGV4ZXMuaGFzKGluZGV4KSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZygnRmlsdGVyZWQgbWVzc2FnZSBoaXN0b3J5OicsIGZpbHRlcmVkTWVzc2FnZUhpc3RvcnkpO1xuXG4gICAgcmV0dXJuIGZpbHRlcmVkTWVzc2FnZUhpc3Rvcnk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUNvbnNlY3V0aXZlVXNlclJvbGVzKG1lc3NhZ2VIaXN0b3J5OiB7IHJvbGU6IHN0cmluZzsgY29udGVudDogc3RyaW5nOyB9W10pIHtcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICBsZXQgZm91bmRVc2VyTWVzc2FnZSA9IGZhbHNlO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZXNzYWdlSGlzdG9yeS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAobWVzc2FnZUhpc3RvcnlbaV0ucm9sZSA9PT0gJ3VzZXInKSB7XG4gICAgICAgICAgICBpZiAoIWZvdW5kVXNlck1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAvLyBGaXJzdCB1c2VyIG1lc3NhZ2UsIGFkZCB0byByZXN1bHRcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChtZXNzYWdlSGlzdG9yeVtpXSk7XG4gICAgICAgICAgICAgICAgZm91bmRVc2VyTWVzc2FnZSA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIFNlY29uZCBjb25zZWN1dGl2ZSB1c2VyIG1lc3NhZ2UgZm91bmQsIHN0b3AgYWRkaW5nIHRvIHJlc3VsdFxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gTm9uLXVzZXIgbWVzc2FnZSwgYWRkIHRvIHJlc3VsdFxuICAgICAgICAgICAgcmVzdWx0LnB1c2gobWVzc2FnZUhpc3RvcnlbaV0pO1xuICAgICAgICAgICAgZm91bmRVc2VyTWVzc2FnZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59IiwgImV4cG9ydCBjb25zdCBWRVJTSU9OID0gJzQuNi4wJzsgLy8geC1yZWxlYXNlLXBsZWFzZS12ZXJzaW9uXG4iLCAiaW1wb3J0IHR5cGUgeyBSZXNwb25zZSB9IGZyb20gJy4vX3NoaW1zL2ZldGNoLmpzJztcblxudHlwZSBCeXRlcyA9IHN0cmluZyB8IEFycmF5QnVmZmVyIHwgVWludDhBcnJheSB8IEJ1ZmZlciB8IG51bGwgfCB1bmRlZmluZWQ7XG5cbnR5cGUgU2VydmVyU2VudEV2ZW50ID0ge1xuICBldmVudDogc3RyaW5nIHwgbnVsbDtcbiAgZGF0YTogc3RyaW5nO1xuICByYXc6IHN0cmluZ1tdO1xufTtcblxuZXhwb3J0IGNsYXNzIFN0cmVhbTxJdGVtPiBpbXBsZW1lbnRzIEFzeW5jSXRlcmFibGU8SXRlbT4ge1xuICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXI7XG5cbiAgcHJpdmF0ZSByZXNwb25zZTogUmVzcG9uc2U7XG4gIHByaXZhdGUgZGVjb2RlcjogU1NFRGVjb2RlcjtcblxuICBjb25zdHJ1Y3RvcihyZXNwb25zZTogUmVzcG9uc2UsIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcikge1xuICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICB0aGlzLmNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuICAgIHRoaXMuZGVjb2RlciA9IG5ldyBTU0VEZWNvZGVyKCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jICppdGVyTWVzc2FnZXMoKTogQXN5bmNHZW5lcmF0b3I8U2VydmVyU2VudEV2ZW50LCB2b2lkLCB1bmtub3duPiB7XG4gICAgaWYgKCF0aGlzLnJlc3BvbnNlLmJvZHkpIHtcbiAgICAgIHRoaXMuY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gaXRlcmF0ZSBvdmVyIGEgcmVzcG9uc2Ugd2l0aCBubyBib2R5YCk7XG4gICAgfVxuICAgIGNvbnN0IGxpbmVEZWNvZGVyID0gbmV3IExpbmVEZWNvZGVyKCk7XG5cbiAgICBjb25zdCBpdGVyID0gcmVhZGFibGVTdHJlYW1Bc3luY0l0ZXJhYmxlPEJ5dGVzPih0aGlzLnJlc3BvbnNlLmJvZHkpO1xuICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgaXRlcikge1xuICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVEZWNvZGVyLmRlY29kZShjaHVuaykpIHtcbiAgICAgICAgY29uc3Qgc3NlID0gdGhpcy5kZWNvZGVyLmRlY29kZShsaW5lKTtcbiAgICAgICAgaWYgKHNzZSkgeWllbGQgc3NlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lRGVjb2Rlci5mbHVzaCgpKSB7XG4gICAgICBjb25zdCBzc2UgPSB0aGlzLmRlY29kZXIuZGVjb2RlKGxpbmUpO1xuICAgICAgaWYgKHNzZSkgeWllbGQgc3NlO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jICpbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk6IEFzeW5jSXRlcmF0b3I8SXRlbSwgYW55LCB1bmRlZmluZWQ+IHtcbiAgICBsZXQgZG9uZSA9IGZhbHNlO1xuICAgIHRyeSB7XG4gICAgICBmb3IgYXdhaXQgKGNvbnN0IHNzZSBvZiB0aGlzLml0ZXJNZXNzYWdlcygpKSB7XG4gICAgICAgIGlmIChkb25lKSBjb250aW51ZTtcblxuICAgICAgICBpZiAoc3NlLmRhdGEuc3RhcnRzV2l0aCgnW0RPTkVdJykpIHtcbiAgICAgICAgICBkb25lID0gdHJ1ZTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzc2UuZXZlbnQgPT09IG51bGwpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgeWllbGQgSlNPTi5wYXJzZShzc2UuZGF0YSk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQ291bGQgbm90IHBhcnNlIG1lc3NhZ2UgaW50byBKU09OOmAsIHNzZS5kYXRhKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZyb20gY2h1bms6YCwgc3NlLnJhdyk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZG9uZSA9IHRydWU7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gSWYgdGhlIHVzZXIgY2FsbHMgYHN0cmVhbS5jb250cm9sbGVyLmFib3J0KClgLCB3ZSBzaG91bGQgZXhpdCB3aXRob3V0IHRocm93aW5nLlxuICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFcnJvciAmJiBlLm5hbWUgPT09ICdBYm9ydEVycm9yJykgcmV0dXJuO1xuICAgICAgdGhyb3cgZTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgLy8gSWYgdGhlIHVzZXIgYGJyZWFrYHMsIGFib3J0IHRoZSBvbmdvaW5nIHJlcXVlc3QuXG4gICAgICBpZiAoIWRvbmUpIHRoaXMuY29udHJvbGxlci5hYm9ydCgpO1xuICAgIH1cbiAgfVxufVxuXG5jbGFzcyBTU0VEZWNvZGVyIHtcbiAgcHJpdmF0ZSBkYXRhOiBzdHJpbmdbXTtcbiAgcHJpdmF0ZSBldmVudDogc3RyaW5nIHwgbnVsbDtcbiAgcHJpdmF0ZSBjaHVua3M6IHN0cmluZ1tdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZXZlbnQgPSBudWxsO1xuICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgIHRoaXMuY2h1bmtzID0gW107XG4gIH1cblxuICBkZWNvZGUobGluZTogc3RyaW5nKSB7XG4gICAgaWYgKGxpbmUuZW5kc1dpdGgoJ1xccicpKSB7XG4gICAgICBsaW5lID0gbGluZS5zdWJzdHJpbmcoMCwgbGluZS5sZW5ndGggLSAxKTtcbiAgICB9XG5cbiAgICBpZiAoIWxpbmUpIHtcbiAgICAgIC8vIGVtcHR5IGxpbmUgYW5kIHdlIGRpZG4ndCBwcmV2aW91c2x5IGVuY291bnRlciBhbnkgbWVzc2FnZXNcbiAgICAgIGlmICghdGhpcy5ldmVudCAmJiAhdGhpcy5kYXRhLmxlbmd0aCkgcmV0dXJuIG51bGw7XG5cbiAgICAgIGNvbnN0IHNzZTogU2VydmVyU2VudEV2ZW50ID0ge1xuICAgICAgICBldmVudDogdGhpcy5ldmVudCxcbiAgICAgICAgZGF0YTogdGhpcy5kYXRhLmpvaW4oJ1xcbicpLFxuICAgICAgICByYXc6IHRoaXMuY2h1bmtzLFxuICAgICAgfTtcblxuICAgICAgdGhpcy5ldmVudCA9IG51bGw7XG4gICAgICB0aGlzLmRhdGEgPSBbXTtcbiAgICAgIHRoaXMuY2h1bmtzID0gW107XG5cbiAgICAgIHJldHVybiBzc2U7XG4gICAgfVxuXG4gICAgdGhpcy5jaHVua3MucHVzaChsaW5lKTtcblxuICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJzonKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgbGV0IFtmaWVsZG5hbWUsIF8sIHZhbHVlXSA9IHBhcnRpdGlvbihsaW5lLCAnOicpO1xuXG4gICAgaWYgKHZhbHVlLnN0YXJ0c1dpdGgoJyAnKSkge1xuICAgICAgdmFsdWUgPSB2YWx1ZS5zdWJzdHJpbmcoMSk7XG4gICAgfVxuXG4gICAgaWYgKGZpZWxkbmFtZSA9PT0gJ2V2ZW50Jykge1xuICAgICAgdGhpcy5ldmVudCA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAoZmllbGRuYW1lID09PSAnZGF0YScpIHtcbiAgICAgIHRoaXMuZGF0YS5wdXNoKHZhbHVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIEEgcmUtaW1wbGVtZW50YXRpb24gb2YgaHR0cHgncyBgTGluZURlY29kZXJgIGluIFB5dGhvbiB0aGF0IGhhbmRsZXMgaW5jcmVtZW50YWxseVxuICogcmVhZGluZyBsaW5lcyBmcm9tIHRleHQuXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2VuY29kZS9odHRweC9ibG9iLzkyMDMzM2VhOTgxMThlOWNmNjE3ZjI0NjkwNWQ3YjIwMjUxMDk0MWMvaHR0cHgvX2RlY29kZXJzLnB5I0wyNThcbiAqL1xuY2xhc3MgTGluZURlY29kZXIge1xuICAvLyBwcmV0dGllci1pZ25vcmVcbiAgc3RhdGljIE5FV0xJTkVfQ0hBUlMgPSBuZXcgU2V0KFsnXFxuJywgJ1xccicsICdcXHgwYicsICdcXHgwYycsICdcXHgxYycsICdcXHgxZCcsICdcXHgxZScsICdcXHg4NScsICdcXHUyMDI4JywgJ1xcdTIwMjknXSk7XG4gIHN0YXRpYyBORVdMSU5FX1JFR0VYUCA9IC9cXHJcXG58W1xcblxcclxceDBiXFx4MGNcXHgxY1xceDFkXFx4MWVcXHg4NVxcdTIwMjhcXHUyMDI5XS9nO1xuXG4gIGJ1ZmZlcjogc3RyaW5nW107XG4gIHRyYWlsaW5nQ1I6IGJvb2xlYW47XG4gIHRleHREZWNvZGVyOiBhbnk7IC8vIFRleHREZWNvZGVyIGZvdW5kIGluIGJyb3dzZXJzOyBub3QgdHlwZWQgdG8gYXZvaWQgcHVsbGluZyBpbiBlaXRoZXIgXCJkb21cIiBvciBcIm5vZGVcIiB0eXBlcy5cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgIHRoaXMudHJhaWxpbmdDUiA9IGZhbHNlO1xuICB9XG5cbiAgZGVjb2RlKGNodW5rOiBCeXRlcyk6IHN0cmluZ1tdIHtcbiAgICBsZXQgdGV4dCA9IHRoaXMuZGVjb2RlVGV4dChjaHVuayk7XG5cbiAgICBpZiAodGhpcy50cmFpbGluZ0NSKSB7XG4gICAgICB0ZXh0ID0gJ1xccicgKyB0ZXh0O1xuICAgICAgdGhpcy50cmFpbGluZ0NSID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0ZXh0LmVuZHNXaXRoKCdcXHInKSkge1xuICAgICAgdGhpcy50cmFpbGluZ0NSID0gdHJ1ZTtcbiAgICAgIHRleHQgPSB0ZXh0LnNsaWNlKDAsIC0xKTtcbiAgICB9XG5cbiAgICBpZiAoIXRleHQpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCB0cmFpbGluZ05ld2xpbmUgPSBMaW5lRGVjb2Rlci5ORVdMSU5FX0NIQVJTLmhhcyh0ZXh0W3RleHQubGVuZ3RoIC0gMV0gfHwgJycpO1xuICAgIGxldCBsaW5lcyA9IHRleHQuc3BsaXQoTGluZURlY29kZXIuTkVXTElORV9SRUdFWFApO1xuXG4gICAgaWYgKGxpbmVzLmxlbmd0aCA9PT0gMSAmJiAhdHJhaWxpbmdOZXdsaW5lKSB7XG4gICAgICB0aGlzLmJ1ZmZlci5wdXNoKGxpbmVzWzBdISk7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYnVmZmVyLmxlbmd0aCA+IDApIHtcbiAgICAgIGxpbmVzID0gW3RoaXMuYnVmZmVyLmpvaW4oJycpICsgbGluZXNbMF0sIC4uLmxpbmVzLnNsaWNlKDEpXTtcbiAgICAgIHRoaXMuYnVmZmVyID0gW107XG4gICAgfVxuXG4gICAgaWYgKCF0cmFpbGluZ05ld2xpbmUpIHtcbiAgICAgIHRoaXMuYnVmZmVyID0gW2xpbmVzLnBvcCgpIHx8ICcnXTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXM7XG4gIH1cblxuICBkZWNvZGVUZXh0KGJ5dGVzOiBCeXRlcyk6IHN0cmluZyB7XG4gICAgaWYgKGJ5dGVzID09IG51bGwpIHJldHVybiAnJztcbiAgICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykgcmV0dXJuIGJ5dGVzO1xuXG4gICAgLy8gTm9kZTpcbiAgICBpZiAodHlwZW9mIEJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChieXRlcyBpbnN0YW5jZW9mIEJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gYnl0ZXMudG9TdHJpbmcoKTtcbiAgICAgIH1cbiAgICAgIGlmIChieXRlcyBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5mcm9tKGJ5dGVzKS50b1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBVbmV4cGVjdGVkOiByZWNlaXZlZCBub24tVWludDhBcnJheSAoJHtieXRlcy5jb25zdHJ1Y3Rvci5uYW1lfSkgc3RyZWFtIGNodW5rIGluIGFuIGVudmlyb25tZW50IHdpdGggYSBnbG9iYWwgXCJCdWZmZXJcIiBkZWZpbmVkLCB3aGljaCB0aGlzIGxpYnJhcnkgYXNzdW1lcyB0byBiZSBOb2RlLiBQbGVhc2UgcmVwb3J0IHRoaXMgZXJyb3IuYCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQnJvd3NlclxuICAgIGlmICh0eXBlb2YgVGV4dERlY29kZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoYnl0ZXMgaW5zdGFuY2VvZiBVaW50OEFycmF5IHx8IGJ5dGVzIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgdGhpcy50ZXh0RGVjb2RlciA/Pz0gbmV3IFRleHREZWNvZGVyKCd1dGY4Jyk7XG4gICAgICAgIHJldHVybiB0aGlzLnRleHREZWNvZGVyLmRlY29kZShieXRlcyk7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYFVuZXhwZWN0ZWQ6IHJlY2VpdmVkIG5vbi1VaW50OEFycmF5L0FycmF5QnVmZmVyICgke1xuICAgICAgICAgIChieXRlcyBhcyBhbnkpLmNvbnN0cnVjdG9yLm5hbWVcbiAgICAgICAgfSkgaW4gYSB3ZWIgcGxhdGZvcm0uIFBsZWFzZSByZXBvcnQgdGhpcyBlcnJvci5gLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgVW5leHBlY3RlZDogbmVpdGhlciBCdWZmZXIgbm9yIFRleHREZWNvZGVyIGFyZSBhdmFpbGFibGUgYXMgZ2xvYmFscy4gUGxlYXNlIHJlcG9ydCB0aGlzIGVycm9yLmAsXG4gICAgKTtcbiAgfVxuXG4gIGZsdXNoKCk6IHN0cmluZ1tdIHtcbiAgICBpZiAoIXRoaXMuYnVmZmVyLmxlbmd0aCAmJiAhdGhpcy50cmFpbGluZ0NSKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgbGluZXMgPSBbdGhpcy5idWZmZXIuam9pbignJyldO1xuICAgIHRoaXMuYnVmZmVyID0gW107XG4gICAgdGhpcy50cmFpbGluZ0NSID0gZmFsc2U7XG4gICAgcmV0dXJuIGxpbmVzO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBhcnRpdGlvbihzdHI6IHN0cmluZywgZGVsaW1pdGVyOiBzdHJpbmcpOiBbc3RyaW5nLCBzdHJpbmcsIHN0cmluZ10ge1xuICBjb25zdCBpbmRleCA9IHN0ci5pbmRleE9mKGRlbGltaXRlcik7XG4gIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICByZXR1cm4gW3N0ci5zdWJzdHJpbmcoMCwgaW5kZXgpLCBkZWxpbWl0ZXIsIHN0ci5zdWJzdHJpbmcoaW5kZXggKyBkZWxpbWl0ZXIubGVuZ3RoKV07XG4gIH1cblxuICByZXR1cm4gW3N0ciwgJycsICcnXTtcbn1cblxuLyoqXG4gKiBNb3N0IGJyb3dzZXJzIGRvbid0IHlldCBoYXZlIGFzeW5jIGl0ZXJhYmxlIHN1cHBvcnQgZm9yIFJlYWRhYmxlU3RyZWFtLFxuICogYW5kIE5vZGUgaGFzIGEgdmVyeSBkaWZmZXJlbnQgd2F5IG9mIHJlYWRpbmcgYnl0ZXMgZnJvbSBpdHMgXCJSZWFkYWJsZVN0cmVhbVwiLlxuICpcbiAqIFRoaXMgcG9seWZpbGwgd2FzIHB1bGxlZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9NYXR0aWFzQnVlbGVucy93ZWItc3RyZWFtcy1wb2x5ZmlsbC9wdWxsLzEyMiNpc3N1ZWNvbW1lbnQtMTYyNzM1NDQ5MFxuICovXG5mdW5jdGlvbiByZWFkYWJsZVN0cmVhbUFzeW5jSXRlcmFibGU8VD4oc3RyZWFtOiBhbnkpOiBBc3luY0l0ZXJhYmxlSXRlcmF0b3I8VD4ge1xuICBpZiAoc3RyZWFtW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSkgcmV0dXJuIHN0cmVhbTtcblxuICBjb25zdCByZWFkZXIgPSBzdHJlYW0uZ2V0UmVhZGVyKCk7XG4gIHJldHVybiB7XG4gICAgYXN5bmMgbmV4dCgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlYWRlci5yZWFkKCk7XG4gICAgICAgIGlmIChyZXN1bHQ/LmRvbmUpIHJlYWRlci5yZWxlYXNlTG9jaygpOyAvLyByZWxlYXNlIGxvY2sgd2hlbiBzdHJlYW0gYmVjb21lcyBjbG9zZWRcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmVhZGVyLnJlbGVhc2VMb2NrKCk7IC8vIHJlbGVhc2UgbG9jayB3aGVuIHN0cmVhbSBiZWNvbWVzIGVycm9yZWRcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGFzeW5jIHJldHVybigpIHtcbiAgICAgIGNvbnN0IGNhbmNlbFByb21pc2UgPSByZWFkZXIuY2FuY2VsKCk7XG4gICAgICByZWFkZXIucmVsZWFzZUxvY2soKTtcbiAgICAgIGF3YWl0IGNhbmNlbFByb21pc2U7XG4gICAgICByZXR1cm4geyBkb25lOiB0cnVlLCB2YWx1ZTogdW5kZWZpbmVkIH07XG4gICAgfSxcbiAgICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgfTtcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgeyBjYXN0VG9FcnJvciwgSGVhZGVycyB9IGZyb20gJy4vY29yZS5qcyc7XG5cbmV4cG9ydCBjbGFzcyBBUElFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgcmVhZG9ubHkgc3RhdHVzOiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIHJlYWRvbmx5IGhlYWRlcnM6IEhlYWRlcnMgfCB1bmRlZmluZWQ7XG4gIHJlYWRvbmx5IGVycm9yOiBPYmplY3QgfCB1bmRlZmluZWQ7XG5cbiAgcmVhZG9ubHkgY29kZTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgcmVhZG9ubHkgcGFyYW06IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XG4gIHJlYWRvbmx5IHR5cGU6IHN0cmluZyB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBzdGF0dXM6IG51bWJlciB8IHVuZGVmaW5lZCxcbiAgICBlcnJvcjogT2JqZWN0IHwgdW5kZWZpbmVkLFxuICAgIG1lc3NhZ2U6IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICBoZWFkZXJzOiBIZWFkZXJzIHwgdW5kZWZpbmVkLFxuICApIHtcbiAgICBzdXBlcihBUElFcnJvci5tYWtlTWVzc2FnZShlcnJvciwgbWVzc2FnZSkpO1xuICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG5cbiAgICBjb25zdCBkYXRhID0gZXJyb3IgYXMgUmVjb3JkPHN0cmluZywgYW55PjtcbiAgICB0aGlzLmVycm9yID0gZGF0YTtcbiAgICB0aGlzLmNvZGUgPSBkYXRhPy5bJ2NvZGUnXTtcbiAgICB0aGlzLnBhcmFtID0gZGF0YT8uWydwYXJhbSddO1xuICAgIHRoaXMudHlwZSA9IGRhdGE/LlsndHlwZSddO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgbWFrZU1lc3NhZ2UoZXJyb3I6IGFueSwgbWVzc2FnZTogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIGVycm9yPy5tZXNzYWdlID9cbiAgICAgICAgdHlwZW9mIGVycm9yLm1lc3NhZ2UgPT09ICdzdHJpbmcnID8gZXJyb3IubWVzc2FnZVxuICAgICAgICA6IEpTT04uc3RyaW5naWZ5KGVycm9yLm1lc3NhZ2UpXG4gICAgICA6IGVycm9yID8gSlNPTi5zdHJpbmdpZnkoZXJyb3IpXG4gICAgICA6IG1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQnXG4gICAgKTtcbiAgfVxuXG4gIHN0YXRpYyBnZW5lcmF0ZShcbiAgICBzdGF0dXM6IG51bWJlciB8IHVuZGVmaW5lZCxcbiAgICBlcnJvclJlc3BvbnNlOiBPYmplY3QgfCB1bmRlZmluZWQsXG4gICAgbWVzc2FnZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgIGhlYWRlcnM6IEhlYWRlcnMgfCB1bmRlZmluZWQsXG4gICkge1xuICAgIGlmICghc3RhdHVzKSB7XG4gICAgICByZXR1cm4gbmV3IEFQSUNvbm5lY3Rpb25FcnJvcih7IGNhdXNlOiBjYXN0VG9FcnJvcihlcnJvclJlc3BvbnNlKSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBlcnJvciA9IChlcnJvclJlc3BvbnNlIGFzIFJlY29yZDxzdHJpbmcsIGFueT4pPy5bJ2Vycm9yJ107XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MDApIHtcbiAgICAgIHJldHVybiBuZXcgQmFkUmVxdWVzdEVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IDQwMSkge1xuICAgICAgcmV0dXJuIG5ldyBBdXRoZW50aWNhdGlvbkVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IDQwMykge1xuICAgICAgcmV0dXJuIG5ldyBQZXJtaXNzaW9uRGVuaWVkRXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gNDA5KSB7XG4gICAgICByZXR1cm4gbmV3IENvbmZsaWN0RXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gNDIyKSB7XG4gICAgICByZXR1cm4gbmV3IFVucHJvY2Vzc2FibGVFbnRpdHlFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MjkpIHtcbiAgICAgIHJldHVybiBuZXcgUmF0ZUxpbWl0RXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA+PSA1MDApIHtcbiAgICAgIHJldHVybiBuZXcgSW50ZXJuYWxTZXJ2ZXJFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IEFQSUVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBUElVc2VyQWJvcnRFcnJvciBleHRlbmRzIEFQSUVycm9yIHtcbiAgb3ZlcnJpZGUgcmVhZG9ubHkgc3RhdHVzOiB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoeyBtZXNzYWdlIH06IHsgbWVzc2FnZT86IHN0cmluZyB9ID0ge30pIHtcbiAgICBzdXBlcih1bmRlZmluZWQsIHVuZGVmaW5lZCwgbWVzc2FnZSB8fCAnUmVxdWVzdCB3YXMgYWJvcnRlZC4nLCB1bmRlZmluZWQpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBUElDb25uZWN0aW9uRXJyb3IgZXh0ZW5kcyBBUElFcnJvciB7XG4gIG92ZXJyaWRlIHJlYWRvbmx5IHN0YXR1czogdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKHsgbWVzc2FnZSwgY2F1c2UgfTogeyBtZXNzYWdlPzogc3RyaW5nOyBjYXVzZT86IEVycm9yIHwgdW5kZWZpbmVkIH0pIHtcbiAgICBzdXBlcih1bmRlZmluZWQsIHVuZGVmaW5lZCwgbWVzc2FnZSB8fCAnQ29ubmVjdGlvbiBlcnJvci4nLCB1bmRlZmluZWQpO1xuICAgIC8vIGluIHNvbWUgZW52aXJvbm1lbnRzIHRoZSAnY2F1c2UnIHByb3BlcnR5IGlzIGFscmVhZHkgZGVjbGFyZWRcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgaWYgKGNhdXNlKSB0aGlzLmNhdXNlID0gY2F1c2U7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IgZXh0ZW5kcyBBUElDb25uZWN0aW9uRXJyb3Ige1xuICBjb25zdHJ1Y3Rvcih7IG1lc3NhZ2UgfTogeyBtZXNzYWdlPzogc3RyaW5nIH0gPSB7fSkge1xuICAgIHN1cGVyKHsgbWVzc2FnZTogbWVzc2FnZSA/PyAnUmVxdWVzdCB0aW1lZCBvdXQuJyB9KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQmFkUmVxdWVzdEVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBvdmVycmlkZSByZWFkb25seSBzdGF0dXM6IDQwMCA9IDQwMDtcbn1cblxuZXhwb3J0IGNsYXNzIEF1dGhlbnRpY2F0aW9uRXJyb3IgZXh0ZW5kcyBBUElFcnJvciB7XG4gIG92ZXJyaWRlIHJlYWRvbmx5IHN0YXR1czogNDAxID0gNDAxO1xufVxuXG5leHBvcnQgY2xhc3MgUGVybWlzc2lvbkRlbmllZEVycm9yIGV4dGVuZHMgQVBJRXJyb3Ige1xuICBvdmVycmlkZSByZWFkb25seSBzdGF0dXM6IDQwMyA9IDQwMztcbn1cblxuZXhwb3J0IGNsYXNzIE5vdEZvdW5kRXJyb3IgZXh0ZW5kcyBBUElFcnJvciB7XG4gIG92ZXJyaWRlIHJlYWRvbmx5IHN0YXR1czogNDA0ID0gNDA0O1xufVxuXG5leHBvcnQgY2xhc3MgQ29uZmxpY3RFcnJvciBleHRlbmRzIEFQSUVycm9yIHtcbiAgb3ZlcnJpZGUgcmVhZG9ubHkgc3RhdHVzOiA0MDkgPSA0MDk7XG59XG5cbmV4cG9ydCBjbGFzcyBVbnByb2Nlc3NhYmxlRW50aXR5RXJyb3IgZXh0ZW5kcyBBUElFcnJvciB7XG4gIG92ZXJyaWRlIHJlYWRvbmx5IHN0YXR1czogNDIyID0gNDIyO1xufVxuXG5leHBvcnQgY2xhc3MgUmF0ZUxpbWl0RXJyb3IgZXh0ZW5kcyBBUElFcnJvciB7XG4gIG92ZXJyaWRlIHJlYWRvbmx5IHN0YXR1czogNDI5ID0gNDI5O1xufVxuXG5leHBvcnQgY2xhc3MgSW50ZXJuYWxTZXJ2ZXJFcnJvciBleHRlbmRzIEFQSUVycm9yIHt9XG4iLCAiLyoqXG4gKiBEaXNjbGFpbWVyOiBtb2R1bGVzIGluIF9zaGltcyBhcmVuJ3QgaW50ZW5kZWQgdG8gYmUgaW1wb3J0ZWQgYnkgU0RLIHVzZXJzLlxuICpcbiAqIFRoaXMgaXMgYSBzdHViIGZvciBub24tbm9kZSBlbnZpcm9ubWVudHMuXG4gKiBJbiBub2RlIGVudmlyb25tZW50cywgaXQgZ2V0cyByZXBsYWNlZCBhZ2VudC1ub2RlLnRzIGJ5IHRoZSBwYWNrYWdlIGV4cG9ydCBtYXBcbiAqL1xuXG5leHBvcnQgdHlwZSBBZ2VudCA9IGFueTtcblxuZXhwb3J0IGNvbnN0IGdldERlZmF1bHRBZ2VudCA9ICh1cmw6IHN0cmluZyk6IGFueSA9PiB7XG4gIHJldHVybiB1bmRlZmluZWQ7XG59O1xuIiwgIi8qKlxuICogRGlzY2xhaW1lcjogbW9kdWxlcyBpbiBfc2hpbXMgYXJlbid0IGludGVuZGVkIHRvIGJlIGltcG9ydGVkIGJ5IFNESyB1c2Vycy5cbiAqL1xuXG4vLyBJZiB3ZSBhY2NpZGVudGFsbHkgY2FsbCBmZXRjaCB3aXRoIHRoZSB3cm9uZyB0aGlzIGJpbmRpbmcsXG4vLyBpbiB0aGUgYnJvd3NlciBpdCB3b3VsZCB0aHJvdzpcbi8vICAgVHlwZUVycm9yOiBGYWlsZWQgdG8gZXhlY3V0ZSAnZmV0Y2gnIG9uICdXaW5kb3cnOiBJbGxlZ2FsIGludm9jYXRpb25cbmNvbnN0IF9mZXRjaCA9IGZldGNoLmJpbmQodW5kZWZpbmVkKTtcbmNvbnN0IF9SZXF1ZXN0ID0gUmVxdWVzdDtcbmNvbnN0IF9SZXNwb25zZSA9IFJlc3BvbnNlO1xuY29uc3QgX0hlYWRlcnMgPSBIZWFkZXJzO1xuXG5leHBvcnQgY29uc3QgaXNQb2x5ZmlsbGVkID0gZmFsc2U7XG5cbmV4cG9ydCB7IF9mZXRjaCBhcyBmZXRjaCwgX1JlcXVlc3QgYXMgUmVxdWVzdCwgX1Jlc3BvbnNlIGFzIFJlc3BvbnNlLCBfSGVhZGVycyBhcyBIZWFkZXJzIH07XG4iLCAiLyoqXG4gKiBEaXNjbGFpbWVyOiBtb2R1bGVzIGluIF9zaGltcyBhcmVuJ3QgaW50ZW5kZWQgdG8gYmUgaW1wb3J0ZWQgYnkgU0RLIHVzZXJzLlxuICovXG5cbmNvbnN0IF9Gb3JtRGF0YSA9IEZvcm1EYXRhO1xuY29uc3QgX0Jsb2IgPSBCbG9iO1xuXG5jb25zdCBfRmlsZSA9XG4gIHR5cGVvZiBGaWxlICE9PSAndW5kZWZpbmVkJyA/IEZpbGUgOiAoXG4gICAgLy8gQnVuIGRvZXNuJ3QgaW1wbGVtZW50IEZpbGUgeWV0LCBzbyBqdXN0IG1ha2UgYSBzaGltIHRoYXQgdGhyb3dzIGEgaGVscGZ1bCBlcnJvciBtZXNzYWdlXG4gICAgY2xhc3MgRmlsZSBleHRlbmRzIEJsb2Ige1xuICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgZmlsZSB1cGxvYWRzIGFyZW4ndCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCB5ZXQgYXMgJ0ZpbGUnIGlzIG5vdCBkZWZpbmVkYCk7XG4gICAgICB9XG4gICAgfVxuICApO1xuXG5leHBvcnQgeyBfRm9ybURhdGEgYXMgRm9ybURhdGEsIF9GaWxlIGFzIEZpbGUsIF9CbG9iIGFzIEJsb2IgfTtcblxuZXhwb3J0IGNvbnN0IGlzUG9seWZpbGxlZCA9IGZhbHNlO1xuIiwgIi8qKlxuICogRGlzY2xhaW1lcjogbW9kdWxlcyBpbiBfc2hpbXMgYXJlbid0IGludGVuZGVkIHRvIGJlIGltcG9ydGVkIGJ5IFNESyB1c2Vycy5cbiAqL1xuXG5pbXBvcnQgeyBGb3JtRGF0YSB9IGZyb20gJy4vZm9ybS1kYXRhLmpzJztcbmltcG9ydCB0eXBlIHsgUmVxdWVzdE9wdGlvbnMgfSBmcm9tICcuLi9jb3JlLmpzJztcbmltcG9ydCB7IE11bHRpcGFydEJvZHkgfSBmcm9tICcuLi91cGxvYWRzLmpzJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE11bHRpcGFydFJlcXVlc3RPcHRpb25zPFQgZXh0ZW5kcyB7fSA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+PihcbiAgZm9ybTogRm9ybURhdGEsXG4gIG9wdHM6IFJlcXVlc3RPcHRpb25zPFQ+LFxuKTogUHJvbWlzZTxSZXF1ZXN0T3B0aW9uczxUPj4ge1xuICByZXR1cm4geyAuLi5vcHRzLCBib2R5OiBuZXcgTXVsdGlwYXJ0Qm9keShmb3JtKSBhcyBhbnkgfTtcbn1cbiIsICIvKipcbiAqIERpc2NsYWltZXI6IG1vZHVsZXMgaW4gX3NoaW1zIGFyZW4ndCBpbnRlbmRlZCB0byBiZSBpbXBvcnRlZCBieSBTREsgdXNlcnMuXG4gKlxuICogVGhpcyBpcyBhIHN0dWIgdGhhdCBnZXRzIHJlcGxhY2VkIGJ5IGZpbGVGcm9tUGF0aC1ub2RlLmpzIGZvciBub2RlIGVudmlyb25tZW50c1xuICogaW4gdGhlIHBhY2thZ2UgZXhwb3J0IG1hcFxuICovXG5cbmltcG9ydCB0eXBlIHsgRmlsZVByb3BlcnR5QmFnLCBGaWxlIH0gZnJvbSAnLi9mb3JtLWRhdGEuanMnO1xuXG5leHBvcnQgdHlwZSBGaWxlRnJvbVBhdGhPcHRpb25zID0gT21pdDxGaWxlUHJvcGVydHlCYWcsICdsYXN0TW9kaWZpZWQnPjtcblxuLyoqXG4gKiBUaGlzIGlzIGEgc3R1YiBmb3Igbm9uLW5vZGUgZW52aXJvbm1lbnRzIHRoYXQganVzdCB0aHJvd3MgYW4gZXJyb3IuXG4gKiBJbiBub2RlIGVudmlyb25tZW50cywgdGhpcyBtb2R1bGUgd2lsbCBiZSByZXBsYWNlZCBieSB1dGlsL25vZGUvZmlsZUZyb21QYXRoIGJ5IHRoZVxuICogcGFja2FnZSBpbXBvcnQgbWFwLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmlsZUZyb21QYXRoKHBhdGg6IHN0cmluZyk6IFByb21pc2U8RmlsZT47XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmlsZUZyb21QYXRoKHBhdGg6IHN0cmluZywgZmlsZW5hbWU/OiBzdHJpbmcpOiBQcm9taXNlPEZpbGU+O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbGVGcm9tUGF0aChwYXRoOiBzdHJpbmcsIG9wdGlvbnM/OiBGaWxlRnJvbVBhdGhPcHRpb25zKTogUHJvbWlzZTxGaWxlPjtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaWxlRnJvbVBhdGgoXG4gIHBhdGg6IHN0cmluZyxcbiAgZmlsZW5hbWU/OiBzdHJpbmcsXG4gIG9wdGlvbnM/OiBGaWxlRnJvbVBhdGhPcHRpb25zLFxuKTogUHJvbWlzZTxGaWxlPjtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmaWxlRnJvbVBhdGgoKTogUHJvbWlzZTxGaWxlPiB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICAnVGhlIGBmaWxlRnJvbVBhdGhgIGZ1bmN0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIGluIE5vZGUuIFNlZSB0aGUgUkVBRE1FIGZvciBtb3JlIGRldGFpbHM6IGh0dHBzOi8vd3d3LmdpdGh1Yi5jb20vb3BlbmFpL29wZW5haS1ub2RlI2ZpbGUtdXBsb2FkcycsXG4gICk7XG59XG4iLCAiLyoqXG4gKiBEaXNjbGFpbWVyOiBtb2R1bGVzIGluIF9zaGltcyBhcmVuJ3QgaW50ZW5kZWQgdG8gYmUgaW1wb3J0ZWQgYnkgU0RLIHVzZXJzLlxuICovXG5cbi8vIHNoaW0gdGhlc2UgTm9kZSB0eXBlcyB0byBhdm9pZCBpbXBvcnRpbmcgQHR5cGVzL25vZGUgYW5kIHBvbGx1dGluZyB0aGUgdXNlcidzXG4vLyB0eXBlIGVudmlyb25tZW50IGluIG5vbi1ub2RlIHByb2plY3RzXG5cbmV4cG9ydCBkZWNsYXJlIGNsYXNzIFJlYWRhYmxlIHtcbiAgcmVhZGFibGU6IGJvb2xlYW47XG4gIHJlYWRvbmx5IHJlYWRhYmxlRW5kZWQ6IGJvb2xlYW47XG4gIHJlYWRvbmx5IHJlYWRhYmxlRmxvd2luZzogYm9vbGVhbiB8IG51bGw7XG4gIHJlYWRvbmx5IHJlYWRhYmxlSGlnaFdhdGVyTWFyazogbnVtYmVyO1xuICByZWFkb25seSByZWFkYWJsZUxlbmd0aDogbnVtYmVyO1xuICByZWFkb25seSByZWFkYWJsZU9iamVjdE1vZGU6IGJvb2xlYW47XG4gIGRlc3Ryb3llZDogYm9vbGVhbjtcbiAgcmVhZChzaXplPzogbnVtYmVyKTogYW55O1xuICBwYXVzZSgpOiB0aGlzO1xuICByZXN1bWUoKTogdGhpcztcbiAgaXNQYXVzZWQoKTogYm9vbGVhbjtcbiAgZGVzdHJveShlcnJvcj86IEVycm9yKTogdGhpcztcbiAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpOiBBc3luY0l0ZXJhYmxlSXRlcmF0b3I8YW55Pjtcbn1cblxuZXhwb3J0IGRlY2xhcmUgY2xhc3MgRnNSZWFkU3RyZWFtIGV4dGVuZHMgUmVhZGFibGUge1xuICBwYXRoOiB7fTsgLy8gbm9kZSB0eXBlIGlzIHN0cmluZyB8IEJ1ZmZlclxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGc1JlYWRTdHJlYW0odmFsdWU6IGFueSk6IHZhbHVlIGlzIEZzUmVhZFN0cmVhbSB7XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsICJpbXBvcnQgeyB0eXBlIFJlcXVlc3RPcHRpb25zIH0gZnJvbSAnLi9jb3JlLmpzJztcbmltcG9ydCB7IHR5cGUgUmVhZGFibGUgfSBmcm9tICcuL19zaGltcy9ub2RlLXJlYWRhYmxlLmpzJztcbmltcG9ydCB7IHR5cGUgQm9keUluaXQgfSBmcm9tICcuL19zaGltcy9mZXRjaC5qcyc7XG5pbXBvcnQgeyBGb3JtRGF0YSwgRmlsZSwgdHlwZSBCbG9iLCB0eXBlIEZpbGVQcm9wZXJ0eUJhZyB9IGZyb20gJy4vX3NoaW1zL2Zvcm0tZGF0YS5qcyc7XG5pbXBvcnQgeyBnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucyB9IGZyb20gJy4vX3NoaW1zL2dldE11bHRpcGFydFJlcXVlc3RPcHRpb25zLmpzJztcbmltcG9ydCB7IGZpbGVGcm9tUGF0aCB9IGZyb20gJy4vX3NoaW1zL2ZpbGVGcm9tUGF0aC5qcyc7XG5pbXBvcnQgeyB0eXBlIEZzUmVhZFN0cmVhbSwgaXNGc1JlYWRTdHJlYW0gfSBmcm9tICcuL19zaGltcy9ub2RlLXJlYWRhYmxlLmpzJztcblxuZXhwb3J0IHsgZmlsZUZyb21QYXRoIH07XG5cbnR5cGUgQmxvYkxpa2VQYXJ0ID0gc3RyaW5nIHwgQXJyYXlCdWZmZXIgfCBBcnJheUJ1ZmZlclZpZXcgfCBCbG9iTGlrZSB8IFVpbnQ4QXJyYXkgfCBEYXRhVmlldztcbmV4cG9ydCB0eXBlIEJsb2JQYXJ0ID0gc3RyaW5nIHwgQXJyYXlCdWZmZXIgfCBBcnJheUJ1ZmZlclZpZXcgfCBCbG9iIHwgVWludDhBcnJheSB8IERhdGFWaWV3O1xuXG4vKipcbiAqIFR5cGljYWxseSwgdGhpcyBpcyBhIG5hdGl2ZSBcIkZpbGVcIiBjbGFzcy5cbiAqXG4gKiBXZSBwcm92aWRlIHRoZSB7QGxpbmsgdG9GaWxlfSB1dGlsaXR5IHRvIGNvbnZlcnQgYSB2YXJpZXR5IG9mIG9iamVjdHNcbiAqIGludG8gdGhlIEZpbGUgY2xhc3MuXG4gKlxuICogRm9yIGNvbnZlbmllbmNlLCB5b3UgY2FuIGFsc28gcGFzcyBhIGZldGNoIFJlc3BvbnNlLCBvciBpbiBOb2RlLFxuICogdGhlIHJlc3VsdCBvZiBmcy5jcmVhdGVSZWFkU3RyZWFtKCkuXG4gKi9cbmV4cG9ydCB0eXBlIFVwbG9hZGFibGUgPSBGaWxlTGlrZSB8IFJlc3BvbnNlTGlrZSB8IEZzUmVhZFN0cmVhbTtcblxuLyoqXG4gKiBJbnRlbmRlZCB0byBtYXRjaCB3ZWIuQmxvYiwgbm9kZS5CbG9iLCBub2RlLWZldGNoLkJsb2IsIGV0Yy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCbG9iTGlrZSB7XG4gIC8qKiBbTUROIFJlZmVyZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0Jsb2Ivc2l6ZSkgKi9cbiAgcmVhZG9ubHkgc2l6ZTogbnVtYmVyO1xuICAvKiogW01ETiBSZWZlcmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9CbG9iL3R5cGUpICovXG4gIHJlYWRvbmx5IHR5cGU6IHN0cmluZztcbiAgLyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQmxvYi90ZXh0KSAqL1xuICB0ZXh0KCk6IFByb21pc2U8c3RyaW5nPjtcbiAgLyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQmxvYi9zbGljZSkgKi9cbiAgc2xpY2Uoc3RhcnQ/OiBudW1iZXIsIGVuZD86IG51bWJlcik6IEJsb2JMaWtlO1xuICAvLyB1bmZvcnR1bmF0ZWx5IEB0eXBlcy9ub2RlLWZldGNoQF4yLjYuNCBkb2Vzbid0IHR5cGUgdGhlIGFycmF5QnVmZmVyIG1ldGhvZFxufVxuXG4vKipcbiAqIEludGVuZGVkIHRvIG1hdGNoIHdlYi5GaWxlLCBub2RlLkZpbGUsIG5vZGUtZmV0Y2guRmlsZSwgZXRjLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVMaWtlIGV4dGVuZHMgQmxvYkxpa2Uge1xuICAvKiogW01ETiBSZWZlcmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9GaWxlL2xhc3RNb2RpZmllZCkgKi9cbiAgcmVhZG9ubHkgbGFzdE1vZGlmaWVkOiBudW1iZXI7XG4gIC8qKiBbTUROIFJlZmVyZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0ZpbGUvbmFtZSkgKi9cbiAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xufVxuXG4vKipcbiAqIEludGVuZGVkIHRvIG1hdGNoIHdlYi5SZXNwb25zZSwgbm9kZS5SZXNwb25zZSwgbm9kZS1mZXRjaC5SZXNwb25zZSwgZXRjLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJlc3BvbnNlTGlrZSB7XG4gIHVybDogc3RyaW5nO1xuICBibG9iKCk6IFByb21pc2U8QmxvYkxpa2U+O1xufVxuXG5leHBvcnQgY29uc3QgaXNSZXNwb25zZUxpa2UgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIFJlc3BvbnNlTGlrZSA9PlxuICB2YWx1ZSAhPSBudWxsICYmXG4gIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgdHlwZW9mIHZhbHVlLnVybCA9PT0gJ3N0cmluZycgJiZcbiAgdHlwZW9mIHZhbHVlLmJsb2IgPT09ICdmdW5jdGlvbic7XG5cbmV4cG9ydCBjb25zdCBpc0ZpbGVMaWtlID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBGaWxlTGlrZSA9PlxuICB2YWx1ZSAhPSBudWxsICYmXG4gIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgdHlwZW9mIHZhbHVlLm5hbWUgPT09ICdzdHJpbmcnICYmXG4gIHR5cGVvZiB2YWx1ZS5sYXN0TW9kaWZpZWQgPT09ICdudW1iZXInICYmXG4gIGlzQmxvYkxpa2UodmFsdWUpO1xuXG4vKipcbiAqIFRoZSBCbG9iTGlrZSB0eXBlIG9taXRzIGFycmF5QnVmZmVyKCkgYmVjYXVzZSBAdHlwZXMvbm9kZS1mZXRjaEBeMi42LjQgbGFja3MgaXQ7IGJ1dCB0aGlzIGNoZWNrXG4gKiBhZGRzIHRoZSBhcnJheUJ1ZmZlcigpIG1ldGhvZCB0eXBlIGJlY2F1c2UgaXQgaXMgYXZhaWxhYmxlIGFuZCB1c2VkIGF0IHJ1bnRpbWVcbiAqL1xuZXhwb3J0IGNvbnN0IGlzQmxvYkxpa2UgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIEJsb2JMaWtlICYgeyBhcnJheUJ1ZmZlcigpOiBQcm9taXNlPEFycmF5QnVmZmVyPiB9ID0+XG4gIHZhbHVlICE9IG51bGwgJiZcbiAgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICB0eXBlb2YgdmFsdWUuc2l6ZSA9PT0gJ251bWJlcicgJiZcbiAgdHlwZW9mIHZhbHVlLnR5cGUgPT09ICdzdHJpbmcnICYmXG4gIHR5cGVvZiB2YWx1ZS50ZXh0ID09PSAnZnVuY3Rpb24nICYmXG4gIHR5cGVvZiB2YWx1ZS5zbGljZSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICB0eXBlb2YgdmFsdWUuYXJyYXlCdWZmZXIgPT09ICdmdW5jdGlvbic7XG5cbmV4cG9ydCBjb25zdCBpc1VwbG9hZGFibGUgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIFVwbG9hZGFibGUgPT4ge1xuICByZXR1cm4gaXNGaWxlTGlrZSh2YWx1ZSkgfHwgaXNSZXNwb25zZUxpa2UodmFsdWUpIHx8IGlzRnNSZWFkU3RyZWFtKHZhbHVlKTtcbn07XG5cbmV4cG9ydCB0eXBlIFRvRmlsZUlucHV0ID0gVXBsb2FkYWJsZSB8IEV4Y2x1ZGU8QmxvYkxpa2VQYXJ0LCBzdHJpbmc+IHwgQXN5bmNJdGVyYWJsZTxCbG9iTGlrZVBhcnQ+O1xuXG4vKipcbiAqIEhlbHBlciBmb3IgY3JlYXRpbmcgYSB7QGxpbmsgRmlsZX0gdG8gcGFzcyB0byBhbiBTREsgdXBsb2FkIG1ldGhvZCBmcm9tIGEgdmFyaWV0eSBvZiBkaWZmZXJlbnQgZGF0YSBmb3JtYXRzXG4gKiBAcGFyYW0gdmFsdWUgdGhlIHJhdyBjb250ZW50IG9mIHRoZSBmaWxlLiAgQ2FuIGJlIGFuIHtAbGluayBVcGxvYWRhYmxlfSwge0BsaW5rIEJsb2JMaWtlUGFydH0sIG9yIHtAbGluayBBc3luY0l0ZXJhYmxlfSBvZiB7QGxpbmsgQmxvYkxpa2VQYXJ0fXNcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSB0aGUgbmFtZSBvZiB0aGUgZmlsZS4gSWYgb21pdHRlZCwgdG9GaWxlIHdpbGwgdHJ5IHRvIGRldGVybWluZSBhIGZpbGUgbmFtZSBmcm9tIGJpdHMgaWYgcG9zc2libGVcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9ucyBhZGRpdGlvbmFsIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0aW9ucy50eXBlIHRoZSBNSU1FIHR5cGUgb2YgdGhlIGNvbnRlbnRcbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0aW9ucy5sYXN0TW9kaWZpZWQgdGhlIGxhc3QgbW9kaWZpZWQgdGltZXN0YW1wXG4gKiBAcmV0dXJucyBhIHtAbGluayBGaWxlfSB3aXRoIHRoZSBnaXZlbiBwcm9wZXJ0aWVzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0b0ZpbGUoXG4gIHZhbHVlOiBUb0ZpbGVJbnB1dCB8IFByb21pc2VMaWtlPFRvRmlsZUlucHV0PixcbiAgbmFtZT86IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQsXG4gIG9wdGlvbnM6IEZpbGVQcm9wZXJ0eUJhZyB8IHVuZGVmaW5lZCA9IHt9LFxuKTogUHJvbWlzZTxGaWxlTGlrZT4ge1xuICAvLyBJZiBpdCdzIGEgcHJvbWlzZSwgcmVzb2x2ZSBpdC5cbiAgdmFsdWUgPSBhd2FpdCB2YWx1ZTtcblxuICBpZiAoaXNSZXNwb25zZUxpa2UodmFsdWUpKSB7XG4gICAgY29uc3QgYmxvYiA9IGF3YWl0IHZhbHVlLmJsb2IoKTtcbiAgICBuYW1lIHx8PSBuZXcgVVJMKHZhbHVlLnVybCkucGF0aG5hbWUuc3BsaXQoL1tcXFxcL10vKS5wb3AoKSA/PyAndW5rbm93bl9maWxlJztcblxuICAgIHJldHVybiBuZXcgRmlsZShbYmxvYiBhcyBhbnldLCBuYW1lLCBvcHRpb25zKTtcbiAgfVxuXG4gIGNvbnN0IGJpdHMgPSBhd2FpdCBnZXRCeXRlcyh2YWx1ZSk7XG5cbiAgbmFtZSB8fD0gZ2V0TmFtZSh2YWx1ZSkgPz8gJ3Vua25vd25fZmlsZSc7XG5cbiAgaWYgKCFvcHRpb25zLnR5cGUpIHtcbiAgICBjb25zdCB0eXBlID0gKGJpdHNbMF0gYXMgYW55KT8udHlwZTtcbiAgICBpZiAodHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBvcHRpb25zID0geyAuLi5vcHRpb25zLCB0eXBlIH07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBGaWxlKGJpdHMsIG5hbWUsIG9wdGlvbnMpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRCeXRlcyh2YWx1ZTogVG9GaWxlSW5wdXQpOiBQcm9taXNlPEFycmF5PEJsb2JQYXJ0Pj4ge1xuICBsZXQgcGFydHM6IEFycmF5PEJsb2JQYXJ0PiA9IFtdO1xuICBpZiAoXG4gICAgdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fFxuICAgIEFycmF5QnVmZmVyLmlzVmlldyh2YWx1ZSkgfHwgLy8gaW5jbHVkZXMgVWludDhBcnJheSwgQnVmZmVyLCBldGMuXG4gICAgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlclxuICApIHtcbiAgICBwYXJ0cy5wdXNoKHZhbHVlKTtcbiAgfSBlbHNlIGlmIChpc0Jsb2JMaWtlKHZhbHVlKSkge1xuICAgIHBhcnRzLnB1c2goYXdhaXQgdmFsdWUuYXJyYXlCdWZmZXIoKSk7XG4gIH0gZWxzZSBpZiAoXG4gICAgaXNBc3luY0l0ZXJhYmxlSXRlcmF0b3IodmFsdWUpIC8vIGluY2x1ZGVzIFJlYWRhYmxlLCBSZWFkYWJsZVN0cmVhbSwgZXRjLlxuICApIHtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHZhbHVlKSB7XG4gICAgICBwYXJ0cy5wdXNoKGNodW5rIGFzIEJsb2JQYXJ0KTsgLy8gVE9ETywgY29uc2lkZXIgdmFsaWRhdGluZz9cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFVuZXhwZWN0ZWQgZGF0YSB0eXBlOiAke3R5cGVvZiB2YWx1ZX07IGNvbnN0cnVjdG9yOiAke1xuICAgICAgICB2YWx1ZT8uY29uc3RydWN0b3I/Lm5hbWVcbiAgICAgIH07IHByb3BzOiAke3Byb3BzRm9yRXJyb3IodmFsdWUpfWAsXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBwYXJ0cztcbn1cblxuZnVuY3Rpb24gcHJvcHNGb3JFcnJvcih2YWx1ZTogYW55KTogc3RyaW5nIHtcbiAgY29uc3QgcHJvcHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh2YWx1ZSk7XG4gIHJldHVybiBgWyR7cHJvcHMubWFwKChwKSA9PiBgXCIke3B9XCJgKS5qb2luKCcsICcpfV1gO1xufVxuXG5mdW5jdGlvbiBnZXROYW1lKHZhbHVlOiBhbnkpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICByZXR1cm4gKFxuICAgIGdldFN0cmluZ0Zyb21NYXliZUJ1ZmZlcih2YWx1ZS5uYW1lKSB8fFxuICAgIGdldFN0cmluZ0Zyb21NYXliZUJ1ZmZlcih2YWx1ZS5maWxlbmFtZSkgfHxcbiAgICAvLyBGb3IgZnMuUmVhZFN0cmVhbVxuICAgIGdldFN0cmluZ0Zyb21NYXliZUJ1ZmZlcih2YWx1ZS5wYXRoKT8uc3BsaXQoL1tcXFxcL10vKS5wb3AoKVxuICApO1xufVxuXG5jb25zdCBnZXRTdHJpbmdGcm9tTWF5YmVCdWZmZXIgPSAoeDogc3RyaW5nIHwgQnVmZmVyIHwgdW5rbm93bik6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gIGlmICh0eXBlb2YgeCA9PT0gJ3N0cmluZycpIHJldHVybiB4O1xuICBpZiAodHlwZW9mIEJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgeCBpbnN0YW5jZW9mIEJ1ZmZlcikgcmV0dXJuIFN0cmluZyh4KTtcbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbmNvbnN0IGlzQXN5bmNJdGVyYWJsZUl0ZXJhdG9yID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBBc3luY0l0ZXJhYmxlSXRlcmF0b3I8dW5rbm93bj4gPT5cbiAgdmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHR5cGVvZiB2YWx1ZVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPT09ICdmdW5jdGlvbic7XG5cbmV4cG9ydCBjbGFzcyBNdWx0aXBhcnRCb2R5IHtcbiAgY29uc3RydWN0b3IocHVibGljIGJvZHk6IFJlYWRhYmxlIHwgQm9keUluaXQpIHt9XG4gIGdldCBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnTXVsdGlwYXJ0Qm9keSc7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGlzTXVsdGlwYXJ0Qm9keSA9IChib2R5OiBhbnkpOiBib2R5IGlzIE11bHRpcGFydEJvZHkgPT5cbiAgYm9keSAmJiB0eXBlb2YgYm9keSA9PT0gJ29iamVjdCcgJiYgYm9keS5ib2R5ICYmIGJvZHlbU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gJ011bHRpcGFydEJvZHknO1xuXG4vKipcbiAqIFJldHVybnMgYSBtdWx0aXBhcnQvZm9ybS1kYXRhIHJlcXVlc3QgaWYgYW55IHBhcnQgb2YgdGhlIGdpdmVuIHJlcXVlc3QgYm9keSBjb250YWlucyBhIEZpbGUgLyBCbG9iIHZhbHVlLlxuICogT3RoZXJ3aXNlIHJldHVybnMgdGhlIHJlcXVlc3QgYXMgaXMuXG4gKi9cbmV4cG9ydCBjb25zdCBtYXliZU11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyA9IGFzeW5jIDxUIGV4dGVuZHMge30gPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oXG4gIG9wdHM6IFJlcXVlc3RPcHRpb25zPFQ+LFxuKTogUHJvbWlzZTxSZXF1ZXN0T3B0aW9uczxUIHwgTXVsdGlwYXJ0Qm9keT4+ID0+IHtcbiAgaWYgKCFoYXNVcGxvYWRhYmxlVmFsdWUob3B0cy5ib2R5KSkgcmV0dXJuIG9wdHM7XG5cbiAgY29uc3QgZm9ybSA9IGF3YWl0IGNyZWF0ZUZvcm0ob3B0cy5ib2R5KTtcbiAgcmV0dXJuIGdldE11bHRpcGFydFJlcXVlc3RPcHRpb25zKGZvcm0sIG9wdHMpO1xufTtcblxuZXhwb3J0IGNvbnN0IG11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyA9IGFzeW5jIDxUIGV4dGVuZHMge30gPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oXG4gIG9wdHM6IFJlcXVlc3RPcHRpb25zPFQ+LFxuKTogUHJvbWlzZTxSZXF1ZXN0T3B0aW9uczxUIHwgTXVsdGlwYXJ0Qm9keT4+ID0+IHtcbiAgY29uc3QgZm9ybSA9IGF3YWl0IGNyZWF0ZUZvcm0ob3B0cy5ib2R5KTtcbiAgcmV0dXJuIGdldE11bHRpcGFydFJlcXVlc3RPcHRpb25zKGZvcm0sIG9wdHMpO1xufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUZvcm0gPSBhc3luYyA8VCA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+Pihib2R5OiBUIHwgdW5kZWZpbmVkKTogUHJvbWlzZTxGb3JtRGF0YT4gPT4ge1xuICBjb25zdCBmb3JtID0gbmV3IEZvcm1EYXRhKCk7XG4gIGF3YWl0IFByb21pc2UuYWxsKE9iamVjdC5lbnRyaWVzKGJvZHkgfHwge30pLm1hcCgoW2tleSwgdmFsdWVdKSA9PiBhZGRGb3JtVmFsdWUoZm9ybSwga2V5LCB2YWx1ZSkpKTtcbiAgcmV0dXJuIGZvcm07XG59O1xuXG5jb25zdCBoYXNVcGxvYWRhYmxlVmFsdWUgPSAodmFsdWU6IHVua25vd24pOiBib29sZWFuID0+IHtcbiAgaWYgKGlzVXBsb2FkYWJsZSh2YWx1ZSkpIHJldHVybiB0cnVlO1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHJldHVybiB2YWx1ZS5zb21lKGhhc1VwbG9hZGFibGVWYWx1ZSk7XG4gIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgZm9yIChjb25zdCBrIGluIHZhbHVlKSB7XG4gICAgICBpZiAoaGFzVXBsb2FkYWJsZVZhbHVlKCh2YWx1ZSBhcyBhbnkpW2tdKSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmNvbnN0IGFkZEZvcm1WYWx1ZSA9IGFzeW5jIChmb3JtOiBGb3JtRGF0YSwga2V5OiBzdHJpbmcsIHZhbHVlOiB1bmtub3duKTogUHJvbWlzZTx2b2lkPiA9PiB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgIGBSZWNlaXZlZCBudWxsIGZvciBcIiR7a2V5fVwiOyB0byBwYXNzIG51bGwgaW4gRm9ybURhdGEsIHlvdSBtdXN0IHVzZSB0aGUgc3RyaW5nICdudWxsJ2AsXG4gICAgKTtcbiAgfVxuXG4gIC8vIFRPRE86IG1ha2UgbmVzdGVkIGZvcm1hdHMgY29uZmlndXJhYmxlXG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcbiAgICBmb3JtLmFwcGVuZChrZXksIFN0cmluZyh2YWx1ZSkpO1xuICB9IGVsc2UgaWYgKGlzVXBsb2FkYWJsZSh2YWx1ZSkpIHtcbiAgICBjb25zdCBmaWxlID0gYXdhaXQgdG9GaWxlKHZhbHVlKTtcbiAgICBmb3JtLmFwcGVuZChrZXksIGZpbGUgYXMgRmlsZSk7XG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBhd2FpdCBQcm9taXNlLmFsbCh2YWx1ZS5tYXAoKGVudHJ5KSA9PiBhZGRGb3JtVmFsdWUoZm9ybSwga2V5ICsgJ1tdJywgZW50cnkpKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgIGF3YWl0IFByb21pc2UuYWxsKFxuICAgICAgT2JqZWN0LmVudHJpZXModmFsdWUpLm1hcCgoW25hbWUsIHByb3BdKSA9PiBhZGRGb3JtVmFsdWUoZm9ybSwgYCR7a2V5fVske25hbWV9XWAsIHByb3ApKSxcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICBgSW52YWxpZCB2YWx1ZSBnaXZlbiB0byBmb3JtLCBleHBlY3RlZCBhIHN0cmluZywgbnVtYmVyLCBib29sZWFuLCBvYmplY3QsIEFycmF5LCBGaWxlIG9yIEJsb2IgYnV0IGdvdCAke3ZhbHVlfSBpbnN0ZWFkYCxcbiAgICApO1xuICB9XG59O1xuIiwgImltcG9ydCB7IFZFUlNJT04gfSBmcm9tICcuL3ZlcnNpb24uanMnO1xuaW1wb3J0IHsgU3RyZWFtIH0gZnJvbSAnLi9zdHJlYW1pbmcuanMnO1xuaW1wb3J0IHsgQVBJRXJyb3IsIEFQSUNvbm5lY3Rpb25FcnJvciwgQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvciwgQVBJVXNlckFib3J0RXJyb3IgfSBmcm9tICcuL2Vycm9yLmpzJztcbmltcG9ydCB0eXBlIHsgUmVhZGFibGUgfSBmcm9tICcuL19zaGltcy9ub2RlLXJlYWRhYmxlLmpzJztcbmltcG9ydCB7IGdldERlZmF1bHRBZ2VudCwgdHlwZSBBZ2VudCB9IGZyb20gJy4vX3NoaW1zL2FnZW50LmpzJztcbmltcG9ydCB7XG4gIGZldGNoLFxuICBpc1BvbHlmaWxsZWQgYXMgZmV0Y2hJc1BvbHlmaWxsZWQsXG4gIHR5cGUgUmVxdWVzdEluZm8sXG4gIHR5cGUgUmVxdWVzdEluaXQsXG4gIHR5cGUgUmVzcG9uc2UsXG4gIHR5cGUgSGVhZGVyc0luaXQsXG59IGZyb20gJy4vX3NoaW1zL2ZldGNoLmpzJztcbmV4cG9ydCB7IHR5cGUgUmVzcG9uc2UgfTtcbmltcG9ydCB7IGlzTXVsdGlwYXJ0Qm9keSB9IGZyb20gJy4vdXBsb2Fkcy5qcyc7XG5leHBvcnQge1xuICBtYXliZU11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyxcbiAgbXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zLFxuICBjcmVhdGVGb3JtLFxuICB0eXBlIFVwbG9hZGFibGUsXG59IGZyb20gJy4vdXBsb2Fkcy5qcyc7XG5cbmNvbnN0IE1BWF9SRVRSSUVTID0gMjtcblxuZXhwb3J0IHR5cGUgRmV0Y2ggPSAodXJsOiBSZXF1ZXN0SW5mbywgaW5pdD86IFJlcXVlc3RJbml0KSA9PiBQcm9taXNlPFJlc3BvbnNlPjtcblxudHlwZSBQcm9taXNlT3JWYWx1ZTxUPiA9IFQgfCBQcm9taXNlPFQ+O1xuXG50eXBlIEFQSVJlc3BvbnNlUHJvcHMgPSB7XG4gIHJlc3BvbnNlOiBSZXNwb25zZTtcbiAgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucztcbiAgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyO1xufTtcblxuYXN5bmMgZnVuY3Rpb24gZGVmYXVsdFBhcnNlUmVzcG9uc2U8VD4ocHJvcHM6IEFQSVJlc3BvbnNlUHJvcHMpOiBQcm9taXNlPFQ+IHtcbiAgY29uc3QgeyByZXNwb25zZSB9ID0gcHJvcHM7XG4gIGlmIChwcm9wcy5vcHRpb25zLnN0cmVhbSkge1xuICAgIC8vIE5vdGU6IHRoZXJlIGlzIGFuIGludmFyaWFudCBoZXJlIHRoYXQgaXNuJ3QgcmVwcmVzZW50ZWQgaW4gdGhlIHR5cGUgc3lzdGVtXG4gICAgLy8gdGhhdCBpZiB5b3Ugc2V0IGBzdHJlYW06IHRydWVgIHRoZSByZXNwb25zZSB0eXBlIG11c3QgYWxzbyBiZSBgU3RyZWFtPFQ+YFxuICAgIHJldHVybiBuZXcgU3RyZWFtKHJlc3BvbnNlLCBwcm9wcy5jb250cm9sbGVyKSBhcyBhbnk7XG4gIH1cblxuICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKTtcbiAgaWYgKGNvbnRlbnRUeXBlPy5pbmNsdWRlcygnYXBwbGljYXRpb24vanNvbicpKSB7XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgIGRlYnVnKCdyZXNwb25zZScsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2UudXJsLCByZXNwb25zZS5oZWFkZXJzLCBqc29uKTtcblxuICAgIHJldHVybiBqc29uIGFzIFQ7XG4gIH1cblxuICAvLyBUT0RPIGhhbmRsZSBibG9iLCBhcnJheWJ1ZmZlciwgb3RoZXIgY29udGVudCB0eXBlcywgZXRjLlxuICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICBkZWJ1ZygncmVzcG9uc2UnLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnVybCwgcmVzcG9uc2UuaGVhZGVycywgdGV4dCk7XG4gIHJldHVybiB0ZXh0IGFzIGFueSBhcyBUO1xufVxuXG4vKipcbiAqIEEgc3ViY2xhc3Mgb2YgYFByb21pc2VgIHByb3ZpZGluZyBhZGRpdGlvbmFsIGhlbHBlciBtZXRob2RzXG4gKiBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgU0RLLlxuICovXG5leHBvcnQgY2xhc3MgQVBJUHJvbWlzZTxUPiBleHRlbmRzIFByb21pc2U8VD4ge1xuICBwcml2YXRlIHBhcnNlZFByb21pc2U6IFByb21pc2U8VD4gfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSByZXNwb25zZVByb21pc2U6IFByb21pc2U8QVBJUmVzcG9uc2VQcm9wcz4sXG4gICAgcHJpdmF0ZSBwYXJzZVJlc3BvbnNlOiAocHJvcHM6IEFQSVJlc3BvbnNlUHJvcHMpID0+IFByb21pc2VPclZhbHVlPFQ+ID0gZGVmYXVsdFBhcnNlUmVzcG9uc2UsXG4gICkge1xuICAgIHN1cGVyKChyZXNvbHZlKSA9PiB7XG4gICAgICAvLyB0aGlzIGlzIG1heWJlIGEgYml0IHdlaXJkIGJ1dCB0aGlzIGhhcyB0byBiZSBhIG5vLW9wIHRvIG5vdCBpbXBsaWNpdGx5XG4gICAgICAvLyBwYXJzZSB0aGUgcmVzcG9uc2UgYm9keTsgaW5zdGVhZCAudGhlbiwgLmNhdGNoLCAuZmluYWxseSBhcmUgb3ZlcnJpZGRlblxuICAgICAgLy8gdG8gcGFyc2UgdGhlIHJlc3BvbnNlXG4gICAgICByZXNvbHZlKG51bGwgYXMgYW55KTtcbiAgICB9KTtcbiAgfVxuXG4gIF90aGVuVW53cmFwPFU+KHRyYW5zZm9ybTogKGRhdGE6IFQpID0+IFUpOiBBUElQcm9taXNlPFU+IHtcbiAgICByZXR1cm4gbmV3IEFQSVByb21pc2UodGhpcy5yZXNwb25zZVByb21pc2UsIGFzeW5jIChwcm9wcykgPT4gdHJhbnNmb3JtKGF3YWl0IHRoaXMucGFyc2VSZXNwb25zZShwcm9wcykpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSByYXcgYFJlc3BvbnNlYCBpbnN0YW5jZSBpbnN0ZWFkIG9mIHBhcnNpbmcgdGhlIHJlc3BvbnNlXG4gICAqIGRhdGEuXG4gICAqXG4gICAqIElmIHlvdSB3YW50IHRvIHBhcnNlIHRoZSByZXNwb25zZSBib2R5IGJ1dCBzdGlsbCBnZXQgdGhlIGBSZXNwb25zZWBcbiAgICogaW5zdGFuY2UsIHlvdSBjYW4gdXNlIHtAbGluayB3aXRoUmVzcG9uc2UoKX0uXG4gICAqL1xuICBhc1Jlc3BvbnNlKCk6IFByb21pc2U8UmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5yZXNwb25zZVByb21pc2UudGhlbigocCkgPT4gcC5yZXNwb25zZSk7XG4gIH1cbiAgLyoqXG4gICAqIEdldHMgdGhlIHBhcnNlZCByZXNwb25zZSBkYXRhIGFuZCB0aGUgcmF3IGBSZXNwb25zZWAgaW5zdGFuY2UuXG4gICAqXG4gICAqIElmIHlvdSBqdXN0IHdhbnQgdG8gZ2V0IHRoZSByYXcgYFJlc3BvbnNlYCBpbnN0YW5jZSB3aXRob3V0IHBhcnNpbmcgaXQsXG4gICAqIHlvdSBjYW4gdXNlIHtAbGluayBhc1Jlc3BvbnNlKCl9LlxuICAgKi9cbiAgYXN5bmMgd2l0aFJlc3BvbnNlKCk6IFByb21pc2U8eyBkYXRhOiBUOyByZXNwb25zZTogUmVzcG9uc2UgfT4ge1xuICAgIGNvbnN0IFtkYXRhLCByZXNwb25zZV0gPSBhd2FpdCBQcm9taXNlLmFsbChbdGhpcy5wYXJzZSgpLCB0aGlzLmFzUmVzcG9uc2UoKV0pO1xuICAgIHJldHVybiB7IGRhdGEsIHJlc3BvbnNlIH07XG4gIH1cblxuICBwcml2YXRlIHBhcnNlKCk6IFByb21pc2U8VD4ge1xuICAgIGlmICghdGhpcy5wYXJzZWRQcm9taXNlKSB7XG4gICAgICB0aGlzLnBhcnNlZFByb21pc2UgPSB0aGlzLnJlc3BvbnNlUHJvbWlzZS50aGVuKHRoaXMucGFyc2VSZXNwb25zZSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnBhcnNlZFByb21pc2U7XG4gIH1cblxuICBvdmVycmlkZSB0aGVuPFRSZXN1bHQxID0gVCwgVFJlc3VsdDIgPSBuZXZlcj4oXG4gICAgb25mdWxmaWxsZWQ/OiAoKHZhbHVlOiBUKSA9PiBUUmVzdWx0MSB8IFByb21pc2VMaWtlPFRSZXN1bHQxPikgfCB1bmRlZmluZWQgfCBudWxsLFxuICAgIG9ucmVqZWN0ZWQ/OiAoKHJlYXNvbjogYW55KSA9PiBUUmVzdWx0MiB8IFByb21pc2VMaWtlPFRSZXN1bHQyPikgfCB1bmRlZmluZWQgfCBudWxsLFxuICApOiBQcm9taXNlPFRSZXN1bHQxIHwgVFJlc3VsdDI+IHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZSgpLnRoZW4ob25mdWxmaWxsZWQsIG9ucmVqZWN0ZWQpO1xuICB9XG5cbiAgb3ZlcnJpZGUgY2F0Y2g8VFJlc3VsdCA9IG5ldmVyPihcbiAgICBvbnJlamVjdGVkPzogKChyZWFzb246IGFueSkgPT4gVFJlc3VsdCB8IFByb21pc2VMaWtlPFRSZXN1bHQ+KSB8IHVuZGVmaW5lZCB8IG51bGwsXG4gICk6IFByb21pc2U8VCB8IFRSZXN1bHQ+IHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZSgpLmNhdGNoKG9ucmVqZWN0ZWQpO1xuICB9XG5cbiAgb3ZlcnJpZGUgZmluYWxseShvbmZpbmFsbHk/OiAoKCkgPT4gdm9pZCkgfCB1bmRlZmluZWQgfCBudWxsKTogUHJvbWlzZTxUPiB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2UoKS5maW5hbGx5KG9uZmluYWxseSk7XG4gIH1cbn1cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFQSUNsaWVudCB7XG4gIGJhc2VVUkw6IHN0cmluZztcbiAgbWF4UmV0cmllczogbnVtYmVyO1xuICB0aW1lb3V0OiBudW1iZXI7XG4gIGh0dHBBZ2VudDogQWdlbnQgfCB1bmRlZmluZWQ7XG5cbiAgcHJpdmF0ZSBmZXRjaDogRmV0Y2g7XG4gIHByb3RlY3RlZCBpZGVtcG90ZW5jeUhlYWRlcj86IHN0cmluZztcblxuICBjb25zdHJ1Y3Rvcih7XG4gICAgYmFzZVVSTCxcbiAgICBtYXhSZXRyaWVzLFxuICAgIHRpbWVvdXQgPSA2MDAwMDAsIC8vIDEwIG1pbnV0ZXNcbiAgICBodHRwQWdlbnQsXG4gICAgZmV0Y2g6IG92ZXJyaWRlbkZldGNoLFxuICB9OiB7XG4gICAgYmFzZVVSTDogc3RyaW5nO1xuICAgIG1heFJldHJpZXM/OiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gICAgdGltZW91dDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgIGh0dHBBZ2VudDogQWdlbnQgfCB1bmRlZmluZWQ7XG4gICAgZmV0Y2g6IEZldGNoIHwgdW5kZWZpbmVkO1xuICB9KSB7XG4gICAgdGhpcy5iYXNlVVJMID0gYmFzZVVSTDtcbiAgICB0aGlzLm1heFJldHJpZXMgPSB2YWxpZGF0ZVBvc2l0aXZlSW50ZWdlcignbWF4UmV0cmllcycsIG1heFJldHJpZXMgPz8gTUFYX1JFVFJJRVMpO1xuICAgIHRoaXMudGltZW91dCA9IHZhbGlkYXRlUG9zaXRpdmVJbnRlZ2VyKCd0aW1lb3V0JywgdGltZW91dCk7XG4gICAgdGhpcy5odHRwQWdlbnQgPSBodHRwQWdlbnQ7XG5cbiAgICB0aGlzLmZldGNoID0gb3ZlcnJpZGVuRmV0Y2ggPz8gZmV0Y2g7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXV0aEhlYWRlcnMob3B0czogRmluYWxSZXF1ZXN0T3B0aW9ucyk6IEhlYWRlcnMge1xuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGlzIHRvIGFkZCB5b3VyIG93biBkZWZhdWx0IGhlYWRlcnMsIGZvciBleGFtcGxlOlxuICAgKlxuICAgKiAge1xuICAgKiAgICAuLi5zdXBlci5kZWZhdWx0SGVhZGVycygpLFxuICAgKiAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyIDEyMycsXG4gICAqICB9XG4gICAqL1xuICBwcm90ZWN0ZWQgZGVmYXVsdEhlYWRlcnMob3B0czogRmluYWxSZXF1ZXN0T3B0aW9ucyk6IEhlYWRlcnMge1xuICAgIHJldHVybiB7XG4gICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnVXNlci1BZ2VudCc6IHRoaXMuZ2V0VXNlckFnZW50KCksXG4gICAgICAuLi5nZXRQbGF0Zm9ybUhlYWRlcnMoKSxcbiAgICAgIC4uLnRoaXMuYXV0aEhlYWRlcnMob3B0cyksXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBkZWZhdWx0UXVlcnkoKTogRGVmYXVsdFF1ZXJ5IHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGlzIHRvIGFkZCB5b3VyIG93biBoZWFkZXJzIHZhbGlkYXRpb246XG4gICAqL1xuICBwcm90ZWN0ZWQgdmFsaWRhdGVIZWFkZXJzKGhlYWRlcnM6IEhlYWRlcnMsIGN1c3RvbUhlYWRlcnM6IEhlYWRlcnMpIHt9XG5cbiAgcHJvdGVjdGVkIGRlZmF1bHRJZGVtcG90ZW5jeUtleSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgc3RhaW5sZXNzLW5vZGUtcmV0cnktJHt1dWlkNCgpfWA7XG4gIH1cblxuICBnZXQ8UmVxIGV4dGVuZHMge30sIFJzcD4ocGF0aDogc3RyaW5nLCBvcHRzPzogUHJvbWlzZU9yVmFsdWU8UmVxdWVzdE9wdGlvbnM8UmVxPj4pOiBBUElQcm9taXNlPFJzcD4ge1xuICAgIHJldHVybiB0aGlzLm1ldGhvZFJlcXVlc3QoJ2dldCcsIHBhdGgsIG9wdHMpO1xuICB9XG5cbiAgcG9zdDxSZXEgZXh0ZW5kcyB7fSwgUnNwPihwYXRoOiBzdHJpbmcsIG9wdHM/OiBQcm9taXNlT3JWYWx1ZTxSZXF1ZXN0T3B0aW9uczxSZXE+Pik6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMubWV0aG9kUmVxdWVzdCgncG9zdCcsIHBhdGgsIG9wdHMpO1xuICB9XG5cbiAgcGF0Y2g8UmVxIGV4dGVuZHMge30sIFJzcD4ocGF0aDogc3RyaW5nLCBvcHRzPzogUHJvbWlzZU9yVmFsdWU8UmVxdWVzdE9wdGlvbnM8UmVxPj4pOiBBUElQcm9taXNlPFJzcD4ge1xuICAgIHJldHVybiB0aGlzLm1ldGhvZFJlcXVlc3QoJ3BhdGNoJywgcGF0aCwgb3B0cyk7XG4gIH1cblxuICBwdXQ8UmVxIGV4dGVuZHMge30sIFJzcD4ocGF0aDogc3RyaW5nLCBvcHRzPzogUHJvbWlzZU9yVmFsdWU8UmVxdWVzdE9wdGlvbnM8UmVxPj4pOiBBUElQcm9taXNlPFJzcD4ge1xuICAgIHJldHVybiB0aGlzLm1ldGhvZFJlcXVlc3QoJ3B1dCcsIHBhdGgsIG9wdHMpO1xuICB9XG5cbiAgZGVsZXRlPFJlcSBleHRlbmRzIHt9LCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdkZWxldGUnLCBwYXRoLCBvcHRzKTtcbiAgfVxuXG4gIHByaXZhdGUgbWV0aG9kUmVxdWVzdDxSZXEgZXh0ZW5kcyB7fSwgUnNwPihcbiAgICBtZXRob2Q6IEhUVFBNZXRob2QsXG4gICAgcGF0aDogc3RyaW5nLFxuICAgIG9wdHM/OiBQcm9taXNlT3JWYWx1ZTxSZXF1ZXN0T3B0aW9uczxSZXE+PixcbiAgKTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KFByb21pc2UucmVzb2x2ZShvcHRzKS50aGVuKChvcHRzKSA9PiAoeyBtZXRob2QsIHBhdGgsIC4uLm9wdHMgfSkpKTtcbiAgfVxuXG4gIGdldEFQSUxpc3Q8SXRlbSwgUGFnZUNsYXNzIGV4dGVuZHMgQWJzdHJhY3RQYWdlPEl0ZW0+ID0gQWJzdHJhY3RQYWdlPEl0ZW0+PihcbiAgICBwYXRoOiBzdHJpbmcsXG4gICAgUGFnZTogbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gUGFnZUNsYXNzLFxuICAgIG9wdHM/OiBSZXF1ZXN0T3B0aW9uczxhbnk+LFxuICApOiBQYWdlUHJvbWlzZTxQYWdlQ2xhc3MsIEl0ZW0+IHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0QVBJTGlzdChQYWdlLCB7IG1ldGhvZDogJ2dldCcsIHBhdGgsIC4uLm9wdHMgfSk7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZUNvbnRlbnRMZW5ndGgoYm9keTogdW5rbm93bik6IHN0cmluZyB8IG51bGwge1xuICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmICh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gQnVmZmVyLmJ5dGVMZW5ndGgoYm9keSwgJ3V0ZjgnKS50b1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIFRleHRFbmNvZGVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gICAgICAgIGNvbnN0IGVuY29kZWQgPSBlbmNvZGVyLmVuY29kZShib2R5KTtcbiAgICAgICAgcmV0dXJuIGVuY29kZWQubGVuZ3RoLnRvU3RyaW5nKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBidWlsZFJlcXVlc3Q8UmVxIGV4dGVuZHMge30+KFxuICAgIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnM8UmVxPixcbiAgKTogeyByZXE6IFJlcXVlc3RJbml0OyB1cmw6IHN0cmluZzsgdGltZW91dDogbnVtYmVyIH0ge1xuICAgIGNvbnN0IHsgbWV0aG9kLCBwYXRoLCBxdWVyeSwgaGVhZGVyczogaGVhZGVycyA9IHt9IH0gPSBvcHRpb25zO1xuXG4gICAgY29uc3QgYm9keSA9XG4gICAgICBpc011bHRpcGFydEJvZHkob3B0aW9ucy5ib2R5KSA/IG9wdGlvbnMuYm9keS5ib2R5XG4gICAgICA6IG9wdGlvbnMuYm9keSA/IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuYm9keSwgbnVsbCwgMilcbiAgICAgIDogbnVsbDtcbiAgICBjb25zdCBjb250ZW50TGVuZ3RoID0gdGhpcy5jYWxjdWxhdGVDb250ZW50TGVuZ3RoKGJvZHkpO1xuXG4gICAgY29uc3QgdXJsID0gdGhpcy5idWlsZFVSTChwYXRoISwgcXVlcnkpO1xuICAgIGlmICgndGltZW91dCcgaW4gb3B0aW9ucykgdmFsaWRhdGVQb3NpdGl2ZUludGVnZXIoJ3RpbWVvdXQnLCBvcHRpb25zLnRpbWVvdXQpO1xuICAgIGNvbnN0IHRpbWVvdXQgPSBvcHRpb25zLnRpbWVvdXQgPz8gdGhpcy50aW1lb3V0O1xuICAgIGNvbnN0IGh0dHBBZ2VudCA9IG9wdGlvbnMuaHR0cEFnZW50ID8/IHRoaXMuaHR0cEFnZW50ID8/IGdldERlZmF1bHRBZ2VudCh1cmwpO1xuICAgIGNvbnN0IG1pbkFnZW50VGltZW91dCA9IHRpbWVvdXQgKyAxMDAwO1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiAoaHR0cEFnZW50IGFzIGFueSk/Lm9wdGlvbnM/LnRpbWVvdXQgPT09ICdudW1iZXInICYmXG4gICAgICBtaW5BZ2VudFRpbWVvdXQgPiAoKGh0dHBBZ2VudCBhcyBhbnkpLm9wdGlvbnMudGltZW91dCA/PyAwKVxuICAgICkge1xuICAgICAgLy8gQWxsb3cgYW55IGdpdmVuIHJlcXVlc3QgdG8gYnVtcCBvdXIgYWdlbnQgYWN0aXZlIHNvY2tldCB0aW1lb3V0LlxuICAgICAgLy8gVGhpcyBtYXkgc2VlbSBzdHJhbmdlLCBidXQgbGVha2luZyBhY3RpdmUgc29ja2V0cyBzaG91bGQgYmUgcmFyZSBhbmQgbm90IHBhcnRpY3VsYXJseSBwcm9ibGVtYXRpYyxcbiAgICAgIC8vIGFuZCB3aXRob3V0IG11dGF0aW5nIGFnZW50IHdlIHdvdWxkIG5lZWQgdG8gY3JlYXRlIG1vcmUgb2YgdGhlbS5cbiAgICAgIC8vIFRoaXMgdHJhZGVvZmYgb3B0aW1pemVzIGZvciBwZXJmb3JtYW5jZS5cbiAgICAgIChodHRwQWdlbnQgYXMgYW55KS5vcHRpb25zLnRpbWVvdXQgPSBtaW5BZ2VudFRpbWVvdXQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaWRlbXBvdGVuY3lIZWFkZXIgJiYgbWV0aG9kICE9PSAnZ2V0Jykge1xuICAgICAgaWYgKCFvcHRpb25zLmlkZW1wb3RlbmN5S2V5KSBvcHRpb25zLmlkZW1wb3RlbmN5S2V5ID0gdGhpcy5kZWZhdWx0SWRlbXBvdGVuY3lLZXkoKTtcbiAgICAgIGhlYWRlcnNbdGhpcy5pZGVtcG90ZW5jeUhlYWRlcl0gPSBvcHRpb25zLmlkZW1wb3RlbmN5S2V5O1xuICAgIH1cblxuICAgIGNvbnN0IHJlcUhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAuLi4oY29udGVudExlbmd0aCAmJiB7ICdDb250ZW50LUxlbmd0aCc6IGNvbnRlbnRMZW5ndGggfSksXG4gICAgICAuLi50aGlzLmRlZmF1bHRIZWFkZXJzKG9wdGlvbnMpLFxuICAgICAgLi4uaGVhZGVycyxcbiAgICB9O1xuICAgIC8vIGxldCBidWlsdGluIGZldGNoIHNldCB0aGUgQ29udGVudC1UeXBlIGZvciBtdWx0aXBhcnQgYm9kaWVzXG4gICAgaWYgKGlzTXVsdGlwYXJ0Qm9keShvcHRpb25zLmJvZHkpICYmICFmZXRjaElzUG9seWZpbGxlZCkge1xuICAgICAgZGVsZXRlIHJlcUhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddO1xuICAgIH1cblxuICAgIC8vIFN0cmlwIGFueSBoZWFkZXJzIGJlaW5nIGV4cGxpY2l0bHkgb21pdHRlZCB3aXRoIG51bGxcbiAgICBPYmplY3Qua2V5cyhyZXFIZWFkZXJzKS5mb3JFYWNoKChrZXkpID0+IHJlcUhlYWRlcnNba2V5XSA9PT0gbnVsbCAmJiBkZWxldGUgcmVxSGVhZGVyc1trZXldKTtcblxuICAgIGNvbnN0IHJlcTogUmVxdWVzdEluaXQgPSB7XG4gICAgICBtZXRob2QsXG4gICAgICAuLi4oYm9keSAmJiB7IGJvZHk6IGJvZHkgYXMgYW55IH0pLFxuICAgICAgaGVhZGVyczogcmVxSGVhZGVycyxcbiAgICAgIC4uLihodHRwQWdlbnQgJiYgeyBhZ2VudDogaHR0cEFnZW50IH0pLFxuICAgICAgLy8gQHRzLWlnbm9yZSBub2RlLWZldGNoIHVzZXMgYSBjdXN0b20gQWJvcnRTaWduYWwgdHlwZSB0aGF0IGlzXG4gICAgICAvLyBub3QgY29tcGF0aWJsZSB3aXRoIHN0YW5kYXJkIHdlYiB0eXBlc1xuICAgICAgc2lnbmFsOiBvcHRpb25zLnNpZ25hbCA/PyBudWxsLFxuICAgIH07XG5cbiAgICB0aGlzLnZhbGlkYXRlSGVhZGVycyhyZXFIZWFkZXJzLCBoZWFkZXJzKTtcblxuICAgIHJldHVybiB7IHJlcSwgdXJsLCB0aW1lb3V0IH07XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBhcyBhIGNhbGxiYWNrIGZvciBtdXRhdGluZyB0aGUgZ2l2ZW4gYFJlcXVlc3RJbml0YCBvYmplY3QuXG4gICAqXG4gICAqIFRoaXMgaXMgdXNlZnVsIGZvciBjYXNlcyB3aGVyZSB5b3Ugd2FudCB0byBhZGQgY2VydGFpbiBoZWFkZXJzIGJhc2VkIG9mZiBvZlxuICAgKiB0aGUgcmVxdWVzdCBwcm9wZXJ0aWVzLCBlLmcuIGBtZXRob2RgIG9yIGB1cmxgLlxuICAgKi9cbiAgcHJvdGVjdGVkIGFzeW5jIHByZXBhcmVSZXF1ZXN0KFxuICAgIHJlcXVlc3Q6IFJlcXVlc3RJbml0LFxuICAgIHsgdXJsLCBvcHRpb25zIH06IHsgdXJsOiBzdHJpbmc7IG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnMgfSxcbiAgKTogUHJvbWlzZTx2b2lkPiB7fVxuXG4gIHByb3RlY3RlZCBwYXJzZUhlYWRlcnMoaGVhZGVyczogSGVhZGVyc0luaXQgfCBudWxsIHwgdW5kZWZpbmVkKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gICAgcmV0dXJuIChcbiAgICAgICFoZWFkZXJzID8ge31cbiAgICAgIDogU3ltYm9sLml0ZXJhdG9yIGluIGhlYWRlcnMgP1xuICAgICAgICBPYmplY3QuZnJvbUVudHJpZXMoQXJyYXkuZnJvbShoZWFkZXJzIGFzIEl0ZXJhYmxlPHN0cmluZ1tdPikubWFwKChoZWFkZXIpID0+IFsuLi5oZWFkZXJdKSlcbiAgICAgIDogeyAuLi5oZWFkZXJzIH1cbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIG1ha2VTdGF0dXNFcnJvcihcbiAgICBzdGF0dXM6IG51bWJlciB8IHVuZGVmaW5lZCxcbiAgICBlcnJvcjogT2JqZWN0IHwgdW5kZWZpbmVkLFxuICAgIG1lc3NhZ2U6IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICBoZWFkZXJzOiBIZWFkZXJzIHwgdW5kZWZpbmVkLFxuICApIHtcbiAgICByZXR1cm4gQVBJRXJyb3IuZ2VuZXJhdGUoc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gIH1cblxuICByZXF1ZXN0PFJlcSBleHRlbmRzIHt9LCBSc3A+KFxuICAgIG9wdGlvbnM6IFByb21pc2VPclZhbHVlPEZpbmFsUmVxdWVzdE9wdGlvbnM8UmVxPj4sXG4gICAgcmVtYWluaW5nUmV0cmllczogbnVtYmVyIHwgbnVsbCA9IG51bGwsXG4gICk6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIG5ldyBBUElQcm9taXNlKHRoaXMubWFrZVJlcXVlc3Qob3B0aW9ucywgcmVtYWluaW5nUmV0cmllcykpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBtYWtlUmVxdWVzdChcbiAgICBvcHRpb25zSW5wdXQ6IFByb21pc2VPclZhbHVlPEZpbmFsUmVxdWVzdE9wdGlvbnM+LFxuICAgIHJldHJpZXNSZW1haW5pbmc6IG51bWJlciB8IG51bGwsXG4gICk6IFByb21pc2U8QVBJUmVzcG9uc2VQcm9wcz4ge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCBvcHRpb25zSW5wdXQ7XG4gICAgaWYgKHJldHJpZXNSZW1haW5pbmcgPT0gbnVsbCkge1xuICAgICAgcmV0cmllc1JlbWFpbmluZyA9IG9wdGlvbnMubWF4UmV0cmllcyA/PyB0aGlzLm1heFJldHJpZXM7XG4gICAgfVxuXG4gICAgY29uc3QgeyByZXEsIHVybCwgdGltZW91dCB9ID0gdGhpcy5idWlsZFJlcXVlc3Qob3B0aW9ucyk7XG5cbiAgICBhd2FpdCB0aGlzLnByZXBhcmVSZXF1ZXN0KHJlcSwgeyB1cmwsIG9wdGlvbnMgfSk7XG5cbiAgICBkZWJ1ZygncmVxdWVzdCcsIHVybCwgb3B0aW9ucywgcmVxLmhlYWRlcnMpO1xuXG4gICAgaWYgKG9wdGlvbnMuc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJVXNlckFib3J0RXJyb3IoKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5mZXRjaFdpdGhUaW1lb3V0KHVybCwgcmVxLCB0aW1lb3V0LCBjb250cm9sbGVyKS5jYXRjaChjYXN0VG9FcnJvcik7XG5cbiAgICBpZiAocmVzcG9uc2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgaWYgKG9wdGlvbnMuc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBBUElVc2VyQWJvcnRFcnJvcigpO1xuICAgICAgfVxuICAgICAgaWYgKHJldHJpZXNSZW1haW5pbmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmV0cnlSZXF1ZXN0KG9wdGlvbnMsIHJldHJpZXNSZW1haW5pbmcpO1xuICAgICAgfVxuICAgICAgaWYgKHJlc3BvbnNlLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgICB0aHJvdyBuZXcgQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvcigpO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEFQSUNvbm5lY3Rpb25FcnJvcih7IGNhdXNlOiByZXNwb25zZSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCByZXNwb25zZUhlYWRlcnMgPSBjcmVhdGVSZXNwb25zZUhlYWRlcnMocmVzcG9uc2UuaGVhZGVycyk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBpZiAocmV0cmllc1JlbWFpbmluZyAmJiB0aGlzLnNob3VsZFJldHJ5KHJlc3BvbnNlKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXRyeVJlcXVlc3Qob3B0aW9ucywgcmV0cmllc1JlbWFpbmluZywgcmVzcG9uc2VIZWFkZXJzKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZXJyVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKS5jYXRjaCgoKSA9PiAnVW5rbm93bicpO1xuICAgICAgY29uc3QgZXJySlNPTiA9IHNhZmVKU09OKGVyclRleHQpO1xuICAgICAgY29uc3QgZXJyTWVzc2FnZSA9IGVyckpTT04gPyB1bmRlZmluZWQgOiBlcnJUZXh0O1xuXG4gICAgICBkZWJ1ZygncmVzcG9uc2UnLCByZXNwb25zZS5zdGF0dXMsIHVybCwgcmVzcG9uc2VIZWFkZXJzLCBlcnJNZXNzYWdlKTtcblxuICAgICAgY29uc3QgZXJyID0gdGhpcy5tYWtlU3RhdHVzRXJyb3IocmVzcG9uc2Uuc3RhdHVzLCBlcnJKU09OLCBlcnJNZXNzYWdlLCByZXNwb25zZUhlYWRlcnMpO1xuICAgICAgdGhyb3cgZXJyO1xuICAgIH1cblxuICAgIHJldHVybiB7IHJlc3BvbnNlLCBvcHRpb25zLCBjb250cm9sbGVyIH07XG4gIH1cblxuICByZXF1ZXN0QVBJTGlzdDxJdGVtID0gdW5rbm93biwgUGFnZUNsYXNzIGV4dGVuZHMgQWJzdHJhY3RQYWdlPEl0ZW0+ID0gQWJzdHJhY3RQYWdlPEl0ZW0+PihcbiAgICBQYWdlOiBuZXcgKC4uLmFyZ3M6IENvbnN0cnVjdG9yUGFyYW1ldGVyczx0eXBlb2YgQWJzdHJhY3RQYWdlPikgPT4gUGFnZUNsYXNzLFxuICAgIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnMsXG4gICk6IFBhZ2VQcm9taXNlPFBhZ2VDbGFzcywgSXRlbT4ge1xuICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLm1ha2VSZXF1ZXN0KG9wdGlvbnMsIG51bGwpO1xuICAgIHJldHVybiBuZXcgUGFnZVByb21pc2U8UGFnZUNsYXNzLCBJdGVtPih0aGlzLCByZXF1ZXN0LCBQYWdlKTtcbiAgfVxuXG4gIGJ1aWxkVVJMPFJlcSBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHVua25vd24+PihwYXRoOiBzdHJpbmcsIHF1ZXJ5OiBSZXEgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nIHtcbiAgICBjb25zdCB1cmwgPVxuICAgICAgaXNBYnNvbHV0ZVVSTChwYXRoKSA/XG4gICAgICAgIG5ldyBVUkwocGF0aClcbiAgICAgIDogbmV3IFVSTCh0aGlzLmJhc2VVUkwgKyAodGhpcy5iYXNlVVJMLmVuZHNXaXRoKCcvJykgJiYgcGF0aC5zdGFydHNXaXRoKCcvJykgPyBwYXRoLnNsaWNlKDEpIDogcGF0aCkpO1xuXG4gICAgY29uc3QgZGVmYXVsdFF1ZXJ5ID0gdGhpcy5kZWZhdWx0UXVlcnkoKTtcbiAgICBpZiAoIWlzRW1wdHlPYmooZGVmYXVsdFF1ZXJ5KSkge1xuICAgICAgcXVlcnkgPSB7IC4uLmRlZmF1bHRRdWVyeSwgLi4ucXVlcnkgfSBhcyBSZXE7XG4gICAgfVxuXG4gICAgaWYgKHF1ZXJ5KSB7XG4gICAgICB1cmwuc2VhcmNoID0gdGhpcy5zdHJpbmdpZnlRdWVyeShxdWVyeSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVybC50b1N0cmluZygpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHN0cmluZ2lmeVF1ZXJ5KHF1ZXJ5OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IHN0cmluZyB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHF1ZXJ5KVxuICAgICAgLmZpbHRlcigoW18sIHZhbHVlXSkgPT4gdHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJylcbiAgICAgIC5tYXAoKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgcmV0dXJuIGAke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGtleSl9PWA7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgIGBDYW5ub3Qgc3RyaW5naWZ5IHR5cGUgJHt0eXBlb2YgdmFsdWV9OyBFeHBlY3RlZCBzdHJpbmcsIG51bWJlciwgYm9vbGVhbiwgb3IgbnVsbC4gSWYgeW91IG5lZWQgdG8gcGFzcyBuZXN0ZWQgcXVlcnkgcGFyYW1ldGVycywgeW91IGNhbiBtYW51YWxseSBlbmNvZGUgdGhlbSwgZS5nLiB7IHF1ZXJ5OiB7ICdmb29ba2V5MV0nOiB2YWx1ZTEsICdmb29ba2V5Ml0nOiB2YWx1ZTIgfSB9LCBhbmQgcGxlYXNlIG9wZW4gYSBHaXRIdWIgaXNzdWUgcmVxdWVzdGluZyBiZXR0ZXIgc3VwcG9ydCBmb3IgeW91ciB1c2UgY2FzZS5gLFxuICAgICAgICApO1xuICAgICAgfSlcbiAgICAgIC5qb2luKCcmJyk7XG4gIH1cblxuICBhc3luYyBmZXRjaFdpdGhUaW1lb3V0KFxuICAgIHVybDogUmVxdWVzdEluZm8sXG4gICAgaW5pdDogUmVxdWVzdEluaXQgfCB1bmRlZmluZWQsXG4gICAgbXM6IG51bWJlcixcbiAgICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIsXG4gICk6IFByb21pc2U8UmVzcG9uc2U+IHtcbiAgICBjb25zdCB7IHNpZ25hbCwgLi4ub3B0aW9ucyB9ID0gaW5pdCB8fCB7fTtcbiAgICBpZiAoc2lnbmFsKSBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKSA9PiBjb250cm9sbGVyLmFib3J0KCkpO1xuXG4gICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCBtcyk7XG5cbiAgICByZXR1cm4gdGhpcy5nZXRSZXF1ZXN0Q2xpZW50KClcbiAgICAgIC5mZXRjaCh1cmwsIHsgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbCBhcyBhbnksIC4uLm9wdGlvbnMgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0UmVxdWVzdENsaWVudCgpOiBSZXF1ZXN0Q2xpZW50IHtcbiAgICByZXR1cm4geyBmZXRjaDogdGhpcy5mZXRjaCB9O1xuICB9XG5cbiAgcHJpdmF0ZSBzaG91bGRSZXRyeShyZXNwb25zZTogUmVzcG9uc2UpOiBib29sZWFuIHtcbiAgICAvLyBOb3RlIHRoaXMgaXMgbm90IGEgc3RhbmRhcmQgaGVhZGVyLlxuICAgIGNvbnN0IHNob3VsZFJldHJ5SGVhZGVyID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ3gtc2hvdWxkLXJldHJ5Jyk7XG5cbiAgICAvLyBJZiB0aGUgc2VydmVyIGV4cGxpY2l0bHkgc2F5cyB3aGV0aGVyIG9yIG5vdCB0byByZXRyeSwgb2JleS5cbiAgICBpZiAoc2hvdWxkUmV0cnlIZWFkZXIgPT09ICd0cnVlJykgcmV0dXJuIHRydWU7XG4gICAgaWYgKHNob3VsZFJldHJ5SGVhZGVyID09PSAnZmFsc2UnKSByZXR1cm4gZmFsc2U7XG5cbiAgICAvLyBSZXRyeSBvbiBsb2NrIHRpbWVvdXRzLlxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQwOSkgcmV0dXJuIHRydWU7XG5cbiAgICAvLyBSZXRyeSBvbiByYXRlIGxpbWl0cy5cbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MjkpIHJldHVybiB0cnVlO1xuXG4gICAgLy8gUmV0cnkgaW50ZXJuYWwgZXJyb3JzLlxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNTAwKSByZXR1cm4gdHJ1ZTtcblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmV0cnlSZXF1ZXN0KFxuICAgIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnMsXG4gICAgcmV0cmllc1JlbWFpbmluZzogbnVtYmVyLFxuICAgIHJlc3BvbnNlSGVhZGVycz86IEhlYWRlcnMgfCB1bmRlZmluZWQsXG4gICk6IFByb21pc2U8QVBJUmVzcG9uc2VQcm9wcz4ge1xuICAgIHJldHJpZXNSZW1haW5pbmcgLT0gMTtcblxuICAgIC8vIEFib3V0IHRoZSBSZXRyeS1BZnRlciBoZWFkZXI6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUVFAvSGVhZGVycy9SZXRyeS1BZnRlclxuICAgIC8vXG4gICAgLy8gVE9ETzogd2UgbWF5IHdhbnQgdG8gaGFuZGxlIHRoZSBjYXNlIHdoZXJlIHRoZSBoZWFkZXIgaXMgdXNpbmcgdGhlIGh0dHAtZGF0ZSBzeW50YXg6IFwiUmV0cnktQWZ0ZXI6IDxodHRwLWRhdGU+XCIuXG4gICAgLy8gU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUVFAvSGVhZGVycy9SZXRyeS1BZnRlciNzeW50YXggZm9yIGRldGFpbHMuXG4gICAgY29uc3QgcmV0cnlBZnRlciA9IHBhcnNlSW50KHJlc3BvbnNlSGVhZGVycz8uWydyZXRyeS1hZnRlciddIHx8ICcnKTtcblxuICAgIGNvbnN0IG1heFJldHJpZXMgPSBvcHRpb25zLm1heFJldHJpZXMgPz8gdGhpcy5tYXhSZXRyaWVzO1xuICAgIGNvbnN0IHRpbWVvdXQgPSB0aGlzLmNhbGN1bGF0ZVJldHJ5VGltZW91dFNlY29uZHMocmV0cmllc1JlbWFpbmluZywgcmV0cnlBZnRlciwgbWF4UmV0cmllcykgKiAxMDAwO1xuICAgIGF3YWl0IHNsZWVwKHRpbWVvdXQpO1xuXG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3Qob3B0aW9ucywgcmV0cmllc1JlbWFpbmluZyk7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVJldHJ5VGltZW91dFNlY29uZHMoXG4gICAgcmV0cmllc1JlbWFpbmluZzogbnVtYmVyLFxuICAgIHJldHJ5QWZ0ZXI6IG51bWJlcixcbiAgICBtYXhSZXRyaWVzOiBudW1iZXIsXG4gICk6IG51bWJlciB7XG4gICAgY29uc3QgaW5pdGlhbFJldHJ5RGVsYXkgPSAwLjU7XG4gICAgY29uc3QgbWF4UmV0cnlEZWxheSA9IDI7XG5cbiAgICAvLyBJZiB0aGUgQVBJIGFza3MgdXMgdG8gd2FpdCBhIGNlcnRhaW4gYW1vdW50IG9mIHRpbWUgKGFuZCBpdCdzIGEgcmVhc29uYWJsZSBhbW91bnQpLFxuICAgIC8vIGp1c3QgZG8gd2hhdCBpdCBzYXlzLlxuICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKHJldHJ5QWZ0ZXIpICYmIHJldHJ5QWZ0ZXIgPD0gNjApIHtcbiAgICAgIHJldHVybiByZXRyeUFmdGVyO1xuICAgIH1cblxuICAgIGNvbnN0IG51bVJldHJpZXMgPSBtYXhSZXRyaWVzIC0gcmV0cmllc1JlbWFpbmluZztcblxuICAgIC8vIEFwcGx5IGV4cG9uZW50aWFsIGJhY2tvZmYsIGJ1dCBub3QgbW9yZSB0aGFuIHRoZSBtYXguXG4gICAgY29uc3Qgc2xlZXBTZWNvbmRzID0gTWF0aC5taW4oaW5pdGlhbFJldHJ5RGVsYXkgKiBNYXRoLnBvdyhudW1SZXRyaWVzIC0gMSwgMiksIG1heFJldHJ5RGVsYXkpO1xuXG4gICAgLy8gQXBwbHkgc29tZSBqaXR0ZXIsIHBsdXMtb3ItbWludXMgaGFsZiBhIHNlY29uZC5cbiAgICBjb25zdCBqaXR0ZXIgPSBNYXRoLnJhbmRvbSgpIC0gMC41O1xuXG4gICAgcmV0dXJuIHNsZWVwU2Vjb25kcyArIGppdHRlcjtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VXNlckFnZW50KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3RoaXMuY29uc3RydWN0b3IubmFtZX0vSlMgJHtWRVJTSU9OfWA7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFQSVJlc291cmNlIHtcbiAgcHJvdGVjdGVkIGNsaWVudDogQVBJQ2xpZW50O1xuICBjb25zdHJ1Y3RvcihjbGllbnQ6IEFQSUNsaWVudCkge1xuICAgIHRoaXMuY2xpZW50ID0gY2xpZW50O1xuXG4gICAgdGhpcy5nZXQgPSBjbGllbnQuZ2V0LmJpbmQoY2xpZW50KTtcbiAgICB0aGlzLnBvc3QgPSBjbGllbnQucG9zdC5iaW5kKGNsaWVudCk7XG4gICAgdGhpcy5wYXRjaCA9IGNsaWVudC5wYXRjaC5iaW5kKGNsaWVudCk7XG4gICAgdGhpcy5wdXQgPSBjbGllbnQucHV0LmJpbmQoY2xpZW50KTtcbiAgICB0aGlzLmRlbGV0ZSA9IGNsaWVudC5kZWxldGUuYmluZChjbGllbnQpO1xuICAgIHRoaXMuZ2V0QVBJTGlzdCA9IGNsaWVudC5nZXRBUElMaXN0LmJpbmQoY2xpZW50KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXQ6IEFQSUNsaWVudFsnZ2V0J107XG4gIHByb3RlY3RlZCBwb3N0OiBBUElDbGllbnRbJ3Bvc3QnXTtcbiAgcHJvdGVjdGVkIHBhdGNoOiBBUElDbGllbnRbJ3BhdGNoJ107XG4gIHByb3RlY3RlZCBwdXQ6IEFQSUNsaWVudFsncHV0J107XG4gIHByb3RlY3RlZCBkZWxldGU6IEFQSUNsaWVudFsnZGVsZXRlJ107XG4gIHByb3RlY3RlZCBnZXRBUElMaXN0OiBBUElDbGllbnRbJ2dldEFQSUxpc3QnXTtcbn1cblxuZXhwb3J0IHR5cGUgUGFnZUluZm8gPSB7IHVybDogVVJMIH0gfCB7IHBhcmFtczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsIH07XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdFBhZ2U8SXRlbT4gaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlPEl0ZW0+IHtcbiAgI2NsaWVudDogQVBJQ2xpZW50O1xuICBwcm90ZWN0ZWQgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucztcblxuICBwcm90ZWN0ZWQgcmVzcG9uc2U6IFJlc3BvbnNlO1xuICBwcm90ZWN0ZWQgYm9keTogdW5rbm93bjtcblxuICBjb25zdHJ1Y3RvcihjbGllbnQ6IEFQSUNsaWVudCwgcmVzcG9uc2U6IFJlc3BvbnNlLCBib2R5OiB1bmtub3duLCBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zKSB7XG4gICAgdGhpcy4jY2xpZW50ID0gY2xpZW50O1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgIHRoaXMuYm9keSA9IGJvZHk7XG4gIH1cblxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgVXNlIG5leHRQYWdlSW5mbyBpbnN0ZWFkXG4gICAqL1xuICBhYnN0cmFjdCBuZXh0UGFnZVBhcmFtcygpOiBQYXJ0aWFsPFJlY29yZDxzdHJpbmcsIHVua25vd24+PiB8IG51bGw7XG4gIGFic3RyYWN0IG5leHRQYWdlSW5mbygpOiBQYWdlSW5mbyB8IG51bGw7XG5cbiAgYWJzdHJhY3QgZ2V0UGFnaW5hdGVkSXRlbXMoKTogSXRlbVtdO1xuXG4gIGhhc05leHRQYWdlKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5nZXRQYWdpbmF0ZWRJdGVtcygpO1xuICAgIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXMubmV4dFBhZ2VJbmZvKCkgIT0gbnVsbDtcbiAgfVxuXG4gIGFzeW5jIGdldE5leHRQYWdlKCk6IFByb21pc2U8dGhpcz4ge1xuICAgIGNvbnN0IG5leHRJbmZvID0gdGhpcy5uZXh0UGFnZUluZm8oKTtcbiAgICBpZiAoIW5leHRJbmZvKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdObyBuZXh0IHBhZ2UgZXhwZWN0ZWQ7IHBsZWFzZSBjaGVjayBgLmhhc05leHRQYWdlKClgIGJlZm9yZSBjYWxsaW5nIGAuZ2V0TmV4dFBhZ2UoKWAuJyxcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IG5leHRPcHRpb25zID0geyAuLi50aGlzLm9wdGlvbnMgfTtcbiAgICBpZiAoJ3BhcmFtcycgaW4gbmV4dEluZm8pIHtcbiAgICAgIG5leHRPcHRpb25zLnF1ZXJ5ID0geyAuLi5uZXh0T3B0aW9ucy5xdWVyeSwgLi4ubmV4dEluZm8ucGFyYW1zIH07XG4gICAgfSBlbHNlIGlmICgndXJsJyBpbiBuZXh0SW5mbykge1xuICAgICAgY29uc3QgcGFyYW1zID0gWy4uLk9iamVjdC5lbnRyaWVzKG5leHRPcHRpb25zLnF1ZXJ5IHx8IHt9KSwgLi4ubmV4dEluZm8udXJsLnNlYXJjaFBhcmFtcy5lbnRyaWVzKCldO1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgcGFyYW1zKSB7XG4gICAgICAgIG5leHRJbmZvLnVybC5zZWFyY2hQYXJhbXMuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgICAgbmV4dE9wdGlvbnMucXVlcnkgPSB1bmRlZmluZWQ7XG4gICAgICBuZXh0T3B0aW9ucy5wYXRoID0gbmV4dEluZm8udXJsLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLiNjbGllbnQucmVxdWVzdEFQSUxpc3QodGhpcy5jb25zdHJ1Y3RvciBhcyBhbnksIG5leHRPcHRpb25zKTtcbiAgfVxuXG4gIGFzeW5jICppdGVyUGFnZXMoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgbGV0IHBhZ2U6IEFic3RyYWN0UGFnZTxJdGVtPiA9IHRoaXM7XG4gICAgeWllbGQgcGFnZTtcbiAgICB3aGlsZSAocGFnZS5oYXNOZXh0UGFnZSgpKSB7XG4gICAgICBwYWdlID0gYXdhaXQgcGFnZS5nZXROZXh0UGFnZSgpO1xuICAgICAgeWllbGQgcGFnZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyAqW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IHBhZ2Ugb2YgdGhpcy5pdGVyUGFnZXMoKSkge1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHBhZ2UuZ2V0UGFnaW5hdGVkSXRlbXMoKSkge1xuICAgICAgICB5aWVsZCBpdGVtO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgc3ViY2xhc3Mgb2YgUHJvbWlzZSB3aWxsIHJlc29sdmUgdG8gYW4gaW5zdGFudGlhdGVkIFBhZ2Ugb25jZSB0aGUgcmVxdWVzdCBjb21wbGV0ZXMuXG4gKlxuICogSXQgYWxzbyBpbXBsZW1lbnRzIEFzeW5jSXRlcmFibGUgdG8gYWxsb3cgYXV0by1wYWdpbmF0aW5nIGl0ZXJhdGlvbiBvbiBhbiB1bmF3YWl0ZWQgbGlzdCBjYWxsLCBlZzpcbiAqXG4gKiAgICBmb3IgYXdhaXQgKGNvbnN0IGl0ZW0gb2YgY2xpZW50Lml0ZW1zLmxpc3QoKSkge1xuICogICAgICBjb25zb2xlLmxvZyhpdGVtKVxuICogICAgfVxuICovXG5leHBvcnQgY2xhc3MgUGFnZVByb21pc2U8XG4gICAgUGFnZUNsYXNzIGV4dGVuZHMgQWJzdHJhY3RQYWdlPEl0ZW0+LFxuICAgIEl0ZW0gPSBSZXR1cm5UeXBlPFBhZ2VDbGFzc1snZ2V0UGFnaW5hdGVkSXRlbXMnXT5bbnVtYmVyXSxcbiAgPlxuICBleHRlbmRzIEFQSVByb21pc2U8UGFnZUNsYXNzPlxuICBpbXBsZW1lbnRzIEFzeW5jSXRlcmFibGU8SXRlbT5cbntcbiAgY29uc3RydWN0b3IoXG4gICAgY2xpZW50OiBBUElDbGllbnQsXG4gICAgcmVxdWVzdDogUHJvbWlzZTxBUElSZXNwb25zZVByb3BzPixcbiAgICBQYWdlOiBuZXcgKC4uLmFyZ3M6IENvbnN0cnVjdG9yUGFyYW1ldGVyczx0eXBlb2YgQWJzdHJhY3RQYWdlPikgPT4gUGFnZUNsYXNzLFxuICApIHtcbiAgICBzdXBlcihcbiAgICAgIHJlcXVlc3QsXG4gICAgICBhc3luYyAocHJvcHMpID0+IG5ldyBQYWdlKGNsaWVudCwgcHJvcHMucmVzcG9uc2UsIGF3YWl0IGRlZmF1bHRQYXJzZVJlc3BvbnNlKHByb3BzKSwgcHJvcHMub3B0aW9ucyksXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbGxvdyBhdXRvLXBhZ2luYXRpbmcgaXRlcmF0aW9uIG9uIGFuIHVuYXdhaXRlZCBsaXN0IGNhbGwsIGVnOlxuICAgKlxuICAgKiAgICBmb3IgYXdhaXQgKGNvbnN0IGl0ZW0gb2YgY2xpZW50Lml0ZW1zLmxpc3QoKSkge1xuICAgKiAgICAgIGNvbnNvbGUubG9nKGl0ZW0pXG4gICAqICAgIH1cbiAgICovXG4gIGFzeW5jICpbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCB0aGlzO1xuICAgIGZvciBhd2FpdCAoY29uc3QgaXRlbSBvZiBwYWdlKSB7XG4gICAgICB5aWVsZCBpdGVtO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY29uc3QgY3JlYXRlUmVzcG9uc2VIZWFkZXJzID0gKFxuICBoZWFkZXJzOiBBd2FpdGVkPFJldHVyblR5cGU8RmV0Y2g+PlsnaGVhZGVycyddLFxuKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9PiB7XG4gIHJldHVybiBuZXcgUHJveHkoXG4gICAgT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgaGVhZGVycy5lbnRyaWVzKCksXG4gICAgKSxcbiAgICB7XG4gICAgICBnZXQodGFyZ2V0LCBuYW1lKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IG5hbWUudG9TdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIHRhcmdldFtrZXkudG9Mb3dlckNhc2UoKV0gfHwgdGFyZ2V0W2tleV07XG4gICAgICB9LFxuICAgIH0sXG4gICk7XG59O1xuXG50eXBlIEhUVFBNZXRob2QgPSAnZ2V0JyB8ICdwb3N0JyB8ICdwdXQnIHwgJ3BhdGNoJyB8ICdkZWxldGUnO1xuXG5leHBvcnQgdHlwZSBSZXF1ZXN0Q2xpZW50ID0geyBmZXRjaDogRmV0Y2ggfTtcbmV4cG9ydCB0eXBlIEhlYWRlcnMgPSBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkPjtcbmV4cG9ydCB0eXBlIERlZmF1bHRRdWVyeSA9IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHVuZGVmaW5lZD47XG5leHBvcnQgdHlwZSBLZXlzRW51bTxUPiA9IHsgW1AgaW4ga2V5b2YgUmVxdWlyZWQ8VD5dOiB0cnVlIH07XG5cbmV4cG9ydCB0eXBlIFJlcXVlc3RPcHRpb25zPFJlcSBleHRlbmRzIHt9ID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBSZWFkYWJsZT4gPSB7XG4gIG1ldGhvZD86IEhUVFBNZXRob2Q7XG4gIHBhdGg/OiBzdHJpbmc7XG4gIHF1ZXJ5PzogUmVxIHwgdW5kZWZpbmVkO1xuICBib2R5PzogUmVxIHwgdW5kZWZpbmVkO1xuICBoZWFkZXJzPzogSGVhZGVycyB8IHVuZGVmaW5lZDtcblxuICBtYXhSZXRyaWVzPzogbnVtYmVyO1xuICBzdHJlYW0/OiBib29sZWFuIHwgdW5kZWZpbmVkO1xuICB0aW1lb3V0PzogbnVtYmVyO1xuICBodHRwQWdlbnQ/OiBBZ2VudDtcbiAgc2lnbmFsPzogQWJvcnRTaWduYWwgfCB1bmRlZmluZWQgfCBudWxsO1xuICBpZGVtcG90ZW5jeUtleT86IHN0cmluZztcbn07XG5cbi8vIFRoaXMgaXMgcmVxdWlyZWQgc28gdGhhdCB3ZSBjYW4gZGV0ZXJtaW5lIGlmIGEgZ2l2ZW4gb2JqZWN0IG1hdGNoZXMgdGhlIFJlcXVlc3RPcHRpb25zXG4vLyB0eXBlIGF0IHJ1bnRpbWUuIFdoaWxlIHRoaXMgcmVxdWlyZXMgZHVwbGljYXRpb24sIGl0IGlzIGVuZm9yY2VkIGJ5IHRoZSBUeXBlU2NyaXB0XG4vLyBjb21waWxlciBzdWNoIHRoYXQgYW55IG1pc3NpbmcgLyBleHRyYW5lb3VzIGtleXMgd2lsbCBjYXVzZSBhbiBlcnJvci5cbmNvbnN0IHJlcXVlc3RPcHRpb25zS2V5czogS2V5c0VudW08UmVxdWVzdE9wdGlvbnM+ID0ge1xuICBtZXRob2Q6IHRydWUsXG4gIHBhdGg6IHRydWUsXG4gIHF1ZXJ5OiB0cnVlLFxuICBib2R5OiB0cnVlLFxuICBoZWFkZXJzOiB0cnVlLFxuXG4gIG1heFJldHJpZXM6IHRydWUsXG4gIHN0cmVhbTogdHJ1ZSxcbiAgdGltZW91dDogdHJ1ZSxcbiAgaHR0cEFnZW50OiB0cnVlLFxuICBzaWduYWw6IHRydWUsXG4gIGlkZW1wb3RlbmN5S2V5OiB0cnVlLFxufTtcblxuZXhwb3J0IGNvbnN0IGlzUmVxdWVzdE9wdGlvbnMgPSAob2JqOiB1bmtub3duKTogb2JqIGlzIFJlcXVlc3RPcHRpb25zID0+IHtcbiAgcmV0dXJuIChcbiAgICB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJlxuICAgIG9iaiAhPT0gbnVsbCAmJlxuICAgICFpc0VtcHR5T2JqKG9iaikgJiZcbiAgICBPYmplY3Qua2V5cyhvYmopLmV2ZXJ5KChrKSA9PiBoYXNPd24ocmVxdWVzdE9wdGlvbnNLZXlzLCBrKSlcbiAgKTtcbn07XG5cbmV4cG9ydCB0eXBlIEZpbmFsUmVxdWVzdE9wdGlvbnM8UmVxIGV4dGVuZHMge30gPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IFJlYWRhYmxlPiA9IFJlcXVlc3RPcHRpb25zPFJlcT4gJiB7XG4gIG1ldGhvZDogSFRUUE1ldGhvZDtcbiAgcGF0aDogc3RyaW5nO1xufTtcblxuZGVjbGFyZSBjb25zdCBEZW5vOiBhbnk7XG5kZWNsYXJlIGNvbnN0IEVkZ2VSdW50aW1lOiBhbnk7XG50eXBlIEFyY2ggPSAneDMyJyB8ICd4NjQnIHwgJ2FybScgfCAnYXJtNjQnIHwgYG90aGVyOiR7c3RyaW5nfWAgfCAndW5rbm93bic7XG50eXBlIFBsYXRmb3JtTmFtZSA9XG4gIHwgJ01hY09TJ1xuICB8ICdMaW51eCdcbiAgfCAnV2luZG93cydcbiAgfCAnRnJlZUJTRCdcbiAgfCAnT3BlbkJTRCdcbiAgfCAnaU9TJ1xuICB8ICdBbmRyb2lkJ1xuICB8IGBPdGhlcjoke3N0cmluZ31gXG4gIHwgJ1Vua25vd24nO1xudHlwZSBCcm93c2VyID0gJ2llJyB8ICdlZGdlJyB8ICdjaHJvbWUnIHwgJ2ZpcmVmb3gnIHwgJ3NhZmFyaSc7XG50eXBlIFBsYXRmb3JtUHJvcGVydGllcyA9IHtcbiAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnO1xuICAnWC1TdGFpbmxlc3MtUGFja2FnZS1WZXJzaW9uJzogc3RyaW5nO1xuICAnWC1TdGFpbmxlc3MtT1MnOiBQbGF0Zm9ybU5hbWU7XG4gICdYLVN0YWlubGVzcy1BcmNoJzogQXJjaDtcbiAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiAnbm9kZScgfCAnZGVubycgfCAnZWRnZScgfCBgYnJvd3Nlcjoke0Jyb3dzZXJ9YCB8ICd1bmtub3duJztcbiAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUtVmVyc2lvbic6IHN0cmluZztcbn07XG5jb25zdCBnZXRQbGF0Zm9ybVByb3BlcnRpZXMgPSAoKTogUGxhdGZvcm1Qcm9wZXJ0aWVzID0+IHtcbiAgaWYgKHR5cGVvZiBEZW5vICE9PSAndW5kZWZpbmVkJyAmJiBEZW5vLmJ1aWxkICE9IG51bGwpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgICAnWC1TdGFpbmxlc3MtT1MnOiBub3JtYWxpemVQbGF0Zm9ybShEZW5vLmJ1aWxkLm9zKSxcbiAgICAgICdYLVN0YWlubGVzcy1BcmNoJzogbm9ybWFsaXplQXJjaChEZW5vLmJ1aWxkLmFyY2gpLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiAnZGVubycsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogRGVuby52ZXJzaW9uLFxuICAgIH07XG4gIH1cbiAgaWYgKHR5cGVvZiBFZGdlUnVudGltZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgICAnWC1TdGFpbmxlc3MtT1MnOiAnVW5rbm93bicsXG4gICAgICAnWC1TdGFpbmxlc3MtQXJjaCc6IGBvdGhlcjoke0VkZ2VSdW50aW1lfWAsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZSc6ICdlZGdlJyxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiBwcm9jZXNzLnZlcnNpb24sXG4gICAgfTtcbiAgfVxuICAvLyBDaGVjayBpZiBOb2RlLmpzXG4gIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnID8gcHJvY2VzcyA6IDApID09PSAnW29iamVjdCBwcm9jZXNzXScpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgICAnWC1TdGFpbmxlc3MtT1MnOiBub3JtYWxpemVQbGF0Zm9ybShwcm9jZXNzLnBsYXRmb3JtKSxcbiAgICAgICdYLVN0YWlubGVzcy1BcmNoJzogbm9ybWFsaXplQXJjaChwcm9jZXNzLmFyY2gpLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiAnbm9kZScsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogcHJvY2Vzcy52ZXJzaW9uLFxuICAgIH07XG4gIH1cblxuICBjb25zdCBicm93c2VySW5mbyA9IGdldEJyb3dzZXJJbmZvKCk7XG4gIGlmIChicm93c2VySW5mbykge1xuICAgIHJldHVybiB7XG4gICAgICAnWC1TdGFpbmxlc3MtTGFuZyc6ICdqcycsXG4gICAgICAnWC1TdGFpbmxlc3MtUGFja2FnZS1WZXJzaW9uJzogVkVSU0lPTixcbiAgICAgICdYLVN0YWlubGVzcy1PUyc6ICdVbmtub3duJyxcbiAgICAgICdYLVN0YWlubGVzcy1BcmNoJzogJ3Vua25vd24nLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiBgYnJvd3Nlcjoke2Jyb3dzZXJJbmZvLmJyb3dzZXJ9YCxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiBicm93c2VySW5mby52ZXJzaW9uLFxuICAgIH07XG4gIH1cblxuICAvLyBUT0RPIGFkZCBzdXBwb3J0IGZvciBDbG91ZGZsYXJlIHdvcmtlcnMsIGV0Yy5cbiAgcmV0dXJuIHtcbiAgICAnWC1TdGFpbmxlc3MtTGFuZyc6ICdqcycsXG4gICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgJ1gtU3RhaW5sZXNzLU9TJzogJ1Vua25vd24nLFxuICAgICdYLVN0YWlubGVzcy1BcmNoJzogJ3Vua25vd24nLFxuICAgICdYLVN0YWlubGVzcy1SdW50aW1lJzogJ3Vua25vd24nLFxuICAgICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiAndW5rbm93bicsXG4gIH07XG59O1xuXG50eXBlIEJyb3dzZXJJbmZvID0ge1xuICBicm93c2VyOiBCcm93c2VyO1xuICB2ZXJzaW9uOiBzdHJpbmc7XG59O1xuXG5kZWNsYXJlIGNvbnN0IG5hdmlnYXRvcjogeyB1c2VyQWdlbnQ6IHN0cmluZyB9IHwgdW5kZWZpbmVkO1xuXG4vLyBOb3RlOiBtb2RpZmllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9KUy1EZXZUb29scy9ob3N0LWVudmlyb25tZW50L2Jsb2IvYjFhYjc5ZWNkZTM3ZGI1ZDZlMTYzYzA1MGU1NGZlN2QyODdkN2M5Mi9zcmMvaXNvbW9ycGhpYy5icm93c2VyLnRzXG5mdW5jdGlvbiBnZXRCcm93c2VySW5mbygpOiBCcm93c2VySW5mbyB8IG51bGwge1xuICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcgfHwgIW5hdmlnYXRvcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gTk9URTogVGhlIG9yZGVyIG1hdHRlcnMgaGVyZSFcbiAgY29uc3QgYnJvd3NlclBhdHRlcm5zID0gW1xuICAgIHsga2V5OiAnZWRnZScgYXMgY29uc3QsIHBhdHRlcm46IC9FZGdlKD86XFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdpZScgYXMgY29uc3QsIHBhdHRlcm46IC9NU0lFKD86XFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdpZScgYXMgY29uc3QsIHBhdHRlcm46IC9UcmlkZW50KD86LipydlxcOihcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdjaHJvbWUnIGFzIGNvbnN0LCBwYXR0ZXJuOiAvQ2hyb21lKD86XFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdmaXJlZm94JyBhcyBjb25zdCwgcGF0dGVybjogL0ZpcmVmb3goPzpcXFcrKFxcZCspXFwuKFxcZCspKD86XFwuKFxcZCspKT8pPy8gfSxcbiAgICB7IGtleTogJ3NhZmFyaScgYXMgY29uc3QsIHBhdHRlcm46IC8oPzpWZXJzaW9uXFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8oPzpcXFcrTW9iaWxlXFxTKik/XFxXK1NhZmFyaS8gfSxcbiAgXTtcblxuICAvLyBGaW5kIHRoZSBGSVJTVCBtYXRjaGluZyBicm93c2VyXG4gIGZvciAoY29uc3QgeyBrZXksIHBhdHRlcm4gfSBvZiBicm93c2VyUGF0dGVybnMpIHtcbiAgICBjb25zdCBtYXRjaCA9IHBhdHRlcm4uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIGNvbnN0IG1ham9yID0gbWF0Y2hbMV0gfHwgMDtcbiAgICAgIGNvbnN0IG1pbm9yID0gbWF0Y2hbMl0gfHwgMDtcbiAgICAgIGNvbnN0IHBhdGNoID0gbWF0Y2hbM10gfHwgMDtcblxuICAgICAgcmV0dXJuIHsgYnJvd3Nlcjoga2V5LCB2ZXJzaW9uOiBgJHttYWpvcn0uJHttaW5vcn0uJHtwYXRjaH1gIH07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmNvbnN0IG5vcm1hbGl6ZUFyY2ggPSAoYXJjaDogc3RyaW5nKTogQXJjaCA9PiB7XG4gIC8vIE5vZGUgZG9jczpcbiAgLy8gLSBodHRwczovL25vZGVqcy5vcmcvYXBpL3Byb2Nlc3MuaHRtbCNwcm9jZXNzYXJjaFxuICAvLyBEZW5vIGRvY3M6XG4gIC8vIC0gaHR0cHM6Ly9kb2MuZGVuby5sYW5kL2Rlbm8vc3RhYmxlL34vRGVuby5idWlsZFxuICBpZiAoYXJjaCA9PT0gJ3gzMicpIHJldHVybiAneDMyJztcbiAgaWYgKGFyY2ggPT09ICd4ODZfNjQnIHx8IGFyY2ggPT09ICd4NjQnKSByZXR1cm4gJ3g2NCc7XG4gIGlmIChhcmNoID09PSAnYXJtJykgcmV0dXJuICdhcm0nO1xuICBpZiAoYXJjaCA9PT0gJ2FhcmNoNjQnIHx8IGFyY2ggPT09ICdhcm02NCcpIHJldHVybiAnYXJtNjQnO1xuICBpZiAoYXJjaCkgcmV0dXJuIGBvdGhlcjoke2FyY2h9YDtcbiAgcmV0dXJuICd1bmtub3duJztcbn07XG5cbmNvbnN0IG5vcm1hbGl6ZVBsYXRmb3JtID0gKHBsYXRmb3JtOiBzdHJpbmcpOiBQbGF0Zm9ybU5hbWUgPT4ge1xuICAvLyBOb2RlIHBsYXRmb3JtczpcbiAgLy8gLSBodHRwczovL25vZGVqcy5vcmcvYXBpL3Byb2Nlc3MuaHRtbCNwcm9jZXNzcGxhdGZvcm1cbiAgLy8gRGVubyBwbGF0Zm9ybXM6XG4gIC8vIC0gaHR0cHM6Ly9kb2MuZGVuby5sYW5kL2Rlbm8vc3RhYmxlL34vRGVuby5idWlsZFxuICAvLyAtIGh0dHBzOi8vZ2l0aHViLmNvbS9kZW5vbGFuZC9kZW5vL2lzc3Vlcy8xNDc5OVxuXG4gIHBsYXRmb3JtID0gcGxhdGZvcm0udG9Mb3dlckNhc2UoKTtcblxuICAvLyBOT1RFOiB0aGlzIGlPUyBjaGVjayBpcyB1bnRlc3RlZCBhbmQgbWF5IG5vdCB3b3JrXG4gIC8vIE5vZGUgZG9lcyBub3Qgd29yayBuYXRpdmVseSBvbiBJT1MsIHRoZXJlIGlzIGEgZm9yayBhdFxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzLW1vYmlsZS9ub2RlanMtbW9iaWxlXG4gIC8vIGhvd2V2ZXIgaXQgaXMgdW5rbm93biBhdCB0aGUgdGltZSBvZiB3cml0aW5nIGhvdyB0byBkZXRlY3QgaWYgaXQgaXMgcnVubmluZ1xuICBpZiAocGxhdGZvcm0uaW5jbHVkZXMoJ2lvcycpKSByZXR1cm4gJ2lPUyc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ2FuZHJvaWQnKSByZXR1cm4gJ0FuZHJvaWQnO1xuICBpZiAocGxhdGZvcm0gPT09ICdkYXJ3aW4nKSByZXR1cm4gJ01hY09TJztcbiAgaWYgKHBsYXRmb3JtID09PSAnd2luMzInKSByZXR1cm4gJ1dpbmRvd3MnO1xuICBpZiAocGxhdGZvcm0gPT09ICdmcmVlYnNkJykgcmV0dXJuICdGcmVlQlNEJztcbiAgaWYgKHBsYXRmb3JtID09PSAnb3BlbmJzZCcpIHJldHVybiAnT3BlbkJTRCc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ2xpbnV4JykgcmV0dXJuICdMaW51eCc7XG4gIGlmIChwbGF0Zm9ybSkgcmV0dXJuIGBPdGhlcjoke3BsYXRmb3JtfWA7XG4gIHJldHVybiAnVW5rbm93bic7XG59O1xuXG5sZXQgX3BsYXRmb3JtSGVhZGVyczogUGxhdGZvcm1Qcm9wZXJ0aWVzO1xuY29uc3QgZ2V0UGxhdGZvcm1IZWFkZXJzID0gKCkgPT4ge1xuICByZXR1cm4gKF9wbGF0Zm9ybUhlYWRlcnMgPz89IGdldFBsYXRmb3JtUHJvcGVydGllcygpKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzYWZlSlNPTiA9ICh0ZXh0OiBzdHJpbmcpID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0ZXh0KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufTtcblxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzE5NzA5ODQ2XG5jb25zdCBzdGFydHNXaXRoU2NoZW1lUmVnZXhwID0gbmV3IFJlZ0V4cCgnXig/OlthLXpdKzopPy8vJywgJ2knKTtcbmNvbnN0IGlzQWJzb2x1dGVVUkwgPSAodXJsOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgcmV0dXJuIHN0YXJ0c1dpdGhTY2hlbWVSZWdleHAudGVzdCh1cmwpO1xufTtcblxuZXhwb3J0IGNvbnN0IHNsZWVwID0gKG1zOiBudW1iZXIpID0+IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG5cbmNvbnN0IHZhbGlkYXRlUG9zaXRpdmVJbnRlZ2VyID0gKG5hbWU6IHN0cmluZywgbjogdW5rbm93bik6IG51bWJlciA9PiB7XG4gIGlmICh0eXBlb2YgbiAhPT0gJ251bWJlcicgfHwgIU51bWJlci5pc0ludGVnZXIobikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYCR7bmFtZX0gbXVzdCBiZSBhbiBpbnRlZ2VyYCk7XG4gIH1cbiAgaWYgKG4gPCAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGAke25hbWV9IG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyYCk7XG4gIH1cbiAgcmV0dXJuIG47XG59O1xuXG5leHBvcnQgY29uc3QgY2FzdFRvRXJyb3IgPSAoZXJyOiBhbnkpOiBFcnJvciA9PiB7XG4gIGlmIChlcnIgaW5zdGFuY2VvZiBFcnJvcikgcmV0dXJuIGVycjtcbiAgcmV0dXJuIG5ldyBFcnJvcihlcnIpO1xufTtcblxuZXhwb3J0IGNvbnN0IGVuc3VyZVByZXNlbnQgPSA8VD4odmFsdWU6IFQgfCBudWxsIHwgdW5kZWZpbmVkKTogVCA9PiB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdGVkIGEgdmFsdWUgdG8gYmUgZ2l2ZW4gYnV0IHJlY2VpdmVkICR7dmFsdWV9IGluc3RlYWQuYCk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG5cbi8qKlxuICogUmVhZCBhbiBlbnZpcm9ubWVudCB2YXJpYWJsZS5cbiAqXG4gKiBXaWxsIHJldHVybiB1bmRlZmluZWQgaWYgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlIGRvZXNuJ3QgZXhpc3Qgb3IgY2Fubm90IGJlIGFjY2Vzc2VkLlxuICovXG5leHBvcnQgY29uc3QgcmVhZEVudiA9IChlbnY6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5lbnY/LltlbnZdID8/IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAodHlwZW9mIERlbm8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIERlbm8uZW52Py5nZXQ/LihlbnYpO1xuICB9XG4gIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5leHBvcnQgY29uc3QgY29lcmNlSW50ZWdlciA9ICh2YWx1ZTogdW5rbm93bik6IG51bWJlciA9PiB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSByZXR1cm4gTWF0aC5yb3VuZCh2YWx1ZSk7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSByZXR1cm4gcGFyc2VJbnQodmFsdWUsIDEwKTtcblxuICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBjb2VyY2UgJHt2YWx1ZX0gKHR5cGU6ICR7dHlwZW9mIHZhbHVlfSkgaW50byBhIG51bWJlcmApO1xufTtcblxuZXhwb3J0IGNvbnN0IGNvZXJjZUZsb2F0ID0gKHZhbHVlOiB1bmtub3duKTogbnVtYmVyID0+IHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHJldHVybiB2YWx1ZTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHJldHVybiBwYXJzZUZsb2F0KHZhbHVlKTtcblxuICB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBjb2VyY2UgJHt2YWx1ZX0gKHR5cGU6ICR7dHlwZW9mIHZhbHVlfSkgaW50byBhIG51bWJlcmApO1xufTtcblxuZXhwb3J0IGNvbnN0IGNvZXJjZUJvb2xlYW4gPSAodmFsdWU6IHVua25vd24pOiBib29sZWFuID0+IHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSByZXR1cm4gdmFsdWU7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSByZXR1cm4gdmFsdWUgPT09ICd0cnVlJztcbiAgcmV0dXJuIEJvb2xlYW4odmFsdWUpO1xufTtcblxuZXhwb3J0IGNvbnN0IG1heWJlQ29lcmNlSW50ZWdlciA9ICh2YWx1ZTogdW5rbm93bik6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gY29lcmNlSW50ZWdlcih2YWx1ZSk7XG59O1xuXG5leHBvcnQgY29uc3QgbWF5YmVDb2VyY2VGbG9hdCA9ICh2YWx1ZTogdW5rbm93bik6IG51bWJlciB8IHVuZGVmaW5lZCA9PiB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gY29lcmNlRmxvYXQodmFsdWUpO1xufTtcblxuZXhwb3J0IGNvbnN0IG1heWJlQ29lcmNlQm9vbGVhbiA9ICh2YWx1ZTogdW5rbm93bik6IGJvb2xlYW4gfCB1bmRlZmluZWQgPT4ge1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIGNvZXJjZUJvb2xlYW4odmFsdWUpO1xufTtcblxuLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzM0NDkxMjg3XG5leHBvcnQgZnVuY3Rpb24gaXNFbXB0eU9iaihvYmo6IE9iamVjdCB8IG51bGwgfCB1bmRlZmluZWQpOiBib29sZWFuIHtcbiAgaWYgKCFvYmopIHJldHVybiB0cnVlO1xuICBmb3IgKGNvbnN0IF9rIGluIG9iaikgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gaHR0cHM6Ly9lc2xpbnQub3JnL2RvY3MvbGF0ZXN0L3J1bGVzL25vLXByb3RvdHlwZS1idWlsdGluc1xuZXhwb3J0IGZ1bmN0aW9uIGhhc093bihvYmo6IE9iamVjdCwga2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWJ1ZyhhY3Rpb246IHN0cmluZywgLi4uYXJnczogYW55W10pIHtcbiAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzLmVudlsnREVCVUcnXSA9PT0gJ3RydWUnKSB7XG4gICAgY29uc29sZS5sb2coYE9wZW5BSTpERUJVRzoke2FjdGlvbn1gLCAuLi5hcmdzKTtcbiAgfVxufVxuXG4vKipcbiAqIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMTE3NTIzXG4gKi9cbmNvbnN0IHV1aWQ0ID0gKCkgPT4ge1xuICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCAoYykgPT4ge1xuICAgIGNvbnN0IHIgPSAoTWF0aC5yYW5kb20oKSAqIDE2KSB8IDA7XG4gICAgY29uc3QgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XG4gICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBpc1J1bm5pbmdJbkJyb3dzZXIgPSAoKSA9PiB7XG4gIHJldHVybiAoXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHR5cGVvZiB3aW5kb3cuZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnXG4gICk7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIEhlYWRlcnNQcm90b2NvbCB7XG4gIGdldDogKGhlYWRlcjogc3RyaW5nKSA9PiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xufVxuZXhwb3J0IHR5cGUgSGVhZGVyc0xpa2UgPSBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBzdHJpbmdbXSB8IHVuZGVmaW5lZD4gfCBIZWFkZXJzUHJvdG9jb2w7XG5cbmV4cG9ydCBjb25zdCBpc0hlYWRlcnNQcm90b2NvbCA9IChoZWFkZXJzOiBhbnkpOiBoZWFkZXJzIGlzIEhlYWRlcnNQcm90b2NvbCA9PiB7XG4gIHJldHVybiB0eXBlb2YgaGVhZGVycz8uZ2V0ID09PSAnZnVuY3Rpb24nO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEhlYWRlciA9IChoZWFkZXJzOiBIZWFkZXJzTGlrZSwga2V5OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkID0+IHtcbiAgY29uc3QgbG93ZXJLZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcbiAgaWYgKGlzSGVhZGVyc1Byb3RvY29sKGhlYWRlcnMpKSByZXR1cm4gaGVhZGVycy5nZXQoa2V5KSB8fCBoZWFkZXJzLmdldChsb3dlcktleSk7XG4gIGNvbnN0IHZhbHVlID0gaGVhZGVyc1trZXldIHx8IGhlYWRlcnNbbG93ZXJLZXldO1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICBpZiAodmFsdWUubGVuZ3RoIDw9IDEpIHJldHVybiB2YWx1ZVswXTtcbiAgICBjb25zb2xlLndhcm4oYFJlY2VpdmVkICR7dmFsdWUubGVuZ3RofSBlbnRyaWVzIGZvciB0aGUgJHtrZXl9IGhlYWRlciwgdXNpbmcgdGhlIGZpcnN0IGVudHJ5LmApO1xuICAgIHJldHVybiB2YWx1ZVswXTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59O1xuXG4vKipcbiAqIEVuY29kZXMgYSBzdHJpbmcgdG8gQmFzZTY0IGZvcm1hdC5cbiAqL1xuZXhwb3J0IGNvbnN0IHRvQmFzZTY0ID0gKHN0cjogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHN0cmluZyA9PiB7XG4gIGlmICghc3RyKSByZXR1cm4gJyc7XG4gIGlmICh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBCdWZmZXIuZnJvbShzdHIpLnRvU3RyaW5nKCdiYXNlNjQnKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgYnRvYSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gYnRvYShzdHIpO1xuICB9XG5cbiAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZ2VuZXJhdGUgYjY0IHN0cmluZzsgRXhwZWN0ZWQgYEJ1ZmZlcmAgb3IgYGJ0b2FgIHRvIGJlIGRlZmluZWQnKTtcbn07XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0IHsgQWJzdHJhY3RQYWdlLCBSZXNwb25zZSwgQVBJQ2xpZW50LCBGaW5hbFJlcXVlc3RPcHRpb25zLCBQYWdlSW5mbyB9IGZyb20gJy4vY29yZS5qcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFnZVJlc3BvbnNlPEl0ZW0+IHtcbiAgZGF0YTogQXJyYXk8SXRlbT47XG5cbiAgb2JqZWN0OiBzdHJpbmc7XG59XG5cbi8qKlxuICogTm90ZTogbm8gcGFnaW5hdGlvbiBhY3R1YWxseSBvY2N1cnMgeWV0LCB0aGlzIGlzIGZvciBmb3J3YXJkcy1jb21wYXRpYmlsaXR5LlxuICovXG5leHBvcnQgY2xhc3MgUGFnZTxJdGVtPiBleHRlbmRzIEFic3RyYWN0UGFnZTxJdGVtPiBpbXBsZW1lbnRzIFBhZ2VSZXNwb25zZTxJdGVtPiB7XG4gIG9iamVjdDogc3RyaW5nO1xuXG4gIGRhdGE6IEFycmF5PEl0ZW0+O1xuXG4gIGNvbnN0cnVjdG9yKGNsaWVudDogQVBJQ2xpZW50LCByZXNwb25zZTogUmVzcG9uc2UsIGJvZHk6IFBhZ2VSZXNwb25zZTxJdGVtPiwgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucykge1xuICAgIHN1cGVyKGNsaWVudCwgcmVzcG9uc2UsIGJvZHksIG9wdGlvbnMpO1xuXG4gICAgdGhpcy5vYmplY3QgPSBib2R5Lm9iamVjdDtcbiAgICB0aGlzLmRhdGEgPSBib2R5LmRhdGE7XG4gIH1cblxuICBnZXRQYWdpbmF0ZWRJdGVtcygpOiBJdGVtW10ge1xuICAgIHJldHVybiB0aGlzLmRhdGE7XG4gIH1cblxuICAvLyBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGBuZXh0UGFnZUluZm8oKWAgaW5zdGVhZFxuICAvKipcbiAgICogVGhpcyBwYWdlIHJlcHJlc2VudHMgYSByZXNwb25zZSB0aGF0IGlzbid0IGFjdHVhbGx5IHBhZ2luYXRlZCBhdCB0aGUgQVBJIGxldmVsXG4gICAqIHNvIHRoZXJlIHdpbGwgbmV2ZXIgYmUgYW55IG5leHQgcGFnZSBwYXJhbXMuXG4gICAqL1xuICBuZXh0UGFnZVBhcmFtcygpOiBudWxsIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIG5leHRQYWdlSW5mbygpOiBudWxsIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEN1cnNvclBhZ2VSZXNwb25zZTxJdGVtPiB7XG4gIGRhdGE6IEFycmF5PEl0ZW0+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEN1cnNvclBhZ2VQYXJhbXMge1xuICAvKipcbiAgICogSWRlbnRpZmllciBmb3IgdGhlIGxhc3Qgam9iIGZyb20gdGhlIHByZXZpb3VzIHBhZ2luYXRpb24gcmVxdWVzdC5cbiAgICovXG4gIGFmdGVyPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgZmluZS10dW5pbmcgam9icyB0byByZXRyaWV2ZS5cbiAgICovXG4gIGxpbWl0PzogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgQ3Vyc29yUGFnZTxJdGVtIGV4dGVuZHMgeyBpZDogc3RyaW5nIH0+XG4gIGV4dGVuZHMgQWJzdHJhY3RQYWdlPEl0ZW0+XG4gIGltcGxlbWVudHMgQ3Vyc29yUGFnZVJlc3BvbnNlPEl0ZW0+XG57XG4gIGRhdGE6IEFycmF5PEl0ZW0+O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIGNsaWVudDogQVBJQ2xpZW50LFxuICAgIHJlc3BvbnNlOiBSZXNwb25zZSxcbiAgICBib2R5OiBDdXJzb3JQYWdlUmVzcG9uc2U8SXRlbT4sXG4gICAgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucyxcbiAgKSB7XG4gICAgc3VwZXIoY2xpZW50LCByZXNwb25zZSwgYm9keSwgb3B0aW9ucyk7XG5cbiAgICB0aGlzLmRhdGEgPSBib2R5LmRhdGE7XG4gIH1cblxuICBnZXRQYWdpbmF0ZWRJdGVtcygpOiBJdGVtW10ge1xuICAgIHJldHVybiB0aGlzLmRhdGE7XG4gIH1cblxuICAvLyBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGBuZXh0UGFnZUluZm8oKWAgaW5zdGVhZFxuICBuZXh0UGFnZVBhcmFtcygpOiBQYXJ0aWFsPEN1cnNvclBhZ2VQYXJhbXM+IHwgbnVsbCB7XG4gICAgY29uc3QgaW5mbyA9IHRoaXMubmV4dFBhZ2VJbmZvKCk7XG4gICAgaWYgKCFpbmZvKSByZXR1cm4gbnVsbDtcbiAgICBpZiAoJ3BhcmFtcycgaW4gaW5mbykgcmV0dXJuIGluZm8ucGFyYW1zO1xuICAgIGNvbnN0IHBhcmFtcyA9IE9iamVjdC5mcm9tRW50cmllcyhpbmZvLnVybC5zZWFyY2hQYXJhbXMpO1xuICAgIGlmICghT2JqZWN0LmtleXMocGFyYW1zKS5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBwYXJhbXM7XG4gIH1cblxuICBuZXh0UGFnZUluZm8oKTogUGFnZUluZm8gfCBudWxsIHtcbiAgICBpZiAoIXRoaXMuZGF0YT8ubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBuZXh0ID0gdGhpcy5kYXRhW3RoaXMuZGF0YS5sZW5ndGggLSAxXT8uaWQ7XG4gICAgaWYgKCFuZXh0KSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4geyBwYXJhbXM6IHsgYWZ0ZXI6IG5leHQgfSB9O1xuICB9XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0IHR5cGUgeyBPcGVuQUkgfSBmcm9tICcuL2luZGV4LmpzJztcblxuZXhwb3J0IGNsYXNzIEFQSVJlc291cmNlIHtcbiAgcHJvdGVjdGVkIGNsaWVudDogT3BlbkFJO1xuICBjb25zdHJ1Y3RvcihjbGllbnQ6IE9wZW5BSSkge1xuICAgIHRoaXMuY2xpZW50ID0gY2xpZW50O1xuXG4gICAgdGhpcy5nZXQgPSBjbGllbnQuZ2V0LmJpbmQoY2xpZW50KTtcbiAgICB0aGlzLnBvc3QgPSBjbGllbnQucG9zdC5iaW5kKGNsaWVudCk7XG4gICAgdGhpcy5wYXRjaCA9IGNsaWVudC5wYXRjaC5iaW5kKGNsaWVudCk7XG4gICAgdGhpcy5wdXQgPSBjbGllbnQucHV0LmJpbmQoY2xpZW50KTtcbiAgICB0aGlzLmRlbGV0ZSA9IGNsaWVudC5kZWxldGUuYmluZChjbGllbnQpO1xuICAgIHRoaXMuZ2V0QVBJTGlzdCA9IGNsaWVudC5nZXRBUElMaXN0LmJpbmQoY2xpZW50KTtcbiAgfVxuXG4gIHByb3RlY3RlZCBnZXQ6IE9wZW5BSVsnZ2V0J107XG4gIHByb3RlY3RlZCBwb3N0OiBPcGVuQUlbJ3Bvc3QnXTtcbiAgcHJvdGVjdGVkIHBhdGNoOiBPcGVuQUlbJ3BhdGNoJ107XG4gIHByb3RlY3RlZCBwdXQ6IE9wZW5BSVsncHV0J107XG4gIHByb3RlY3RlZCBkZWxldGU6IE9wZW5BSVsnZGVsZXRlJ107XG4gIHByb3RlY3RlZCBnZXRBUElMaXN0OiBPcGVuQUlbJ2dldEFQSUxpc3QnXTtcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gJy4uLy4uL2NvcmUuanMnO1xuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi8uLi9yZXNvdXJjZS5qcyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleC5qcyc7XG5pbXBvcnQgeyB0eXBlIFVwbG9hZGFibGUsIG11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyB9IGZyb20gJy4uLy4uL2NvcmUuanMnO1xuXG5leHBvcnQgY2xhc3MgVHJhbnNjcmlwdGlvbnMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBUcmFuc2NyaWJlcyBhdWRpbyBpbnRvIHRoZSBpbnB1dCBsYW5ndWFnZS5cbiAgICovXG4gIGNyZWF0ZShib2R5OiBUcmFuc2NyaXB0aW9uQ3JlYXRlUGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxUcmFuc2NyaXB0aW9uPiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2F1ZGlvL3RyYW5zY3JpcHRpb25zJywgbXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zKHsgYm9keSwgLi4ub3B0aW9ucyB9KSk7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBUcmFuc2NyaXB0aW9uIHtcbiAgdGV4dDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRyYW5zY3JpcHRpb25DcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogVGhlIGF1ZGlvIGZpbGUgb2JqZWN0IChub3QgZmlsZSBuYW1lKSB0byB0cmFuc2NyaWJlLCBpbiBvbmUgb2YgdGhlc2UgZm9ybWF0czpcbiAgICogZmxhYywgbXAzLCBtcDQsIG1wZWcsIG1wZ2EsIG00YSwgb2dnLCB3YXYsIG9yIHdlYm0uXG4gICAqL1xuICBmaWxlOiBVcGxvYWRhYmxlO1xuXG4gIC8qKlxuICAgKiBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlLiBPbmx5IGB3aGlzcGVyLTFgIGlzIGN1cnJlbnRseSBhdmFpbGFibGUuXG4gICAqL1xuICBtb2RlbDogKHN0cmluZyAmIHt9KSB8ICd3aGlzcGVyLTEnO1xuXG4gIC8qKlxuICAgKiBUaGUgbGFuZ3VhZ2Ugb2YgdGhlIGlucHV0IGF1ZGlvLiBTdXBwbHlpbmcgdGhlIGlucHV0IGxhbmd1YWdlIGluXG4gICAqIFtJU08tNjM5LTFdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0xpc3Rfb2ZfSVNPXzYzOS0xX2NvZGVzKSBmb3JtYXQgd2lsbFxuICAgKiBpbXByb3ZlIGFjY3VyYWN5IGFuZCBsYXRlbmN5LlxuICAgKi9cbiAgbGFuZ3VhZ2U/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEFuIG9wdGlvbmFsIHRleHQgdG8gZ3VpZGUgdGhlIG1vZGVsJ3Mgc3R5bGUgb3IgY29udGludWUgYSBwcmV2aW91cyBhdWRpb1xuICAgKiBzZWdtZW50LiBUaGUgW3Byb21wdF0oL2RvY3MvZ3VpZGVzL3NwZWVjaC10by10ZXh0L3Byb21wdGluZykgc2hvdWxkIG1hdGNoIHRoZVxuICAgKiBhdWRpbyBsYW5ndWFnZS5cbiAgICovXG4gIHByb21wdD86IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGZvcm1hdCBvZiB0aGUgdHJhbnNjcmlwdCBvdXRwdXQsIGluIG9uZSBvZiB0aGVzZSBvcHRpb25zOiBqc29uLCB0ZXh0LCBzcnQsXG4gICAqIHZlcmJvc2VfanNvbiwgb3IgdnR0LlxuICAgKi9cbiAgcmVzcG9uc2VfZm9ybWF0PzogJ2pzb24nIHwgJ3RleHQnIHwgJ3NydCcgfCAndmVyYm9zZV9qc29uJyB8ICd2dHQnO1xuXG4gIC8qKlxuICAgKiBUaGUgc2FtcGxpbmcgdGVtcGVyYXR1cmUsIGJldHdlZW4gMCBhbmQgMS4gSGlnaGVyIHZhbHVlcyBsaWtlIDAuOCB3aWxsIG1ha2UgdGhlXG4gICAqIG91dHB1dCBtb3JlIHJhbmRvbSwgd2hpbGUgbG93ZXIgdmFsdWVzIGxpa2UgMC4yIHdpbGwgbWFrZSBpdCBtb3JlIGZvY3VzZWQgYW5kXG4gICAqIGRldGVybWluaXN0aWMuIElmIHNldCB0byAwLCB0aGUgbW9kZWwgd2lsbCB1c2VcbiAgICogW2xvZyBwcm9iYWJpbGl0eV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTG9nX3Byb2JhYmlsaXR5KSB0b1xuICAgKiBhdXRvbWF0aWNhbGx5IGluY3JlYXNlIHRoZSB0ZW1wZXJhdHVyZSB1bnRpbCBjZXJ0YWluIHRocmVzaG9sZHMgYXJlIGhpdC5cbiAgICovXG4gIHRlbXBlcmF0dXJlPzogbnVtYmVyO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIFRyYW5zY3JpcHRpb25zIHtcbiAgZXhwb3J0IGltcG9ydCBUcmFuc2NyaXB0aW9uID0gQVBJLlRyYW5zY3JpcHRpb247XG4gIGV4cG9ydCBpbXBvcnQgVHJhbnNjcmlwdGlvbkNyZWF0ZVBhcmFtcyA9IEFQSS5UcmFuc2NyaXB0aW9uQ3JlYXRlUGFyYW1zO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCAqIGFzIENvcmUgZnJvbSAnLi4vLi4vY29yZS5qcyc7XG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gJy4uLy4uL3Jlc291cmNlLmpzJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuL2luZGV4LmpzJztcbmltcG9ydCB7IHR5cGUgVXBsb2FkYWJsZSwgbXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zIH0gZnJvbSAnLi4vLi4vY29yZS5qcyc7XG5cbmV4cG9ydCBjbGFzcyBUcmFuc2xhdGlvbnMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBUcmFuc2xhdGVzIGF1ZGlvIGludG8gRW5nbGlzaC5cbiAgICovXG4gIGNyZWF0ZShib2R5OiBUcmFuc2xhdGlvbkNyZWF0ZVBhcmFtcywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8VHJhbnNsYXRpb24+IHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KCcvYXVkaW8vdHJhbnNsYXRpb25zJywgbXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zKHsgYm9keSwgLi4ub3B0aW9ucyB9KSk7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBUcmFuc2xhdGlvbiB7XG4gIHRleHQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUcmFuc2xhdGlvbkNyZWF0ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBUaGUgYXVkaW8gZmlsZSBvYmplY3QgKG5vdCBmaWxlIG5hbWUpIHRyYW5zbGF0ZSwgaW4gb25lIG9mIHRoZXNlIGZvcm1hdHM6IGZsYWMsXG4gICAqIG1wMywgbXA0LCBtcGVnLCBtcGdhLCBtNGEsIG9nZywgd2F2LCBvciB3ZWJtLlxuICAgKi9cbiAgZmlsZTogVXBsb2FkYWJsZTtcblxuICAvKipcbiAgICogSUQgb2YgdGhlIG1vZGVsIHRvIHVzZS4gT25seSBgd2hpc3Blci0xYCBpcyBjdXJyZW50bHkgYXZhaWxhYmxlLlxuICAgKi9cbiAgbW9kZWw6IChzdHJpbmcgJiB7fSkgfCAnd2hpc3Blci0xJztcblxuICAvKipcbiAgICogQW4gb3B0aW9uYWwgdGV4dCB0byBndWlkZSB0aGUgbW9kZWwncyBzdHlsZSBvciBjb250aW51ZSBhIHByZXZpb3VzIGF1ZGlvXG4gICAqIHNlZ21lbnQuIFRoZSBbcHJvbXB0XSgvZG9jcy9ndWlkZXMvc3BlZWNoLXRvLXRleHQvcHJvbXB0aW5nKSBzaG91bGQgYmUgaW5cbiAgICogRW5nbGlzaC5cbiAgICovXG4gIHByb21wdD86IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGZvcm1hdCBvZiB0aGUgdHJhbnNjcmlwdCBvdXRwdXQsIGluIG9uZSBvZiB0aGVzZSBvcHRpb25zOiBqc29uLCB0ZXh0LCBzcnQsXG4gICAqIHZlcmJvc2VfanNvbiwgb3IgdnR0LlxuICAgKi9cbiAgcmVzcG9uc2VfZm9ybWF0Pzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgc2FtcGxpbmcgdGVtcGVyYXR1cmUsIGJldHdlZW4gMCBhbmQgMS4gSGlnaGVyIHZhbHVlcyBsaWtlIDAuOCB3aWxsIG1ha2UgdGhlXG4gICAqIG91dHB1dCBtb3JlIHJhbmRvbSwgd2hpbGUgbG93ZXIgdmFsdWVzIGxpa2UgMC4yIHdpbGwgbWFrZSBpdCBtb3JlIGZvY3VzZWQgYW5kXG4gICAqIGRldGVybWluaXN0aWMuIElmIHNldCB0byAwLCB0aGUgbW9kZWwgd2lsbCB1c2VcbiAgICogW2xvZyBwcm9iYWJpbGl0eV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTG9nX3Byb2JhYmlsaXR5KSB0b1xuICAgKiBhdXRvbWF0aWNhbGx5IGluY3JlYXNlIHRoZSB0ZW1wZXJhdHVyZSB1bnRpbCBjZXJ0YWluIHRocmVzaG9sZHMgYXJlIGhpdC5cbiAgICovXG4gIHRlbXBlcmF0dXJlPzogbnVtYmVyO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIFRyYW5zbGF0aW9ucyB7XG4gIGV4cG9ydCBpbXBvcnQgVHJhbnNsYXRpb24gPSBBUEkuVHJhbnNsYXRpb247XG4gIGV4cG9ydCBpbXBvcnQgVHJhbnNsYXRpb25DcmVhdGVQYXJhbXMgPSBBUEkuVHJhbnNsYXRpb25DcmVhdGVQYXJhbXM7XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi8uLi9yZXNvdXJjZS5qcyc7XG5pbXBvcnQgeyBUcmFuc2NyaXB0aW9ucyB9IGZyb20gJy4vdHJhbnNjcmlwdGlvbnMuanMnO1xuaW1wb3J0IHsgVHJhbnNsYXRpb25zIH0gZnJvbSAnLi90cmFuc2xhdGlvbnMuanMnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXguanMnO1xuXG5leHBvcnQgY2xhc3MgQXVkaW8gZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIHRyYW5zY3JpcHRpb25zOiBUcmFuc2NyaXB0aW9ucyA9IG5ldyBUcmFuc2NyaXB0aW9ucyh0aGlzLmNsaWVudCk7XG4gIHRyYW5zbGF0aW9uczogVHJhbnNsYXRpb25zID0gbmV3IFRyYW5zbGF0aW9ucyh0aGlzLmNsaWVudCk7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQXVkaW8ge1xuICBleHBvcnQgaW1wb3J0IFRyYW5zY3JpcHRpb25zID0gQVBJLlRyYW5zY3JpcHRpb25zO1xuICBleHBvcnQgaW1wb3J0IFRyYW5zY3JpcHRpb24gPSBBUEkuVHJhbnNjcmlwdGlvbjtcbiAgZXhwb3J0IGltcG9ydCBUcmFuc2NyaXB0aW9uQ3JlYXRlUGFyYW1zID0gQVBJLlRyYW5zY3JpcHRpb25DcmVhdGVQYXJhbXM7XG5cbiAgZXhwb3J0IGltcG9ydCBUcmFuc2xhdGlvbnMgPSBBUEkuVHJhbnNsYXRpb25zO1xuICBleHBvcnQgaW1wb3J0IFRyYW5zbGF0aW9uID0gQVBJLlRyYW5zbGF0aW9uO1xuICBleHBvcnQgaW1wb3J0IFRyYW5zbGF0aW9uQ3JlYXRlUGFyYW1zID0gQVBJLlRyYW5zbGF0aW9uQ3JlYXRlUGFyYW1zO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCAqIGFzIENvcmUgZnJvbSAnLi4vLi4vY29yZS5qcyc7XG5pbXBvcnQgeyBBUElQcm9taXNlIH0gZnJvbSAnLi4vLi4vY29yZS5qcyc7XG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gJy4uLy4uL3Jlc291cmNlLmpzJztcbmltcG9ydCAqIGFzIENvbXBsZXRpb25zXyBmcm9tICcuLi9jb21wbGV0aW9ucy5qcyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleC5qcyc7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tICcuLi8uLi9zdHJlYW1pbmcuanMnO1xuXG5leHBvcnQgY2xhc3MgQ29tcGxldGlvbnMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbW9kZWwgcmVzcG9uc2UgZm9yIHRoZSBnaXZlbiBjaGF0IGNvbnZlcnNhdGlvbi5cbiAgICovXG4gIGNyZWF0ZShcbiAgICBib2R5OiBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxDaGF0Q29tcGxldGlvbj47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08Q2hhdENvbXBsZXRpb25DaHVuaz4+O1xuICBjcmVhdGUoXG4gICAgYm9keTogQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNCYXNlLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPFN0cmVhbTxDaGF0Q29tcGxldGlvbkNodW5rPiB8IENoYXRDb21wbGV0aW9uPjtcbiAgY3JlYXRlKFxuICAgIGJvZHk6IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPENoYXRDb21wbGV0aW9uPiB8IEFQSVByb21pc2U8U3RyZWFtPENoYXRDb21wbGV0aW9uQ2h1bms+PiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2NoYXQvY29tcGxldGlvbnMnLCB7IGJvZHksIC4uLm9wdGlvbnMsIHN0cmVhbTogYm9keS5zdHJlYW0gPz8gZmFsc2UgfSkgYXNcbiAgICAgIHwgQVBJUHJvbWlzZTxDaGF0Q29tcGxldGlvbj5cbiAgICAgIHwgQVBJUHJvbWlzZTxTdHJlYW08Q2hhdENvbXBsZXRpb25DaHVuaz4+O1xuICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGNoYXQgY29tcGxldGlvbiByZXNwb25zZSByZXR1cm5lZCBieSBtb2RlbCwgYmFzZWQgb24gdGhlIHByb3ZpZGVkXG4gKiBpbnB1dC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDaGF0Q29tcGxldGlvbiB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY2hhdCBjb21wbGV0aW9uLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogQSBsaXN0IG9mIGNoYXQgY29tcGxldGlvbiBjaG9pY2VzLiBDYW4gYmUgbW9yZSB0aGFuIG9uZSBpZiBgbmAgaXMgZ3JlYXRlclxuICAgKiB0aGFuIDEuXG4gICAqL1xuICBjaG9pY2VzOiBBcnJheTxDaGF0Q29tcGxldGlvbi5DaG9pY2U+O1xuXG4gIC8qKlxuICAgKiBUaGUgVW5peCB0aW1lc3RhbXAgKGluIHNlY29uZHMpIG9mIHdoZW4gdGhlIGNoYXQgY29tcGxldGlvbiB3YXMgY3JlYXRlZC5cbiAgICovXG4gIGNyZWF0ZWQ6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG1vZGVsIHVzZWQgZm9yIHRoZSBjaGF0IGNvbXBsZXRpb24uXG4gICAqL1xuICBtb2RlbDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgb2JqZWN0IHR5cGUsIHdoaWNoIGlzIGFsd2F5cyBgY2hhdC5jb21wbGV0aW9uYC5cbiAgICovXG4gIG9iamVjdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBVc2FnZSBzdGF0aXN0aWNzIGZvciB0aGUgY29tcGxldGlvbiByZXF1ZXN0LlxuICAgKi9cbiAgdXNhZ2U/OiBDb21wbGV0aW9uc18uQ29tcGxldGlvblVzYWdlO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIENoYXRDb21wbGV0aW9uIHtcbiAgZXhwb3J0IGludGVyZmFjZSBDaG9pY2Uge1xuICAgIC8qKlxuICAgICAqIFRoZSByZWFzb24gdGhlIG1vZGVsIHN0b3BwZWQgZ2VuZXJhdGluZyB0b2tlbnMuIFRoaXMgd2lsbCBiZSBgc3RvcGAgaWYgdGhlIG1vZGVsXG4gICAgICogaGl0IGEgbmF0dXJhbCBzdG9wIHBvaW50IG9yIGEgcHJvdmlkZWQgc3RvcCBzZXF1ZW5jZSwgYGxlbmd0aGAgaWYgdGhlIG1heGltdW1cbiAgICAgKiBudW1iZXIgb2YgdG9rZW5zIHNwZWNpZmllZCBpbiB0aGUgcmVxdWVzdCB3YXMgcmVhY2hlZCwgb3IgYGZ1bmN0aW9uX2NhbGxgIGlmIHRoZVxuICAgICAqIG1vZGVsIGNhbGxlZCBhIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGZpbmlzaF9yZWFzb246ICdzdG9wJyB8ICdsZW5ndGgnIHwgJ2Z1bmN0aW9uX2NhbGwnO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGluZGV4IG9mIHRoZSBjaG9pY2UgaW4gdGhlIGxpc3Qgb2YgY2hvaWNlcy5cbiAgICAgKi9cbiAgICBpbmRleDogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogQSBjaGF0IGNvbXBsZXRpb24gbWVzc2FnZSBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsLlxuICAgICAqL1xuICAgIG1lc3NhZ2U6IENoYXRDb21wbGV0aW9uTWVzc2FnZTtcbiAgfVxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgYSBzdHJlYW1lZCBjaHVuayBvZiBhIGNoYXQgY29tcGxldGlvbiByZXNwb25zZSByZXR1cm5lZCBieSBtb2RlbCxcbiAqIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBpbnB1dC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBDaGF0Q29tcGxldGlvbkNodW5rIHtcbiAgLyoqXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBjaGF0IGNvbXBsZXRpb24gY2h1bmsuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgY2hhdCBjb21wbGV0aW9uIGNob2ljZXMuIENhbiBiZSBtb3JlIHRoYW4gb25lIGlmIGBuYCBpcyBncmVhdGVyXG4gICAqIHRoYW4gMS5cbiAgICovXG4gIGNob2ljZXM6IEFycmF5PENoYXRDb21wbGV0aW9uQ2h1bmsuQ2hvaWNlPjtcblxuICAvKipcbiAgICogVGhlIFVuaXggdGltZXN0YW1wIChpbiBzZWNvbmRzKSBvZiB3aGVuIHRoZSBjaGF0IGNvbXBsZXRpb24gY2h1bmsgd2FzIGNyZWF0ZWQuXG4gICAqL1xuICBjcmVhdGVkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBtb2RlbCB0byBnZW5lcmF0ZSB0aGUgY29tcGxldGlvbi5cbiAgICovXG4gIG1vZGVsOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgdHlwZSwgd2hpY2ggaXMgYWx3YXlzIGBjaGF0LmNvbXBsZXRpb24uY2h1bmtgLlxuICAgKi9cbiAgb2JqZWN0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQ2hhdENvbXBsZXRpb25DaHVuayB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgQ2hvaWNlIHtcbiAgICAvKipcbiAgICAgKiBBIGNoYXQgY29tcGxldGlvbiBkZWx0YSBnZW5lcmF0ZWQgYnkgc3RyZWFtZWQgbW9kZWwgcmVzcG9uc2VzLlxuICAgICAqL1xuICAgIGRlbHRhOiBDaG9pY2UuRGVsdGE7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcmVhc29uIHRoZSBtb2RlbCBzdG9wcGVkIGdlbmVyYXRpbmcgdG9rZW5zLiBUaGlzIHdpbGwgYmUgYHN0b3BgIGlmIHRoZSBtb2RlbFxuICAgICAqIGhpdCBhIG5hdHVyYWwgc3RvcCBwb2ludCBvciBhIHByb3ZpZGVkIHN0b3Agc2VxdWVuY2UsIGBsZW5ndGhgIGlmIHRoZSBtYXhpbXVtXG4gICAgICogbnVtYmVyIG9mIHRva2VucyBzcGVjaWZpZWQgaW4gdGhlIHJlcXVlc3Qgd2FzIHJlYWNoZWQsIG9yIGBmdW5jdGlvbl9jYWxsYCBpZiB0aGVcbiAgICAgKiBtb2RlbCBjYWxsZWQgYSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBmaW5pc2hfcmVhc29uOiAnc3RvcCcgfCAnbGVuZ3RoJyB8ICdmdW5jdGlvbl9jYWxsJyB8IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaW5kZXggb2YgdGhlIGNob2ljZSBpbiB0aGUgbGlzdCBvZiBjaG9pY2VzLlxuICAgICAqL1xuICAgIGluZGV4OiBudW1iZXI7XG4gIH1cblxuICBleHBvcnQgbmFtZXNwYWNlIENob2ljZSB7XG4gICAgLyoqXG4gICAgICogQSBjaGF0IGNvbXBsZXRpb24gZGVsdGEgZ2VuZXJhdGVkIGJ5IHN0cmVhbWVkIG1vZGVsIHJlc3BvbnNlcy5cbiAgICAgKi9cbiAgICBleHBvcnQgaW50ZXJmYWNlIERlbHRhIHtcbiAgICAgIC8qKlxuICAgICAgICogVGhlIGNvbnRlbnRzIG9mIHRoZSBjaHVuayBtZXNzYWdlLlxuICAgICAgICovXG4gICAgICBjb250ZW50Pzogc3RyaW5nIHwgbnVsbDtcblxuICAgICAgLyoqXG4gICAgICAgKiBUaGUgbmFtZSBhbmQgYXJndW1lbnRzIG9mIGEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgY2FsbGVkLCBhcyBnZW5lcmF0ZWQgYnkgdGhlXG4gICAgICAgKiBtb2RlbC5cbiAgICAgICAqL1xuICAgICAgZnVuY3Rpb25fY2FsbD86IERlbHRhLkZ1bmN0aW9uQ2FsbDtcblxuICAgICAgLyoqXG4gICAgICAgKiBUaGUgcm9sZSBvZiB0aGUgYXV0aG9yIG9mIHRoaXMgbWVzc2FnZS5cbiAgICAgICAqL1xuICAgICAgcm9sZT86IENoYXRDb21wbGV0aW9uUm9sZTtcbiAgICB9XG5cbiAgICBleHBvcnQgbmFtZXNwYWNlIERlbHRhIHtcbiAgICAgIC8qKlxuICAgICAgICogVGhlIG5hbWUgYW5kIGFyZ3VtZW50cyBvZiBhIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCwgYXMgZ2VuZXJhdGVkIGJ5IHRoZVxuICAgICAgICogbW9kZWwuXG4gICAgICAgKi9cbiAgICAgIGV4cG9ydCBpbnRlcmZhY2UgRnVuY3Rpb25DYWxsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBhcmd1bWVudHMgdG8gY2FsbCB0aGUgZnVuY3Rpb24gd2l0aCwgYXMgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBpbiBKU09OXG4gICAgICAgICAqIGZvcm1hdC4gTm90ZSB0aGF0IHRoZSBtb2RlbCBkb2VzIG5vdCBhbHdheXMgZ2VuZXJhdGUgdmFsaWQgSlNPTiwgYW5kIG1heVxuICAgICAgICAgKiBoYWxsdWNpbmF0ZSBwYXJhbWV0ZXJzIG5vdCBkZWZpbmVkIGJ5IHlvdXIgZnVuY3Rpb24gc2NoZW1hLiBWYWxpZGF0ZSB0aGVcbiAgICAgICAgICogYXJndW1lbnRzIGluIHlvdXIgY29kZSBiZWZvcmUgY2FsbGluZyB5b3VyIGZ1bmN0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgYXJndW1lbnRzPzogc3RyaW5nO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbmFtZSBvZiB0aGUgZnVuY3Rpb24gdG8gY2FsbC5cbiAgICAgICAgICovXG4gICAgICAgIG5hbWU/OiBzdHJpbmc7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQSBjaGF0IGNvbXBsZXRpb24gbWVzc2FnZSBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIENoYXRDb21wbGV0aW9uTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBUaGUgY29udGVudHMgb2YgdGhlIG1lc3NhZ2UuXG4gICAqL1xuICBjb250ZW50OiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgcm9sZSBvZiB0aGUgYXV0aG9yIG9mIHRoaXMgbWVzc2FnZS5cbiAgICovXG4gIHJvbGU6IENoYXRDb21wbGV0aW9uUm9sZTtcblxuICAvKipcbiAgICogVGhlIG5hbWUgYW5kIGFyZ3VtZW50cyBvZiBhIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGJlIGNhbGxlZCwgYXMgZ2VuZXJhdGVkIGJ5IHRoZVxuICAgKiBtb2RlbC5cbiAgICovXG4gIGZ1bmN0aW9uX2NhbGw/OiBDaGF0Q29tcGxldGlvbk1lc3NhZ2UuRnVuY3Rpb25DYWxsO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIENoYXRDb21wbGV0aW9uTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBhbmQgYXJndW1lbnRzIG9mIGEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgY2FsbGVkLCBhcyBnZW5lcmF0ZWQgYnkgdGhlXG4gICAqIG1vZGVsLlxuICAgKi9cbiAgZXhwb3J0IGludGVyZmFjZSBGdW5jdGlvbkNhbGwge1xuICAgIC8qKlxuICAgICAqIFRoZSBhcmd1bWVudHMgdG8gY2FsbCB0aGUgZnVuY3Rpb24gd2l0aCwgYXMgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBpbiBKU09OXG4gICAgICogZm9ybWF0LiBOb3RlIHRoYXQgdGhlIG1vZGVsIGRvZXMgbm90IGFsd2F5cyBnZW5lcmF0ZSB2YWxpZCBKU09OLCBhbmQgbWF5XG4gICAgICogaGFsbHVjaW5hdGUgcGFyYW1ldGVycyBub3QgZGVmaW5lZCBieSB5b3VyIGZ1bmN0aW9uIHNjaGVtYS4gVmFsaWRhdGUgdGhlXG4gICAgICogYXJndW1lbnRzIGluIHlvdXIgY29kZSBiZWZvcmUgY2FsbGluZyB5b3VyIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIGFyZ3VtZW50czogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uIHRvIGNhbGwuXG4gICAgICovXG4gICAgbmFtZTogc3RyaW5nO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdENvbXBsZXRpb25NZXNzYWdlUGFyYW0ge1xuICAvKipcbiAgICogVGhlIGNvbnRlbnRzIG9mIHRoZSBtZXNzYWdlLiBgY29udGVudGAgaXMgcmVxdWlyZWQgZm9yIGFsbCBtZXNzYWdlcywgYW5kIG1heSBiZVxuICAgKiBudWxsIGZvciBhc3Npc3RhbnQgbWVzc2FnZXMgd2l0aCBmdW5jdGlvbiBjYWxscy5cbiAgICovXG4gIGNvbnRlbnQ6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSByb2xlIG9mIHRoZSBtZXNzYWdlcyBhdXRob3IuIE9uZSBvZiBgc3lzdGVtYCwgYHVzZXJgLCBgYXNzaXN0YW50YCwgb3JcbiAgICogYGZ1bmN0aW9uYC5cbiAgICovXG4gIHJvbGU6ICdzeXN0ZW0nIHwgJ3VzZXInIHwgJ2Fzc2lzdGFudCcgfCAnZnVuY3Rpb24nO1xuXG4gIC8qKlxuICAgKiBUaGUgbmFtZSBhbmQgYXJndW1lbnRzIG9mIGEgZnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgY2FsbGVkLCBhcyBnZW5lcmF0ZWQgYnkgdGhlXG4gICAqIG1vZGVsLlxuICAgKi9cbiAgZnVuY3Rpb25fY2FsbD86IENoYXRDb21wbGV0aW9uTWVzc2FnZVBhcmFtLkZ1bmN0aW9uQ2FsbDtcblxuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIGF1dGhvciBvZiB0aGlzIG1lc3NhZ2UuIGBuYW1lYCBpcyByZXF1aXJlZCBpZiByb2xlIGlzXG4gICAqIGBmdW5jdGlvbmAsIGFuZCBpdCBzaG91bGQgYmUgdGhlIG5hbWUgb2YgdGhlIGZ1bmN0aW9uIHdob3NlIHJlc3BvbnNlIGlzIGluIHRoZVxuICAgKiBgY29udGVudGAuIE1heSBjb250YWluIGEteiwgQS1aLCAwLTksIGFuZCB1bmRlcnNjb3Jlcywgd2l0aCBhIG1heGltdW0gbGVuZ3RoIG9mXG4gICAqIDY0IGNoYXJhY3RlcnMuXG4gICAqL1xuICBuYW1lPzogc3RyaW5nO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIENoYXRDb21wbGV0aW9uTWVzc2FnZVBhcmFtIHtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIGFuZCBhcmd1bWVudHMgb2YgYSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWQsIGFzIGdlbmVyYXRlZCBieSB0aGVcbiAgICogbW9kZWwuXG4gICAqL1xuICBleHBvcnQgaW50ZXJmYWNlIEZ1bmN0aW9uQ2FsbCB7XG4gICAgLyoqXG4gICAgICogVGhlIGFyZ3VtZW50cyB0byBjYWxsIHRoZSBmdW5jdGlvbiB3aXRoLCBhcyBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGluIEpTT05cbiAgICAgKiBmb3JtYXQuIE5vdGUgdGhhdCB0aGUgbW9kZWwgZG9lcyBub3QgYWx3YXlzIGdlbmVyYXRlIHZhbGlkIEpTT04sIGFuZCBtYXlcbiAgICAgKiBoYWxsdWNpbmF0ZSBwYXJhbWV0ZXJzIG5vdCBkZWZpbmVkIGJ5IHlvdXIgZnVuY3Rpb24gc2NoZW1hLiBWYWxpZGF0ZSB0aGVcbiAgICAgKiBhcmd1bWVudHMgaW4geW91ciBjb2RlIGJlZm9yZSBjYWxsaW5nIHlvdXIgZnVuY3Rpb24uXG4gICAgICovXG4gICAgYXJndW1lbnRzOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgZnVuY3Rpb24gdG8gY2FsbC5cbiAgICAgKi9cbiAgICBuYW1lOiBzdHJpbmc7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgcm9sZSBvZiB0aGUgYXV0aG9yIG9mIHRoaXMgbWVzc2FnZS5cbiAqL1xuZXhwb3J0IHR5cGUgQ2hhdENvbXBsZXRpb25Sb2xlID0gJ3N5c3RlbScgfCAndXNlcicgfCAnYXNzaXN0YW50JyB8ICdmdW5jdGlvbic7XG5cbi8qKlxuICogQGRlcHJlY2F0ZWQgQ2hhdENvbXBsZXRpb25NZXNzYWdlUGFyYW0gc2hvdWxkIGJlIHVzZWQgaW5zdGVhZFxuICovXG5leHBvcnQgdHlwZSBDcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3RNZXNzYWdlID0gQ2hhdENvbXBsZXRpb25NZXNzYWdlUGFyYW07XG5cbmV4cG9ydCB0eXBlIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zID1cbiAgfCBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZ1xuICB8IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xuXG5leHBvcnQgaW50ZXJmYWNlIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgbWVzc2FnZXMgY29tcHJpc2luZyB0aGUgY29udmVyc2F0aW9uIHNvIGZhci5cbiAgICogW0V4YW1wbGUgUHl0aG9uIGNvZGVdKGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYWkvb3BlbmFpLWNvb2tib29rL2Jsb2IvbWFpbi9leGFtcGxlcy9Ib3dfdG9fZm9ybWF0X2lucHV0c190b19DaGF0R1BUX21vZGVscy5pcHluYikuXG4gICAqL1xuICBtZXNzYWdlczogQXJyYXk8Q2hhdENvbXBsZXRpb25NZXNzYWdlUGFyYW0+O1xuXG4gIC8qKlxuICAgKiBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlLiBTZWUgdGhlXG4gICAqIFttb2RlbCBlbmRwb2ludCBjb21wYXRpYmlsaXR5XSgvZG9jcy9tb2RlbHMvbW9kZWwtZW5kcG9pbnQtY29tcGF0aWJpbGl0eSkgdGFibGVcbiAgICogZm9yIGRldGFpbHMgb24gd2hpY2ggbW9kZWxzIHdvcmsgd2l0aCB0aGUgQ2hhdCBBUEkuXG4gICAqL1xuICBtb2RlbDpcbiAgICB8IChzdHJpbmcgJiB7fSlcbiAgICB8ICdncHQtNCdcbiAgICB8ICdncHQtNC0wMzE0J1xuICAgIHwgJ2dwdC00LTA2MTMnXG4gICAgfCAnZ3B0LTQtMzJrJ1xuICAgIHwgJ2dwdC00LTMyay0wMzE0J1xuICAgIHwgJ2dwdC00LTMyay0wNjEzJ1xuICAgIHwgJ2dwdC0zLjUtdHVyYm8nXG4gICAgfCAnZ3B0LTMuNS10dXJiby0xNmsnXG4gICAgfCAnZ3B0LTMuNS10dXJiby0wMzAxJ1xuICAgIHwgJ2dwdC0zLjUtdHVyYm8tMDYxMydcbiAgICB8ICdncHQtMy41LXR1cmJvLTE2ay0wNjEzJztcblxuICAvKipcbiAgICogTnVtYmVyIGJldHdlZW4gLTIuMCBhbmQgMi4wLiBQb3NpdGl2ZSB2YWx1ZXMgcGVuYWxpemUgbmV3IHRva2VucyBiYXNlZCBvbiB0aGVpclxuICAgKiBleGlzdGluZyBmcmVxdWVuY3kgaW4gdGhlIHRleHQgc28gZmFyLCBkZWNyZWFzaW5nIHRoZSBtb2RlbCdzIGxpa2VsaWhvb2QgdG9cbiAgICogcmVwZWF0IHRoZSBzYW1lIGxpbmUgdmVyYmF0aW0uXG4gICAqXG4gICAqIFtTZWUgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBmcmVxdWVuY3kgYW5kIHByZXNlbmNlIHBlbmFsdGllcy5dKC9kb2NzL2d1aWRlcy9ncHQvcGFyYW1ldGVyLWRldGFpbHMpXG4gICAqL1xuICBmcmVxdWVuY3lfcGVuYWx0eT86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIENvbnRyb2xzIGhvdyB0aGUgbW9kZWwgcmVzcG9uZHMgdG8gZnVuY3Rpb24gY2FsbHMuIFwibm9uZVwiIG1lYW5zIHRoZSBtb2RlbCBkb2VzXG4gICAqIG5vdCBjYWxsIGEgZnVuY3Rpb24sIGFuZCByZXNwb25kcyB0byB0aGUgZW5kLXVzZXIuIFwiYXV0b1wiIG1lYW5zIHRoZSBtb2RlbCBjYW5cbiAgICogcGljayBiZXR3ZWVuIGFuIGVuZC11c2VyIG9yIGNhbGxpbmcgYSBmdW5jdGlvbi4gU3BlY2lmeWluZyBhIHBhcnRpY3VsYXIgZnVuY3Rpb25cbiAgICogdmlhIGB7XCJuYW1lXCI6IFwibXlfZnVuY3Rpb25cIn1gIGZvcmNlcyB0aGUgbW9kZWwgdG8gY2FsbCB0aGF0IGZ1bmN0aW9uLiBcIm5vbmVcIiBpc1xuICAgKiB0aGUgZGVmYXVsdCB3aGVuIG5vIGZ1bmN0aW9ucyBhcmUgcHJlc2VudC4gXCJhdXRvXCIgaXMgdGhlIGRlZmF1bHQgaWYgZnVuY3Rpb25zXG4gICAqIGFyZSBwcmVzZW50LlxuICAgKi9cbiAgZnVuY3Rpb25fY2FsbD86ICdub25lJyB8ICdhdXRvJyB8IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zLkZ1bmN0aW9uQ2FsbE9wdGlvbjtcblxuICAvKipcbiAgICogQSBsaXN0IG9mIGZ1bmN0aW9ucyB0aGUgbW9kZWwgbWF5IGdlbmVyYXRlIEpTT04gaW5wdXRzIGZvci5cbiAgICovXG4gIGZ1bmN0aW9ucz86IEFycmF5PENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zLkZ1bmN0aW9uPjtcblxuICAvKipcbiAgICogTW9kaWZ5IHRoZSBsaWtlbGlob29kIG9mIHNwZWNpZmllZCB0b2tlbnMgYXBwZWFyaW5nIGluIHRoZSBjb21wbGV0aW9uLlxuICAgKlxuICAgKiBBY2NlcHRzIGEganNvbiBvYmplY3QgdGhhdCBtYXBzIHRva2VucyAoc3BlY2lmaWVkIGJ5IHRoZWlyIHRva2VuIElEIGluIHRoZVxuICAgKiB0b2tlbml6ZXIpIHRvIGFuIGFzc29jaWF0ZWQgYmlhcyB2YWx1ZSBmcm9tIC0xMDAgdG8gMTAwLiBNYXRoZW1hdGljYWxseSwgdGhlXG4gICAqIGJpYXMgaXMgYWRkZWQgdG8gdGhlIGxvZ2l0cyBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIHByaW9yIHRvIHNhbXBsaW5nLiBUaGUgZXhhY3RcbiAgICogZWZmZWN0IHdpbGwgdmFyeSBwZXIgbW9kZWwsIGJ1dCB2YWx1ZXMgYmV0d2VlbiAtMSBhbmQgMSBzaG91bGQgZGVjcmVhc2Ugb3JcbiAgICogaW5jcmVhc2UgbGlrZWxpaG9vZCBvZiBzZWxlY3Rpb247IHZhbHVlcyBsaWtlIC0xMDAgb3IgMTAwIHNob3VsZCByZXN1bHQgaW4gYSBiYW5cbiAgICogb3IgZXhjbHVzaXZlIHNlbGVjdGlvbiBvZiB0aGUgcmVsZXZhbnQgdG9rZW4uXG4gICAqL1xuICBsb2dpdF9iaWFzPzogUmVjb3JkPHN0cmluZywgbnVtYmVyPiB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiBbdG9rZW5zXSgvdG9rZW5pemVyKSB0byBnZW5lcmF0ZSBpbiB0aGUgY2hhdCBjb21wbGV0aW9uLlxuICAgKlxuICAgKiBUaGUgdG90YWwgbGVuZ3RoIG9mIGlucHV0IHRva2VucyBhbmQgZ2VuZXJhdGVkIHRva2VucyBpcyBsaW1pdGVkIGJ5IHRoZSBtb2RlbCdzXG4gICAqIGNvbnRleHQgbGVuZ3RoLlxuICAgKiBbRXhhbXBsZSBQeXRob24gY29kZV0oaHR0cHM6Ly9naXRodWIuY29tL29wZW5haS9vcGVuYWktY29va2Jvb2svYmxvYi9tYWluL2V4YW1wbGVzL0hvd190b19jb3VudF90b2tlbnNfd2l0aF90aWt0b2tlbi5pcHluYilcbiAgICogZm9yIGNvdW50aW5nIHRva2Vucy5cbiAgICovXG4gIG1heF90b2tlbnM/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEhvdyBtYW55IGNoYXQgY29tcGxldGlvbiBjaG9pY2VzIHRvIGdlbmVyYXRlIGZvciBlYWNoIGlucHV0IG1lc3NhZ2UuXG4gICAqL1xuICBuPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogTnVtYmVyIGJldHdlZW4gLTIuMCBhbmQgMi4wLiBQb3NpdGl2ZSB2YWx1ZXMgcGVuYWxpemUgbmV3IHRva2VucyBiYXNlZCBvblxuICAgKiB3aGV0aGVyIHRoZXkgYXBwZWFyIGluIHRoZSB0ZXh0IHNvIGZhciwgaW5jcmVhc2luZyB0aGUgbW9kZWwncyBsaWtlbGlob29kIHRvXG4gICAqIHRhbGsgYWJvdXQgbmV3IHRvcGljcy5cbiAgICpcbiAgICogW1NlZSBtb3JlIGluZm9ybWF0aW9uIGFib3V0IGZyZXF1ZW5jeSBhbmQgcHJlc2VuY2UgcGVuYWx0aWVzLl0oL2RvY3MvZ3VpZGVzL2dwdC9wYXJhbWV0ZXItZGV0YWlscylcbiAgICovXG4gIHByZXNlbmNlX3BlbmFsdHk/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBVcCB0byA0IHNlcXVlbmNlcyB3aGVyZSB0aGUgQVBJIHdpbGwgc3RvcCBnZW5lcmF0aW5nIGZ1cnRoZXIgdG9rZW5zLlxuICAgKi9cbiAgc3RvcD86IHN0cmluZyB8IG51bGwgfCBBcnJheTxzdHJpbmc+O1xuXG4gIC8qKlxuICAgKiBJZiBzZXQsIHBhcnRpYWwgbWVzc2FnZSBkZWx0YXMgd2lsbCBiZSBzZW50LCBsaWtlIGluIENoYXRHUFQuIFRva2VucyB3aWxsIGJlXG4gICAqIHNlbnQgYXMgZGF0YS1vbmx5XG4gICAqIFtzZXJ2ZXItc2VudCBldmVudHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzI0V2ZW50X3N0cmVhbV9mb3JtYXQpXG4gICAqIGFzIHRoZXkgYmVjb21lIGF2YWlsYWJsZSwgd2l0aCB0aGUgc3RyZWFtIHRlcm1pbmF0ZWQgYnkgYSBgZGF0YTogW0RPTkVdYFxuICAgKiBtZXNzYWdlLlxuICAgKiBbRXhhbXBsZSBQeXRob24gY29kZV0oaHR0cHM6Ly9naXRodWIuY29tL29wZW5haS9vcGVuYWktY29va2Jvb2svYmxvYi9tYWluL2V4YW1wbGVzL0hvd190b19zdHJlYW1fY29tcGxldGlvbnMuaXB5bmIpLlxuICAgKi9cbiAgc3RyZWFtPzogYm9vbGVhbiB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFdoYXQgc2FtcGxpbmcgdGVtcGVyYXR1cmUgdG8gdXNlLCBiZXR3ZWVuIDAgYW5kIDIuIEhpZ2hlciB2YWx1ZXMgbGlrZSAwLjggd2lsbFxuICAgKiBtYWtlIHRoZSBvdXRwdXQgbW9yZSByYW5kb20sIHdoaWxlIGxvd2VyIHZhbHVlcyBsaWtlIDAuMiB3aWxsIG1ha2UgaXQgbW9yZVxuICAgKiBmb2N1c2VkIGFuZCBkZXRlcm1pbmlzdGljLlxuICAgKlxuICAgKiBXZSBnZW5lcmFsbHkgcmVjb21tZW5kIGFsdGVyaW5nIHRoaXMgb3IgYHRvcF9wYCBidXQgbm90IGJvdGguXG4gICAqL1xuICB0ZW1wZXJhdHVyZT86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEFuIGFsdGVybmF0aXZlIHRvIHNhbXBsaW5nIHdpdGggdGVtcGVyYXR1cmUsIGNhbGxlZCBudWNsZXVzIHNhbXBsaW5nLCB3aGVyZSB0aGVcbiAgICogbW9kZWwgY29uc2lkZXJzIHRoZSByZXN1bHRzIG9mIHRoZSB0b2tlbnMgd2l0aCB0b3BfcCBwcm9iYWJpbGl0eSBtYXNzLiBTbyAwLjFcbiAgICogbWVhbnMgb25seSB0aGUgdG9rZW5zIGNvbXByaXNpbmcgdGhlIHRvcCAxMCUgcHJvYmFiaWxpdHkgbWFzcyBhcmUgY29uc2lkZXJlZC5cbiAgICpcbiAgICogV2UgZ2VuZXJhbGx5IHJlY29tbWVuZCBhbHRlcmluZyB0aGlzIG9yIGB0ZW1wZXJhdHVyZWAgYnV0IG5vdCBib3RoLlxuICAgKi9cbiAgdG9wX3A/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIHJlcHJlc2VudGluZyB5b3VyIGVuZC11c2VyLCB3aGljaCBjYW4gaGVscCBPcGVuQUkgdG8gbW9uaXRvclxuICAgKiBhbmQgZGV0ZWN0IGFidXNlLiBbTGVhcm4gbW9yZV0oL2RvY3MvZ3VpZGVzL3NhZmV0eS1iZXN0LXByYWN0aWNlcy9lbmQtdXNlci1pZHMpLlxuICAgKi9cbiAgdXNlcj86IHN0cmluZztcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtcyB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgRnVuY3Rpb25DYWxsT3B0aW9uIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgZnVuY3Rpb24gdG8gY2FsbC5cbiAgICAgKi9cbiAgICBuYW1lOiBzdHJpbmc7XG4gIH1cblxuICBleHBvcnQgaW50ZXJmYWNlIEZ1bmN0aW9uIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbmFtZSBvZiB0aGUgZnVuY3Rpb24gdG8gYmUgY2FsbGVkLiBNdXN0IGJlIGEteiwgQS1aLCAwLTksIG9yIGNvbnRhaW5cbiAgICAgKiB1bmRlcnNjb3JlcyBhbmQgZGFzaGVzLCB3aXRoIGEgbWF4aW11bSBsZW5ndGggb2YgNjQuXG4gICAgICovXG4gICAgbmFtZTogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHBhcmFtZXRlcnMgdGhlIGZ1bmN0aW9ucyBhY2NlcHRzLCBkZXNjcmliZWQgYXMgYSBKU09OIFNjaGVtYSBvYmplY3QuIFNlZSB0aGVcbiAgICAgKiBbZ3VpZGVdKC9kb2NzL2d1aWRlcy9ncHQvZnVuY3Rpb24tY2FsbGluZykgZm9yIGV4YW1wbGVzLCBhbmQgdGhlXG4gICAgICogW0pTT04gU2NoZW1hIHJlZmVyZW5jZV0oaHR0cHM6Ly9qc29uLXNjaGVtYS5vcmcvdW5kZXJzdGFuZGluZy1qc29uLXNjaGVtYS8pIGZvclxuICAgICAqIGRvY3VtZW50YXRpb24gYWJvdXQgdGhlIGZvcm1hdC5cbiAgICAgKlxuICAgICAqIFRvIGRlc2NyaWJlIGEgZnVuY3Rpb24gdGhhdCBhY2NlcHRzIG5vIHBhcmFtZXRlcnMsIHByb3ZpZGUgdGhlIHZhbHVlXG4gICAgICogYHtcInR5cGVcIjogXCJvYmplY3RcIiwgXCJwcm9wZXJ0aWVzXCI6IHt9fWAuXG4gICAgICovXG4gICAgcGFyYW1ldGVyczogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG5cbiAgICAvKipcbiAgICAgKiBBIGRlc2NyaXB0aW9uIG9mIHdoYXQgdGhlIGZ1bmN0aW9uIGRvZXMsIHVzZWQgYnkgdGhlIG1vZGVsIHRvIGNob29zZSB3aGVuIGFuZFxuICAgICAqIGhvdyB0byBjYWxsIHRoZSBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgfVxuXG4gIGV4cG9ydCB0eXBlIENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nID0gQVBJLkNoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nO1xuICBleHBvcnQgdHlwZSBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyA9IEFQSS5DaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZztcbn1cblxuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXMgaW5zdGVhZFxuICovXG5leHBvcnQgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zID0gQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXM7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgZXh0ZW5kcyBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogSWYgc2V0LCBwYXJ0aWFsIG1lc3NhZ2UgZGVsdGFzIHdpbGwgYmUgc2VudCwgbGlrZSBpbiBDaGF0R1BULiBUb2tlbnMgd2lsbCBiZVxuICAgKiBzZW50IGFzIGRhdGEtb25seVxuICAgKiBbc2VydmVyLXNlbnQgZXZlbnRzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50cyNFdmVudF9zdHJlYW1fZm9ybWF0KVxuICAgKiBhcyB0aGV5IGJlY29tZSBhdmFpbGFibGUsIHdpdGggdGhlIHN0cmVhbSB0ZXJtaW5hdGVkIGJ5IGEgYGRhdGE6IFtET05FXWBcbiAgICogbWVzc2FnZS5cbiAgICogW0V4YW1wbGUgUHl0aG9uIGNvZGVdKGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYWkvb3BlbmFpLWNvb2tib29rL2Jsb2IvbWFpbi9leGFtcGxlcy9Ib3dfdG9fc3RyZWFtX2NvbXBsZXRpb25zLmlweW5iKS5cbiAgICovXG4gIHN0cmVhbT86IGZhbHNlIHwgbnVsbDtcbn1cblxuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgaW5zdGVhZFxuICovXG5leHBvcnQgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nID0gQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgZXh0ZW5kcyBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogSWYgc2V0LCBwYXJ0aWFsIG1lc3NhZ2UgZGVsdGFzIHdpbGwgYmUgc2VudCwgbGlrZSBpbiBDaGF0R1BULiBUb2tlbnMgd2lsbCBiZVxuICAgKiBzZW50IGFzIGRhdGEtb25seVxuICAgKiBbc2VydmVyLXNlbnQgZXZlbnRzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50cyNFdmVudF9zdHJlYW1fZm9ybWF0KVxuICAgKiBhcyB0aGV5IGJlY29tZSBhdmFpbGFibGUsIHdpdGggdGhlIHN0cmVhbSB0ZXJtaW5hdGVkIGJ5IGEgYGRhdGE6IFtET05FXWBcbiAgICogbWVzc2FnZS5cbiAgICogW0V4YW1wbGUgUHl0aG9uIGNvZGVdKGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYWkvb3BlbmFpLWNvb2tib29rL2Jsb2IvbWFpbi9leGFtcGxlcy9Ib3dfdG9fc3RyZWFtX2NvbXBsZXRpb25zLmlweW5iKS5cbiAgICovXG4gIHN0cmVhbTogdHJ1ZTtcbn1cblxuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgaW5zdGVhZFxuICovXG5leHBvcnQgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nID0gQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG5cbmV4cG9ydCBuYW1lc3BhY2UgQ29tcGxldGlvbnMge1xuICBleHBvcnQgaW1wb3J0IENoYXRDb21wbGV0aW9uID0gQVBJLkNoYXRDb21wbGV0aW9uO1xuICBleHBvcnQgaW1wb3J0IENoYXRDb21wbGV0aW9uQ2h1bmsgPSBBUEkuQ2hhdENvbXBsZXRpb25DaHVuaztcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvbk1lc3NhZ2UgPSBBUEkuQ2hhdENvbXBsZXRpb25NZXNzYWdlO1xuICBleHBvcnQgaW1wb3J0IENoYXRDb21wbGV0aW9uTWVzc2FnZVBhcmFtID0gQVBJLkNoYXRDb21wbGV0aW9uTWVzc2FnZVBhcmFtO1xuICBleHBvcnQgaW1wb3J0IENoYXRDb21wbGV0aW9uUm9sZSA9IEFQSS5DaGF0Q29tcGxldGlvblJvbGU7XG4gIGV4cG9ydCBpbXBvcnQgQ3JlYXRlQ2hhdENvbXBsZXRpb25SZXF1ZXN0TWVzc2FnZSA9IEFQSS5DcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3RNZXNzYWdlO1xuICBleHBvcnQgaW1wb3J0IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zID0gQVBJLkNoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25DcmVhdGVQYXJhbXMgPSBBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyA9IEFQSS5DaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nID0gQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgPSBBUEkuQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyA9IEFQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vLi4vcmVzb3VyY2UuanMnO1xuaW1wb3J0IHsgQ29tcGxldGlvbnMgfSBmcm9tICcuL2NvbXBsZXRpb25zLmpzJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuL2luZGV4LmpzJztcblxuZXhwb3J0IGNsYXNzIENoYXQgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIGNvbXBsZXRpb25zOiBDb21wbGV0aW9ucyA9IG5ldyBDb21wbGV0aW9ucyh0aGlzLmNsaWVudCk7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQ2hhdCB7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbnMgPSBBUEkuQ29tcGxldGlvbnM7XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb24gPSBBUEkuQ2hhdENvbXBsZXRpb247XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb25DaHVuayA9IEFQSS5DaGF0Q29tcGxldGlvbkNodW5rO1xuICBleHBvcnQgaW1wb3J0IENoYXRDb21wbGV0aW9uTWVzc2FnZSA9IEFQSS5DaGF0Q29tcGxldGlvbk1lc3NhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb25NZXNzYWdlUGFyYW0gPSBBUEkuQ2hhdENvbXBsZXRpb25NZXNzYWdlUGFyYW07XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb25Sb2xlID0gQVBJLkNoYXRDb21wbGV0aW9uUm9sZTtcbiAgZXhwb3J0IGltcG9ydCBDcmVhdGVDaGF0Q29tcGxldGlvblJlcXVlc3RNZXNzYWdlID0gQVBJLkNyZWF0ZUNoYXRDb21wbGV0aW9uUmVxdWVzdE1lc3NhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXMgPSBBUEkuQ2hhdENvbXBsZXRpb25DcmVhdGVQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyA9IEFQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IENoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nID0gQVBJLkNoYXRDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgPSBBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IGltcG9ydCBDaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyA9IEFQSS5DaGF0Q29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZztcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nID0gQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuLi9jb3JlLmpzJztcbmltcG9ydCB7IEFQSVByb21pc2UgfSBmcm9tICcuLi9jb3JlLmpzJztcbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vcmVzb3VyY2UuanMnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXguanMnO1xuaW1wb3J0IHsgU3RyZWFtIH0gZnJvbSAnLi4vc3RyZWFtaW5nLmpzJztcblxuZXhwb3J0IGNsYXNzIENvbXBsZXRpb25zIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIGNvbXBsZXRpb24gZm9yIHRoZSBwcm92aWRlZCBwcm9tcHQgYW5kIHBhcmFtZXRlcnMuXG4gICAqL1xuICBjcmVhdGUoYm9keTogQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBBUElQcm9taXNlPENvbXBsZXRpb24+O1xuICBjcmVhdGUoXG4gICAgYm9keTogQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08Q29tcGxldGlvbj4+O1xuICBjcmVhdGUoXG4gICAgYm9keTogQ29tcGxldGlvbkNyZWF0ZVBhcmFtc0Jhc2UsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8U3RyZWFtPENvbXBsZXRpb24+IHwgQ29tcGxldGlvbj47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPENvbXBsZXRpb24+IHwgQVBJUHJvbWlzZTxTdHJlYW08Q29tcGxldGlvbj4+IHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KCcvY29tcGxldGlvbnMnLCB7IGJvZHksIC4uLm9wdGlvbnMsIHN0cmVhbTogYm9keS5zdHJlYW0gPz8gZmFsc2UgfSkgYXNcbiAgICAgIHwgQVBJUHJvbWlzZTxDb21wbGV0aW9uPlxuICAgICAgfCBBUElQcm9taXNlPFN0cmVhbTxDb21wbGV0aW9uPj47XG4gIH1cbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgY29tcGxldGlvbiByZXNwb25zZSBmcm9tIHRoZSBBUEkuIE5vdGU6IGJvdGggdGhlIHN0cmVhbWVkIGFuZFxuICogbm9uLXN0cmVhbWVkIHJlc3BvbnNlIG9iamVjdHMgc2hhcmUgdGhlIHNhbWUgc2hhcGUgKHVubGlrZSB0aGUgY2hhdCBlbmRwb2ludCkuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbiB7XG4gIC8qKlxuICAgKiBBIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgY29tcGxldGlvbi5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBsaXN0IG9mIGNvbXBsZXRpb24gY2hvaWNlcyB0aGUgbW9kZWwgZ2VuZXJhdGVkIGZvciB0aGUgaW5wdXQgcHJvbXB0LlxuICAgKi9cbiAgY2hvaWNlczogQXJyYXk8Q29tcGxldGlvbkNob2ljZT47XG5cbiAgLyoqXG4gICAqIFRoZSBVbml4IHRpbWVzdGFtcCAoaW4gc2Vjb25kcykgb2Ygd2hlbiB0aGUgY29tcGxldGlvbiB3YXMgY3JlYXRlZC5cbiAgICovXG4gIGNyZWF0ZWQ6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG1vZGVsIHVzZWQgZm9yIGNvbXBsZXRpb24uXG4gICAqL1xuICBtb2RlbDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgb2JqZWN0IHR5cGUsIHdoaWNoIGlzIGFsd2F5cyBcInRleHRfY29tcGxldGlvblwiXG4gICAqL1xuICBvYmplY3Q6IHN0cmluZztcblxuICAvKipcbiAgICogVXNhZ2Ugc3RhdGlzdGljcyBmb3IgdGhlIGNvbXBsZXRpb24gcmVxdWVzdC5cbiAgICovXG4gIHVzYWdlPzogQ29tcGxldGlvblVzYWdlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBsZXRpb25DaG9pY2Uge1xuICAvKipcbiAgICogVGhlIHJlYXNvbiB0aGUgbW9kZWwgc3RvcHBlZCBnZW5lcmF0aW5nIHRva2Vucy4gVGhpcyB3aWxsIGJlIGBzdG9wYCBpZiB0aGUgbW9kZWxcbiAgICogaGl0IGEgbmF0dXJhbCBzdG9wIHBvaW50IG9yIGEgcHJvdmlkZWQgc3RvcCBzZXF1ZW5jZSwgb3IgYGxlbmd0aGAgaWYgdGhlIG1heGltdW1cbiAgICogbnVtYmVyIG9mIHRva2VucyBzcGVjaWZpZWQgaW4gdGhlIHJlcXVlc3Qgd2FzIHJlYWNoZWQuXG4gICAqL1xuICBmaW5pc2hfcmVhc29uOiAnc3RvcCcgfCAnbGVuZ3RoJztcblxuICBpbmRleDogbnVtYmVyO1xuXG4gIGxvZ3Byb2JzOiBDb21wbGV0aW9uQ2hvaWNlLkxvZ3Byb2JzIHwgbnVsbDtcblxuICB0ZXh0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQ29tcGxldGlvbkNob2ljZSB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgTG9ncHJvYnMge1xuICAgIHRleHRfb2Zmc2V0PzogQXJyYXk8bnVtYmVyPjtcblxuICAgIHRva2VuX2xvZ3Byb2JzPzogQXJyYXk8bnVtYmVyPjtcblxuICAgIHRva2Vucz86IEFycmF5PHN0cmluZz47XG5cbiAgICB0b3BfbG9ncHJvYnM/OiBBcnJheTxSZWNvcmQ8c3RyaW5nLCBudW1iZXI+PjtcbiAgfVxufVxuXG4vKipcbiAqIFVzYWdlIHN0YXRpc3RpY3MgZm9yIHRoZSBjb21wbGV0aW9uIHJlcXVlc3QuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvblVzYWdlIHtcbiAgLyoqXG4gICAqIE51bWJlciBvZiB0b2tlbnMgaW4gdGhlIGdlbmVyYXRlZCBjb21wbGV0aW9uLlxuICAgKi9cbiAgY29tcGxldGlvbl90b2tlbnM6IG51bWJlcjtcblxuICAvKipcbiAgICogTnVtYmVyIG9mIHRva2VucyBpbiB0aGUgcHJvbXB0LlxuICAgKi9cbiAgcHJvbXB0X3Rva2VuczogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUb3RhbCBudW1iZXIgb2YgdG9rZW5zIHVzZWQgaW4gdGhlIHJlcXVlc3QgKHByb21wdCArIGNvbXBsZXRpb24pLlxuICAgKi9cbiAgdG90YWxfdG9rZW5zOiBudW1iZXI7XG59XG5cbmV4cG9ydCB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXMgPSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIHwgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZztcblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBJRCBvZiB0aGUgbW9kZWwgdG8gdXNlLiBZb3UgY2FuIHVzZSB0aGVcbiAgICogW0xpc3QgbW9kZWxzXSgvZG9jcy9hcGktcmVmZXJlbmNlL21vZGVscy9saXN0KSBBUEkgdG8gc2VlIGFsbCBvZiB5b3VyIGF2YWlsYWJsZVxuICAgKiBtb2RlbHMsIG9yIHNlZSBvdXIgW01vZGVsIG92ZXJ2aWV3XSgvZG9jcy9tb2RlbHMvb3ZlcnZpZXcpIGZvciBkZXNjcmlwdGlvbnMgb2ZcbiAgICogdGhlbS5cbiAgICovXG4gIG1vZGVsOlxuICAgIHwgKHN0cmluZyAmIHt9KVxuICAgIHwgJ2JhYmJhZ2UtMDAyJ1xuICAgIHwgJ2RhdmluY2ktMDAyJ1xuICAgIHwgJ3RleHQtZGF2aW5jaS0wMDMnXG4gICAgfCAndGV4dC1kYXZpbmNpLTAwMidcbiAgICB8ICd0ZXh0LWRhdmluY2ktMDAxJ1xuICAgIHwgJ2NvZGUtZGF2aW5jaS0wMDInXG4gICAgfCAndGV4dC1jdXJpZS0wMDEnXG4gICAgfCAndGV4dC1iYWJiYWdlLTAwMSdcbiAgICB8ICd0ZXh0LWFkYS0wMDEnO1xuXG4gIC8qKlxuICAgKiBUaGUgcHJvbXB0KHMpIHRvIGdlbmVyYXRlIGNvbXBsZXRpb25zIGZvciwgZW5jb2RlZCBhcyBhIHN0cmluZywgYXJyYXkgb2ZcbiAgICogc3RyaW5ncywgYXJyYXkgb2YgdG9rZW5zLCBvciBhcnJheSBvZiB0b2tlbiBhcnJheXMuXG4gICAqXG4gICAqIE5vdGUgdGhhdCA8fGVuZG9mdGV4dHw+IGlzIHRoZSBkb2N1bWVudCBzZXBhcmF0b3IgdGhhdCB0aGUgbW9kZWwgc2VlcyBkdXJpbmdcbiAgICogdHJhaW5pbmcsIHNvIGlmIGEgcHJvbXB0IGlzIG5vdCBzcGVjaWZpZWQgdGhlIG1vZGVsIHdpbGwgZ2VuZXJhdGUgYXMgaWYgZnJvbSB0aGVcbiAgICogYmVnaW5uaW5nIG9mIGEgbmV3IGRvY3VtZW50LlxuICAgKi9cbiAgcHJvbXB0OiBzdHJpbmcgfCBBcnJheTxzdHJpbmc+IHwgQXJyYXk8bnVtYmVyPiB8IEFycmF5PEFycmF5PG51bWJlcj4+IHwgbnVsbDtcblxuICAvKipcbiAgICogR2VuZXJhdGVzIGBiZXN0X29mYCBjb21wbGV0aW9ucyBzZXJ2ZXItc2lkZSBhbmQgcmV0dXJucyB0aGUgXCJiZXN0XCIgKHRoZSBvbmUgd2l0aFxuICAgKiB0aGUgaGlnaGVzdCBsb2cgcHJvYmFiaWxpdHkgcGVyIHRva2VuKS4gUmVzdWx0cyBjYW5ub3QgYmUgc3RyZWFtZWQuXG4gICAqXG4gICAqIFdoZW4gdXNlZCB3aXRoIGBuYCwgYGJlc3Rfb2ZgIGNvbnRyb2xzIHRoZSBudW1iZXIgb2YgY2FuZGlkYXRlIGNvbXBsZXRpb25zIGFuZFxuICAgKiBgbmAgc3BlY2lmaWVzIGhvdyBtYW55IHRvIHJldHVybiBcdTIwMTMgYGJlc3Rfb2ZgIG11c3QgYmUgZ3JlYXRlciB0aGFuIGBuYC5cbiAgICpcbiAgICogKipOb3RlOioqIEJlY2F1c2UgdGhpcyBwYXJhbWV0ZXIgZ2VuZXJhdGVzIG1hbnkgY29tcGxldGlvbnMsIGl0IGNhbiBxdWlja2x5XG4gICAqIGNvbnN1bWUgeW91ciB0b2tlbiBxdW90YS4gVXNlIGNhcmVmdWxseSBhbmQgZW5zdXJlIHRoYXQgeW91IGhhdmUgcmVhc29uYWJsZVxuICAgKiBzZXR0aW5ncyBmb3IgYG1heF90b2tlbnNgIGFuZCBgc3RvcGAuXG4gICAqL1xuICBiZXN0X29mPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogRWNobyBiYWNrIHRoZSBwcm9tcHQgaW4gYWRkaXRpb24gdG8gdGhlIGNvbXBsZXRpb25cbiAgICovXG4gIGVjaG8/OiBib29sZWFuIHwgbnVsbDtcblxuICAvKipcbiAgICogTnVtYmVyIGJldHdlZW4gLTIuMCBhbmQgMi4wLiBQb3NpdGl2ZSB2YWx1ZXMgcGVuYWxpemUgbmV3IHRva2VucyBiYXNlZCBvbiB0aGVpclxuICAgKiBleGlzdGluZyBmcmVxdWVuY3kgaW4gdGhlIHRleHQgc28gZmFyLCBkZWNyZWFzaW5nIHRoZSBtb2RlbCdzIGxpa2VsaWhvb2QgdG9cbiAgICogcmVwZWF0IHRoZSBzYW1lIGxpbmUgdmVyYmF0aW0uXG4gICAqXG4gICAqIFtTZWUgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCBmcmVxdWVuY3kgYW5kIHByZXNlbmNlIHBlbmFsdGllcy5dKC9kb2NzL2d1aWRlcy9ncHQvcGFyYW1ldGVyLWRldGFpbHMpXG4gICAqL1xuICBmcmVxdWVuY3lfcGVuYWx0eT86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIE1vZGlmeSB0aGUgbGlrZWxpaG9vZCBvZiBzcGVjaWZpZWQgdG9rZW5zIGFwcGVhcmluZyBpbiB0aGUgY29tcGxldGlvbi5cbiAgICpcbiAgICogQWNjZXB0cyBhIGpzb24gb2JqZWN0IHRoYXQgbWFwcyB0b2tlbnMgKHNwZWNpZmllZCBieSB0aGVpciB0b2tlbiBJRCBpbiB0aGUgR1BUXG4gICAqIHRva2VuaXplcikgdG8gYW4gYXNzb2NpYXRlZCBiaWFzIHZhbHVlIGZyb20gLTEwMCB0byAxMDAuIFlvdSBjYW4gdXNlIHRoaXNcbiAgICogW3Rva2VuaXplciB0b29sXSgvdG9rZW5pemVyP3ZpZXc9YnBlKSAod2hpY2ggd29ya3MgZm9yIGJvdGggR1BULTIgYW5kIEdQVC0zKSB0b1xuICAgKiBjb252ZXJ0IHRleHQgdG8gdG9rZW4gSURzLiBNYXRoZW1hdGljYWxseSwgdGhlIGJpYXMgaXMgYWRkZWQgdG8gdGhlIGxvZ2l0c1xuICAgKiBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIHByaW9yIHRvIHNhbXBsaW5nLiBUaGUgZXhhY3QgZWZmZWN0IHdpbGwgdmFyeSBwZXIgbW9kZWwsXG4gICAqIGJ1dCB2YWx1ZXMgYmV0d2VlbiAtMSBhbmQgMSBzaG91bGQgZGVjcmVhc2Ugb3IgaW5jcmVhc2UgbGlrZWxpaG9vZCBvZiBzZWxlY3Rpb247XG4gICAqIHZhbHVlcyBsaWtlIC0xMDAgb3IgMTAwIHNob3VsZCByZXN1bHQgaW4gYSBiYW4gb3IgZXhjbHVzaXZlIHNlbGVjdGlvbiBvZiB0aGVcbiAgICogcmVsZXZhbnQgdG9rZW4uXG4gICAqXG4gICAqIEFzIGFuIGV4YW1wbGUsIHlvdSBjYW4gcGFzcyBge1wiNTAyNTZcIjogLTEwMH1gIHRvIHByZXZlbnQgdGhlIDx8ZW5kb2Z0ZXh0fD4gdG9rZW5cbiAgICogZnJvbSBiZWluZyBnZW5lcmF0ZWQuXG4gICAqL1xuICBsb2dpdF9iaWFzPzogUmVjb3JkPHN0cmluZywgbnVtYmVyPiB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEluY2x1ZGUgdGhlIGxvZyBwcm9iYWJpbGl0aWVzIG9uIHRoZSBgbG9ncHJvYnNgIG1vc3QgbGlrZWx5IHRva2VucywgYXMgd2VsbCB0aGVcbiAgICogY2hvc2VuIHRva2Vucy4gRm9yIGV4YW1wbGUsIGlmIGBsb2dwcm9ic2AgaXMgNSwgdGhlIEFQSSB3aWxsIHJldHVybiBhIGxpc3Qgb2ZcbiAgICogdGhlIDUgbW9zdCBsaWtlbHkgdG9rZW5zLiBUaGUgQVBJIHdpbGwgYWx3YXlzIHJldHVybiB0aGUgYGxvZ3Byb2JgIG9mIHRoZVxuICAgKiBzYW1wbGVkIHRva2VuLCBzbyB0aGVyZSBtYXkgYmUgdXAgdG8gYGxvZ3Byb2JzKzFgIGVsZW1lbnRzIGluIHRoZSByZXNwb25zZS5cbiAgICpcbiAgICogVGhlIG1heGltdW0gdmFsdWUgZm9yIGBsb2dwcm9ic2AgaXMgNS5cbiAgICovXG4gIGxvZ3Byb2JzPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIFt0b2tlbnNdKC90b2tlbml6ZXIpIHRvIGdlbmVyYXRlIGluIHRoZSBjb21wbGV0aW9uLlxuICAgKlxuICAgKiBUaGUgdG9rZW4gY291bnQgb2YgeW91ciBwcm9tcHQgcGx1cyBgbWF4X3Rva2Vuc2AgY2Fubm90IGV4Y2VlZCB0aGUgbW9kZWwnc1xuICAgKiBjb250ZXh0IGxlbmd0aC5cbiAgICogW0V4YW1wbGUgUHl0aG9uIGNvZGVdKGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYWkvb3BlbmFpLWNvb2tib29rL2Jsb2IvbWFpbi9leGFtcGxlcy9Ib3dfdG9fY291bnRfdG9rZW5zX3dpdGhfdGlrdG9rZW4uaXB5bmIpXG4gICAqIGZvciBjb3VudGluZyB0b2tlbnMuXG4gICAqL1xuICBtYXhfdG9rZW5zPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogSG93IG1hbnkgY29tcGxldGlvbnMgdG8gZ2VuZXJhdGUgZm9yIGVhY2ggcHJvbXB0LlxuICAgKlxuICAgKiAqKk5vdGU6KiogQmVjYXVzZSB0aGlzIHBhcmFtZXRlciBnZW5lcmF0ZXMgbWFueSBjb21wbGV0aW9ucywgaXQgY2FuIHF1aWNrbHlcbiAgICogY29uc3VtZSB5b3VyIHRva2VuIHF1b3RhLiBVc2UgY2FyZWZ1bGx5IGFuZCBlbnN1cmUgdGhhdCB5b3UgaGF2ZSByZWFzb25hYmxlXG4gICAqIHNldHRpbmdzIGZvciBgbWF4X3Rva2Vuc2AgYW5kIGBzdG9wYC5cbiAgICovXG4gIG4/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgYmV0d2VlbiAtMi4wIGFuZCAyLjAuIFBvc2l0aXZlIHZhbHVlcyBwZW5hbGl6ZSBuZXcgdG9rZW5zIGJhc2VkIG9uXG4gICAqIHdoZXRoZXIgdGhleSBhcHBlYXIgaW4gdGhlIHRleHQgc28gZmFyLCBpbmNyZWFzaW5nIHRoZSBtb2RlbCdzIGxpa2VsaWhvb2QgdG9cbiAgICogdGFsayBhYm91dCBuZXcgdG9waWNzLlxuICAgKlxuICAgKiBbU2VlIG1vcmUgaW5mb3JtYXRpb24gYWJvdXQgZnJlcXVlbmN5IGFuZCBwcmVzZW5jZSBwZW5hbHRpZXMuXSgvZG9jcy9ndWlkZXMvZ3B0L3BhcmFtZXRlci1kZXRhaWxzKVxuICAgKi9cbiAgcHJlc2VuY2VfcGVuYWx0eT86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFVwIHRvIDQgc2VxdWVuY2VzIHdoZXJlIHRoZSBBUEkgd2lsbCBzdG9wIGdlbmVyYXRpbmcgZnVydGhlciB0b2tlbnMuIFRoZVxuICAgKiByZXR1cm5lZCB0ZXh0IHdpbGwgbm90IGNvbnRhaW4gdGhlIHN0b3Agc2VxdWVuY2UuXG4gICAqL1xuICBzdG9wPzogc3RyaW5nIHwgbnVsbCB8IEFycmF5PHN0cmluZz47XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gc3RyZWFtIGJhY2sgcGFydGlhbCBwcm9ncmVzcy4gSWYgc2V0LCB0b2tlbnMgd2lsbCBiZSBzZW50IGFzXG4gICAqIGRhdGEtb25seVxuICAgKiBbc2VydmVyLXNlbnQgZXZlbnRzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50cyNFdmVudF9zdHJlYW1fZm9ybWF0KVxuICAgKiBhcyB0aGV5IGJlY29tZSBhdmFpbGFibGUsIHdpdGggdGhlIHN0cmVhbSB0ZXJtaW5hdGVkIGJ5IGEgYGRhdGE6IFtET05FXWBcbiAgICogbWVzc2FnZS5cbiAgICogW0V4YW1wbGUgUHl0aG9uIGNvZGVdKGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYWkvb3BlbmFpLWNvb2tib29rL2Jsb2IvbWFpbi9leGFtcGxlcy9Ib3dfdG9fc3RyZWFtX2NvbXBsZXRpb25zLmlweW5iKS5cbiAgICovXG4gIHN0cmVhbT86IGJvb2xlYW4gfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgc3VmZml4IHRoYXQgY29tZXMgYWZ0ZXIgYSBjb21wbGV0aW9uIG9mIGluc2VydGVkIHRleHQuXG4gICAqL1xuICBzdWZmaXg/OiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBXaGF0IHNhbXBsaW5nIHRlbXBlcmF0dXJlIHRvIHVzZSwgYmV0d2VlbiAwIGFuZCAyLiBIaWdoZXIgdmFsdWVzIGxpa2UgMC44IHdpbGxcbiAgICogbWFrZSB0aGUgb3V0cHV0IG1vcmUgcmFuZG9tLCB3aGlsZSBsb3dlciB2YWx1ZXMgbGlrZSAwLjIgd2lsbCBtYWtlIGl0IG1vcmVcbiAgICogZm9jdXNlZCBhbmQgZGV0ZXJtaW5pc3RpYy5cbiAgICpcbiAgICogV2UgZ2VuZXJhbGx5IHJlY29tbWVuZCBhbHRlcmluZyB0aGlzIG9yIGB0b3BfcGAgYnV0IG5vdCBib3RoLlxuICAgKi9cbiAgdGVtcGVyYXR1cmU/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBBbiBhbHRlcm5hdGl2ZSB0byBzYW1wbGluZyB3aXRoIHRlbXBlcmF0dXJlLCBjYWxsZWQgbnVjbGV1cyBzYW1wbGluZywgd2hlcmUgdGhlXG4gICAqIG1vZGVsIGNvbnNpZGVycyB0aGUgcmVzdWx0cyBvZiB0aGUgdG9rZW5zIHdpdGggdG9wX3AgcHJvYmFiaWxpdHkgbWFzcy4gU28gMC4xXG4gICAqIG1lYW5zIG9ubHkgdGhlIHRva2VucyBjb21wcmlzaW5nIHRoZSB0b3AgMTAlIHByb2JhYmlsaXR5IG1hc3MgYXJlIGNvbnNpZGVyZWQuXG4gICAqXG4gICAqIFdlIGdlbmVyYWxseSByZWNvbW1lbmQgYWx0ZXJpbmcgdGhpcyBvciBgdGVtcGVyYXR1cmVgIGJ1dCBub3QgYm90aC5cbiAgICovXG4gIHRvcF9wPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvIG1vbml0b3JcbiAgICogYW5kIGRldGVjdCBhYnVzZS4gW0xlYXJuIG1vcmVdKC9kb2NzL2d1aWRlcy9zYWZldHktYmVzdC1wcmFjdGljZXMvZW5kLXVzZXItaWRzKS5cbiAgICovXG4gIHVzZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyB7XG4gIGV4cG9ydCB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgPSBBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyA9IEFQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgZXh0ZW5kcyBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHN0cmVhbSBiYWNrIHBhcnRpYWwgcHJvZ3Jlc3MuIElmIHNldCwgdG9rZW5zIHdpbGwgYmUgc2VudCBhc1xuICAgKiBkYXRhLW9ubHlcbiAgICogW3NlcnZlci1zZW50IGV2ZW50c10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZlci1zZW50X2V2ZW50cy9Vc2luZ19zZXJ2ZXItc2VudF9ldmVudHMjRXZlbnRfc3RyZWFtX2Zvcm1hdClcbiAgICogYXMgdGhleSBiZWNvbWUgYXZhaWxhYmxlLCB3aXRoIHRoZSBzdHJlYW0gdGVybWluYXRlZCBieSBhIGBkYXRhOiBbRE9ORV1gXG4gICAqIG1lc3NhZ2UuXG4gICAqIFtFeGFtcGxlIFB5dGhvbiBjb2RlXShodHRwczovL2dpdGh1Yi5jb20vb3BlbmFpL29wZW5haS1jb29rYm9vay9ibG9iL21haW4vZXhhbXBsZXMvSG93X3RvX3N0cmVhbV9jb21wbGV0aW9ucy5pcHluYikuXG4gICAqL1xuICBzdHJlYW0/OiBmYWxzZSB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyBleHRlbmRzIENvbXBsZXRpb25DcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gc3RyZWFtIGJhY2sgcGFydGlhbCBwcm9ncmVzcy4gSWYgc2V0LCB0b2tlbnMgd2lsbCBiZSBzZW50IGFzXG4gICAqIGRhdGEtb25seVxuICAgKiBbc2VydmVyLXNlbnQgZXZlbnRzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50cyNFdmVudF9zdHJlYW1fZm9ybWF0KVxuICAgKiBhcyB0aGV5IGJlY29tZSBhdmFpbGFibGUsIHdpdGggdGhlIHN0cmVhbSB0ZXJtaW5hdGVkIGJ5IGEgYGRhdGE6IFtET05FXWBcbiAgICogbWVzc2FnZS5cbiAgICogW0V4YW1wbGUgUHl0aG9uIGNvZGVdKGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYWkvb3BlbmFpLWNvb2tib29rL2Jsb2IvbWFpbi9leGFtcGxlcy9Ib3dfdG9fc3RyZWFtX2NvbXBsZXRpb25zLmlweW5iKS5cbiAgICovXG4gIHN0cmVhbTogdHJ1ZTtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDb21wbGV0aW9ucyB7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbiA9IEFQSS5Db21wbGV0aW9uO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25DaG9pY2UgPSBBUEkuQ29tcGxldGlvbkNob2ljZTtcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uVXNhZ2UgPSBBUEkuQ29tcGxldGlvblVzYWdlO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25DcmVhdGVQYXJhbXMgPSBBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nID0gQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyA9IEFQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCAqIGFzIENvcmUgZnJvbSAnLi4vY29yZS5qcyc7XG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gJy4uL3Jlc291cmNlLmpzJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuL2luZGV4LmpzJztcblxuZXhwb3J0IGNsYXNzIEVtYmVkZGluZ3MgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGVtYmVkZGluZyB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSBpbnB1dCB0ZXh0LlxuICAgKi9cbiAgY3JlYXRlKFxuICAgIGJvZHk6IEVtYmVkZGluZ0NyZWF0ZVBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5BUElQcm9taXNlPENyZWF0ZUVtYmVkZGluZ1Jlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2VtYmVkZGluZ3MnLCB7IGJvZHksIC4uLm9wdGlvbnMgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBDcmVhdGVFbWJlZGRpbmdSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBUaGUgbGlzdCBvZiBlbWJlZGRpbmdzIGdlbmVyYXRlZCBieSB0aGUgbW9kZWwuXG4gICAqL1xuICBkYXRhOiBBcnJheTxFbWJlZGRpbmc+O1xuXG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgbW9kZWwgdXNlZCB0byBnZW5lcmF0ZSB0aGUgZW1iZWRkaW5nLlxuICAgKi9cbiAgbW9kZWw6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG9iamVjdCB0eXBlLCB3aGljaCBpcyBhbHdheXMgXCJlbWJlZGRpbmdcIi5cbiAgICovXG4gIG9iamVjdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgdXNhZ2UgaW5mb3JtYXRpb24gZm9yIHRoZSByZXF1ZXN0LlxuICAgKi9cbiAgdXNhZ2U6IENyZWF0ZUVtYmVkZGluZ1Jlc3BvbnNlLlVzYWdlO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIENyZWF0ZUVtYmVkZGluZ1Jlc3BvbnNlIHtcbiAgLyoqXG4gICAqIFRoZSB1c2FnZSBpbmZvcm1hdGlvbiBmb3IgdGhlIHJlcXVlc3QuXG4gICAqL1xuICBleHBvcnQgaW50ZXJmYWNlIFVzYWdlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHRva2VucyB1c2VkIGJ5IHRoZSBwcm9tcHQuXG4gICAgICovXG4gICAgcHJvbXB0X3Rva2VuczogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgdXNlZCBieSB0aGUgcmVxdWVzdC5cbiAgICAgKi9cbiAgICB0b3RhbF90b2tlbnM6IG51bWJlcjtcbiAgfVxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgYW4gZW1iZWRkaW5nIHZlY3RvciByZXR1cm5lZCBieSBlbWJlZGRpbmcgZW5kcG9pbnQuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRW1iZWRkaW5nIHtcbiAgLyoqXG4gICAqIFRoZSBlbWJlZGRpbmcgdmVjdG9yLCB3aGljaCBpcyBhIGxpc3Qgb2YgZmxvYXRzLiBUaGUgbGVuZ3RoIG9mIHZlY3RvciBkZXBlbmRzIG9uXG4gICAqIHRoZSBtb2RlbCBhcyBsaXN0ZWQgaW4gdGhlIFtlbWJlZGRpbmcgZ3VpZGVdKC9kb2NzL2d1aWRlcy9lbWJlZGRpbmdzKS5cbiAgICovXG4gIGVtYmVkZGluZzogQXJyYXk8bnVtYmVyPjtcblxuICAvKipcbiAgICogVGhlIGluZGV4IG9mIHRoZSBlbWJlZGRpbmcgaW4gdGhlIGxpc3Qgb2YgZW1iZWRkaW5ncy5cbiAgICovXG4gIGluZGV4OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgdHlwZSwgd2hpY2ggaXMgYWx3YXlzIFwiZW1iZWRkaW5nXCIuXG4gICAqL1xuICBvYmplY3Q6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFbWJlZGRpbmdDcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogSW5wdXQgdGV4dCB0byBlbWJlZCwgZW5jb2RlZCBhcyBhIHN0cmluZyBvciBhcnJheSBvZiB0b2tlbnMuIFRvIGVtYmVkIG11bHRpcGxlXG4gICAqIGlucHV0cyBpbiBhIHNpbmdsZSByZXF1ZXN0LCBwYXNzIGFuIGFycmF5IG9mIHN0cmluZ3Mgb3IgYXJyYXkgb2YgdG9rZW4gYXJyYXlzLlxuICAgKiBFYWNoIGlucHV0IG11c3Qgbm90IGV4Y2VlZCB0aGUgbWF4IGlucHV0IHRva2VucyBmb3IgdGhlIG1vZGVsICg4MTkxIHRva2VucyBmb3JcbiAgICogYHRleHQtZW1iZWRkaW5nLWFkYS0wMDJgKS5cbiAgICogW0V4YW1wbGUgUHl0aG9uIGNvZGVdKGh0dHBzOi8vZ2l0aHViLmNvbS9vcGVuYWkvb3BlbmFpLWNvb2tib29rL2Jsb2IvbWFpbi9leGFtcGxlcy9Ib3dfdG9fY291bnRfdG9rZW5zX3dpdGhfdGlrdG9rZW4uaXB5bmIpXG4gICAqIGZvciBjb3VudGluZyB0b2tlbnMuXG4gICAqL1xuICBpbnB1dDogc3RyaW5nIHwgQXJyYXk8c3RyaW5nPiB8IEFycmF5PG51bWJlcj4gfCBBcnJheTxBcnJheTxudW1iZXI+PjtcblxuICAvKipcbiAgICogSUQgb2YgdGhlIG1vZGVsIHRvIHVzZS4gWW91IGNhbiB1c2UgdGhlXG4gICAqIFtMaXN0IG1vZGVsc10oL2RvY3MvYXBpLXJlZmVyZW5jZS9tb2RlbHMvbGlzdCkgQVBJIHRvIHNlZSBhbGwgb2YgeW91ciBhdmFpbGFibGVcbiAgICogbW9kZWxzLCBvciBzZWUgb3VyIFtNb2RlbCBvdmVydmlld10oL2RvY3MvbW9kZWxzL292ZXJ2aWV3KSBmb3IgZGVzY3JpcHRpb25zIG9mXG4gICAqIHRoZW0uXG4gICAqL1xuICBtb2RlbDogKHN0cmluZyAmIHt9KSB8ICd0ZXh0LWVtYmVkZGluZy1hZGEtMDAyJztcblxuICAvKipcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvIG1vbml0b3JcbiAgICogYW5kIGRldGVjdCBhYnVzZS4gW0xlYXJuIG1vcmVdKC9kb2NzL2d1aWRlcy9zYWZldHktYmVzdC1wcmFjdGljZXMvZW5kLXVzZXItaWRzKS5cbiAgICovXG4gIHVzZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgRW1iZWRkaW5ncyB7XG4gIGV4cG9ydCBpbXBvcnQgQ3JlYXRlRW1iZWRkaW5nUmVzcG9uc2UgPSBBUEkuQ3JlYXRlRW1iZWRkaW5nUmVzcG9uc2U7XG4gIGV4cG9ydCBpbXBvcnQgRW1iZWRkaW5nID0gQVBJLkVtYmVkZGluZztcbiAgZXhwb3J0IGltcG9ydCBFbWJlZGRpbmdDcmVhdGVQYXJhbXMgPSBBUEkuRW1iZWRkaW5nQ3JlYXRlUGFyYW1zO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCAqIGFzIENvcmUgZnJvbSAnLi4vY29yZS5qcyc7XG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gJy4uL3Jlc291cmNlLmpzJztcbmltcG9ydCAqIGFzIENvbXBsZXRpb25zIGZyb20gJy4vY29tcGxldGlvbnMuanMnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXguanMnO1xuXG5leHBvcnQgY2xhc3MgRWRpdHMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGVkaXQgZm9yIHRoZSBwcm92aWRlZCBpbnB1dCwgaW5zdHJ1Y3Rpb24sIGFuZCBwYXJhbWV0ZXJzLlxuICAgKlxuICAgKiBAZGVwcmVjYXRlZCBUaGUgRWRpdHMgQVBJIGlzIGRlcHJlY2F0ZWQ7IHBsZWFzZSB1c2UgQ2hhdCBDb21wbGV0aW9ucyBpbnN0ZWFkLlxuICAgKlxuICAgKiBodHRwczovL29wZW5haS5jb20vYmxvZy9ncHQtNC1hcGktZ2VuZXJhbC1hdmFpbGFiaWxpdHkjZGVwcmVjYXRpb24tb2YtdGhlLWVkaXRzLWFwaVxuICAgKi9cbiAgY3JlYXRlKGJvZHk6IEVkaXRDcmVhdGVQYXJhbXMsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEVkaXQ+IHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KCcvZWRpdHMnLCB7IGJvZHksIC4uLm9wdGlvbnMgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0IHtcbiAgLyoqXG4gICAqIEEgbGlzdCBvZiBlZGl0IGNob2ljZXMuIENhbiBiZSBtb3JlIHRoYW4gb25lIGlmIGBuYCBpcyBncmVhdGVyIHRoYW4gMS5cbiAgICovXG4gIGNob2ljZXM6IEFycmF5PEVkaXQuQ2hvaWNlPjtcblxuICAvKipcbiAgICogVGhlIFVuaXggdGltZXN0YW1wIChpbiBzZWNvbmRzKSBvZiB3aGVuIHRoZSBlZGl0IHdhcyBjcmVhdGVkLlxuICAgKi9cbiAgY3JlYXRlZDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgb2JqZWN0IHR5cGUsIHdoaWNoIGlzIGFsd2F5cyBgZWRpdGAuXG4gICAqL1xuICBvYmplY3Q6IHN0cmluZztcblxuICAvKipcbiAgICogVXNhZ2Ugc3RhdGlzdGljcyBmb3IgdGhlIGNvbXBsZXRpb24gcmVxdWVzdC5cbiAgICovXG4gIHVzYWdlOiBDb21wbGV0aW9ucy5Db21wbGV0aW9uVXNhZ2U7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgRWRpdCB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgQ2hvaWNlIHtcbiAgICAvKipcbiAgICAgKiBUaGUgcmVhc29uIHRoZSBtb2RlbCBzdG9wcGVkIGdlbmVyYXRpbmcgdG9rZW5zLiBUaGlzIHdpbGwgYmUgYHN0b3BgIGlmIHRoZSBtb2RlbFxuICAgICAqIGhpdCBhIG5hdHVyYWwgc3RvcCBwb2ludCBvciBhIHByb3ZpZGVkIHN0b3Agc2VxdWVuY2UsIG9yIGBsZW5ndGhgIGlmIHRoZSBtYXhpbXVtXG4gICAgICogbnVtYmVyIG9mIHRva2VucyBzcGVjaWZpZWQgaW4gdGhlIHJlcXVlc3Qgd2FzIHJlYWNoZWQuXG4gICAgICovXG4gICAgZmluaXNoX3JlYXNvbjogJ3N0b3AnIHwgJ2xlbmd0aCc7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgaW5kZXggb2YgdGhlIGNob2ljZSBpbiB0aGUgbGlzdCBvZiBjaG9pY2VzLlxuICAgICAqL1xuICAgIGluZGV4OiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZWRpdGVkIHJlc3VsdC5cbiAgICAgKi9cbiAgICB0ZXh0OiBzdHJpbmc7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBFZGl0Q3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIFRoZSBpbnN0cnVjdGlvbiB0aGF0IHRlbGxzIHRoZSBtb2RlbCBob3cgdG8gZWRpdCB0aGUgcHJvbXB0LlxuICAgKi9cbiAgaW5zdHJ1Y3Rpb246IHN0cmluZztcblxuICAvKipcbiAgICogSUQgb2YgdGhlIG1vZGVsIHRvIHVzZS4gWW91IGNhbiB1c2UgdGhlIGB0ZXh0LWRhdmluY2ktZWRpdC0wMDFgIG9yXG4gICAqIGBjb2RlLWRhdmluY2ktZWRpdC0wMDFgIG1vZGVsIHdpdGggdGhpcyBlbmRwb2ludC5cbiAgICovXG4gIG1vZGVsOiAoc3RyaW5nICYge30pIHwgJ3RleHQtZGF2aW5jaS1lZGl0LTAwMScgfCAnY29kZS1kYXZpbmNpLWVkaXQtMDAxJztcblxuICAvKipcbiAgICogVGhlIGlucHV0IHRleHQgdG8gdXNlIGFzIGEgc3RhcnRpbmcgcG9pbnQgZm9yIHRoZSBlZGl0LlxuICAgKi9cbiAgaW5wdXQ/OiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBIb3cgbWFueSBlZGl0cyB0byBnZW5lcmF0ZSBmb3IgdGhlIGlucHV0IGFuZCBpbnN0cnVjdGlvbi5cbiAgICovXG4gIG4/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBXaGF0IHNhbXBsaW5nIHRlbXBlcmF0dXJlIHRvIHVzZSwgYmV0d2VlbiAwIGFuZCAyLiBIaWdoZXIgdmFsdWVzIGxpa2UgMC44IHdpbGxcbiAgICogbWFrZSB0aGUgb3V0cHV0IG1vcmUgcmFuZG9tLCB3aGlsZSBsb3dlciB2YWx1ZXMgbGlrZSAwLjIgd2lsbCBtYWtlIGl0IG1vcmVcbiAgICogZm9jdXNlZCBhbmQgZGV0ZXJtaW5pc3RpYy5cbiAgICpcbiAgICogV2UgZ2VuZXJhbGx5IHJlY29tbWVuZCBhbHRlcmluZyB0aGlzIG9yIGB0b3BfcGAgYnV0IG5vdCBib3RoLlxuICAgKi9cbiAgdGVtcGVyYXR1cmU/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBBbiBhbHRlcm5hdGl2ZSB0byBzYW1wbGluZyB3aXRoIHRlbXBlcmF0dXJlLCBjYWxsZWQgbnVjbGV1cyBzYW1wbGluZywgd2hlcmUgdGhlXG4gICAqIG1vZGVsIGNvbnNpZGVycyB0aGUgcmVzdWx0cyBvZiB0aGUgdG9rZW5zIHdpdGggdG9wX3AgcHJvYmFiaWxpdHkgbWFzcy4gU28gMC4xXG4gICAqIG1lYW5zIG9ubHkgdGhlIHRva2VucyBjb21wcmlzaW5nIHRoZSB0b3AgMTAlIHByb2JhYmlsaXR5IG1hc3MgYXJlIGNvbnNpZGVyZWQuXG4gICAqXG4gICAqIFdlIGdlbmVyYWxseSByZWNvbW1lbmQgYWx0ZXJpbmcgdGhpcyBvciBgdGVtcGVyYXR1cmVgIGJ1dCBub3QgYm90aC5cbiAgICovXG4gIHRvcF9wPzogbnVtYmVyIHwgbnVsbDtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBFZGl0cyB7XG4gIGV4cG9ydCBpbXBvcnQgRWRpdCA9IEFQSS5FZGl0O1xuICBleHBvcnQgaW1wb3J0IEVkaXRDcmVhdGVQYXJhbXMgPSBBUEkuRWRpdENyZWF0ZVBhcmFtcztcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gJy4uL2NvcmUuanMnO1xuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi9yZXNvdXJjZS5qcyc7XG5pbXBvcnQgeyBzbGVlcCB9IGZyb20gJy4uL2NvcmUuanMnO1xuaW1wb3J0IHsgQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvciB9IGZyb20gJy4uL2Vycm9yLmpzJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuL2luZGV4LmpzJztcbmltcG9ydCB7IHR5cGUgVXBsb2FkYWJsZSwgbXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zIH0gZnJvbSAnLi4vY29yZS5qcyc7XG5pbXBvcnQgeyBQYWdlIH0gZnJvbSAnLi4vcGFnaW5hdGlvbi5qcyc7XG5cbmV4cG9ydCBjbGFzcyBGaWxlcyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIFVwbG9hZCBhIGZpbGUgdGhhdCBjb250YWlucyBkb2N1bWVudChzKSB0byBiZSB1c2VkIGFjcm9zcyB2YXJpb3VzXG4gICAqIGVuZHBvaW50cy9mZWF0dXJlcy4gQ3VycmVudGx5LCB0aGUgc2l6ZSBvZiBhbGwgdGhlIGZpbGVzIHVwbG9hZGVkIGJ5IG9uZVxuICAgKiBvcmdhbml6YXRpb24gY2FuIGJlIHVwIHRvIDEgR0IuIFBsZWFzZSBjb250YWN0IHVzIGlmIHlvdSBuZWVkIHRvIGluY3JlYXNlIHRoZVxuICAgKiBzdG9yYWdlIGxpbWl0LlxuICAgKi9cbiAgY3JlYXRlKGJvZHk6IEZpbGVDcmVhdGVQYXJhbXMsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEZpbGVPYmplY3Q+IHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KCcvZmlsZXMnLCBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMoeyBib2R5LCAuLi5vcHRpb25zIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGluZm9ybWF0aW9uIGFib3V0IGEgc3BlY2lmaWMgZmlsZS5cbiAgICovXG4gIHJldHJpZXZlKGZpbGVJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxGaWxlT2JqZWN0PiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KGAvZmlsZXMvJHtmaWxlSWR9YCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGxpc3Qgb2YgZmlsZXMgdGhhdCBiZWxvbmcgdG8gdGhlIHVzZXIncyBvcmdhbml6YXRpb24uXG4gICAqL1xuICBsaXN0KG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5QYWdlUHJvbWlzZTxGaWxlT2JqZWN0c1BhZ2UsIEZpbGVPYmplY3Q+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRBUElMaXN0KCcvZmlsZXMnLCBGaWxlT2JqZWN0c1BhZ2UsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIGZpbGUuXG4gICAqL1xuICBkZWwoZmlsZUlkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEZpbGVEZWxldGVkPiB7XG4gICAgcmV0dXJuIHRoaXMuZGVsZXRlKGAvZmlsZXMvJHtmaWxlSWR9YCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY29udGVudHMgb2YgdGhlIHNwZWNpZmllZCBmaWxlXG4gICAqL1xuICByZXRyaWV2ZUNvbnRlbnQoZmlsZUlkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPHN0cmluZz4ge1xuICAgIHJldHVybiB0aGlzLmdldChgL2ZpbGVzLyR7ZmlsZUlkfS9jb250ZW50YCwge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGhlYWRlcnM6IHsgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsIC4uLm9wdGlvbnM/LmhlYWRlcnMgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXYWl0cyBmb3IgdGhlIGdpdmVuIGZpbGUgdG8gYmUgcHJvY2Vzc2VkLCBkZWZhdWx0IHRpbWVvdXQgaXMgMzAgbWlucy5cbiAgICovXG4gIGFzeW5jIHdhaXRGb3JQcm9jZXNzaW5nKFxuICAgIGlkOiBzdHJpbmcsXG4gICAgeyBwb2xsSW50ZXJ2YWwgPSA1MDAwLCBtYXhXYWl0ID0gMzAgKiA2MCAqIDEwMDAgfTogeyBwb2xsSW50ZXJ2YWw/OiBudW1iZXI7IG1heFdhaXQ/OiBudW1iZXIgfSA9IHt9LFxuICApOiBQcm9taXNlPEZpbGVPYmplY3Q+IHtcbiAgICBjb25zdCBURVJNSU5BTF9TVEFURVMgPSBuZXcgU2V0KFsncHJvY2Vzc2VkJywgJ2Vycm9yJywgJ2RlbGV0ZWQnXSk7XG5cbiAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgbGV0IGZpbGUgPSBhd2FpdCB0aGlzLnJldHJpZXZlKGlkKTtcblxuICAgIHdoaWxlICghZmlsZS5zdGF0dXMgfHwgIVRFUk1JTkFMX1NUQVRFUy5oYXMoZmlsZS5zdGF0dXMpKSB7XG4gICAgICBhd2FpdCBzbGVlcChwb2xsSW50ZXJ2YWwpO1xuXG4gICAgICBmaWxlID0gYXdhaXQgdGhpcy5yZXRyaWV2ZShpZCk7XG4gICAgICBpZiAoRGF0ZS5ub3coKSAtIHN0YXJ0ID4gbWF4V2FpdCkge1xuICAgICAgICB0aHJvdyBuZXcgQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvcih7XG4gICAgICAgICAgbWVzc2FnZTogYEdpdmluZyB1cCBvbiB3YWl0aW5nIGZvciBmaWxlICR7aWR9IHRvIGZpbmlzaCBwcm9jZXNzaW5nIGFmdGVyICR7bWF4V2FpdH0gbWlsbGlzZWNvbmRzLmAsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmaWxlO1xuICB9XG59XG5cbi8qKlxuICogTm90ZTogbm8gcGFnaW5hdGlvbiBhY3R1YWxseSBvY2N1cnMgeWV0LCB0aGlzIGlzIGZvciBmb3J3YXJkcy1jb21wYXRpYmlsaXR5LlxuICovXG5leHBvcnQgY2xhc3MgRmlsZU9iamVjdHNQYWdlIGV4dGVuZHMgUGFnZTxGaWxlT2JqZWN0PiB7fVxuLy8gYWxpYXMgc28gd2UgY2FuIGV4cG9ydCBpdCBpbiB0aGUgbmFtZXNwYWNlXG50eXBlIF9GaWxlT2JqZWN0c1BhZ2UgPSBGaWxlT2JqZWN0c1BhZ2U7XG5cbmV4cG9ydCB0eXBlIEZpbGVDb250ZW50ID0gc3RyaW5nO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVEZWxldGVkIHtcbiAgaWQ6IHN0cmluZztcblxuICBkZWxldGVkOiBib29sZWFuO1xuXG4gIG9iamVjdDogc3RyaW5nO1xufVxuXG4vKipcbiAqIFRoZSBgRmlsZWAgb2JqZWN0IHJlcHJlc2VudHMgYSBkb2N1bWVudCB0aGF0IGhhcyBiZWVuIHVwbG9hZGVkIHRvIE9wZW5BSS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGaWxlT2JqZWN0IHtcbiAgLyoqXG4gICAqIFRoZSBmaWxlIGlkZW50aWZpZXIsIHdoaWNoIGNhbiBiZSByZWZlcmVuY2VkIGluIHRoZSBBUEkgZW5kcG9pbnRzLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIHNpemUgb2YgdGhlIGZpbGUgaW4gYnl0ZXMuXG4gICAqL1xuICBieXRlczogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgVW5peCB0aW1lc3RhbXAgKGluIHNlY29uZHMpIGZvciB3aGVuIHRoZSBmaWxlIHdhcyBjcmVhdGVkLlxuICAgKi9cbiAgY3JlYXRlZF9hdDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgZmlsZS5cbiAgICovXG4gIGZpbGVuYW1lOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgdHlwZSwgd2hpY2ggaXMgYWx3YXlzIFwiZmlsZVwiLlxuICAgKi9cbiAgb2JqZWN0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBpbnRlbmRlZCBwdXJwb3NlIG9mIHRoZSBmaWxlLiBDdXJyZW50bHksIG9ubHkgXCJmaW5lLXR1bmVcIiBpcyBzdXBwb3J0ZWQuXG4gICAqL1xuICBwdXJwb3NlOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHN0YXR1cyBvZiB0aGUgZmlsZSwgd2hpY2ggY2FuIGJlIGVpdGhlciBgdXBsb2FkZWRgLCBgcHJvY2Vzc2VkYCxcbiAgICogYHBlbmRpbmdgLCBgZXJyb3JgLCBgZGVsZXRpbmdgIG9yIGBkZWxldGVkYC5cbiAgICovXG4gIHN0YXR1cz86IHN0cmluZztcblxuICAvKipcbiAgICogQWRkaXRpb25hbCBkZXRhaWxzIGFib3V0IHRoZSBzdGF0dXMgb2YgdGhlIGZpbGUuIElmIHRoZSBmaWxlIGlzIGluIHRoZSBgZXJyb3JgXG4gICAqIHN0YXRlLCB0aGlzIHdpbGwgaW5jbHVkZSBhIG1lc3NhZ2UgZGVzY3JpYmluZyB0aGUgZXJyb3IuXG4gICAqL1xuICBzdGF0dXNfZGV0YWlscz86IHN0cmluZyB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmlsZUNyZWF0ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBOYW1lIG9mIHRoZSBbSlNPTiBMaW5lc10oaHR0cHM6Ly9qc29ubGluZXMucmVhZHRoZWRvY3MuaW8vZW4vbGF0ZXN0LykgZmlsZSB0byBiZVxuICAgKiB1cGxvYWRlZC5cbiAgICpcbiAgICogSWYgdGhlIGBwdXJwb3NlYCBpcyBzZXQgdG8gXCJmaW5lLXR1bmVcIiwgdGhlIGZpbGUgd2lsbCBiZSB1c2VkIGZvciBmaW5lLXR1bmluZy5cbiAgICovXG4gIGZpbGU6IFVwbG9hZGFibGU7XG5cbiAgLyoqXG4gICAqIFRoZSBpbnRlbmRlZCBwdXJwb3NlIG9mIHRoZSB1cGxvYWRlZCBkb2N1bWVudHMuXG4gICAqXG4gICAqIFVzZSBcImZpbmUtdHVuZVwiIGZvciBbZmluZS10dW5pbmddKC9kb2NzL2FwaS1yZWZlcmVuY2UvZmluZS10dW5pbmcpLiBUaGlzIGFsbG93c1xuICAgKiB1cyB0byB2YWxpZGF0ZSB0aGUgZm9ybWF0IG9mIHRoZSB1cGxvYWRlZCBmaWxlLlxuICAgKi9cbiAgcHVycG9zZTogc3RyaW5nO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEZpbGVzIHtcbiAgZXhwb3J0IGltcG9ydCBGaWxlQ29udGVudCA9IEFQSS5GaWxlQ29udGVudDtcbiAgZXhwb3J0IGltcG9ydCBGaWxlRGVsZXRlZCA9IEFQSS5GaWxlRGVsZXRlZDtcbiAgZXhwb3J0IGltcG9ydCBGaWxlT2JqZWN0ID0gQVBJLkZpbGVPYmplY3Q7XG4gIGV4cG9ydCB0eXBlIEZpbGVPYmplY3RzUGFnZSA9IF9GaWxlT2JqZWN0c1BhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgRmlsZUNyZWF0ZVBhcmFtcyA9IEFQSS5GaWxlQ3JlYXRlUGFyYW1zO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCAqIGFzIENvcmUgZnJvbSAnLi4vY29yZS5qcyc7XG5pbXBvcnQgeyBBUElQcm9taXNlIH0gZnJvbSAnLi4vY29yZS5qcyc7XG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gJy4uL3Jlc291cmNlLmpzJztcbmltcG9ydCAqIGFzIEZpbGVzIGZyb20gJy4vZmlsZXMuanMnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXguanMnO1xuaW1wb3J0IHsgUGFnZSB9IGZyb20gJy4uL3BhZ2luYXRpb24uanMnO1xuaW1wb3J0IHsgU3RyZWFtIH0gZnJvbSAnLi4vc3RyZWFtaW5nLmpzJztcblxuZXhwb3J0IGNsYXNzIEZpbmVUdW5lcyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBqb2IgdGhhdCBmaW5lLXR1bmVzIGEgc3BlY2lmaWVkIG1vZGVsIGZyb20gYSBnaXZlbiBkYXRhc2V0LlxuICAgKlxuICAgKiBSZXNwb25zZSBpbmNsdWRlcyBkZXRhaWxzIG9mIHRoZSBlbnF1ZXVlZCBqb2IgaW5jbHVkaW5nIGpvYiBzdGF0dXMgYW5kIHRoZSBuYW1lXG4gICAqIG9mIHRoZSBmaW5lLXR1bmVkIG1vZGVscyBvbmNlIGNvbXBsZXRlLlxuICAgKlxuICAgKiBbTGVhcm4gbW9yZSBhYm91dCBmaW5lLXR1bmluZ10oL2RvY3MvZ3VpZGVzL2xlZ2FjeS1maW5lLXR1bmluZylcbiAgICovXG4gIGNyZWF0ZShib2R5OiBGaW5lVHVuZUNyZWF0ZVBhcmFtcywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8RmluZVR1bmU+IHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KCcvZmluZS10dW5lcycsIHsgYm9keSwgLi4ub3B0aW9ucyB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIGluZm8gYWJvdXQgdGhlIGZpbmUtdHVuZSBqb2IuXG4gICAqXG4gICAqIFtMZWFybiBtb3JlIGFib3V0IGZpbmUtdHVuaW5nXSgvZG9jcy9ndWlkZXMvbGVnYWN5LWZpbmUtdHVuaW5nKVxuICAgKi9cbiAgcmV0cmlldmUoZmluZVR1bmVJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxGaW5lVHVuZT4ge1xuICAgIHJldHVybiB0aGlzLmdldChgL2ZpbmUtdHVuZXMvJHtmaW5lVHVuZUlkfWAsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3QgeW91ciBvcmdhbml6YXRpb24ncyBmaW5lLXR1bmluZyBqb2JzXG4gICAqL1xuICBsaXN0KG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5QYWdlUHJvbWlzZTxGaW5lVHVuZXNQYWdlLCBGaW5lVHVuZT4ge1xuICAgIHJldHVybiB0aGlzLmdldEFQSUxpc3QoJy9maW5lLXR1bmVzJywgRmluZVR1bmVzUGFnZSwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogSW1tZWRpYXRlbHkgY2FuY2VsIGEgZmluZS10dW5lIGpvYi5cbiAgICovXG4gIGNhbmNlbChmaW5lVHVuZUlkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEZpbmVUdW5lPiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdChgL2ZpbmUtdHVuZXMvJHtmaW5lVHVuZUlkfS9jYW5jZWxgLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgZmluZS1ncmFpbmVkIHN0YXR1cyB1cGRhdGVzIGZvciBhIGZpbmUtdHVuZSBqb2IuXG4gICAqL1xuICBsaXN0RXZlbnRzKFxuICAgIGZpbmVUdW5lSWQ6IHN0cmluZyxcbiAgICBxdWVyeT86IEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc05vblN0cmVhbWluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxGaW5lVHVuZUV2ZW50c0xpc3RSZXNwb25zZT47XG4gIGxpc3RFdmVudHMoXG4gICAgZmluZVR1bmVJZDogc3RyaW5nLFxuICAgIHF1ZXJ5OiBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNTdHJlYW1pbmcsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8U3RyZWFtPEZpbmVUdW5lRXZlbnQ+PjtcbiAgbGlzdEV2ZW50cyhcbiAgICBmaW5lVHVuZUlkOiBzdHJpbmcsXG4gICAgcXVlcnk/OiBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNCYXNlIHwgdW5kZWZpbmVkLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPFN0cmVhbTxGaW5lVHVuZUV2ZW50PiB8IEZpbmVUdW5lRXZlbnRzTGlzdFJlc3BvbnNlPjtcbiAgbGlzdEV2ZW50cyhcbiAgICBmaW5lVHVuZUlkOiBzdHJpbmcsXG4gICAgcXVlcnk/OiBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXMgfCB1bmRlZmluZWQsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8RmluZVR1bmVFdmVudHNMaXN0UmVzcG9uc2U+IHwgQVBJUHJvbWlzZTxTdHJlYW08RmluZVR1bmVFdmVudD4+IHtcbiAgICByZXR1cm4gdGhpcy5nZXQoYC9maW5lLXR1bmVzLyR7ZmluZVR1bmVJZH0vZXZlbnRzYCwge1xuICAgICAgcXVlcnksXG4gICAgICB0aW1lb3V0OiA4NjQwMDAwMCxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBzdHJlYW06IHF1ZXJ5Py5zdHJlYW0gPz8gZmFsc2UsXG4gICAgfSkgYXMgQVBJUHJvbWlzZTxGaW5lVHVuZUV2ZW50c0xpc3RSZXNwb25zZT4gfCBBUElQcm9taXNlPFN0cmVhbTxGaW5lVHVuZUV2ZW50Pj47XG4gIH1cbn1cblxuLyoqXG4gKiBOb3RlOiBubyBwYWdpbmF0aW9uIGFjdHVhbGx5IG9jY3VycyB5ZXQsIHRoaXMgaXMgZm9yIGZvcndhcmRzLWNvbXBhdGliaWxpdHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBGaW5lVHVuZXNQYWdlIGV4dGVuZHMgUGFnZTxGaW5lVHVuZT4ge31cbi8vIGFsaWFzIHNvIHdlIGNhbiBleHBvcnQgaXQgaW4gdGhlIG5hbWVzcGFjZVxudHlwZSBfRmluZVR1bmVzUGFnZSA9IEZpbmVUdW5lc1BhZ2U7XG5cbi8qKlxuICogVGhlIGBGaW5lVHVuZWAgb2JqZWN0IHJlcHJlc2VudHMgYSBsZWdhY3kgZmluZS10dW5lIGpvYiB0aGF0IGhhcyBiZWVuIGNyZWF0ZWRcbiAqIHRocm91Z2ggdGhlIEFQSS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGaW5lVHVuZSB7XG4gIC8qKlxuICAgKiBUaGUgb2JqZWN0IGlkZW50aWZpZXIsIHdoaWNoIGNhbiBiZSByZWZlcmVuY2VkIGluIHRoZSBBUEkgZW5kcG9pbnRzLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIFVuaXggdGltZXN0YW1wIChpbiBzZWNvbmRzKSBmb3Igd2hlbiB0aGUgZmluZS10dW5pbmcgam9iIHdhcyBjcmVhdGVkLlxuICAgKi9cbiAgY3JlYXRlZF9hdDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgZmluZS10dW5lZCBtb2RlbCB0aGF0IGlzIGJlaW5nIGNyZWF0ZWQuXG4gICAqL1xuICBmaW5lX3R1bmVkX21vZGVsOiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgaHlwZXJwYXJhbWV0ZXJzIHVzZWQgZm9yIHRoZSBmaW5lLXR1bmluZyBqb2IuIFNlZSB0aGVcbiAgICogW2ZpbmUtdHVuaW5nIGd1aWRlXSgvZG9jcy9ndWlkZXMvbGVnYWN5LWZpbmUtdHVuaW5nL2h5cGVycGFyYW1ldGVycykgZm9yIG1vcmVcbiAgICogZGV0YWlscy5cbiAgICovXG4gIGh5cGVycGFyYW1zOiBGaW5lVHVuZS5IeXBlcnBhcmFtcztcblxuICAvKipcbiAgICogVGhlIGJhc2UgbW9kZWwgdGhhdCBpcyBiZWluZyBmaW5lLXR1bmVkLlxuICAgKi9cbiAgbW9kZWw6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG9iamVjdCB0eXBlLCB3aGljaCBpcyBhbHdheXMgXCJmaW5lLXR1bmVcIi5cbiAgICovXG4gIG9iamVjdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgb3JnYW5pemF0aW9uIHRoYXQgb3ducyB0aGUgZmluZS10dW5pbmcgam9iLlxuICAgKi9cbiAgb3JnYW5pemF0aW9uX2lkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBjb21waWxlZCByZXN1bHRzIGZpbGVzIGZvciB0aGUgZmluZS10dW5pbmcgam9iLlxuICAgKi9cbiAgcmVzdWx0X2ZpbGVzOiBBcnJheTxGaWxlcy5GaWxlT2JqZWN0PjtcblxuICAvKipcbiAgICogVGhlIGN1cnJlbnQgc3RhdHVzIG9mIHRoZSBmaW5lLXR1bmluZyBqb2IsIHdoaWNoIGNhbiBiZSBlaXRoZXIgYGNyZWF0ZWRgLFxuICAgKiBgcnVubmluZ2AsIGBzdWNjZWVkZWRgLCBgZmFpbGVkYCwgb3IgYGNhbmNlbGxlZGAuXG4gICAqL1xuICBzdGF0dXM6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGxpc3Qgb2YgZmlsZXMgdXNlZCBmb3IgdHJhaW5pbmcuXG4gICAqL1xuICB0cmFpbmluZ19maWxlczogQXJyYXk8RmlsZXMuRmlsZU9iamVjdD47XG5cbiAgLyoqXG4gICAqIFRoZSBVbml4IHRpbWVzdGFtcCAoaW4gc2Vjb25kcykgZm9yIHdoZW4gdGhlIGZpbmUtdHVuaW5nIGpvYiB3YXMgbGFzdCB1cGRhdGVkLlxuICAgKi9cbiAgdXBkYXRlZF9hdDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgbGlzdCBvZiBmaWxlcyB1c2VkIGZvciB2YWxpZGF0aW9uLlxuICAgKi9cbiAgdmFsaWRhdGlvbl9maWxlczogQXJyYXk8RmlsZXMuRmlsZU9iamVjdD47XG5cbiAgLyoqXG4gICAqIFRoZSBsaXN0IG9mIGV2ZW50cyB0aGF0IGhhdmUgYmVlbiBvYnNlcnZlZCBpbiB0aGUgbGlmZWN5Y2xlIG9mIHRoZSBGaW5lVHVuZSBqb2IuXG4gICAqL1xuICBldmVudHM/OiBBcnJheTxGaW5lVHVuZUV2ZW50Pjtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBGaW5lVHVuZSB7XG4gIC8qKlxuICAgKiBUaGUgaHlwZXJwYXJhbWV0ZXJzIHVzZWQgZm9yIHRoZSBmaW5lLXR1bmluZyBqb2IuIFNlZSB0aGVcbiAgICogW2ZpbmUtdHVuaW5nIGd1aWRlXSgvZG9jcy9ndWlkZXMvbGVnYWN5LWZpbmUtdHVuaW5nL2h5cGVycGFyYW1ldGVycykgZm9yIG1vcmVcbiAgICogZGV0YWlscy5cbiAgICovXG4gIGV4cG9ydCBpbnRlcmZhY2UgSHlwZXJwYXJhbXMge1xuICAgIC8qKlxuICAgICAqIFRoZSBiYXRjaCBzaXplIHRvIHVzZSBmb3IgdHJhaW5pbmcuIFRoZSBiYXRjaCBzaXplIGlzIHRoZSBudW1iZXIgb2YgdHJhaW5pbmdcbiAgICAgKiBleGFtcGxlcyB1c2VkIHRvIHRyYWluIGEgc2luZ2xlIGZvcndhcmQgYW5kIGJhY2t3YXJkIHBhc3MuXG4gICAgICovXG4gICAgYmF0Y2hfc2l6ZTogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIGxlYXJuaW5nIHJhdGUgbXVsdGlwbGllciB0byB1c2UgZm9yIHRyYWluaW5nLlxuICAgICAqL1xuICAgIGxlYXJuaW5nX3JhdGVfbXVsdGlwbGllcjogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBlcG9jaHMgdG8gdHJhaW4gdGhlIG1vZGVsIGZvci4gQW4gZXBvY2ggcmVmZXJzIHRvIG9uZSBmdWxsIGN5Y2xlXG4gICAgICogdGhyb3VnaCB0aGUgdHJhaW5pbmcgZGF0YXNldC5cbiAgICAgKi9cbiAgICBuX2Vwb2NoczogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHdlaWdodCB0byB1c2UgZm9yIGxvc3Mgb24gdGhlIHByb21wdCB0b2tlbnMuXG4gICAgICovXG4gICAgcHJvbXB0X2xvc3Nfd2VpZ2h0OiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIGNsYXNzZXMgdG8gdXNlIGZvciBjb21wdXRpbmcgY2xhc3NpZmljYXRpb24gbWV0cmljcy5cbiAgICAgKi9cbiAgICBjbGFzc2lmaWNhdGlvbl9uX2NsYXNzZXM/OiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcG9zaXRpdmUgY2xhc3MgdG8gdXNlIGZvciBjb21wdXRpbmcgY2xhc3NpZmljYXRpb24gbWV0cmljcy5cbiAgICAgKi9cbiAgICBjbGFzc2lmaWNhdGlvbl9wb3NpdGl2ZV9jbGFzcz86IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIFRoZSBjbGFzc2lmaWNhdGlvbiBtZXRyaWNzIHRvIGNvbXB1dGUgdXNpbmcgdGhlIHZhbGlkYXRpb24gZGF0YXNldCBhdCB0aGUgZW5kIG9mXG4gICAgICogZXZlcnkgZXBvY2guXG4gICAgICovXG4gICAgY29tcHV0ZV9jbGFzc2lmaWNhdGlvbl9tZXRyaWNzPzogYm9vbGVhbjtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbmVUdW5lRXZlbnQge1xuICBjcmVhdGVkX2F0OiBudW1iZXI7XG5cbiAgbGV2ZWw6IHN0cmluZztcblxuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgb2JqZWN0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRmluZVR1bmVFdmVudHNMaXN0UmVzcG9uc2Uge1xuICBkYXRhOiBBcnJheTxGaW5lVHVuZUV2ZW50PjtcblxuICBvYmplY3Q6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaW5lVHVuZUNyZWF0ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBUaGUgSUQgb2YgYW4gdXBsb2FkZWQgZmlsZSB0aGF0IGNvbnRhaW5zIHRyYWluaW5nIGRhdGEuXG4gICAqXG4gICAqIFNlZSBbdXBsb2FkIGZpbGVdKC9kb2NzL2FwaS1yZWZlcmVuY2UvZmlsZXMvdXBsb2FkKSBmb3IgaG93IHRvIHVwbG9hZCBhIGZpbGUuXG4gICAqXG4gICAqIFlvdXIgZGF0YXNldCBtdXN0IGJlIGZvcm1hdHRlZCBhcyBhIEpTT05MIGZpbGUsIHdoZXJlIGVhY2ggdHJhaW5pbmcgZXhhbXBsZSBpcyBhXG4gICAqIEpTT04gb2JqZWN0IHdpdGggdGhlIGtleXMgXCJwcm9tcHRcIiBhbmQgXCJjb21wbGV0aW9uXCIuIEFkZGl0aW9uYWxseSwgeW91IG11c3RcbiAgICogdXBsb2FkIHlvdXIgZmlsZSB3aXRoIHRoZSBwdXJwb3NlIGBmaW5lLXR1bmVgLlxuICAgKlxuICAgKiBTZWUgdGhlXG4gICAqIFtmaW5lLXR1bmluZyBndWlkZV0oL2RvY3MvZ3VpZGVzL2xlZ2FjeS1maW5lLXR1bmluZy9jcmVhdGluZy10cmFpbmluZy1kYXRhKSBmb3JcbiAgICogbW9yZSBkZXRhaWxzLlxuICAgKi9cbiAgdHJhaW5pbmdfZmlsZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgYmF0Y2ggc2l6ZSB0byB1c2UgZm9yIHRyYWluaW5nLiBUaGUgYmF0Y2ggc2l6ZSBpcyB0aGUgbnVtYmVyIG9mIHRyYWluaW5nXG4gICAqIGV4YW1wbGVzIHVzZWQgdG8gdHJhaW4gYSBzaW5nbGUgZm9yd2FyZCBhbmQgYmFja3dhcmQgcGFzcy5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhlIGJhdGNoIHNpemUgd2lsbCBiZSBkeW5hbWljYWxseSBjb25maWd1cmVkIHRvIGJlIH4wLjIlIG9mIHRoZVxuICAgKiBudW1iZXIgb2YgZXhhbXBsZXMgaW4gdGhlIHRyYWluaW5nIHNldCwgY2FwcGVkIGF0IDI1NiAtIGluIGdlbmVyYWwsIHdlJ3ZlIGZvdW5kXG4gICAqIHRoYXQgbGFyZ2VyIGJhdGNoIHNpemVzIHRlbmQgdG8gd29yayBiZXR0ZXIgZm9yIGxhcmdlciBkYXRhc2V0cy5cbiAgICovXG4gIGJhdGNoX3NpemU/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBJZiB0aGlzIGlzIHByb3ZpZGVkLCB3ZSBjYWxjdWxhdGUgRi1iZXRhIHNjb3JlcyBhdCB0aGUgc3BlY2lmaWVkIGJldGEgdmFsdWVzLlxuICAgKiBUaGUgRi1iZXRhIHNjb3JlIGlzIGEgZ2VuZXJhbGl6YXRpb24gb2YgRi0xIHNjb3JlLiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgYmluYXJ5XG4gICAqIGNsYXNzaWZpY2F0aW9uLlxuICAgKlxuICAgKiBXaXRoIGEgYmV0YSBvZiAxIChpLmUuIHRoZSBGLTEgc2NvcmUpLCBwcmVjaXNpb24gYW5kIHJlY2FsbCBhcmUgZ2l2ZW4gdGhlIHNhbWVcbiAgICogd2VpZ2h0LiBBIGxhcmdlciBiZXRhIHNjb3JlIHB1dHMgbW9yZSB3ZWlnaHQgb24gcmVjYWxsIGFuZCBsZXNzIG9uIHByZWNpc2lvbi4gQVxuICAgKiBzbWFsbGVyIGJldGEgc2NvcmUgcHV0cyBtb3JlIHdlaWdodCBvbiBwcmVjaXNpb24gYW5kIGxlc3Mgb24gcmVjYWxsLlxuICAgKi9cbiAgY2xhc3NpZmljYXRpb25fYmV0YXM/OiBBcnJheTxudW1iZXI+IHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBjbGFzc2VzIGluIGEgY2xhc3NpZmljYXRpb24gdGFzay5cbiAgICpcbiAgICogVGhpcyBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQgZm9yIG11bHRpY2xhc3MgY2xhc3NpZmljYXRpb24uXG4gICAqL1xuICBjbGFzc2lmaWNhdGlvbl9uX2NsYXNzZXM/OiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgcG9zaXRpdmUgY2xhc3MgaW4gYmluYXJ5IGNsYXNzaWZpY2F0aW9uLlxuICAgKlxuICAgKiBUaGlzIHBhcmFtZXRlciBpcyBuZWVkZWQgdG8gZ2VuZXJhdGUgcHJlY2lzaW9uLCByZWNhbGwsIGFuZCBGMSBtZXRyaWNzIHdoZW5cbiAgICogZG9pbmcgYmluYXJ5IGNsYXNzaWZpY2F0aW9uLlxuICAgKi9cbiAgY2xhc3NpZmljYXRpb25fcG9zaXRpdmVfY2xhc3M/OiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBJZiBzZXQsIHdlIGNhbGN1bGF0ZSBjbGFzc2lmaWNhdGlvbi1zcGVjaWZpYyBtZXRyaWNzIHN1Y2ggYXMgYWNjdXJhY3kgYW5kIEYtMVxuICAgKiBzY29yZSB1c2luZyB0aGUgdmFsaWRhdGlvbiBzZXQgYXQgdGhlIGVuZCBvZiBldmVyeSBlcG9jaC4gVGhlc2UgbWV0cmljcyBjYW4gYmVcbiAgICogdmlld2VkIGluIHRoZVxuICAgKiBbcmVzdWx0cyBmaWxlXSgvZG9jcy9ndWlkZXMvbGVnYWN5LWZpbmUtdHVuaW5nL2FuYWx5emluZy15b3VyLWZpbmUtdHVuZWQtbW9kZWwpLlxuICAgKlxuICAgKiBJbiBvcmRlciB0byBjb21wdXRlIGNsYXNzaWZpY2F0aW9uIG1ldHJpY3MsIHlvdSBtdXN0IHByb3ZpZGUgYVxuICAgKiBgdmFsaWRhdGlvbl9maWxlYC4gQWRkaXRpb25hbGx5LCB5b3UgbXVzdCBzcGVjaWZ5IGBjbGFzc2lmaWNhdGlvbl9uX2NsYXNzZXNgIGZvclxuICAgKiBtdWx0aWNsYXNzIGNsYXNzaWZpY2F0aW9uIG9yIGBjbGFzc2lmaWNhdGlvbl9wb3NpdGl2ZV9jbGFzc2AgZm9yIGJpbmFyeVxuICAgKiBjbGFzc2lmaWNhdGlvbi5cbiAgICovXG4gIGNvbXB1dGVfY2xhc3NpZmljYXRpb25fbWV0cmljcz86IGJvb2xlYW4gfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbGVhcm5pbmcgcmF0ZSBtdWx0aXBsaWVyIHRvIHVzZSBmb3IgdHJhaW5pbmcuIFRoZSBmaW5lLXR1bmluZyBsZWFybmluZyByYXRlXG4gICAqIGlzIHRoZSBvcmlnaW5hbCBsZWFybmluZyByYXRlIHVzZWQgZm9yIHByZXRyYWluaW5nIG11bHRpcGxpZWQgYnkgdGhpcyB2YWx1ZS5cbiAgICpcbiAgICogQnkgZGVmYXVsdCwgdGhlIGxlYXJuaW5nIHJhdGUgbXVsdGlwbGllciBpcyB0aGUgMC4wNSwgMC4xLCBvciAwLjIgZGVwZW5kaW5nIG9uXG4gICAqIGZpbmFsIGBiYXRjaF9zaXplYCAobGFyZ2VyIGxlYXJuaW5nIHJhdGVzIHRlbmQgdG8gcGVyZm9ybSBiZXR0ZXIgd2l0aCBsYXJnZXJcbiAgICogYmF0Y2ggc2l6ZXMpLiBXZSByZWNvbW1lbmQgZXhwZXJpbWVudGluZyB3aXRoIHZhbHVlcyBpbiB0aGUgcmFuZ2UgMC4wMiB0byAwLjIgdG9cbiAgICogc2VlIHdoYXQgcHJvZHVjZXMgdGhlIGJlc3QgcmVzdWx0cy5cbiAgICovXG4gIGxlYXJuaW5nX3JhdGVfbXVsdGlwbGllcj86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBiYXNlIG1vZGVsIHRvIGZpbmUtdHVuZS4gWW91IGNhbiBzZWxlY3Qgb25lIG9mIFwiYWRhXCIsIFwiYmFiYmFnZVwiLFxuICAgKiBcImN1cmllXCIsIFwiZGF2aW5jaVwiLCBvciBhIGZpbmUtdHVuZWQgbW9kZWwgY3JlYXRlZCBhZnRlciAyMDIyLTA0LTIxIGFuZCBiZWZvcmVcbiAgICogMjAyMy0wOC0yMi4gVG8gbGVhcm4gbW9yZSBhYm91dCB0aGVzZSBtb2RlbHMsIHNlZSB0aGUgW01vZGVsc10oL2RvY3MvbW9kZWxzKVxuICAgKiBkb2N1bWVudGF0aW9uLlxuICAgKi9cbiAgbW9kZWw/OiAoc3RyaW5nICYge30pIHwgJ2FkYScgfCAnYmFiYmFnZScgfCAnY3VyaWUnIHwgJ2RhdmluY2knIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBlcG9jaHMgdG8gdHJhaW4gdGhlIG1vZGVsIGZvci4gQW4gZXBvY2ggcmVmZXJzIHRvIG9uZSBmdWxsIGN5Y2xlXG4gICAqIHRocm91Z2ggdGhlIHRyYWluaW5nIGRhdGFzZXQuXG4gICAqL1xuICBuX2Vwb2Nocz86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSB3ZWlnaHQgdG8gdXNlIGZvciBsb3NzIG9uIHRoZSBwcm9tcHQgdG9rZW5zLiBUaGlzIGNvbnRyb2xzIGhvdyBtdWNoIHRoZVxuICAgKiBtb2RlbCB0cmllcyB0byBsZWFybiB0byBnZW5lcmF0ZSB0aGUgcHJvbXB0IChhcyBjb21wYXJlZCB0byB0aGUgY29tcGxldGlvbiB3aGljaFxuICAgKiBhbHdheXMgaGFzIGEgd2VpZ2h0IG9mIDEuMCksIGFuZCBjYW4gYWRkIGEgc3RhYmlsaXppbmcgZWZmZWN0IHRvIHRyYWluaW5nIHdoZW5cbiAgICogY29tcGxldGlvbnMgYXJlIHNob3J0LlxuICAgKlxuICAgKiBJZiBwcm9tcHRzIGFyZSBleHRyZW1lbHkgbG9uZyAocmVsYXRpdmUgdG8gY29tcGxldGlvbnMpLCBpdCBtYXkgbWFrZSBzZW5zZSB0b1xuICAgKiByZWR1Y2UgdGhpcyB3ZWlnaHQgc28gYXMgdG8gYXZvaWQgb3Zlci1wcmlvcml0aXppbmcgbGVhcm5pbmcgdGhlIHByb21wdC5cbiAgICovXG4gIHByb21wdF9sb3NzX3dlaWdodD86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEEgc3RyaW5nIG9mIHVwIHRvIDQwIGNoYXJhY3RlcnMgdGhhdCB3aWxsIGJlIGFkZGVkIHRvIHlvdXIgZmluZS10dW5lZCBtb2RlbFxuICAgKiBuYW1lLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgYSBgc3VmZml4YCBvZiBcImN1c3RvbS1tb2RlbC1uYW1lXCIgd291bGQgcHJvZHVjZSBhIG1vZGVsIG5hbWUgbGlrZVxuICAgKiBgYWRhOmZ0LXlvdXItb3JnOmN1c3RvbS1tb2RlbC1uYW1lLTIwMjItMDItMTUtMDQtMjEtMDRgLlxuICAgKi9cbiAgc3VmZml4Pzogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIElEIG9mIGFuIHVwbG9hZGVkIGZpbGUgdGhhdCBjb250YWlucyB2YWxpZGF0aW9uIGRhdGEuXG4gICAqXG4gICAqIElmIHlvdSBwcm92aWRlIHRoaXMgZmlsZSwgdGhlIGRhdGEgaXMgdXNlZCB0byBnZW5lcmF0ZSB2YWxpZGF0aW9uIG1ldHJpY3NcbiAgICogcGVyaW9kaWNhbGx5IGR1cmluZyBmaW5lLXR1bmluZy4gVGhlc2UgbWV0cmljcyBjYW4gYmUgdmlld2VkIGluIHRoZVxuICAgKiBbZmluZS10dW5pbmcgcmVzdWx0cyBmaWxlXSgvZG9jcy9ndWlkZXMvbGVnYWN5LWZpbmUtdHVuaW5nL2FuYWx5emluZy15b3VyLWZpbmUtdHVuZWQtbW9kZWwpLlxuICAgKiBZb3VyIHRyYWluIGFuZCB2YWxpZGF0aW9uIGRhdGEgc2hvdWxkIGJlIG11dHVhbGx5IGV4Y2x1c2l2ZS5cbiAgICpcbiAgICogWW91ciBkYXRhc2V0IG11c3QgYmUgZm9ybWF0dGVkIGFzIGEgSlNPTkwgZmlsZSwgd2hlcmUgZWFjaCB2YWxpZGF0aW9uIGV4YW1wbGUgaXNcbiAgICogYSBKU09OIG9iamVjdCB3aXRoIHRoZSBrZXlzIFwicHJvbXB0XCIgYW5kIFwiY29tcGxldGlvblwiLiBBZGRpdGlvbmFsbHksIHlvdSBtdXN0XG4gICAqIHVwbG9hZCB5b3VyIGZpbGUgd2l0aCB0aGUgcHVycG9zZSBgZmluZS10dW5lYC5cbiAgICpcbiAgICogU2VlIHRoZVxuICAgKiBbZmluZS10dW5pbmcgZ3VpZGVdKC9kb2NzL2d1aWRlcy9sZWdhY3ktZmluZS10dW5pbmcvY3JlYXRpbmctdHJhaW5pbmctZGF0YSkgZm9yXG4gICAqIG1vcmUgZGV0YWlscy5cbiAgICovXG4gIHZhbGlkYXRpb25fZmlsZT86IHN0cmluZyB8IG51bGw7XG59XG5cbmV4cG9ydCB0eXBlIEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtcyA9XG4gIHwgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zTm9uU3RyZWFtaW5nXG4gIHwgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zU3RyZWFtaW5nO1xuXG5leHBvcnQgaW50ZXJmYWNlIEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogV2hldGhlciB0byBzdHJlYW0gZXZlbnRzIGZvciB0aGUgZmluZS10dW5lIGpvYi4gSWYgc2V0IHRvIHRydWUsIGV2ZW50cyB3aWxsIGJlXG4gICAqIHNlbnQgYXMgZGF0YS1vbmx5XG4gICAqIFtzZXJ2ZXItc2VudCBldmVudHNdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2ZXItc2VudF9ldmVudHMvVXNpbmdfc2VydmVyLXNlbnRfZXZlbnRzI0V2ZW50X3N0cmVhbV9mb3JtYXQpXG4gICAqIGFzIHRoZXkgYmVjb21lIGF2YWlsYWJsZS4gVGhlIHN0cmVhbSB3aWxsIHRlcm1pbmF0ZSB3aXRoIGEgYGRhdGE6IFtET05FXWBcbiAgICogbWVzc2FnZSB3aGVuIHRoZSBqb2IgaXMgZmluaXNoZWQgKHN1Y2NlZWRlZCwgY2FuY2VsbGVkLCBvciBmYWlsZWQpLlxuICAgKlxuICAgKiBJZiBzZXQgdG8gZmFsc2UsIG9ubHkgZXZlbnRzIGdlbmVyYXRlZCBzbyBmYXIgd2lsbCBiZSByZXR1cm5lZC5cbiAgICovXG4gIHN0cmVhbT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zIHtcbiAgZXhwb3J0IHR5cGUgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zTm9uU3RyZWFtaW5nID0gQVBJLkZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IHR5cGUgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zU3RyZWFtaW5nID0gQVBJLkZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc1N0cmVhbWluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNOb25TdHJlYW1pbmcgZXh0ZW5kcyBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gc3RyZWFtIGV2ZW50cyBmb3IgdGhlIGZpbmUtdHVuZSBqb2IuIElmIHNldCB0byB0cnVlLCBldmVudHMgd2lsbCBiZVxuICAgKiBzZW50IGFzIGRhdGEtb25seVxuICAgKiBbc2VydmVyLXNlbnQgZXZlbnRzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50cyNFdmVudF9zdHJlYW1fZm9ybWF0KVxuICAgKiBhcyB0aGV5IGJlY29tZSBhdmFpbGFibGUuIFRoZSBzdHJlYW0gd2lsbCB0ZXJtaW5hdGUgd2l0aCBhIGBkYXRhOiBbRE9ORV1gXG4gICAqIG1lc3NhZ2Ugd2hlbiB0aGUgam9iIGlzIGZpbmlzaGVkIChzdWNjZWVkZWQsIGNhbmNlbGxlZCwgb3IgZmFpbGVkKS5cbiAgICpcbiAgICogSWYgc2V0IHRvIGZhbHNlLCBvbmx5IGV2ZW50cyBnZW5lcmF0ZWQgc28gZmFyIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAqL1xuICBzdHJlYW0/OiBmYWxzZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNTdHJlYW1pbmcgZXh0ZW5kcyBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gc3RyZWFtIGV2ZW50cyBmb3IgdGhlIGZpbmUtdHVuZSBqb2IuIElmIHNldCB0byB0cnVlLCBldmVudHMgd2lsbCBiZVxuICAgKiBzZW50IGFzIGRhdGEtb25seVxuICAgKiBbc2VydmVyLXNlbnQgZXZlbnRzXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmVyLXNlbnRfZXZlbnRzL1VzaW5nX3NlcnZlci1zZW50X2V2ZW50cyNFdmVudF9zdHJlYW1fZm9ybWF0KVxuICAgKiBhcyB0aGV5IGJlY29tZSBhdmFpbGFibGUuIFRoZSBzdHJlYW0gd2lsbCB0ZXJtaW5hdGUgd2l0aCBhIGBkYXRhOiBbRE9ORV1gXG4gICAqIG1lc3NhZ2Ugd2hlbiB0aGUgam9iIGlzIGZpbmlzaGVkIChzdWNjZWVkZWQsIGNhbmNlbGxlZCwgb3IgZmFpbGVkKS5cbiAgICpcbiAgICogSWYgc2V0IHRvIGZhbHNlLCBvbmx5IGV2ZW50cyBnZW5lcmF0ZWQgc28gZmFyIHdpbGwgYmUgcmV0dXJuZWQuXG4gICAqL1xuICBzdHJlYW06IHRydWU7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgRmluZVR1bmVzIHtcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZSA9IEFQSS5GaW5lVHVuZTtcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZUV2ZW50ID0gQVBJLkZpbmVUdW5lRXZlbnQ7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVFdmVudHNMaXN0UmVzcG9uc2UgPSBBUEkuRmluZVR1bmVFdmVudHNMaXN0UmVzcG9uc2U7XG4gIGV4cG9ydCB0eXBlIEZpbmVUdW5lc1BhZ2UgPSBfRmluZVR1bmVzUGFnZTtcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZUNyZWF0ZVBhcmFtcyA9IEFQSS5GaW5lVHVuZUNyZWF0ZVBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXMgPSBBUEkuRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc05vblN0cmVhbWluZyA9IEFQSS5GaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zU3RyZWFtaW5nID0gQVBJLkZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc1N0cmVhbWluZztcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gJy4uLy4uL2NvcmUuanMnO1xuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi8uLi9yZXNvdXJjZS5qcyc7XG5pbXBvcnQgeyBpc1JlcXVlc3RPcHRpb25zIH0gZnJvbSAnLi4vLi4vY29yZS5qcyc7XG5pbXBvcnQgKiBhcyBGaWxlcyBmcm9tICcuLi9maWxlcy5qcyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleC5qcyc7XG5pbXBvcnQgeyBDdXJzb3JQYWdlLCBDdXJzb3JQYWdlUGFyYW1zIH0gZnJvbSAnLi4vLi4vcGFnaW5hdGlvbi5qcyc7XG5cbmV4cG9ydCBjbGFzcyBKb2JzIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIGpvYiB0aGF0IGZpbmUtdHVuZXMgYSBzcGVjaWZpZWQgbW9kZWwgZnJvbSBhIGdpdmVuIGRhdGFzZXQuXG4gICAqXG4gICAqIFJlc3BvbnNlIGluY2x1ZGVzIGRldGFpbHMgb2YgdGhlIGVucXVldWVkIGpvYiBpbmNsdWRpbmcgam9iIHN0YXR1cyBhbmQgdGhlIG5hbWVcbiAgICogb2YgdGhlIGZpbmUtdHVuZWQgbW9kZWxzIG9uY2UgY29tcGxldGUuXG4gICAqXG4gICAqIFtMZWFybiBtb3JlIGFib3V0IGZpbmUtdHVuaW5nXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcpXG4gICAqL1xuICBjcmVhdGUoYm9keTogSm9iQ3JlYXRlUGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxGaW5lVHVuaW5nSm9iPiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL2ZpbmVfdHVuaW5nL2pvYnMnLCB7IGJvZHksIC4uLm9wdGlvbnMgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGluZm8gYWJvdXQgYSBmaW5lLXR1bmluZyBqb2IuXG4gICAqXG4gICAqIFtMZWFybiBtb3JlIGFib3V0IGZpbmUtdHVuaW5nXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcpXG4gICAqL1xuICByZXRyaWV2ZShmaW5lVHVuaW5nSm9iSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8RmluZVR1bmluZ0pvYj4ge1xuICAgIHJldHVybiB0aGlzLmdldChgL2ZpbmVfdHVuaW5nL2pvYnMvJHtmaW5lVHVuaW5nSm9iSWR9YCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdCB5b3VyIG9yZ2FuaXphdGlvbidzIGZpbmUtdHVuaW5nIGpvYnNcbiAgICovXG4gIGxpc3QoXG4gICAgcXVlcnk/OiBKb2JMaXN0UGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLlBhZ2VQcm9taXNlPEZpbmVUdW5pbmdKb2JzUGFnZSwgRmluZVR1bmluZ0pvYj47XG4gIGxpc3Qob3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLlBhZ2VQcm9taXNlPEZpbmVUdW5pbmdKb2JzUGFnZSwgRmluZVR1bmluZ0pvYj47XG4gIGxpc3QoXG4gICAgcXVlcnk6IEpvYkxpc3RQYXJhbXMgfCBDb3JlLlJlcXVlc3RPcHRpb25zID0ge30sXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuUGFnZVByb21pc2U8RmluZVR1bmluZ0pvYnNQYWdlLCBGaW5lVHVuaW5nSm9iPiB7XG4gICAgaWYgKGlzUmVxdWVzdE9wdGlvbnMocXVlcnkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5saXN0KHt9LCBxdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmdldEFQSUxpc3QoJy9maW5lX3R1bmluZy9qb2JzJywgRmluZVR1bmluZ0pvYnNQYWdlLCB7IHF1ZXJ5LCAuLi5vcHRpb25zIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEltbWVkaWF0ZWx5IGNhbmNlbCBhIGZpbmUtdHVuZSBqb2IuXG4gICAqL1xuICBjYW5jZWwoZmluZVR1bmluZ0pvYklkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEZpbmVUdW5pbmdKb2I+IHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KGAvZmluZV90dW5pbmcvam9icy8ke2ZpbmVUdW5pbmdKb2JJZH0vY2FuY2VsYCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHN0YXR1cyB1cGRhdGVzIGZvciBhIGZpbmUtdHVuaW5nIGpvYi5cbiAgICovXG4gIGxpc3RFdmVudHMoXG4gICAgZmluZVR1bmluZ0pvYklkOiBzdHJpbmcsXG4gICAgcXVlcnk/OiBKb2JMaXN0RXZlbnRzUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLlBhZ2VQcm9taXNlPEZpbmVUdW5pbmdKb2JFdmVudHNQYWdlLCBGaW5lVHVuaW5nSm9iRXZlbnQ+O1xuICBsaXN0RXZlbnRzKFxuICAgIGZpbmVUdW5pbmdKb2JJZDogc3RyaW5nLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLlBhZ2VQcm9taXNlPEZpbmVUdW5pbmdKb2JFdmVudHNQYWdlLCBGaW5lVHVuaW5nSm9iRXZlbnQ+O1xuICBsaXN0RXZlbnRzKFxuICAgIGZpbmVUdW5pbmdKb2JJZDogc3RyaW5nLFxuICAgIHF1ZXJ5OiBKb2JMaXN0RXZlbnRzUGFyYW1zIHwgQ29yZS5SZXF1ZXN0T3B0aW9ucyA9IHt9LFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLlBhZ2VQcm9taXNlPEZpbmVUdW5pbmdKb2JFdmVudHNQYWdlLCBGaW5lVHVuaW5nSm9iRXZlbnQ+IHtcbiAgICBpZiAoaXNSZXF1ZXN0T3B0aW9ucyhxdWVyeSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmxpc3RFdmVudHMoZmluZVR1bmluZ0pvYklkLCB7fSwgcXVlcnkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5nZXRBUElMaXN0KGAvZmluZV90dW5pbmcvam9icy8ke2ZpbmVUdW5pbmdKb2JJZH0vZXZlbnRzYCwgRmluZVR1bmluZ0pvYkV2ZW50c1BhZ2UsIHtcbiAgICAgIHF1ZXJ5LFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmluZVR1bmluZ0pvYnNQYWdlIGV4dGVuZHMgQ3Vyc29yUGFnZTxGaW5lVHVuaW5nSm9iPiB7fVxuLy8gYWxpYXMgc28gd2UgY2FuIGV4cG9ydCBpdCBpbiB0aGUgbmFtZXNwYWNlXG50eXBlIF9GaW5lVHVuaW5nSm9ic1BhZ2UgPSBGaW5lVHVuaW5nSm9ic1BhZ2U7XG5cbmV4cG9ydCBjbGFzcyBGaW5lVHVuaW5nSm9iRXZlbnRzUGFnZSBleHRlbmRzIEN1cnNvclBhZ2U8RmluZVR1bmluZ0pvYkV2ZW50PiB7fVxuLy8gYWxpYXMgc28gd2UgY2FuIGV4cG9ydCBpdCBpbiB0aGUgbmFtZXNwYWNlXG50eXBlIF9GaW5lVHVuaW5nSm9iRXZlbnRzUGFnZSA9IEZpbmVUdW5pbmdKb2JFdmVudHNQYWdlO1xuXG4vKipcbiAqIFRoZSBgZmluZV90dW5pbmcuam9iYCBvYmplY3QgcmVwcmVzZW50cyBhIGZpbmUtdHVuaW5nIGpvYiB0aGF0IGhhcyBiZWVuIGNyZWF0ZWRcbiAqIHRocm91Z2ggdGhlIEFQSS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGaW5lVHVuaW5nSm9iIHtcbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgaWRlbnRpZmllciwgd2hpY2ggY2FuIGJlIHJlZmVyZW5jZWQgaW4gdGhlIEFQSSBlbmRwb2ludHMuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgVW5peCB0aW1lc3RhbXAgKGluIHNlY29uZHMpIGZvciB3aGVuIHRoZSBmaW5lLXR1bmluZyBqb2Igd2FzIGNyZWF0ZWQuXG4gICAqL1xuICBjcmVhdGVkX2F0OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBmaW5lLXR1bmVkIG1vZGVsIHRoYXQgaXMgYmVpbmcgY3JlYXRlZC5cbiAgICovXG4gIGZpbmVfdHVuZWRfbW9kZWw6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBoeXBlcnBhcmFtZXRlcnMgdXNlZCBmb3IgdGhlIGZpbmUtdHVuaW5nIGpvYi4gU2VlIHRoZVxuICAgKiBbZmluZS10dW5pbmcgZ3VpZGVdKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZykgZm9yIG1vcmUgZGV0YWlscy5cbiAgICovXG4gIGh5cGVycGFyYW1ldGVyczogRmluZVR1bmluZ0pvYi5IeXBlcnBhcmFtZXRlcnM7XG5cbiAgLyoqXG4gICAqIFRoZSBiYXNlIG1vZGVsIHRoYXQgaXMgYmVpbmcgZmluZS10dW5lZC5cbiAgICovXG4gIG1vZGVsOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBvYmplY3QgdHlwZSwgd2hpY2ggaXMgYWx3YXlzIFwiZmluZV90dW5pbmcuam9iXCIuXG4gICAqL1xuICBvYmplY3Q6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG9yZ2FuaXphdGlvbiB0aGF0IG93bnMgdGhlIGZpbmUtdHVuaW5nIGpvYi5cbiAgICovXG4gIG9yZ2FuaXphdGlvbl9pZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgY29tcGlsZWQgcmVzdWx0cyBmaWxlcyBmb3IgdGhlIGZpbmUtdHVuaW5nIGpvYi5cbiAgICovXG4gIHJlc3VsdF9maWxlczogQXJyYXk8RmlsZXMuRmlsZU9iamVjdD47XG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50IHN0YXR1cyBvZiB0aGUgZmluZS10dW5pbmcgam9iLCB3aGljaCBjYW4gYmUgZWl0aGVyIGBjcmVhdGVkYCxcbiAgICogYHBlbmRpbmdgLCBgcnVubmluZ2AsIGBzdWNjZWVkZWRgLCBgZmFpbGVkYCwgb3IgYGNhbmNlbGxlZGAuXG4gICAqL1xuICBzdGF0dXM6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIHRvdGFsIG51bWJlciBvZiBiaWxsYWJsZSB0b2tlbnMgcHJvY2Vzc2VkIGJ5IHRoaXMgZmluZSB0dW5pbmcgam9iLlxuICAgKi9cbiAgdHJhaW5lZF90b2tlbnM6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIGZpbGUgSUQgdXNlZCBmb3IgdHJhaW5pbmcuXG4gICAqL1xuICB0cmFpbmluZ19maWxlOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBmaWxlIElEIHVzZWQgZm9yIHZhbGlkYXRpb24uXG4gICAqL1xuICB2YWxpZGF0aW9uX2ZpbGU6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBVbml4IHRpbWVzdGFtcCAoaW4gc2Vjb25kcykgZm9yIHdoZW4gdGhlIGZpbmUtdHVuaW5nIGpvYiB3YXMgZmluaXNoZWQuXG4gICAqL1xuICBmaW5pc2hlZF9hdD86IG51bWJlcjtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBGaW5lVHVuaW5nSm9iIHtcbiAgLyoqXG4gICAqIFRoZSBoeXBlcnBhcmFtZXRlcnMgdXNlZCBmb3IgdGhlIGZpbmUtdHVuaW5nIGpvYi4gU2VlIHRoZVxuICAgKiBbZmluZS10dW5pbmcgZ3VpZGVdKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZykgZm9yIG1vcmUgZGV0YWlscy5cbiAgICovXG4gIGV4cG9ydCBpbnRlcmZhY2UgSHlwZXJwYXJhbWV0ZXJzIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIGVwb2NocyB0byB0cmFpbiB0aGUgbW9kZWwgZm9yLiBBbiBlcG9jaCByZWZlcnMgdG8gb25lIGZ1bGwgY3ljbGVcbiAgICAgKiB0aHJvdWdoIHRoZSB0cmFpbmluZyBkYXRhc2V0LiBcIkF1dG9cIiBkZWNpZGVzIHRoZSBvcHRpbWFsIG51bWJlciBvZiBlcG9jaHMgYmFzZWRcbiAgICAgKiBvbiB0aGUgc2l6ZSBvZiB0aGUgZGF0YXNldC4gSWYgc2V0dGluZyB0aGUgbnVtYmVyIG1hbnVhbGx5LCB3ZSBzdXBwb3J0IGFueVxuICAgICAqIG51bWJlciBiZXR3ZWVuIDEgYW5kIDUwIGVwb2Nocy5cbiAgICAgKi9cbiAgICBuX2Vwb2Nocz86ICdhdXRvJyB8IG51bWJlcjtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpbmVUdW5pbmdKb2JFdmVudCB7XG4gIGlkOiBzdHJpbmc7XG5cbiAgY3JlYXRlZF9hdDogbnVtYmVyO1xuXG4gIGxldmVsOiAnaW5mbycgfCAnd2FybicgfCAnZXJyb3InO1xuXG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICBvYmplY3Q6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBKb2JDcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIG1vZGVsIHRvIGZpbmUtdHVuZS4gWW91IGNhbiBzZWxlY3Qgb25lIG9mIHRoZVxuICAgKiBbc3VwcG9ydGVkIG1vZGVsc10oL2RvY3MvZ3VpZGVzL2ZpbmUtdHVuaW5nL3doYXQtbW9kZWxzLWNhbi1iZS1maW5lLXR1bmVkKS5cbiAgICovXG4gIG1vZGVsOiAoc3RyaW5nICYge30pIHwgJ2JhYmJhZ2UtMDAyJyB8ICdkYXZpbmNpLTAwMicgfCAnZ3B0LTMuNS10dXJibyc7XG5cbiAgLyoqXG4gICAqIFRoZSBJRCBvZiBhbiB1cGxvYWRlZCBmaWxlIHRoYXQgY29udGFpbnMgdHJhaW5pbmcgZGF0YS5cbiAgICpcbiAgICogU2VlIFt1cGxvYWQgZmlsZV0oL2RvY3MvYXBpLXJlZmVyZW5jZS9maWxlcy91cGxvYWQpIGZvciBob3cgdG8gdXBsb2FkIGEgZmlsZS5cbiAgICpcbiAgICogWW91ciBkYXRhc2V0IG11c3QgYmUgZm9ybWF0dGVkIGFzIGEgSlNPTkwgZmlsZS4gQWRkaXRpb25hbGx5LCB5b3UgbXVzdCB1cGxvYWRcbiAgICogeW91ciBmaWxlIHdpdGggdGhlIHB1cnBvc2UgYGZpbmUtdHVuZWAuXG4gICAqXG4gICAqIFNlZSB0aGUgW2ZpbmUtdHVuaW5nIGd1aWRlXSgvZG9jcy9ndWlkZXMvZmluZS10dW5pbmcpIGZvciBtb3JlIGRldGFpbHMuXG4gICAqL1xuICB0cmFpbmluZ19maWxlOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBoeXBlcnBhcmFtZXRlcnMgdXNlZCBmb3IgdGhlIGZpbmUtdHVuaW5nIGpvYi5cbiAgICovXG4gIGh5cGVycGFyYW1ldGVycz86IEpvYkNyZWF0ZVBhcmFtcy5IeXBlcnBhcmFtZXRlcnM7XG5cbiAgLyoqXG4gICAqIEEgc3RyaW5nIG9mIHVwIHRvIDQwIGNoYXJhY3RlcnMgdGhhdCB3aWxsIGJlIGFkZGVkIHRvIHlvdXIgZmluZS10dW5lZCBtb2RlbFxuICAgKiBuYW1lLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgYSBgc3VmZml4YCBvZiBcImN1c3RvbS1tb2RlbC1uYW1lXCIgd291bGQgcHJvZHVjZSBhIG1vZGVsIG5hbWUgbGlrZVxuICAgKiBgZnQ6Z3B0LTMuNS10dXJibzpvcGVuYWk6Y3VzdG9tLW1vZGVsLW5hbWU6N3A0bFVSZWxgLlxuICAgKi9cbiAgc3VmZml4Pzogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIElEIG9mIGFuIHVwbG9hZGVkIGZpbGUgdGhhdCBjb250YWlucyB2YWxpZGF0aW9uIGRhdGEuXG4gICAqXG4gICAqIElmIHlvdSBwcm92aWRlIHRoaXMgZmlsZSwgdGhlIGRhdGEgaXMgdXNlZCB0byBnZW5lcmF0ZSB2YWxpZGF0aW9uIG1ldHJpY3NcbiAgICogcGVyaW9kaWNhbGx5IGR1cmluZyBmaW5lLXR1bmluZy4gVGhlc2UgbWV0cmljcyBjYW4gYmUgdmlld2VkIGluIHRoZSBmaW5lLXR1bmluZ1xuICAgKiByZXN1bHRzIGZpbGUuIFRoZSBzYW1lIGRhdGEgc2hvdWxkIG5vdCBiZSBwcmVzZW50IGluIGJvdGggdHJhaW4gYW5kIHZhbGlkYXRpb25cbiAgICogZmlsZXMuXG4gICAqXG4gICAqIFlvdXIgZGF0YXNldCBtdXN0IGJlIGZvcm1hdHRlZCBhcyBhIEpTT05MIGZpbGUuIFlvdSBtdXN0IHVwbG9hZCB5b3VyIGZpbGUgd2l0aFxuICAgKiB0aGUgcHVycG9zZSBgZmluZS10dW5lYC5cbiAgICpcbiAgICogU2VlIHRoZSBbZmluZS10dW5pbmcgZ3VpZGVdKC9kb2NzL2d1aWRlcy9maW5lLXR1bmluZykgZm9yIG1vcmUgZGV0YWlscy5cbiAgICovXG4gIHZhbGlkYXRpb25fZmlsZT86IHN0cmluZyB8IG51bGw7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgSm9iQ3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIFRoZSBoeXBlcnBhcmFtZXRlcnMgdXNlZCBmb3IgdGhlIGZpbmUtdHVuaW5nIGpvYi5cbiAgICovXG4gIGV4cG9ydCBpbnRlcmZhY2UgSHlwZXJwYXJhbWV0ZXJzIHtcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIGVwb2NocyB0byB0cmFpbiB0aGUgbW9kZWwgZm9yLiBBbiBlcG9jaCByZWZlcnMgdG8gb25lIGZ1bGwgY3ljbGVcbiAgICAgKiB0aHJvdWdoIHRoZSB0cmFpbmluZyBkYXRhc2V0LlxuICAgICAqL1xuICAgIG5fZXBvY2hzPzogJ2F1dG8nIHwgbnVtYmVyO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSm9iTGlzdFBhcmFtcyBleHRlbmRzIEN1cnNvclBhZ2VQYXJhbXMge31cblxuZXhwb3J0IGludGVyZmFjZSBKb2JMaXN0RXZlbnRzUGFyYW1zIGV4dGVuZHMgQ3Vyc29yUGFnZVBhcmFtcyB7fVxuXG5leHBvcnQgbmFtZXNwYWNlIEpvYnMge1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5pbmdKb2IgPSBBUEkuRmluZVR1bmluZ0pvYjtcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuaW5nSm9iRXZlbnQgPSBBUEkuRmluZVR1bmluZ0pvYkV2ZW50O1xuICBleHBvcnQgdHlwZSBGaW5lVHVuaW5nSm9ic1BhZ2UgPSBfRmluZVR1bmluZ0pvYnNQYWdlO1xuICBleHBvcnQgdHlwZSBGaW5lVHVuaW5nSm9iRXZlbnRzUGFnZSA9IF9GaW5lVHVuaW5nSm9iRXZlbnRzUGFnZTtcbiAgZXhwb3J0IGltcG9ydCBKb2JDcmVhdGVQYXJhbXMgPSBBUEkuSm9iQ3JlYXRlUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IEpvYkxpc3RQYXJhbXMgPSBBUEkuSm9iTGlzdFBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBKb2JMaXN0RXZlbnRzUGFyYW1zID0gQVBJLkpvYkxpc3RFdmVudHNQYXJhbXM7XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi8uLi9yZXNvdXJjZS5qcyc7XG5pbXBvcnQgeyBKb2JzIH0gZnJvbSAnLi9qb2JzLmpzJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuL2luZGV4LmpzJztcblxuZXhwb3J0IGNsYXNzIEZpbmVUdW5pbmcgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIGpvYnM6IEpvYnMgPSBuZXcgSm9icyh0aGlzLmNsaWVudCk7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgRmluZVR1bmluZyB7XG4gIGV4cG9ydCBpbXBvcnQgSm9icyA9IEFQSS5Kb2JzO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5pbmdKb2IgPSBBUEkuRmluZVR1bmluZ0pvYjtcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuaW5nSm9iRXZlbnQgPSBBUEkuRmluZVR1bmluZ0pvYkV2ZW50O1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5pbmdKb2JzUGFnZSA9IEFQSS5GaW5lVHVuaW5nSm9ic1BhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmluZ0pvYkV2ZW50c1BhZ2UgPSBBUEkuRmluZVR1bmluZ0pvYkV2ZW50c1BhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgSm9iQ3JlYXRlUGFyYW1zID0gQVBJLkpvYkNyZWF0ZVBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBKb2JMaXN0UGFyYW1zID0gQVBJLkpvYkxpc3RQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgSm9iTGlzdEV2ZW50c1BhcmFtcyA9IEFQSS5Kb2JMaXN0RXZlbnRzUGFyYW1zO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuXG5cbmltcG9ydCAqIGFzIENvcmUgZnJvbSAnLi4vY29yZS5qcyc7XG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gJy4uL3Jlc291cmNlLmpzJztcbmltcG9ydCAqIGFzIEFQSSBmcm9tICcuL2luZGV4LmpzJztcbmltcG9ydCB7IHR5cGUgVXBsb2FkYWJsZSwgbXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zIH0gZnJvbSAnLi4vY29yZS5qcyc7XG5cbmV4cG9ydCBjbGFzcyBJbWFnZXMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgdmFyaWF0aW9uIG9mIGEgZ2l2ZW4gaW1hZ2UuXG4gICAqL1xuICBjcmVhdGVWYXJpYXRpb24oXG4gICAgYm9keTogSW1hZ2VDcmVhdGVWYXJpYXRpb25QYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuQVBJUHJvbWlzZTxJbWFnZXNSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9pbWFnZXMvdmFyaWF0aW9ucycsIG11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyh7IGJvZHksIC4uLm9wdGlvbnMgfSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gZWRpdGVkIG9yIGV4dGVuZGVkIGltYWdlIGdpdmVuIGFuIG9yaWdpbmFsIGltYWdlIGFuZCBhIHByb21wdC5cbiAgICovXG4gIGVkaXQoYm9keTogSW1hZ2VFZGl0UGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxJbWFnZXNSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnBvc3QoJy9pbWFnZXMvZWRpdHMnLCBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMoeyBib2R5LCAuLi5vcHRpb25zIH0pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGltYWdlIGdpdmVuIGEgcHJvbXB0LlxuICAgKi9cbiAgZ2VuZXJhdGUoYm9keTogSW1hZ2VHZW5lcmF0ZVBhcmFtcywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8SW1hZ2VzUmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5wb3N0KCcvaW1hZ2VzL2dlbmVyYXRpb25zJywgeyBib2R5LCAuLi5vcHRpb25zIH0pO1xuICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgdXJsIG9yIHRoZSBjb250ZW50IG9mIGFuIGltYWdlIGdlbmVyYXRlZCBieSB0aGUgT3BlbkFJIEFQSS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJbWFnZSB7XG4gIC8qKlxuICAgKiBUaGUgYmFzZTY0LWVuY29kZWQgSlNPTiBvZiB0aGUgZ2VuZXJhdGVkIGltYWdlLCBpZiBgcmVzcG9uc2VfZm9ybWF0YCBpc1xuICAgKiBgYjY0X2pzb25gLlxuICAgKi9cbiAgYjY0X2pzb24/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBVUkwgb2YgdGhlIGdlbmVyYXRlZCBpbWFnZSwgaWYgYHJlc3BvbnNlX2Zvcm1hdGAgaXMgYHVybGAgKGRlZmF1bHQpLlxuICAgKi9cbiAgdXJsPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEltYWdlc1Jlc3BvbnNlIHtcbiAgY3JlYXRlZDogbnVtYmVyO1xuXG4gIGRhdGE6IEFycmF5PEltYWdlPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbWFnZUNyZWF0ZVZhcmlhdGlvblBhcmFtcyB7XG4gIC8qKlxuICAgKiBUaGUgaW1hZ2UgdG8gdXNlIGFzIHRoZSBiYXNpcyBmb3IgdGhlIHZhcmlhdGlvbihzKS4gTXVzdCBiZSBhIHZhbGlkIFBORyBmaWxlLFxuICAgKiBsZXNzIHRoYW4gNE1CLCBhbmQgc3F1YXJlLlxuICAgKi9cbiAgaW1hZ2U6IFVwbG9hZGFibGU7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgaW1hZ2VzIHRvIGdlbmVyYXRlLiBNdXN0IGJlIGJldHdlZW4gMSBhbmQgMTAuXG4gICAqL1xuICBuPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIGZvcm1hdCBpbiB3aGljaCB0aGUgZ2VuZXJhdGVkIGltYWdlcyBhcmUgcmV0dXJuZWQuIE11c3QgYmUgb25lIG9mIGB1cmxgIG9yXG4gICAqIGBiNjRfanNvbmAuXG4gICAqL1xuICByZXNwb25zZV9mb3JtYXQ/OiAndXJsJyB8ICdiNjRfanNvbicgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgc2l6ZSBvZiB0aGUgZ2VuZXJhdGVkIGltYWdlcy4gTXVzdCBiZSBvbmUgb2YgYDI1NngyNTZgLCBgNTEyeDUxMmAsIG9yXG4gICAqIGAxMDI0eDEwMjRgLlxuICAgKi9cbiAgc2l6ZT86ICcyNTZ4MjU2JyB8ICc1MTJ4NTEyJyB8ICcxMDI0eDEwMjQnIHwgbnVsbDtcblxuICAvKipcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvIG1vbml0b3JcbiAgICogYW5kIGRldGVjdCBhYnVzZS4gW0xlYXJuIG1vcmVdKC9kb2NzL2d1aWRlcy9zYWZldHktYmVzdC1wcmFjdGljZXMvZW5kLXVzZXItaWRzKS5cbiAgICovXG4gIHVzZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW1hZ2VFZGl0UGFyYW1zIHtcbiAgLyoqXG4gICAqIFRoZSBpbWFnZSB0byBlZGl0LiBNdXN0IGJlIGEgdmFsaWQgUE5HIGZpbGUsIGxlc3MgdGhhbiA0TUIsIGFuZCBzcXVhcmUuIElmIG1hc2tcbiAgICogaXMgbm90IHByb3ZpZGVkLCBpbWFnZSBtdXN0IGhhdmUgdHJhbnNwYXJlbmN5LCB3aGljaCB3aWxsIGJlIHVzZWQgYXMgdGhlIG1hc2suXG4gICAqL1xuICBpbWFnZTogVXBsb2FkYWJsZTtcblxuICAvKipcbiAgICogQSB0ZXh0IGRlc2NyaXB0aW9uIG9mIHRoZSBkZXNpcmVkIGltYWdlKHMpLiBUaGUgbWF4aW11bSBsZW5ndGggaXMgMTAwMFxuICAgKiBjaGFyYWN0ZXJzLlxuICAgKi9cbiAgcHJvbXB0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEFuIGFkZGl0aW9uYWwgaW1hZ2Ugd2hvc2UgZnVsbHkgdHJhbnNwYXJlbnQgYXJlYXMgKGUuZy4gd2hlcmUgYWxwaGEgaXMgemVybylcbiAgICogaW5kaWNhdGUgd2hlcmUgYGltYWdlYCBzaG91bGQgYmUgZWRpdGVkLiBNdXN0IGJlIGEgdmFsaWQgUE5HIGZpbGUsIGxlc3MgdGhhblxuICAgKiA0TUIsIGFuZCBoYXZlIHRoZSBzYW1lIGRpbWVuc2lvbnMgYXMgYGltYWdlYC5cbiAgICovXG4gIG1hc2s/OiBVcGxvYWRhYmxlO1xuXG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGltYWdlcyB0byBnZW5lcmF0ZS4gTXVzdCBiZSBiZXR3ZWVuIDEgYW5kIDEwLlxuICAgKi9cbiAgbj86IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBmb3JtYXQgaW4gd2hpY2ggdGhlIGdlbmVyYXRlZCBpbWFnZXMgYXJlIHJldHVybmVkLiBNdXN0IGJlIG9uZSBvZiBgdXJsYCBvclxuICAgKiBgYjY0X2pzb25gLlxuICAgKi9cbiAgcmVzcG9uc2VfZm9ybWF0PzogJ3VybCcgfCAnYjY0X2pzb24nIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIHNpemUgb2YgdGhlIGdlbmVyYXRlZCBpbWFnZXMuIE11c3QgYmUgb25lIG9mIGAyNTZ4MjU2YCwgYDUxMng1MTJgLCBvclxuICAgKiBgMTAyNHgxMDI0YC5cbiAgICovXG4gIHNpemU/OiAnMjU2eDI1NicgfCAnNTEyeDUxMicgfCAnMTAyNHgxMDI0JyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEEgdW5pcXVlIGlkZW50aWZpZXIgcmVwcmVzZW50aW5nIHlvdXIgZW5kLXVzZXIsIHdoaWNoIGNhbiBoZWxwIE9wZW5BSSB0byBtb25pdG9yXG4gICAqIGFuZCBkZXRlY3QgYWJ1c2UuIFtMZWFybiBtb3JlXSgvZG9jcy9ndWlkZXMvc2FmZXR5LWJlc3QtcHJhY3RpY2VzL2VuZC11c2VyLWlkcykuXG4gICAqL1xuICB1c2VyPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEltYWdlR2VuZXJhdGVQYXJhbXMge1xuICAvKipcbiAgICogQSB0ZXh0IGRlc2NyaXB0aW9uIG9mIHRoZSBkZXNpcmVkIGltYWdlKHMpLiBUaGUgbWF4aW11bSBsZW5ndGggaXMgMTAwMFxuICAgKiBjaGFyYWN0ZXJzLlxuICAgKi9cbiAgcHJvbXB0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgaW1hZ2VzIHRvIGdlbmVyYXRlLiBNdXN0IGJlIGJldHdlZW4gMSBhbmQgMTAuXG4gICAqL1xuICBuPzogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIGZvcm1hdCBpbiB3aGljaCB0aGUgZ2VuZXJhdGVkIGltYWdlcyBhcmUgcmV0dXJuZWQuIE11c3QgYmUgb25lIG9mIGB1cmxgIG9yXG4gICAqIGBiNjRfanNvbmAuXG4gICAqL1xuICByZXNwb25zZV9mb3JtYXQ/OiAndXJsJyB8ICdiNjRfanNvbicgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgc2l6ZSBvZiB0aGUgZ2VuZXJhdGVkIGltYWdlcy4gTXVzdCBiZSBvbmUgb2YgYDI1NngyNTZgLCBgNTEyeDUxMmAsIG9yXG4gICAqIGAxMDI0eDEwMjRgLlxuICAgKi9cbiAgc2l6ZT86ICcyNTZ4MjU2JyB8ICc1MTJ4NTEyJyB8ICcxMDI0eDEwMjQnIHwgbnVsbDtcblxuICAvKipcbiAgICogQSB1bmlxdWUgaWRlbnRpZmllciByZXByZXNlbnRpbmcgeW91ciBlbmQtdXNlciwgd2hpY2ggY2FuIGhlbHAgT3BlbkFJIHRvIG1vbml0b3JcbiAgICogYW5kIGRldGVjdCBhYnVzZS4gW0xlYXJuIG1vcmVdKC9kb2NzL2d1aWRlcy9zYWZldHktYmVzdC1wcmFjdGljZXMvZW5kLXVzZXItaWRzKS5cbiAgICovXG4gIHVzZXI/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgSW1hZ2VzIHtcbiAgZXhwb3J0IGltcG9ydCBJbWFnZSA9IEFQSS5JbWFnZTtcbiAgZXhwb3J0IGltcG9ydCBJbWFnZXNSZXNwb25zZSA9IEFQSS5JbWFnZXNSZXNwb25zZTtcbiAgZXhwb3J0IGltcG9ydCBJbWFnZUNyZWF0ZVZhcmlhdGlvblBhcmFtcyA9IEFQSS5JbWFnZUNyZWF0ZVZhcmlhdGlvblBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBJbWFnZUVkaXRQYXJhbXMgPSBBUEkuSW1hZ2VFZGl0UGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IEltYWdlR2VuZXJhdGVQYXJhbXMgPSBBUEkuSW1hZ2VHZW5lcmF0ZVBhcmFtcztcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLlxuXG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gJy4uL2NvcmUuanMnO1xuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tICcuLi9yZXNvdXJjZS5qcyc7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSAnLi9pbmRleC5qcyc7XG5pbXBvcnQgeyBQYWdlIH0gZnJvbSAnLi4vcGFnaW5hdGlvbi5qcyc7XG5cbmV4cG9ydCBjbGFzcyBNb2RlbHMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgYSBtb2RlbCBpbnN0YW5jZSwgcHJvdmlkaW5nIGJhc2ljIGluZm9ybWF0aW9uIGFib3V0IHRoZSBtb2RlbCBzdWNoIGFzXG4gICAqIHRoZSBvd25lciBhbmQgcGVybWlzc2lvbmluZy5cbiAgICovXG4gIHJldHJpZXZlKG1vZGVsOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPE1vZGVsPiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KGAvbW9kZWxzLyR7bW9kZWx9YCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdHMgdGhlIGN1cnJlbnRseSBhdmFpbGFibGUgbW9kZWxzLCBhbmQgcHJvdmlkZXMgYmFzaWMgaW5mb3JtYXRpb24gYWJvdXQgZWFjaFxuICAgKiBvbmUgc3VjaCBhcyB0aGUgb3duZXIgYW5kIGF2YWlsYWJpbGl0eS5cbiAgICovXG4gIGxpc3Qob3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLlBhZ2VQcm9taXNlPE1vZGVsc1BhZ2UsIE1vZGVsPiB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0QVBJTGlzdCgnL21vZGVscycsIE1vZGVsc1BhZ2UsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIGZpbmUtdHVuZWQgbW9kZWwuIFlvdSBtdXN0IGhhdmUgdGhlIE93bmVyIHJvbGUgaW4geW91ciBvcmdhbml6YXRpb24gdG9cbiAgICogZGVsZXRlIGEgbW9kZWwuXG4gICAqL1xuICBkZWwobW9kZWw6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8TW9kZWxEZWxldGVkPiB7XG4gICAgcmV0dXJuIHRoaXMuZGVsZXRlKGAvbW9kZWxzLyR7bW9kZWx9YCwgb3B0aW9ucyk7XG4gIH1cbn1cblxuLyoqXG4gKiBOb3RlOiBubyBwYWdpbmF0aW9uIGFjdHVhbGx5IG9jY3VycyB5ZXQsIHRoaXMgaXMgZm9yIGZvcndhcmRzLWNvbXBhdGliaWxpdHkuXG4gKi9cbmV4cG9ydCBjbGFzcyBNb2RlbHNQYWdlIGV4dGVuZHMgUGFnZTxNb2RlbD4ge31cbi8vIGFsaWFzIHNvIHdlIGNhbiBleHBvcnQgaXQgaW4gdGhlIG5hbWVzcGFjZVxudHlwZSBfTW9kZWxzUGFnZSA9IE1vZGVsc1BhZ2U7XG5cbi8qKlxuICogRGVzY3JpYmVzIGFuIE9wZW5BSSBtb2RlbCBvZmZlcmluZyB0aGF0IGNhbiBiZSB1c2VkIHdpdGggdGhlIEFQSS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNb2RlbCB7XG4gIC8qKlxuICAgKiBUaGUgbW9kZWwgaWRlbnRpZmllciwgd2hpY2ggY2FuIGJlIHJlZmVyZW5jZWQgaW4gdGhlIEFQSSBlbmRwb2ludHMuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgVW5peCB0aW1lc3RhbXAgKGluIHNlY29uZHMpIHdoZW4gdGhlIG1vZGVsIHdhcyBjcmVhdGVkLlxuICAgKi9cbiAgY3JlYXRlZDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgb2JqZWN0IHR5cGUsIHdoaWNoIGlzIGFsd2F5cyBcIm1vZGVsXCIuXG4gICAqL1xuICBvYmplY3Q6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG9yZ2FuaXphdGlvbiB0aGF0IG93bnMgdGhlIG1vZGVsLlxuICAgKi9cbiAgb3duZWRfYnk6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb2RlbERlbGV0ZWQge1xuICBpZDogc3RyaW5nO1xuXG4gIGRlbGV0ZWQ6IGJvb2xlYW47XG5cbiAgb2JqZWN0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgTW9kZWxzIHtcbiAgZXhwb3J0IGltcG9ydCBNb2RlbCA9IEFQSS5Nb2RlbDtcbiAgZXhwb3J0IGltcG9ydCBNb2RlbERlbGV0ZWQgPSBBUEkuTW9kZWxEZWxldGVkO1xuICBleHBvcnQgdHlwZSBNb2RlbHNQYWdlID0gX01vZGVsc1BhZ2U7XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuLi9jb3JlLmpzJztcbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSAnLi4vcmVzb3VyY2UuanMnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vaW5kZXguanMnO1xuXG5leHBvcnQgY2xhc3MgTW9kZXJhdGlvbnMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBDbGFzc2lmaWVzIGlmIHRleHQgdmlvbGF0ZXMgT3BlbkFJJ3MgQ29udGVudCBQb2xpY3lcbiAgICovXG4gIGNyZWF0ZShcbiAgICBib2R5OiBNb2RlcmF0aW9uQ3JlYXRlUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLkFQSVByb21pc2U8TW9kZXJhdGlvbkNyZWF0ZVJlc3BvbnNlPiB7XG4gICAgcmV0dXJuIHRoaXMucG9zdCgnL21vZGVyYXRpb25zJywgeyBib2R5LCAuLi5vcHRpb25zIH0pO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZXJhdGlvbiB7XG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgdGhlIGNhdGVnb3JpZXMsIGFuZCB3aGV0aGVyIHRoZXkgYXJlIGZsYWdnZWQgb3Igbm90LlxuICAgKi9cbiAgY2F0ZWdvcmllczogTW9kZXJhdGlvbi5DYXRlZ29yaWVzO1xuXG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgdGhlIGNhdGVnb3JpZXMgYWxvbmcgd2l0aCB0aGVpciBzY29yZXMgYXMgcHJlZGljdGVkIGJ5IG1vZGVsLlxuICAgKi9cbiAgY2F0ZWdvcnlfc2NvcmVzOiBNb2RlcmF0aW9uLkNhdGVnb3J5U2NvcmVzO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBjb250ZW50IHZpb2xhdGVzXG4gICAqIFtPcGVuQUkncyB1c2FnZSBwb2xpY2llc10oL3BvbGljaWVzL3VzYWdlLXBvbGljaWVzKS5cbiAgICovXG4gIGZsYWdnZWQ6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgTW9kZXJhdGlvbiB7XG4gIC8qKlxuICAgKiBBIGxpc3Qgb2YgdGhlIGNhdGVnb3JpZXMsIGFuZCB3aGV0aGVyIHRoZXkgYXJlIGZsYWdnZWQgb3Igbm90LlxuICAgKi9cbiAgZXhwb3J0IGludGVyZmFjZSBDYXRlZ29yaWVzIHtcbiAgICAvKipcbiAgICAgKiBDb250ZW50IHRoYXQgZXhwcmVzc2VzLCBpbmNpdGVzLCBvciBwcm9tb3RlcyBoYXJhc3NpbmcgbGFuZ3VhZ2UgdG93YXJkcyBhbnlcbiAgICAgKiB0YXJnZXQuXG4gICAgICovXG4gICAgaGFyYXNzbWVudDogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIEhhcmFzc21lbnQgY29udGVudCB0aGF0IGFsc28gaW5jbHVkZXMgdmlvbGVuY2Ugb3Igc2VyaW91cyBoYXJtIHRvd2FyZHMgYW55XG4gICAgICogdGFyZ2V0LlxuICAgICAqL1xuICAgICdoYXJhc3NtZW50L3RocmVhdGVuaW5nJzogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIENvbnRlbnQgdGhhdCBleHByZXNzZXMsIGluY2l0ZXMsIG9yIHByb21vdGVzIGhhdGUgYmFzZWQgb24gcmFjZSwgZ2VuZGVyLFxuICAgICAqIGV0aG5pY2l0eSwgcmVsaWdpb24sIG5hdGlvbmFsaXR5LCBzZXh1YWwgb3JpZW50YXRpb24sIGRpc2FiaWxpdHkgc3RhdHVzLCBvclxuICAgICAqIGNhc3RlLiBIYXRlZnVsIGNvbnRlbnQgYWltZWQgYXQgbm9uLXByb3RlY3RlZCBncm91cHMgKGUuZy4sIGNoZXNzIHBsYXllcnMpIGlzXG4gICAgICogaGFycmFzc21lbnQuXG4gICAgICovXG4gICAgaGF0ZTogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIEhhdGVmdWwgY29udGVudCB0aGF0IGFsc28gaW5jbHVkZXMgdmlvbGVuY2Ugb3Igc2VyaW91cyBoYXJtIHRvd2FyZHMgdGhlIHRhcmdldGVkXG4gICAgICogZ3JvdXAgYmFzZWQgb24gcmFjZSwgZ2VuZGVyLCBldGhuaWNpdHksIHJlbGlnaW9uLCBuYXRpb25hbGl0eSwgc2V4dWFsXG4gICAgICogb3JpZW50YXRpb24sIGRpc2FiaWxpdHkgc3RhdHVzLCBvciBjYXN0ZS5cbiAgICAgKi9cbiAgICAnaGF0ZS90aHJlYXRlbmluZyc6IGJvb2xlYW47XG5cbiAgICAvKipcbiAgICAgKiBDb250ZW50IHRoYXQgcHJvbW90ZXMsIGVuY291cmFnZXMsIG9yIGRlcGljdHMgYWN0cyBvZiBzZWxmLWhhcm0sIHN1Y2ggYXNcbiAgICAgKiBzdWljaWRlLCBjdXR0aW5nLCBhbmQgZWF0aW5nIGRpc29yZGVycy5cbiAgICAgKi9cbiAgICAnc2VsZi1oYXJtJzogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIENvbnRlbnQgdGhhdCBlbmNvdXJhZ2VzIHBlcmZvcm1pbmcgYWN0cyBvZiBzZWxmLWhhcm0sIHN1Y2ggYXMgc3VpY2lkZSwgY3V0dGluZyxcbiAgICAgKiBhbmQgZWF0aW5nIGRpc29yZGVycywgb3IgdGhhdCBnaXZlcyBpbnN0cnVjdGlvbnMgb3IgYWR2aWNlIG9uIGhvdyB0byBjb21taXQgc3VjaFxuICAgICAqIGFjdHMuXG4gICAgICovXG4gICAgJ3NlbGYtaGFybS9pbnN0cnVjdGlvbnMnOiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogQ29udGVudCB3aGVyZSB0aGUgc3BlYWtlciBleHByZXNzZXMgdGhhdCB0aGV5IGFyZSBlbmdhZ2luZyBvciBpbnRlbmQgdG8gZW5nYWdlXG4gICAgICogaW4gYWN0cyBvZiBzZWxmLWhhcm0sIHN1Y2ggYXMgc3VpY2lkZSwgY3V0dGluZywgYW5kIGVhdGluZyBkaXNvcmRlcnMuXG4gICAgICovXG4gICAgJ3NlbGYtaGFybS9pbnRlbnQnOiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogQ29udGVudCBtZWFudCB0byBhcm91c2Ugc2V4dWFsIGV4Y2l0ZW1lbnQsIHN1Y2ggYXMgdGhlIGRlc2NyaXB0aW9uIG9mIHNleHVhbFxuICAgICAqIGFjdGl2aXR5LCBvciB0aGF0IHByb21vdGVzIHNleHVhbCBzZXJ2aWNlcyAoZXhjbHVkaW5nIHNleCBlZHVjYXRpb24gYW5kXG4gICAgICogd2VsbG5lc3MpLlxuICAgICAqL1xuICAgIHNleHVhbDogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIFNleHVhbCBjb250ZW50IHRoYXQgaW5jbHVkZXMgYW4gaW5kaXZpZHVhbCB3aG8gaXMgdW5kZXIgMTggeWVhcnMgb2xkLlxuICAgICAqL1xuICAgICdzZXh1YWwvbWlub3JzJzogYm9vbGVhbjtcblxuICAgIC8qKlxuICAgICAqIENvbnRlbnQgdGhhdCBkZXBpY3RzIGRlYXRoLCB2aW9sZW5jZSwgb3IgcGh5c2ljYWwgaW5qdXJ5LlxuICAgICAqL1xuICAgIHZpb2xlbmNlOiBib29sZWFuO1xuXG4gICAgLyoqXG4gICAgICogQ29udGVudCB0aGF0IGRlcGljdHMgZGVhdGgsIHZpb2xlbmNlLCBvciBwaHlzaWNhbCBpbmp1cnkgaW4gZ3JhcGhpYyBkZXRhaWwuXG4gICAgICovXG4gICAgJ3Zpb2xlbmNlL2dyYXBoaWMnOiBib29sZWFuO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgbGlzdCBvZiB0aGUgY2F0ZWdvcmllcyBhbG9uZyB3aXRoIHRoZWlyIHNjb3JlcyBhcyBwcmVkaWN0ZWQgYnkgbW9kZWwuXG4gICAqL1xuICBleHBvcnQgaW50ZXJmYWNlIENhdGVnb3J5U2NvcmVzIHtcbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcmUgZm9yIHRoZSBjYXRlZ29yeSAnaGFyYXNzbWVudCcuXG4gICAgICovXG4gICAgaGFyYXNzbWVudDogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHNjb3JlIGZvciB0aGUgY2F0ZWdvcnkgJ2hhcmFzc21lbnQvdGhyZWF0ZW5pbmcnLlxuICAgICAqL1xuICAgICdoYXJhc3NtZW50L3RocmVhdGVuaW5nJzogbnVtYmVyO1xuXG4gICAgLyoqXG4gICAgICogVGhlIHNjb3JlIGZvciB0aGUgY2F0ZWdvcnkgJ2hhdGUnLlxuICAgICAqL1xuICAgIGhhdGU6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzY29yZSBmb3IgdGhlIGNhdGVnb3J5ICdoYXRlL3RocmVhdGVuaW5nJy5cbiAgICAgKi9cbiAgICAnaGF0ZS90aHJlYXRlbmluZyc6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzY29yZSBmb3IgdGhlIGNhdGVnb3J5ICdzZWxmLWhhcm0nLlxuICAgICAqL1xuICAgICdzZWxmLWhhcm0nOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcmUgZm9yIHRoZSBjYXRlZ29yeSAnc2VsZi1oYXJtL2luc3RydWN0aW9ucycuXG4gICAgICovXG4gICAgJ3NlbGYtaGFybS9pbnN0cnVjdGlvbnMnOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcmUgZm9yIHRoZSBjYXRlZ29yeSAnc2VsZi1oYXJtL2ludGVudCcuXG4gICAgICovXG4gICAgJ3NlbGYtaGFybS9pbnRlbnQnOiBudW1iZXI7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2NvcmUgZm9yIHRoZSBjYXRlZ29yeSAnc2V4dWFsJy5cbiAgICAgKi9cbiAgICBzZXh1YWw6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzY29yZSBmb3IgdGhlIGNhdGVnb3J5ICdzZXh1YWwvbWlub3JzJy5cbiAgICAgKi9cbiAgICAnc2V4dWFsL21pbm9ycyc6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzY29yZSBmb3IgdGhlIGNhdGVnb3J5ICd2aW9sZW5jZScuXG4gICAgICovXG4gICAgdmlvbGVuY2U6IG51bWJlcjtcblxuICAgIC8qKlxuICAgICAqIFRoZSBzY29yZSBmb3IgdGhlIGNhdGVnb3J5ICd2aW9sZW5jZS9ncmFwaGljJy5cbiAgICAgKi9cbiAgICAndmlvbGVuY2UvZ3JhcGhpYyc6IG51bWJlcjtcbiAgfVxufVxuXG4vKipcbiAqIFJlcHJlc2VudHMgcG9saWN5IGNvbXBsaWFuY2UgcmVwb3J0IGJ5IE9wZW5BSSdzIGNvbnRlbnQgbW9kZXJhdGlvbiBtb2RlbCBhZ2FpbnN0XG4gKiBhIGdpdmVuIGlucHV0LlxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVyYXRpb25DcmVhdGVSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBUaGUgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBtb2RlcmF0aW9uIHJlcXVlc3QuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgbW9kZWwgdXNlZCB0byBnZW5lcmF0ZSB0aGUgbW9kZXJhdGlvbiByZXN1bHRzLlxuICAgKi9cbiAgbW9kZWw6IHN0cmluZztcblxuICAvKipcbiAgICogQSBsaXN0IG9mIG1vZGVyYXRpb24gb2JqZWN0cy5cbiAgICovXG4gIHJlc3VsdHM6IEFycmF5PE1vZGVyYXRpb24+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVyYXRpb25DcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogVGhlIGlucHV0IHRleHQgdG8gY2xhc3NpZnlcbiAgICovXG4gIGlucHV0OiBzdHJpbmcgfCBBcnJheTxzdHJpbmc+O1xuXG4gIC8qKlxuICAgKiBUd28gY29udGVudCBtb2RlcmF0aW9ucyBtb2RlbHMgYXJlIGF2YWlsYWJsZTogYHRleHQtbW9kZXJhdGlvbi1zdGFibGVgIGFuZFxuICAgKiBgdGV4dC1tb2RlcmF0aW9uLWxhdGVzdGAuXG4gICAqXG4gICAqIFRoZSBkZWZhdWx0IGlzIGB0ZXh0LW1vZGVyYXRpb24tbGF0ZXN0YCB3aGljaCB3aWxsIGJlIGF1dG9tYXRpY2FsbHkgdXBncmFkZWRcbiAgICogb3ZlciB0aW1lLiBUaGlzIGVuc3VyZXMgeW91IGFyZSBhbHdheXMgdXNpbmcgb3VyIG1vc3QgYWNjdXJhdGUgbW9kZWwuIElmIHlvdSB1c2VcbiAgICogYHRleHQtbW9kZXJhdGlvbi1zdGFibGVgLCB3ZSB3aWxsIHByb3ZpZGUgYWR2YW5jZWQgbm90aWNlIGJlZm9yZSB1cGRhdGluZyB0aGVcbiAgICogbW9kZWwuIEFjY3VyYWN5IG9mIGB0ZXh0LW1vZGVyYXRpb24tc3RhYmxlYCBtYXkgYmUgc2xpZ2h0bHkgbG93ZXIgdGhhbiBmb3JcbiAgICogYHRleHQtbW9kZXJhdGlvbi1sYXRlc3RgLlxuICAgKi9cbiAgbW9kZWw/OiAoc3RyaW5nICYge30pIHwgJ3RleHQtbW9kZXJhdGlvbi1sYXRlc3QnIHwgJ3RleHQtbW9kZXJhdGlvbi1zdGFibGUnO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIE1vZGVyYXRpb25zIHtcbiAgZXhwb3J0IGltcG9ydCBNb2RlcmF0aW9uID0gQVBJLk1vZGVyYXRpb247XG4gIGV4cG9ydCBpbXBvcnQgTW9kZXJhdGlvbkNyZWF0ZVJlc3BvbnNlID0gQVBJLk1vZGVyYXRpb25DcmVhdGVSZXNwb25zZTtcbiAgZXhwb3J0IGltcG9ydCBNb2RlcmF0aW9uQ3JlYXRlUGFyYW1zID0gQVBJLk1vZGVyYXRpb25DcmVhdGVQYXJhbXM7XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tICcuL2NvcmUuanMnO1xuaW1wb3J0ICogYXMgUGFnaW5hdGlvbiBmcm9tICcuL3BhZ2luYXRpb24uanMnO1xuaW1wb3J0ICogYXMgQVBJIGZyb20gJy4vcmVzb3VyY2VzL2luZGV4LmpzJztcbmltcG9ydCAqIGFzIEVycm9ycyBmcm9tICcuL2Vycm9yLmpzJztcbmltcG9ydCB0eXBlIHsgQWdlbnQgfSBmcm9tICcuL19zaGltcy9hZ2VudC5qcyc7XG5pbXBvcnQgKiBhcyBVcGxvYWRzIGZyb20gJy4vdXBsb2Fkcy5qcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2xpZW50T3B0aW9ucyB7XG4gIC8qKlxuICAgKiBEZWZhdWx0cyB0byBwcm9jZXNzLmVudltcIk9QRU5BSV9BUElfS0VZXCJdLlxuICAgKi9cbiAgYXBpS2V5Pzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgZGVmYXVsdCBiYXNlIFVSTCBmb3IgdGhlIEFQSSwgZS5nLiwgXCJodHRwczovL2FwaS5leGFtcGxlLmNvbS92Mi9cIlxuICAgKi9cbiAgYmFzZVVSTD86IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG1heGltdW0gYW1vdW50IG9mIHRpbWUgKGluIG1pbGxpc2Vjb25kcykgdGhhdCB0aGUgY2xpZW50IHNob3VsZCB3YWl0IGZvciBhIHJlc3BvbnNlXG4gICAqIGZyb20gdGhlIHNlcnZlciBiZWZvcmUgdGltaW5nIG91dCBhIHNpbmdsZSByZXF1ZXN0LlxuICAgKlxuICAgKiBOb3RlIHRoYXQgcmVxdWVzdCB0aW1lb3V0cyBhcmUgcmV0cmllZCBieSBkZWZhdWx0LCBzbyBpbiBhIHdvcnN0LWNhc2Ugc2NlbmFyaW8geW91IG1heSB3YWl0XG4gICAqIG11Y2ggbG9uZ2VyIHRoYW4gdGhpcyB0aW1lb3V0IGJlZm9yZSB0aGUgcHJvbWlzZSBzdWNjZWVkcyBvciBmYWlscy5cbiAgICovXG4gIHRpbWVvdXQ/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEFuIEhUVFAgYWdlbnQgdXNlZCB0byBtYW5hZ2UgSFRUUChTKSBjb25uZWN0aW9ucy5cbiAgICpcbiAgICogSWYgbm90IHByb3ZpZGVkLCBhbiBhZ2VudCB3aWxsIGJlIGNvbnN0cnVjdGVkIGJ5IGRlZmF1bHQgaW4gdGhlIE5vZGUuanMgZW52aXJvbm1lbnQsXG4gICAqIG90aGVyd2lzZSBubyBhZ2VudCBpcyB1c2VkLlxuICAgKi9cbiAgaHR0cEFnZW50PzogQWdlbnQ7XG5cbiAgLyoqXG4gICAqIFNwZWNpZnkgYSBjdXN0b20gYGZldGNoYCBmdW5jdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAgICpcbiAgICogSWYgbm90IHByb3ZpZGVkLCB3ZSB1c2UgYG5vZGUtZmV0Y2hgIG9uIE5vZGUuanMgYW5kIG90aGVyd2lzZSBleHBlY3QgdGhhdCBgZmV0Y2hgIGlzXG4gICAqIGRlZmluZWQgZ2xvYmFsbHkuXG4gICAqL1xuICBmZXRjaD86IENvcmUuRmV0Y2ggfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0aW1lcyB0aGF0IHRoZSBjbGllbnQgd2lsbCByZXRyeSBhIHJlcXVlc3QgaW4gY2FzZSBvZiBhXG4gICAqIHRlbXBvcmFyeSBmYWlsdXJlLCBsaWtlIGEgbmV0d29yayBlcnJvciBvciBhIDVYWCBlcnJvciBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAqXG4gICAqIEBkZWZhdWx0IDJcbiAgICovXG4gIG1heFJldHJpZXM/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIERlZmF1bHQgaGVhZGVycyB0byBpbmNsdWRlIHdpdGggZXZlcnkgcmVxdWVzdCB0byB0aGUgQVBJLlxuICAgKlxuICAgKiBUaGVzZSBjYW4gYmUgcmVtb3ZlZCBpbiBpbmRpdmlkdWFsIHJlcXVlc3RzIGJ5IGV4cGxpY2l0bHkgc2V0dGluZyB0aGVcbiAgICogaGVhZGVyIHRvIGB1bmRlZmluZWRgIG9yIGBudWxsYCBpbiByZXF1ZXN0IG9wdGlvbnMuXG4gICAqL1xuICBkZWZhdWx0SGVhZGVycz86IENvcmUuSGVhZGVycztcblxuICAvKipcbiAgICogRGVmYXVsdCBxdWVyeSBwYXJhbWV0ZXJzIHRvIGluY2x1ZGUgd2l0aCBldmVyeSByZXF1ZXN0IHRvIHRoZSBBUEkuXG4gICAqXG4gICAqIFRoZXNlIGNhbiBiZSByZW1vdmVkIGluIGluZGl2aWR1YWwgcmVxdWVzdHMgYnkgZXhwbGljaXRseSBzZXR0aW5nIHRoZVxuICAgKiBwYXJhbSB0byBgdW5kZWZpbmVkYCBpbiByZXF1ZXN0IG9wdGlvbnMuXG4gICAqL1xuICBkZWZhdWx0UXVlcnk/OiBDb3JlLkRlZmF1bHRRdWVyeTtcblxuICAvKipcbiAgICogQnkgZGVmYXVsdCwgY2xpZW50LXNpZGUgdXNlIG9mIHRoaXMgbGlicmFyeSBpcyBub3QgYWxsb3dlZCwgYXMgaXQgcmlza3MgZXhwb3NpbmcgeW91ciBzZWNyZXQgQVBJIGNyZWRlbnRpYWxzIHRvIGF0dGFja2Vycy5cbiAgICogT25seSBzZXQgdGhpcyBvcHRpb24gdG8gYHRydWVgIGlmIHlvdSB1bmRlcnN0YW5kIHRoZSByaXNrcyBhbmQgaGF2ZSBhcHByb3ByaWF0ZSBtaXRpZ2F0aW9ucyBpbiBwbGFjZS5cbiAgICovXG4gIGRhbmdlcm91c2x5QWxsb3dCcm93c2VyPzogYm9vbGVhbjtcblxuICBvcmdhbml6YXRpb24/OiBzdHJpbmcgfCBudWxsO1xufVxuXG4vKiogQVBJIENsaWVudCBmb3IgaW50ZXJmYWNpbmcgd2l0aCB0aGUgT3BlbkFJIEFQSS4gKi9cbmV4cG9ydCBjbGFzcyBPcGVuQUkgZXh0ZW5kcyBDb3JlLkFQSUNsaWVudCB7XG4gIGFwaUtleTogc3RyaW5nO1xuICBvcmdhbml6YXRpb24/OiBzdHJpbmcgfCBudWxsO1xuXG4gIHByaXZhdGUgX29wdGlvbnM6IENsaWVudE9wdGlvbnM7XG5cbiAgLyoqXG4gICAqIEFQSSBDbGllbnQgZm9yIGludGVyZmFjaW5nIHdpdGggdGhlIE9wZW5BSSBBUEkuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5hcGlLZXk9cHJvY2Vzcy5lbnZbJ09QRU5BSV9BUElfS0VZJ11dIC0gVGhlIEFQSSBLZXkgdG8gc2VuZCB0byB0aGUgQVBJLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuYmFzZVVSTF0gLSBPdmVycmlkZSB0aGUgZGVmYXVsdCBiYXNlIFVSTCBmb3IgdGhlIEFQSS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLnRpbWVvdXQ9MTAgbWludXRlc10gLSBUaGUgbWF4aW11bSBhbW91bnQgb2YgdGltZSAoaW4gbWlsbGlzZWNvbmRzKSB0aGUgY2xpZW50IHdpbGwgd2FpdCBmb3IgYSByZXNwb25zZSBiZWZvcmUgdGltaW5nIG91dC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmh0dHBBZ2VudF0gLSBBbiBIVFRQIGFnZW50IHVzZWQgdG8gbWFuYWdlIEhUVFAocykgY29ubmVjdGlvbnMuXG4gICAqIEBwYXJhbSB7Q29yZS5GZXRjaH0gW29wdHMuZmV0Y2hdIC0gU3BlY2lmeSBhIGN1c3RvbSBgZmV0Y2hgIGZ1bmN0aW9uIGltcGxlbWVudGF0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdHMubWF4UmV0cmllcz0yXSAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0aW1lcyB0aGUgY2xpZW50IHdpbGwgcmV0cnkgYSByZXF1ZXN0LlxuICAgKiBAcGFyYW0ge0NvcmUuSGVhZGVyc30gb3B0cy5kZWZhdWx0SGVhZGVycyAtIERlZmF1bHQgaGVhZGVycyB0byBpbmNsdWRlIHdpdGggZXZlcnkgcmVxdWVzdCB0byB0aGUgQVBJLlxuICAgKiBAcGFyYW0ge0NvcmUuRGVmYXVsdFF1ZXJ5fSBvcHRzLmRlZmF1bHRRdWVyeSAtIERlZmF1bHQgcXVlcnkgcGFyYW1ldGVycyB0byBpbmNsdWRlIHdpdGggZXZlcnkgcmVxdWVzdCB0byB0aGUgQVBJLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmRhbmdlcm91c2x5QWxsb3dCcm93c2VyPWZhbHNlXSAtIEJ5IGRlZmF1bHQsIGNsaWVudC1zaWRlIHVzZSBvZiB0aGlzIGxpYnJhcnkgaXMgbm90IGFsbG93ZWQsIGFzIGl0IHJpc2tzIGV4cG9zaW5nIHlvdXIgc2VjcmV0IEFQSSBjcmVkZW50aWFscyB0byBhdHRhY2tlcnMuXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVsbH0gW29wdHMub3JnYW5pemF0aW9uXVxuICAgKi9cbiAgY29uc3RydWN0b3Ioe1xuICAgIGFwaUtleSA9IENvcmUucmVhZEVudignT1BFTkFJX0FQSV9LRVknKSxcbiAgICBvcmdhbml6YXRpb24gPSBDb3JlLnJlYWRFbnYoJ09QRU5BSV9PUkdfSUQnKSA/PyBudWxsLFxuICAgIC4uLm9wdHNcbiAgfTogQ2xpZW50T3B0aW9ucyA9IHt9KSB7XG4gICAgaWYgKGFwaUtleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIFwiVGhlIE9QRU5BSV9BUElfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIG1pc3Npbmcgb3IgZW1wdHk7IGVpdGhlciBwcm92aWRlIGl0LCBvciBpbnN0YW50aWF0ZSB0aGUgT3BlbkFJIGNsaWVudCB3aXRoIGFuIGFwaUtleSBvcHRpb24sIGxpa2UgbmV3IE9wZW5BSSh7IGFwaUtleTogJ215IGFwaUtleScgfSkuXCIsXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IG9wdGlvbnM6IENsaWVudE9wdGlvbnMgPSB7XG4gICAgICBhcGlLZXksXG4gICAgICBvcmdhbml6YXRpb24sXG4gICAgICAuLi5vcHRzLFxuICAgICAgYmFzZVVSTDogb3B0cy5iYXNlVVJMID8/IGBodHRwczovL2FwaS5vcGVuYWkuY29tL3YxYCxcbiAgICB9O1xuXG4gICAgaWYgKCFvcHRpb25zLmRhbmdlcm91c2x5QWxsb3dCcm93c2VyICYmIENvcmUuaXNSdW5uaW5nSW5Ccm93c2VyKCkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJJdCBsb29rcyBsaWtlIHlvdSdyZSBydW5uaW5nIGluIGEgYnJvd3Nlci1saWtlIGVudmlyb25tZW50LlxcblxcblRoaXMgaXMgZGlzYWJsZWQgYnkgZGVmYXVsdCwgYXMgaXQgcmlza3MgZXhwb3NpbmcgeW91ciBzZWNyZXQgQVBJIGNyZWRlbnRpYWxzIHRvIGF0dGFja2Vycy5cXG5JZiB5b3UgdW5kZXJzdGFuZCB0aGUgcmlza3MgYW5kIGhhdmUgYXBwcm9wcmlhdGUgbWl0aWdhdGlvbnMgaW4gcGxhY2UsXFxueW91IGNhbiBzZXQgdGhlIGBkYW5nZXJvdXNseUFsbG93QnJvd3NlcmAgb3B0aW9uIHRvIGB0cnVlYCwgZS5nLixcXG5cXG5uZXcgT3BlbkFJKHsgYXBpS2V5LCBkYW5nZXJvdXNseUFsbG93QnJvd3NlcjogdHJ1ZSB9KTtcXG5cXG5odHRwczovL2hlbHAub3BlbmFpLmNvbS9lbi9hcnRpY2xlcy81MTEyNTk1LWJlc3QtcHJhY3RpY2VzLWZvci1hcGkta2V5LXNhZmV0eVxcblwiLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBzdXBlcih7XG4gICAgICBiYXNlVVJMOiBvcHRpb25zLmJhc2VVUkwhLFxuICAgICAgdGltZW91dDogb3B0aW9ucy50aW1lb3V0ID8/IDYwMDAwMCAvKiAxMCBtaW51dGVzICovLFxuICAgICAgaHR0cEFnZW50OiBvcHRpb25zLmh0dHBBZ2VudCxcbiAgICAgIG1heFJldHJpZXM6IG9wdGlvbnMubWF4UmV0cmllcyxcbiAgICAgIGZldGNoOiBvcHRpb25zLmZldGNoLFxuICAgIH0pO1xuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gICAgdGhpcy5vcmdhbml6YXRpb24gPSBvcmdhbml6YXRpb247XG4gIH1cblxuICBjb21wbGV0aW9uczogQVBJLkNvbXBsZXRpb25zID0gbmV3IEFQSS5Db21wbGV0aW9ucyh0aGlzKTtcbiAgY2hhdDogQVBJLkNoYXQgPSBuZXcgQVBJLkNoYXQodGhpcyk7XG4gIGVkaXRzOiBBUEkuRWRpdHMgPSBuZXcgQVBJLkVkaXRzKHRoaXMpO1xuICBlbWJlZGRpbmdzOiBBUEkuRW1iZWRkaW5ncyA9IG5ldyBBUEkuRW1iZWRkaW5ncyh0aGlzKTtcbiAgZmlsZXM6IEFQSS5GaWxlcyA9IG5ldyBBUEkuRmlsZXModGhpcyk7XG4gIGltYWdlczogQVBJLkltYWdlcyA9IG5ldyBBUEkuSW1hZ2VzKHRoaXMpO1xuICBhdWRpbzogQVBJLkF1ZGlvID0gbmV3IEFQSS5BdWRpbyh0aGlzKTtcbiAgbW9kZXJhdGlvbnM6IEFQSS5Nb2RlcmF0aW9ucyA9IG5ldyBBUEkuTW9kZXJhdGlvbnModGhpcyk7XG4gIG1vZGVsczogQVBJLk1vZGVscyA9IG5ldyBBUEkuTW9kZWxzKHRoaXMpO1xuICBmaW5lVHVuaW5nOiBBUEkuRmluZVR1bmluZyA9IG5ldyBBUEkuRmluZVR1bmluZyh0aGlzKTtcbiAgZmluZVR1bmVzOiBBUEkuRmluZVR1bmVzID0gbmV3IEFQSS5GaW5lVHVuZXModGhpcyk7XG5cbiAgcHJvdGVjdGVkIG92ZXJyaWRlIGRlZmF1bHRRdWVyeSgpOiBDb3JlLkRlZmF1bHRRdWVyeSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuX29wdGlvbnMuZGVmYXVsdFF1ZXJ5O1xuICB9XG5cbiAgcHJvdGVjdGVkIG92ZXJyaWRlIGRlZmF1bHRIZWFkZXJzKG9wdHM6IENvcmUuRmluYWxSZXF1ZXN0T3B0aW9ucyk6IENvcmUuSGVhZGVycyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnN1cGVyLmRlZmF1bHRIZWFkZXJzKG9wdHMpLFxuICAgICAgJ09wZW5BSS1Pcmdhbml6YXRpb24nOiB0aGlzLm9yZ2FuaXphdGlvbixcbiAgICAgIC4uLnRoaXMuX29wdGlvbnMuZGVmYXVsdEhlYWRlcnMsXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvdmVycmlkZSBhdXRoSGVhZGVycyhvcHRzOiBDb3JlLkZpbmFsUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkhlYWRlcnMge1xuICAgIHJldHVybiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLmFwaUtleX1gIH07XG4gIH1cblxuICBzdGF0aWMgT3BlbkFJID0gdGhpcztcblxuICBzdGF0aWMgQVBJRXJyb3IgPSBFcnJvcnMuQVBJRXJyb3I7XG4gIHN0YXRpYyBBUElDb25uZWN0aW9uRXJyb3IgPSBFcnJvcnMuQVBJQ29ubmVjdGlvbkVycm9yO1xuICBzdGF0aWMgQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvciA9IEVycm9ycy5BUElDb25uZWN0aW9uVGltZW91dEVycm9yO1xuICBzdGF0aWMgQVBJVXNlckFib3J0RXJyb3IgPSBFcnJvcnMuQVBJVXNlckFib3J0RXJyb3I7XG4gIHN0YXRpYyBOb3RGb3VuZEVycm9yID0gRXJyb3JzLk5vdEZvdW5kRXJyb3I7XG4gIHN0YXRpYyBDb25mbGljdEVycm9yID0gRXJyb3JzLkNvbmZsaWN0RXJyb3I7XG4gIHN0YXRpYyBSYXRlTGltaXRFcnJvciA9IEVycm9ycy5SYXRlTGltaXRFcnJvcjtcbiAgc3RhdGljIEJhZFJlcXVlc3RFcnJvciA9IEVycm9ycy5CYWRSZXF1ZXN0RXJyb3I7XG4gIHN0YXRpYyBBdXRoZW50aWNhdGlvbkVycm9yID0gRXJyb3JzLkF1dGhlbnRpY2F0aW9uRXJyb3I7XG4gIHN0YXRpYyBJbnRlcm5hbFNlcnZlckVycm9yID0gRXJyb3JzLkludGVybmFsU2VydmVyRXJyb3I7XG4gIHN0YXRpYyBQZXJtaXNzaW9uRGVuaWVkRXJyb3IgPSBFcnJvcnMuUGVybWlzc2lvbkRlbmllZEVycm9yO1xuICBzdGF0aWMgVW5wcm9jZXNzYWJsZUVudGl0eUVycm9yID0gRXJyb3JzLlVucHJvY2Vzc2FibGVFbnRpdHlFcnJvcjtcbn1cblxuZXhwb3J0IGNvbnN0IHtcbiAgQVBJRXJyb3IsXG4gIEFQSUNvbm5lY3Rpb25FcnJvcixcbiAgQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvcixcbiAgQVBJVXNlckFib3J0RXJyb3IsXG4gIE5vdEZvdW5kRXJyb3IsXG4gIENvbmZsaWN0RXJyb3IsXG4gIFJhdGVMaW1pdEVycm9yLFxuICBCYWRSZXF1ZXN0RXJyb3IsXG4gIEF1dGhlbnRpY2F0aW9uRXJyb3IsXG4gIEludGVybmFsU2VydmVyRXJyb3IsXG4gIFBlcm1pc3Npb25EZW5pZWRFcnJvcixcbiAgVW5wcm9jZXNzYWJsZUVudGl0eUVycm9yLFxufSA9IEVycm9ycztcblxuZXhwb3J0IGltcG9ydCB0b0ZpbGUgPSBVcGxvYWRzLnRvRmlsZTtcbmV4cG9ydCBpbXBvcnQgZmlsZUZyb21QYXRoID0gVXBsb2Fkcy5maWxlRnJvbVBhdGg7XG5cbmV4cG9ydCBuYW1lc3BhY2UgT3BlbkFJIHtcbiAgLy8gSGVscGVyIGZ1bmN0aW9uc1xuICBleHBvcnQgaW1wb3J0IHRvRmlsZSA9IFVwbG9hZHMudG9GaWxlO1xuICBleHBvcnQgaW1wb3J0IGZpbGVGcm9tUGF0aCA9IFVwbG9hZHMuZmlsZUZyb21QYXRoO1xuXG4gIGV4cG9ydCBpbXBvcnQgUmVxdWVzdE9wdGlvbnMgPSBDb3JlLlJlcXVlc3RPcHRpb25zO1xuXG4gIGV4cG9ydCBpbXBvcnQgUGFnZSA9IFBhZ2luYXRpb24uUGFnZTtcbiAgZXhwb3J0IGltcG9ydCBQYWdlUmVzcG9uc2UgPSBQYWdpbmF0aW9uLlBhZ2VSZXNwb25zZTtcblxuICBleHBvcnQgaW1wb3J0IEN1cnNvclBhZ2UgPSBQYWdpbmF0aW9uLkN1cnNvclBhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgQ3Vyc29yUGFnZVBhcmFtcyA9IFBhZ2luYXRpb24uQ3Vyc29yUGFnZVBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBDdXJzb3JQYWdlUmVzcG9uc2UgPSBQYWdpbmF0aW9uLkN1cnNvclBhZ2VSZXNwb25zZTtcblxuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25zID0gQVBJLkNvbXBsZXRpb25zO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb24gPSBBUEkuQ29tcGxldGlvbjtcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uQ2hvaWNlID0gQVBJLkNvbXBsZXRpb25DaG9pY2U7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvblVzYWdlID0gQVBJLkNvbXBsZXRpb25Vc2FnZTtcbiAgZXhwb3J0IGltcG9ydCBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zID0gQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXM7XG4gIGV4cG9ydCBpbXBvcnQgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyA9IEFQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nO1xuICBleHBvcnQgaW1wb3J0IENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgPSBBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZztcblxuICBleHBvcnQgaW1wb3J0IENoYXQgPSBBUEkuQ2hhdDtcblxuICBleHBvcnQgaW1wb3J0IEVkaXRzID0gQVBJLkVkaXRzO1xuICBleHBvcnQgaW1wb3J0IEVkaXQgPSBBUEkuRWRpdDtcbiAgZXhwb3J0IGltcG9ydCBFZGl0Q3JlYXRlUGFyYW1zID0gQVBJLkVkaXRDcmVhdGVQYXJhbXM7XG5cbiAgZXhwb3J0IGltcG9ydCBFbWJlZGRpbmdzID0gQVBJLkVtYmVkZGluZ3M7XG4gIGV4cG9ydCBpbXBvcnQgQ3JlYXRlRW1iZWRkaW5nUmVzcG9uc2UgPSBBUEkuQ3JlYXRlRW1iZWRkaW5nUmVzcG9uc2U7XG4gIGV4cG9ydCBpbXBvcnQgRW1iZWRkaW5nID0gQVBJLkVtYmVkZGluZztcbiAgZXhwb3J0IGltcG9ydCBFbWJlZGRpbmdDcmVhdGVQYXJhbXMgPSBBUEkuRW1iZWRkaW5nQ3JlYXRlUGFyYW1zO1xuXG4gIGV4cG9ydCBpbXBvcnQgRmlsZXMgPSBBUEkuRmlsZXM7XG4gIGV4cG9ydCBpbXBvcnQgRmlsZUNvbnRlbnQgPSBBUEkuRmlsZUNvbnRlbnQ7XG4gIGV4cG9ydCBpbXBvcnQgRmlsZURlbGV0ZWQgPSBBUEkuRmlsZURlbGV0ZWQ7XG4gIGV4cG9ydCBpbXBvcnQgRmlsZU9iamVjdCA9IEFQSS5GaWxlT2JqZWN0O1xuICBleHBvcnQgaW1wb3J0IEZpbGVPYmplY3RzUGFnZSA9IEFQSS5GaWxlT2JqZWN0c1BhZ2U7XG4gIGV4cG9ydCBpbXBvcnQgRmlsZUNyZWF0ZVBhcmFtcyA9IEFQSS5GaWxlQ3JlYXRlUGFyYW1zO1xuXG4gIGV4cG9ydCBpbXBvcnQgSW1hZ2VzID0gQVBJLkltYWdlcztcbiAgZXhwb3J0IGltcG9ydCBJbWFnZSA9IEFQSS5JbWFnZTtcbiAgZXhwb3J0IGltcG9ydCBJbWFnZXNSZXNwb25zZSA9IEFQSS5JbWFnZXNSZXNwb25zZTtcbiAgZXhwb3J0IGltcG9ydCBJbWFnZUNyZWF0ZVZhcmlhdGlvblBhcmFtcyA9IEFQSS5JbWFnZUNyZWF0ZVZhcmlhdGlvblBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBJbWFnZUVkaXRQYXJhbXMgPSBBUEkuSW1hZ2VFZGl0UGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IEltYWdlR2VuZXJhdGVQYXJhbXMgPSBBUEkuSW1hZ2VHZW5lcmF0ZVBhcmFtcztcblxuICBleHBvcnQgaW1wb3J0IEF1ZGlvID0gQVBJLkF1ZGlvO1xuXG4gIGV4cG9ydCBpbXBvcnQgTW9kZXJhdGlvbnMgPSBBUEkuTW9kZXJhdGlvbnM7XG4gIGV4cG9ydCBpbXBvcnQgTW9kZXJhdGlvbiA9IEFQSS5Nb2RlcmF0aW9uO1xuICBleHBvcnQgaW1wb3J0IE1vZGVyYXRpb25DcmVhdGVSZXNwb25zZSA9IEFQSS5Nb2RlcmF0aW9uQ3JlYXRlUmVzcG9uc2U7XG4gIGV4cG9ydCBpbXBvcnQgTW9kZXJhdGlvbkNyZWF0ZVBhcmFtcyA9IEFQSS5Nb2RlcmF0aW9uQ3JlYXRlUGFyYW1zO1xuXG4gIGV4cG9ydCBpbXBvcnQgTW9kZWxzID0gQVBJLk1vZGVscztcbiAgZXhwb3J0IGltcG9ydCBNb2RlbCA9IEFQSS5Nb2RlbDtcbiAgZXhwb3J0IGltcG9ydCBNb2RlbERlbGV0ZWQgPSBBUEkuTW9kZWxEZWxldGVkO1xuICBleHBvcnQgaW1wb3J0IE1vZGVsc1BhZ2UgPSBBUEkuTW9kZWxzUGFnZTtcblxuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5pbmcgPSBBUEkuRmluZVR1bmluZztcblxuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5lcyA9IEFQSS5GaW5lVHVuZXM7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmUgPSBBUEkuRmluZVR1bmU7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVFdmVudCA9IEFQSS5GaW5lVHVuZUV2ZW50O1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5lRXZlbnRzTGlzdFJlc3BvbnNlID0gQVBJLkZpbmVUdW5lRXZlbnRzTGlzdFJlc3BvbnNlO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5lc1BhZ2UgPSBBUEkuRmluZVR1bmVzUGFnZTtcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZUNyZWF0ZVBhcmFtcyA9IEFQSS5GaW5lVHVuZUNyZWF0ZVBhcmFtcztcbiAgZXhwb3J0IGltcG9ydCBGaW5lVHVuZUxpc3RFdmVudHNQYXJhbXMgPSBBUEkuRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zO1xuICBleHBvcnQgaW1wb3J0IEZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc05vblN0cmVhbWluZyA9IEFQSS5GaW5lVHVuZUxpc3RFdmVudHNQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCBpbXBvcnQgRmluZVR1bmVMaXN0RXZlbnRzUGFyYW1zU3RyZWFtaW5nID0gQVBJLkZpbmVUdW5lTGlzdEV2ZW50c1BhcmFtc1N0cmVhbWluZztcbn1cblxuZXhwb3J0IGRlZmF1bHQgT3BlbkFJO1xuIiwgIi8qKlxuICogbWFya2VkIHY0LjMuMCAtIGEgbWFya2Rvd24gcGFyc2VyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTEtMjAyMywgQ2hyaXN0b3BoZXIgSmVmZnJleS4gKE1JVCBMaWNlbnNlZClcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9tYXJrZWRqcy9tYXJrZWRcbiAqL1xuXG4vKipcbiAqIERPIE5PVCBFRElUIFRISVMgRklMRVxuICogVGhlIGNvZGUgaW4gdGhpcyBmaWxlIGlzIGdlbmVyYXRlZCBmcm9tIGZpbGVzIGluIC4vc3JjL1xuICovXG5cbmZ1bmN0aW9uIGdldERlZmF1bHRzKCkge1xuICByZXR1cm4ge1xuICAgIGFzeW5jOiBmYWxzZSxcbiAgICBiYXNlVXJsOiBudWxsLFxuICAgIGJyZWFrczogZmFsc2UsXG4gICAgZXh0ZW5zaW9uczogbnVsbCxcbiAgICBnZm06IHRydWUsXG4gICAgaGVhZGVySWRzOiB0cnVlLFxuICAgIGhlYWRlclByZWZpeDogJycsXG4gICAgaGlnaGxpZ2h0OiBudWxsLFxuICAgIGhvb2tzOiBudWxsLFxuICAgIGxhbmdQcmVmaXg6ICdsYW5ndWFnZS0nLFxuICAgIG1hbmdsZTogdHJ1ZSxcbiAgICBwZWRhbnRpYzogZmFsc2UsXG4gICAgcmVuZGVyZXI6IG51bGwsXG4gICAgc2FuaXRpemU6IGZhbHNlLFxuICAgIHNhbml0aXplcjogbnVsbCxcbiAgICBzaWxlbnQ6IGZhbHNlLFxuICAgIHNtYXJ0eXBhbnRzOiBmYWxzZSxcbiAgICB0b2tlbml6ZXI6IG51bGwsXG4gICAgd2Fsa1Rva2VuczogbnVsbCxcbiAgICB4aHRtbDogZmFsc2VcbiAgfTtcbn1cblxubGV0IGRlZmF1bHRzID0gZ2V0RGVmYXVsdHMoKTtcblxuZnVuY3Rpb24gY2hhbmdlRGVmYXVsdHMobmV3RGVmYXVsdHMpIHtcbiAgZGVmYXVsdHMgPSBuZXdEZWZhdWx0cztcbn1cblxuLyoqXG4gKiBIZWxwZXJzXG4gKi9cbmNvbnN0IGVzY2FwZVRlc3QgPSAvWyY8PlwiJ10vO1xuY29uc3QgZXNjYXBlUmVwbGFjZSA9IG5ldyBSZWdFeHAoZXNjYXBlVGVzdC5zb3VyY2UsICdnJyk7XG5jb25zdCBlc2NhcGVUZXN0Tm9FbmNvZGUgPSAvWzw+XCInXXwmKD8hKCNcXGR7MSw3fXwjW1h4XVthLWZBLUYwLTldezEsNn18XFx3Kyk7KS87XG5jb25zdCBlc2NhcGVSZXBsYWNlTm9FbmNvZGUgPSBuZXcgUmVnRXhwKGVzY2FwZVRlc3ROb0VuY29kZS5zb3VyY2UsICdnJyk7XG5jb25zdCBlc2NhcGVSZXBsYWNlbWVudHMgPSB7XG4gICcmJzogJyZhbXA7JyxcbiAgJzwnOiAnJmx0OycsXG4gICc+JzogJyZndDsnLFxuICAnXCInOiAnJnF1b3Q7JyxcbiAgXCInXCI6ICcmIzM5Oydcbn07XG5jb25zdCBnZXRFc2NhcGVSZXBsYWNlbWVudCA9IChjaCkgPT4gZXNjYXBlUmVwbGFjZW1lbnRzW2NoXTtcbmZ1bmN0aW9uIGVzY2FwZShodG1sLCBlbmNvZGUpIHtcbiAgaWYgKGVuY29kZSkge1xuICAgIGlmIChlc2NhcGVUZXN0LnRlc3QoaHRtbCkpIHtcbiAgICAgIHJldHVybiBodG1sLnJlcGxhY2UoZXNjYXBlUmVwbGFjZSwgZ2V0RXNjYXBlUmVwbGFjZW1lbnQpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBpZiAoZXNjYXBlVGVzdE5vRW5jb2RlLnRlc3QoaHRtbCkpIHtcbiAgICAgIHJldHVybiBodG1sLnJlcGxhY2UoZXNjYXBlUmVwbGFjZU5vRW5jb2RlLCBnZXRFc2NhcGVSZXBsYWNlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGh0bWw7XG59XG5cbmNvbnN0IHVuZXNjYXBlVGVzdCA9IC8mKCMoPzpcXGQrKXwoPzojeFswLTlBLUZhLWZdKyl8KD86XFx3KykpOz8vaWc7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGh0bWxcbiAqL1xuZnVuY3Rpb24gdW5lc2NhcGUoaHRtbCkge1xuICAvLyBleHBsaWNpdGx5IG1hdGNoIGRlY2ltYWwsIGhleCwgYW5kIG5hbWVkIEhUTUwgZW50aXRpZXNcbiAgcmV0dXJuIGh0bWwucmVwbGFjZSh1bmVzY2FwZVRlc3QsIChfLCBuKSA9PiB7XG4gICAgbiA9IG4udG9Mb3dlckNhc2UoKTtcbiAgICBpZiAobiA9PT0gJ2NvbG9uJykgcmV0dXJuICc6JztcbiAgICBpZiAobi5jaGFyQXQoMCkgPT09ICcjJykge1xuICAgICAgcmV0dXJuIG4uY2hhckF0KDEpID09PSAneCdcbiAgICAgICAgPyBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KG4uc3Vic3RyaW5nKDIpLCAxNikpXG4gICAgICAgIDogU3RyaW5nLmZyb21DaGFyQ29kZSgrbi5zdWJzdHJpbmcoMSkpO1xuICAgIH1cbiAgICByZXR1cm4gJyc7XG4gIH0pO1xufVxuXG5jb25zdCBjYXJldCA9IC8oXnxbXlxcW10pXFxeL2c7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmcgfCBSZWdFeHB9IHJlZ2V4XG4gKiBAcGFyYW0ge3N0cmluZ30gb3B0XG4gKi9cbmZ1bmN0aW9uIGVkaXQocmVnZXgsIG9wdCkge1xuICByZWdleCA9IHR5cGVvZiByZWdleCA9PT0gJ3N0cmluZycgPyByZWdleCA6IHJlZ2V4LnNvdXJjZTtcbiAgb3B0ID0gb3B0IHx8ICcnO1xuICBjb25zdCBvYmogPSB7XG4gICAgcmVwbGFjZTogKG5hbWUsIHZhbCkgPT4ge1xuICAgICAgdmFsID0gdmFsLnNvdXJjZSB8fCB2YWw7XG4gICAgICB2YWwgPSB2YWwucmVwbGFjZShjYXJldCwgJyQxJyk7XG4gICAgICByZWdleCA9IHJlZ2V4LnJlcGxhY2UobmFtZSwgdmFsKTtcbiAgICAgIHJldHVybiBvYmo7XG4gICAgfSxcbiAgICBnZXRSZWdleDogKCkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBSZWdFeHAocmVnZXgsIG9wdCk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gb2JqO1xufVxuXG5jb25zdCBub25Xb3JkQW5kQ29sb25UZXN0ID0gL1teXFx3Ol0vZztcbmNvbnN0IG9yaWdpbkluZGVwZW5kZW50VXJsID0gL14kfF5bYS16XVthLXowLTkrLi1dKjp8Xls/I10vaTtcblxuLyoqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNhbml0aXplXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVxuICogQHBhcmFtIHtzdHJpbmd9IGhyZWZcbiAqL1xuZnVuY3Rpb24gY2xlYW5Vcmwoc2FuaXRpemUsIGJhc2UsIGhyZWYpIHtcbiAgaWYgKHNhbml0aXplKSB7XG4gICAgbGV0IHByb3Q7XG4gICAgdHJ5IHtcbiAgICAgIHByb3QgPSBkZWNvZGVVUklDb21wb25lbnQodW5lc2NhcGUoaHJlZikpXG4gICAgICAgIC5yZXBsYWNlKG5vbldvcmRBbmRDb2xvblRlc3QsICcnKVxuICAgICAgICAudG9Mb3dlckNhc2UoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHByb3QuaW5kZXhPZignamF2YXNjcmlwdDonKSA9PT0gMCB8fCBwcm90LmluZGV4T2YoJ3Zic2NyaXB0OicpID09PSAwIHx8IHByb3QuaW5kZXhPZignZGF0YTonKSA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG4gIGlmIChiYXNlICYmICFvcmlnaW5JbmRlcGVuZGVudFVybC50ZXN0KGhyZWYpKSB7XG4gICAgaHJlZiA9IHJlc29sdmVVcmwoYmFzZSwgaHJlZik7XG4gIH1cbiAgdHJ5IHtcbiAgICBocmVmID0gZW5jb2RlVVJJKGhyZWYpLnJlcGxhY2UoLyUyNS9nLCAnJScpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGhyZWY7XG59XG5cbmNvbnN0IGJhc2VVcmxzID0ge307XG5jb25zdCBqdXN0RG9tYWluID0gL15bXjpdKzpcXC8qW14vXSokLztcbmNvbnN0IHByb3RvY29sID0gL14oW146XSs6KVtcXHNcXFNdKiQvO1xuY29uc3QgZG9tYWluID0gL14oW146XSs6XFwvKlteL10qKVtcXHNcXFNdKiQvO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlXG4gKiBAcGFyYW0ge3N0cmluZ30gaHJlZlxuICovXG5mdW5jdGlvbiByZXNvbHZlVXJsKGJhc2UsIGhyZWYpIHtcbiAgaWYgKCFiYXNlVXJsc1snICcgKyBiYXNlXSkge1xuICAgIC8vIHdlIGNhbiBpZ25vcmUgZXZlcnl0aGluZyBpbiBiYXNlIGFmdGVyIHRoZSBsYXN0IHNsYXNoIG9mIGl0cyBwYXRoIGNvbXBvbmVudCxcbiAgICAvLyBidXQgd2UgbWlnaHQgbmVlZCB0byBhZGQgX3RoYXRfXG4gICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM5ODYjc2VjdGlvbi0zXG4gICAgaWYgKGp1c3REb21haW4udGVzdChiYXNlKSkge1xuICAgICAgYmFzZVVybHNbJyAnICsgYmFzZV0gPSBiYXNlICsgJy8nO1xuICAgIH0gZWxzZSB7XG4gICAgICBiYXNlVXJsc1snICcgKyBiYXNlXSA9IHJ0cmltKGJhc2UsICcvJywgdHJ1ZSk7XG4gICAgfVxuICB9XG4gIGJhc2UgPSBiYXNlVXJsc1snICcgKyBiYXNlXTtcbiAgY29uc3QgcmVsYXRpdmVCYXNlID0gYmFzZS5pbmRleE9mKCc6JykgPT09IC0xO1xuXG4gIGlmIChocmVmLnN1YnN0cmluZygwLCAyKSA9PT0gJy8vJykge1xuICAgIGlmIChyZWxhdGl2ZUJhc2UpIHtcbiAgICAgIHJldHVybiBocmVmO1xuICAgIH1cbiAgICByZXR1cm4gYmFzZS5yZXBsYWNlKHByb3RvY29sLCAnJDEnKSArIGhyZWY7XG4gIH0gZWxzZSBpZiAoaHJlZi5jaGFyQXQoMCkgPT09ICcvJykge1xuICAgIGlmIChyZWxhdGl2ZUJhc2UpIHtcbiAgICAgIHJldHVybiBocmVmO1xuICAgIH1cbiAgICByZXR1cm4gYmFzZS5yZXBsYWNlKGRvbWFpbiwgJyQxJykgKyBocmVmO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBiYXNlICsgaHJlZjtcbiAgfVxufVxuXG5jb25zdCBub29wVGVzdCA9IHsgZXhlYzogZnVuY3Rpb24gbm9vcFRlc3QoKSB7fSB9O1xuXG5mdW5jdGlvbiBzcGxpdENlbGxzKHRhYmxlUm93LCBjb3VudCkge1xuICAvLyBlbnN1cmUgdGhhdCBldmVyeSBjZWxsLWRlbGltaXRpbmcgcGlwZSBoYXMgYSBzcGFjZVxuICAvLyBiZWZvcmUgaXQgdG8gZGlzdGluZ3Vpc2ggaXQgZnJvbSBhbiBlc2NhcGVkIHBpcGVcbiAgY29uc3Qgcm93ID0gdGFibGVSb3cucmVwbGFjZSgvXFx8L2csIChtYXRjaCwgb2Zmc2V0LCBzdHIpID0+IHtcbiAgICAgIGxldCBlc2NhcGVkID0gZmFsc2UsXG4gICAgICAgIGN1cnIgPSBvZmZzZXQ7XG4gICAgICB3aGlsZSAoLS1jdXJyID49IDAgJiYgc3RyW2N1cnJdID09PSAnXFxcXCcpIGVzY2FwZWQgPSAhZXNjYXBlZDtcbiAgICAgIGlmIChlc2NhcGVkKSB7XG4gICAgICAgIC8vIG9kZCBudW1iZXIgb2Ygc2xhc2hlcyBtZWFucyB8IGlzIGVzY2FwZWRcbiAgICAgICAgLy8gc28gd2UgbGVhdmUgaXQgYWxvbmVcbiAgICAgICAgcmV0dXJuICd8JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGFkZCBzcGFjZSBiZWZvcmUgdW5lc2NhcGVkIHxcbiAgICAgICAgcmV0dXJuICcgfCc7XG4gICAgICB9XG4gICAgfSksXG4gICAgY2VsbHMgPSByb3cuc3BsaXQoLyBcXHwvKTtcbiAgbGV0IGkgPSAwO1xuXG4gIC8vIEZpcnN0L2xhc3QgY2VsbCBpbiBhIHJvdyBjYW5ub3QgYmUgZW1wdHkgaWYgaXQgaGFzIG5vIGxlYWRpbmcvdHJhaWxpbmcgcGlwZVxuICBpZiAoIWNlbGxzWzBdLnRyaW0oKSkgeyBjZWxscy5zaGlmdCgpOyB9XG4gIGlmIChjZWxscy5sZW5ndGggPiAwICYmICFjZWxsc1tjZWxscy5sZW5ndGggLSAxXS50cmltKCkpIHsgY2VsbHMucG9wKCk7IH1cblxuICBpZiAoY2VsbHMubGVuZ3RoID4gY291bnQpIHtcbiAgICBjZWxscy5zcGxpY2UoY291bnQpO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChjZWxscy5sZW5ndGggPCBjb3VudCkgY2VsbHMucHVzaCgnJyk7XG4gIH1cblxuICBmb3IgKDsgaSA8IGNlbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgLy8gbGVhZGluZyBvciB0cmFpbGluZyB3aGl0ZXNwYWNlIGlzIGlnbm9yZWQgcGVyIHRoZSBnZm0gc3BlY1xuICAgIGNlbGxzW2ldID0gY2VsbHNbaV0udHJpbSgpLnJlcGxhY2UoL1xcXFxcXHwvZywgJ3wnKTtcbiAgfVxuICByZXR1cm4gY2VsbHM7XG59XG5cbi8qKlxuICogUmVtb3ZlIHRyYWlsaW5nICdjJ3MuIEVxdWl2YWxlbnQgdG8gc3RyLnJlcGxhY2UoL2MqJC8sICcnKS5cbiAqIC9jKiQvIGlzIHZ1bG5lcmFibGUgdG8gUkVET1MuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxuICogQHBhcmFtIHtzdHJpbmd9IGNcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaW52ZXJ0IFJlbW92ZSBzdWZmaXggb2Ygbm9uLWMgY2hhcnMgaW5zdGVhZC4gRGVmYXVsdCBmYWxzZXkuXG4gKi9cbmZ1bmN0aW9uIHJ0cmltKHN0ciwgYywgaW52ZXJ0KSB7XG4gIGNvbnN0IGwgPSBzdHIubGVuZ3RoO1xuICBpZiAobCA9PT0gMCkge1xuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIC8vIExlbmd0aCBvZiBzdWZmaXggbWF0Y2hpbmcgdGhlIGludmVydCBjb25kaXRpb24uXG4gIGxldCBzdWZmTGVuID0gMDtcblxuICAvLyBTdGVwIGxlZnQgdW50aWwgd2UgZmFpbCB0byBtYXRjaCB0aGUgaW52ZXJ0IGNvbmRpdGlvbi5cbiAgd2hpbGUgKHN1ZmZMZW4gPCBsKSB7XG4gICAgY29uc3QgY3VyckNoYXIgPSBzdHIuY2hhckF0KGwgLSBzdWZmTGVuIC0gMSk7XG4gICAgaWYgKGN1cnJDaGFyID09PSBjICYmICFpbnZlcnQpIHtcbiAgICAgIHN1ZmZMZW4rKztcbiAgICB9IGVsc2UgaWYgKGN1cnJDaGFyICE9PSBjICYmIGludmVydCkge1xuICAgICAgc3VmZkxlbisrO1xuICAgIH0gZWxzZSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gc3RyLnNsaWNlKDAsIGwgLSBzdWZmTGVuKTtcbn1cblxuZnVuY3Rpb24gZmluZENsb3NpbmdCcmFja2V0KHN0ciwgYikge1xuICBpZiAoc3RyLmluZGV4T2YoYlsxXSkgPT09IC0xKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG4gIGNvbnN0IGwgPSBzdHIubGVuZ3RoO1xuICBsZXQgbGV2ZWwgPSAwLFxuICAgIGkgPSAwO1xuICBmb3IgKDsgaSA8IGw7IGkrKykge1xuICAgIGlmIChzdHJbaV0gPT09ICdcXFxcJykge1xuICAgICAgaSsrO1xuICAgIH0gZWxzZSBpZiAoc3RyW2ldID09PSBiWzBdKSB7XG4gICAgICBsZXZlbCsrO1xuICAgIH0gZWxzZSBpZiAoc3RyW2ldID09PSBiWzFdKSB7XG4gICAgICBsZXZlbC0tO1xuICAgICAgaWYgKGxldmVsIDwgMCkge1xuICAgICAgICByZXR1cm4gaTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG5mdW5jdGlvbiBjaGVja1Nhbml0aXplRGVwcmVjYXRpb24ob3B0KSB7XG4gIGlmIChvcHQgJiYgb3B0LnNhbml0aXplICYmICFvcHQuc2lsZW50KSB7XG4gICAgY29uc29sZS53YXJuKCdtYXJrZWQoKTogc2FuaXRpemUgYW5kIHNhbml0aXplciBwYXJhbWV0ZXJzIGFyZSBkZXByZWNhdGVkIHNpbmNlIHZlcnNpb24gMC43LjAsIHNob3VsZCBub3QgYmUgdXNlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBmdXR1cmUuIFJlYWQgbW9yZSBoZXJlOiBodHRwczovL21hcmtlZC5qcy5vcmcvIy9VU0lOR19BRFZBTkNFRC5tZCNvcHRpb25zJyk7XG4gIH1cbn1cblxuLy8gY29waWVkIGZyb20gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzU0NTAxMTMvODA2Nzc3XG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXR0ZXJuXG4gKiBAcGFyYW0ge251bWJlcn0gY291bnRcbiAqL1xuZnVuY3Rpb24gcmVwZWF0U3RyaW5nKHBhdHRlcm4sIGNvdW50KSB7XG4gIGlmIChjb3VudCA8IDEpIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgbGV0IHJlc3VsdCA9ICcnO1xuICB3aGlsZSAoY291bnQgPiAxKSB7XG4gICAgaWYgKGNvdW50ICYgMSkge1xuICAgICAgcmVzdWx0ICs9IHBhdHRlcm47XG4gICAgfVxuICAgIGNvdW50ID4+PSAxO1xuICAgIHBhdHRlcm4gKz0gcGF0dGVybjtcbiAgfVxuICByZXR1cm4gcmVzdWx0ICsgcGF0dGVybjtcbn1cblxuZnVuY3Rpb24gb3V0cHV0TGluayhjYXAsIGxpbmssIHJhdywgbGV4ZXIpIHtcbiAgY29uc3QgaHJlZiA9IGxpbmsuaHJlZjtcbiAgY29uc3QgdGl0bGUgPSBsaW5rLnRpdGxlID8gZXNjYXBlKGxpbmsudGl0bGUpIDogbnVsbDtcbiAgY29uc3QgdGV4dCA9IGNhcFsxXS5yZXBsYWNlKC9cXFxcKFtcXFtcXF1dKS9nLCAnJDEnKTtcblxuICBpZiAoY2FwWzBdLmNoYXJBdCgwKSAhPT0gJyEnKSB7XG4gICAgbGV4ZXIuc3RhdGUuaW5MaW5rID0gdHJ1ZTtcbiAgICBjb25zdCB0b2tlbiA9IHtcbiAgICAgIHR5cGU6ICdsaW5rJyxcbiAgICAgIHJhdyxcbiAgICAgIGhyZWYsXG4gICAgICB0aXRsZSxcbiAgICAgIHRleHQsXG4gICAgICB0b2tlbnM6IGxleGVyLmlubGluZVRva2Vucyh0ZXh0KVxuICAgIH07XG4gICAgbGV4ZXIuc3RhdGUuaW5MaW5rID0gZmFsc2U7XG4gICAgcmV0dXJuIHRva2VuO1xuICB9XG4gIHJldHVybiB7XG4gICAgdHlwZTogJ2ltYWdlJyxcbiAgICByYXcsXG4gICAgaHJlZixcbiAgICB0aXRsZSxcbiAgICB0ZXh0OiBlc2NhcGUodGV4dClcbiAgfTtcbn1cblxuZnVuY3Rpb24gaW5kZW50Q29kZUNvbXBlbnNhdGlvbihyYXcsIHRleHQpIHtcbiAgY29uc3QgbWF0Y2hJbmRlbnRUb0NvZGUgPSByYXcubWF0Y2goL14oXFxzKykoPzpgYGApLyk7XG5cbiAgaWYgKG1hdGNoSW5kZW50VG9Db2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cblxuICBjb25zdCBpbmRlbnRUb0NvZGUgPSBtYXRjaEluZGVudFRvQ29kZVsxXTtcblxuICByZXR1cm4gdGV4dFxuICAgIC5zcGxpdCgnXFxuJylcbiAgICAubWFwKG5vZGUgPT4ge1xuICAgICAgY29uc3QgbWF0Y2hJbmRlbnRJbk5vZGUgPSBub2RlLm1hdGNoKC9eXFxzKy8pO1xuICAgICAgaWYgKG1hdGNoSW5kZW50SW5Ob2RlID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBbaW5kZW50SW5Ob2RlXSA9IG1hdGNoSW5kZW50SW5Ob2RlO1xuXG4gICAgICBpZiAoaW5kZW50SW5Ob2RlLmxlbmd0aCA+PSBpbmRlbnRUb0NvZGUubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBub2RlLnNsaWNlKGluZGVudFRvQ29kZS5sZW5ndGgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbm9kZTtcbiAgICB9KVxuICAgIC5qb2luKCdcXG4nKTtcbn1cblxuLyoqXG4gKiBUb2tlbml6ZXJcbiAqL1xuY2xhc3MgVG9rZW5pemVyIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwgZGVmYXVsdHM7XG4gIH1cblxuICBzcGFjZShzcmMpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmJsb2NrLm5ld2xpbmUuZXhlYyhzcmMpO1xuICAgIGlmIChjYXAgJiYgY2FwWzBdLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdzcGFjZScsXG4gICAgICAgIHJhdzogY2FwWzBdXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGNvZGUoc3JjKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5ibG9jay5jb2RlLmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICBjb25zdCB0ZXh0ID0gY2FwWzBdLnJlcGxhY2UoL14gezEsNH0vZ20sICcnKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdjb2RlJyxcbiAgICAgICAgcmF3OiBjYXBbMF0sXG4gICAgICAgIGNvZGVCbG9ja1N0eWxlOiAnaW5kZW50ZWQnLFxuICAgICAgICB0ZXh0OiAhdGhpcy5vcHRpb25zLnBlZGFudGljXG4gICAgICAgICAgPyBydHJpbSh0ZXh0LCAnXFxuJylcbiAgICAgICAgICA6IHRleHRcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgZmVuY2VzKHNyYykge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuYmxvY2suZmVuY2VzLmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICBjb25zdCByYXcgPSBjYXBbMF07XG4gICAgICBjb25zdCB0ZXh0ID0gaW5kZW50Q29kZUNvbXBlbnNhdGlvbihyYXcsIGNhcFszXSB8fCAnJyk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdjb2RlJyxcbiAgICAgICAgcmF3LFxuICAgICAgICBsYW5nOiBjYXBbMl0gPyBjYXBbMl0udHJpbSgpLnJlcGxhY2UodGhpcy5ydWxlcy5pbmxpbmUuX2VzY2FwZXMsICckMScpIDogY2FwWzJdLFxuICAgICAgICB0ZXh0XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGhlYWRpbmcoc3JjKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5ibG9jay5oZWFkaW5nLmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICBsZXQgdGV4dCA9IGNhcFsyXS50cmltKCk7XG5cbiAgICAgIC8vIHJlbW92ZSB0cmFpbGluZyAjc1xuICAgICAgaWYgKC8jJC8udGVzdCh0ZXh0KSkge1xuICAgICAgICBjb25zdCB0cmltbWVkID0gcnRyaW0odGV4dCwgJyMnKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5wZWRhbnRpYykge1xuICAgICAgICAgIHRleHQgPSB0cmltbWVkLnRyaW0oKTtcbiAgICAgICAgfSBlbHNlIGlmICghdHJpbW1lZCB8fCAvICQvLnRlc3QodHJpbW1lZCkpIHtcbiAgICAgICAgICAvLyBDb21tb25NYXJrIHJlcXVpcmVzIHNwYWNlIGJlZm9yZSB0cmFpbGluZyAjc1xuICAgICAgICAgIHRleHQgPSB0cmltbWVkLnRyaW0oKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnaGVhZGluZycsXG4gICAgICAgIHJhdzogY2FwWzBdLFxuICAgICAgICBkZXB0aDogY2FwWzFdLmxlbmd0aCxcbiAgICAgICAgdGV4dCxcbiAgICAgICAgdG9rZW5zOiB0aGlzLmxleGVyLmlubGluZSh0ZXh0KVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBocihzcmMpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmJsb2NrLmhyLmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnaHInLFxuICAgICAgICByYXc6IGNhcFswXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBibG9ja3F1b3RlKHNyYykge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuYmxvY2suYmxvY2txdW90ZS5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgY29uc3QgdGV4dCA9IGNhcFswXS5yZXBsYWNlKC9eICo+WyBcXHRdPy9nbSwgJycpO1xuICAgICAgY29uc3QgdG9wID0gdGhpcy5sZXhlci5zdGF0ZS50b3A7XG4gICAgICB0aGlzLmxleGVyLnN0YXRlLnRvcCA9IHRydWU7XG4gICAgICBjb25zdCB0b2tlbnMgPSB0aGlzLmxleGVyLmJsb2NrVG9rZW5zKHRleHQpO1xuICAgICAgdGhpcy5sZXhlci5zdGF0ZS50b3AgPSB0b3A7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnYmxvY2txdW90ZScsXG4gICAgICAgIHJhdzogY2FwWzBdLFxuICAgICAgICB0b2tlbnMsXG4gICAgICAgIHRleHRcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgbGlzdChzcmMpIHtcbiAgICBsZXQgY2FwID0gdGhpcy5ydWxlcy5ibG9jay5saXN0LmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICBsZXQgcmF3LCBpc3Rhc2ssIGlzY2hlY2tlZCwgaW5kZW50LCBpLCBibGFua0xpbmUsIGVuZHNXaXRoQmxhbmtMaW5lLFxuICAgICAgICBsaW5lLCBuZXh0TGluZSwgcmF3TGluZSwgaXRlbUNvbnRlbnRzLCBlbmRFYXJseTtcblxuICAgICAgbGV0IGJ1bGwgPSBjYXBbMV0udHJpbSgpO1xuICAgICAgY29uc3QgaXNvcmRlcmVkID0gYnVsbC5sZW5ndGggPiAxO1xuXG4gICAgICBjb25zdCBsaXN0ID0ge1xuICAgICAgICB0eXBlOiAnbGlzdCcsXG4gICAgICAgIHJhdzogJycsXG4gICAgICAgIG9yZGVyZWQ6IGlzb3JkZXJlZCxcbiAgICAgICAgc3RhcnQ6IGlzb3JkZXJlZCA/ICtidWxsLnNsaWNlKDAsIC0xKSA6ICcnLFxuICAgICAgICBsb29zZTogZmFsc2UsXG4gICAgICAgIGl0ZW1zOiBbXVxuICAgICAgfTtcblxuICAgICAgYnVsbCA9IGlzb3JkZXJlZCA/IGBcXFxcZHsxLDl9XFxcXCR7YnVsbC5zbGljZSgtMSl9YCA6IGBcXFxcJHtidWxsfWA7XG5cbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucGVkYW50aWMpIHtcbiAgICAgICAgYnVsbCA9IGlzb3JkZXJlZCA/IGJ1bGwgOiAnWyorLV0nO1xuICAgICAgfVxuXG4gICAgICAvLyBHZXQgbmV4dCBsaXN0IGl0ZW1cbiAgICAgIGNvbnN0IGl0ZW1SZWdleCA9IG5ldyBSZWdFeHAoYF4oIHswLDN9JHtidWxsfSkoKD86W1xcdCBdW15cXFxcbl0qKT8oPzpcXFxcbnwkKSlgKTtcblxuICAgICAgLy8gQ2hlY2sgaWYgY3VycmVudCBidWxsZXQgcG9pbnQgY2FuIHN0YXJ0IGEgbmV3IExpc3QgSXRlbVxuICAgICAgd2hpbGUgKHNyYykge1xuICAgICAgICBlbmRFYXJseSA9IGZhbHNlO1xuICAgICAgICBpZiAoIShjYXAgPSBpdGVtUmVnZXguZXhlYyhzcmMpKSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMucnVsZXMuYmxvY2suaHIudGVzdChzcmMpKSB7IC8vIEVuZCBsaXN0IGlmIGJ1bGxldCB3YXMgYWN0dWFsbHkgSFIgKHBvc3NpYmx5IG1vdmUgaW50byBpdGVtUmVnZXg/KVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgcmF3ID0gY2FwWzBdO1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHJhdy5sZW5ndGgpO1xuXG4gICAgICAgIGxpbmUgPSBjYXBbMl0uc3BsaXQoJ1xcbicsIDEpWzBdLnJlcGxhY2UoL15cXHQrLywgKHQpID0+ICcgJy5yZXBlYXQoMyAqIHQubGVuZ3RoKSk7XG4gICAgICAgIG5leHRMaW5lID0gc3JjLnNwbGl0KCdcXG4nLCAxKVswXTtcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnBlZGFudGljKSB7XG4gICAgICAgICAgaW5kZW50ID0gMjtcbiAgICAgICAgICBpdGVtQ29udGVudHMgPSBsaW5lLnRyaW1MZWZ0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaW5kZW50ID0gY2FwWzJdLnNlYXJjaCgvW14gXS8pOyAvLyBGaW5kIGZpcnN0IG5vbi1zcGFjZSBjaGFyXG4gICAgICAgICAgaW5kZW50ID0gaW5kZW50ID4gNCA/IDEgOiBpbmRlbnQ7IC8vIFRyZWF0IGluZGVudGVkIGNvZGUgYmxvY2tzICg+IDQgc3BhY2VzKSBhcyBoYXZpbmcgb25seSAxIGluZGVudFxuICAgICAgICAgIGl0ZW1Db250ZW50cyA9IGxpbmUuc2xpY2UoaW5kZW50KTtcbiAgICAgICAgICBpbmRlbnQgKz0gY2FwWzFdLmxlbmd0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIGJsYW5rTGluZSA9IGZhbHNlO1xuXG4gICAgICAgIGlmICghbGluZSAmJiAvXiAqJC8udGVzdChuZXh0TGluZSkpIHsgLy8gSXRlbXMgYmVnaW4gd2l0aCBhdCBtb3N0IG9uZSBibGFuayBsaW5lXG4gICAgICAgICAgcmF3ICs9IG5leHRMaW5lICsgJ1xcbic7XG4gICAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyhuZXh0TGluZS5sZW5ndGggKyAxKTtcbiAgICAgICAgICBlbmRFYXJseSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWVuZEVhcmx5KSB7XG4gICAgICAgICAgY29uc3QgbmV4dEJ1bGxldFJlZ2V4ID0gbmV3IFJlZ0V4cChgXiB7MCwke01hdGgubWluKDMsIGluZGVudCAtIDEpfX0oPzpbKistXXxcXFxcZHsxLDl9Wy4pXSkoKD86WyBcXHRdW15cXFxcbl0qKT8oPzpcXFxcbnwkKSlgKTtcbiAgICAgICAgICBjb25zdCBoclJlZ2V4ID0gbmV3IFJlZ0V4cChgXiB7MCwke01hdGgubWluKDMsIGluZGVudCAtIDEpfX0oKD86LSAqKXszLH18KD86XyAqKXszLH18KD86XFxcXCogKil7Myx9KSg/OlxcXFxuK3wkKWApO1xuICAgICAgICAgIGNvbnN0IGZlbmNlc0JlZ2luUmVnZXggPSBuZXcgUmVnRXhwKGBeIHswLCR7TWF0aC5taW4oMywgaW5kZW50IC0gMSl9fSg/OlxcYFxcYFxcYHx+fn4pYCk7XG4gICAgICAgICAgY29uc3QgaGVhZGluZ0JlZ2luUmVnZXggPSBuZXcgUmVnRXhwKGBeIHswLCR7TWF0aC5taW4oMywgaW5kZW50IC0gMSl9fSNgKTtcblxuICAgICAgICAgIC8vIENoZWNrIGlmIGZvbGxvd2luZyBsaW5lcyBzaG91bGQgYmUgaW5jbHVkZWQgaW4gTGlzdCBJdGVtXG4gICAgICAgICAgd2hpbGUgKHNyYykge1xuICAgICAgICAgICAgcmF3TGluZSA9IHNyYy5zcGxpdCgnXFxuJywgMSlbMF07XG4gICAgICAgICAgICBuZXh0TGluZSA9IHJhd0xpbmU7XG5cbiAgICAgICAgICAgIC8vIFJlLWFsaWduIHRvIGZvbGxvdyBjb21tb25tYXJrIG5lc3RpbmcgcnVsZXNcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMucGVkYW50aWMpIHtcbiAgICAgICAgICAgICAgbmV4dExpbmUgPSBuZXh0TGluZS5yZXBsYWNlKC9eIHsxLDR9KD89KCB7NH0pKlteIF0pL2csICcgICcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBFbmQgbGlzdCBpdGVtIGlmIGZvdW5kIGNvZGUgZmVuY2VzXG4gICAgICAgICAgICBpZiAoZmVuY2VzQmVnaW5SZWdleC50ZXN0KG5leHRMaW5lKSkge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gRW5kIGxpc3QgaXRlbSBpZiBmb3VuZCBzdGFydCBvZiBuZXcgaGVhZGluZ1xuICAgICAgICAgICAgaWYgKGhlYWRpbmdCZWdpblJlZ2V4LnRlc3QobmV4dExpbmUpKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBFbmQgbGlzdCBpdGVtIGlmIGZvdW5kIHN0YXJ0IG9mIG5ldyBidWxsZXRcbiAgICAgICAgICAgIGlmIChuZXh0QnVsbGV0UmVnZXgudGVzdChuZXh0TGluZSkpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEhvcml6b250YWwgcnVsZSBmb3VuZFxuICAgICAgICAgICAgaWYgKGhyUmVnZXgudGVzdChzcmMpKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobmV4dExpbmUuc2VhcmNoKC9bXiBdLykgPj0gaW5kZW50IHx8ICFuZXh0TGluZS50cmltKCkpIHsgLy8gRGVkZW50IGlmIHBvc3NpYmxlXG4gICAgICAgICAgICAgIGl0ZW1Db250ZW50cyArPSAnXFxuJyArIG5leHRMaW5lLnNsaWNlKGluZGVudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBub3QgZW5vdWdoIGluZGVudGF0aW9uXG4gICAgICAgICAgICAgIGlmIChibGFua0xpbmUpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIHBhcmFncmFwaCBjb250aW51YXRpb24gdW5sZXNzIGxhc3QgbGluZSB3YXMgYSBkaWZmZXJlbnQgYmxvY2sgbGV2ZWwgZWxlbWVudFxuICAgICAgICAgICAgICBpZiAobGluZS5zZWFyY2goL1teIF0vKSA+PSA0KSB7IC8vIGluZGVudGVkIGNvZGUgYmxvY2tcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoZmVuY2VzQmVnaW5SZWdleC50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGhlYWRpbmdCZWdpblJlZ2V4LnRlc3QobGluZSkpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoaHJSZWdleC50ZXN0KGxpbmUpKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBpdGVtQ29udGVudHMgKz0gJ1xcbicgKyBuZXh0TGluZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFibGFua0xpbmUgJiYgIW5leHRMaW5lLnRyaW0oKSkgeyAvLyBDaGVjayBpZiBjdXJyZW50IGxpbmUgaXMgYmxhbmtcbiAgICAgICAgICAgICAgYmxhbmtMaW5lID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmF3ICs9IHJhd0xpbmUgKyAnXFxuJztcbiAgICAgICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcocmF3TGluZS5sZW5ndGggKyAxKTtcbiAgICAgICAgICAgIGxpbmUgPSBuZXh0TGluZS5zbGljZShpbmRlbnQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghbGlzdC5sb29zZSkge1xuICAgICAgICAgIC8vIElmIHRoZSBwcmV2aW91cyBpdGVtIGVuZGVkIHdpdGggYSBibGFuayBsaW5lLCB0aGUgbGlzdCBpcyBsb29zZVxuICAgICAgICAgIGlmIChlbmRzV2l0aEJsYW5rTGluZSkge1xuICAgICAgICAgICAgbGlzdC5sb29zZSA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIGlmICgvXFxuICpcXG4gKiQvLnRlc3QocmF3KSkge1xuICAgICAgICAgICAgZW5kc1dpdGhCbGFua0xpbmUgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGZvciB0YXNrIGxpc3QgaXRlbXNcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5nZm0pIHtcbiAgICAgICAgICBpc3Rhc2sgPSAvXlxcW1sgeFhdXFxdIC8uZXhlYyhpdGVtQ29udGVudHMpO1xuICAgICAgICAgIGlmIChpc3Rhc2spIHtcbiAgICAgICAgICAgIGlzY2hlY2tlZCA9IGlzdGFza1swXSAhPT0gJ1sgXSAnO1xuICAgICAgICAgICAgaXRlbUNvbnRlbnRzID0gaXRlbUNvbnRlbnRzLnJlcGxhY2UoL15cXFtbIHhYXVxcXSArLywgJycpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxpc3QuaXRlbXMucHVzaCh7XG4gICAgICAgICAgdHlwZTogJ2xpc3RfaXRlbScsXG4gICAgICAgICAgcmF3LFxuICAgICAgICAgIHRhc2s6ICEhaXN0YXNrLFxuICAgICAgICAgIGNoZWNrZWQ6IGlzY2hlY2tlZCxcbiAgICAgICAgICBsb29zZTogZmFsc2UsXG4gICAgICAgICAgdGV4dDogaXRlbUNvbnRlbnRzXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxpc3QucmF3ICs9IHJhdztcbiAgICAgIH1cblxuICAgICAgLy8gRG8gbm90IGNvbnN1bWUgbmV3bGluZXMgYXQgZW5kIG9mIGZpbmFsIGl0ZW0uIEFsdGVybmF0aXZlbHksIG1ha2UgaXRlbVJlZ2V4ICpzdGFydCogd2l0aCBhbnkgbmV3bGluZXMgdG8gc2ltcGxpZnkvc3BlZWQgdXAgZW5kc1dpdGhCbGFua0xpbmUgbG9naWNcbiAgICAgIGxpc3QuaXRlbXNbbGlzdC5pdGVtcy5sZW5ndGggLSAxXS5yYXcgPSByYXcudHJpbVJpZ2h0KCk7XG4gICAgICBsaXN0Lml0ZW1zW2xpc3QuaXRlbXMubGVuZ3RoIC0gMV0udGV4dCA9IGl0ZW1Db250ZW50cy50cmltUmlnaHQoKTtcbiAgICAgIGxpc3QucmF3ID0gbGlzdC5yYXcudHJpbVJpZ2h0KCk7XG5cbiAgICAgIGNvbnN0IGwgPSBsaXN0Lml0ZW1zLmxlbmd0aDtcblxuICAgICAgLy8gSXRlbSBjaGlsZCB0b2tlbnMgaGFuZGxlZCBoZXJlIGF0IGVuZCBiZWNhdXNlIHdlIG5lZWRlZCB0byBoYXZlIHRoZSBmaW5hbCBpdGVtIHRvIHRyaW0gaXQgZmlyc3RcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdGhpcy5sZXhlci5zdGF0ZS50b3AgPSBmYWxzZTtcbiAgICAgICAgbGlzdC5pdGVtc1tpXS50b2tlbnMgPSB0aGlzLmxleGVyLmJsb2NrVG9rZW5zKGxpc3QuaXRlbXNbaV0udGV4dCwgW10pO1xuXG4gICAgICAgIGlmICghbGlzdC5sb29zZSkge1xuICAgICAgICAgIC8vIENoZWNrIGlmIGxpc3Qgc2hvdWxkIGJlIGxvb3NlXG4gICAgICAgICAgY29uc3Qgc3BhY2VycyA9IGxpc3QuaXRlbXNbaV0udG9rZW5zLmZpbHRlcih0ID0+IHQudHlwZSA9PT0gJ3NwYWNlJyk7XG4gICAgICAgICAgY29uc3QgaGFzTXVsdGlwbGVMaW5lQnJlYWtzID0gc3BhY2Vycy5sZW5ndGggPiAwICYmIHNwYWNlcnMuc29tZSh0ID0+IC9cXG4uKlxcbi8udGVzdCh0LnJhdykpO1xuXG4gICAgICAgICAgbGlzdC5sb29zZSA9IGhhc011bHRpcGxlTGluZUJyZWFrcztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBTZXQgYWxsIGl0ZW1zIHRvIGxvb3NlIGlmIGxpc3QgaXMgbG9vc2VcbiAgICAgIGlmIChsaXN0Lmxvb3NlKSB7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICBsaXN0Lml0ZW1zW2ldLmxvb3NlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gbGlzdDtcbiAgICB9XG4gIH1cblxuICBodG1sKHNyYykge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuYmxvY2suaHRtbC5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgY29uc3QgdG9rZW4gPSB7XG4gICAgICAgIHR5cGU6ICdodG1sJyxcbiAgICAgICAgcmF3OiBjYXBbMF0sXG4gICAgICAgIHByZTogIXRoaXMub3B0aW9ucy5zYW5pdGl6ZXJcbiAgICAgICAgICAmJiAoY2FwWzFdID09PSAncHJlJyB8fCBjYXBbMV0gPT09ICdzY3JpcHQnIHx8IGNhcFsxXSA9PT0gJ3N0eWxlJyksXG4gICAgICAgIHRleHQ6IGNhcFswXVxuICAgICAgfTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2FuaXRpemUpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMub3B0aW9ucy5zYW5pdGl6ZXIgPyB0aGlzLm9wdGlvbnMuc2FuaXRpemVyKGNhcFswXSkgOiBlc2NhcGUoY2FwWzBdKTtcbiAgICAgICAgdG9rZW4udHlwZSA9ICdwYXJhZ3JhcGgnO1xuICAgICAgICB0b2tlbi50ZXh0ID0gdGV4dDtcbiAgICAgICAgdG9rZW4udG9rZW5zID0gdGhpcy5sZXhlci5pbmxpbmUodGV4dCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdG9rZW47XG4gICAgfVxuICB9XG5cbiAgZGVmKHNyYykge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuYmxvY2suZGVmLmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICBjb25zdCB0YWcgPSBjYXBbMV0udG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXHMrL2csICcgJyk7XG4gICAgICBjb25zdCBocmVmID0gY2FwWzJdID8gY2FwWzJdLnJlcGxhY2UoL148KC4qKT4kLywgJyQxJykucmVwbGFjZSh0aGlzLnJ1bGVzLmlubGluZS5fZXNjYXBlcywgJyQxJykgOiAnJztcbiAgICAgIGNvbnN0IHRpdGxlID0gY2FwWzNdID8gY2FwWzNdLnN1YnN0cmluZygxLCBjYXBbM10ubGVuZ3RoIC0gMSkucmVwbGFjZSh0aGlzLnJ1bGVzLmlubGluZS5fZXNjYXBlcywgJyQxJykgOiBjYXBbM107XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnZGVmJyxcbiAgICAgICAgdGFnLFxuICAgICAgICByYXc6IGNhcFswXSxcbiAgICAgICAgaHJlZixcbiAgICAgICAgdGl0bGVcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgdGFibGUoc3JjKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5ibG9jay50YWJsZS5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgY29uc3QgaXRlbSA9IHtcbiAgICAgICAgdHlwZTogJ3RhYmxlJyxcbiAgICAgICAgaGVhZGVyOiBzcGxpdENlbGxzKGNhcFsxXSkubWFwKGMgPT4geyByZXR1cm4geyB0ZXh0OiBjIH07IH0pLFxuICAgICAgICBhbGlnbjogY2FwWzJdLnJlcGxhY2UoL14gKnxcXHwgKiQvZywgJycpLnNwbGl0KC8gKlxcfCAqLyksXG4gICAgICAgIHJvd3M6IGNhcFszXSAmJiBjYXBbM10udHJpbSgpID8gY2FwWzNdLnJlcGxhY2UoL1xcblsgXFx0XSokLywgJycpLnNwbGl0KCdcXG4nKSA6IFtdXG4gICAgICB9O1xuXG4gICAgICBpZiAoaXRlbS5oZWFkZXIubGVuZ3RoID09PSBpdGVtLmFsaWduLmxlbmd0aCkge1xuICAgICAgICBpdGVtLnJhdyA9IGNhcFswXTtcblxuICAgICAgICBsZXQgbCA9IGl0ZW0uYWxpZ24ubGVuZ3RoO1xuICAgICAgICBsZXQgaSwgaiwgaywgcm93O1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgaWYgKC9eICotKzogKiQvLnRlc3QoaXRlbS5hbGlnbltpXSkpIHtcbiAgICAgICAgICAgIGl0ZW0uYWxpZ25baV0gPSAncmlnaHQnO1xuICAgICAgICAgIH0gZWxzZSBpZiAoL14gKjotKzogKiQvLnRlc3QoaXRlbS5hbGlnbltpXSkpIHtcbiAgICAgICAgICAgIGl0ZW0uYWxpZ25baV0gPSAnY2VudGVyJztcbiAgICAgICAgICB9IGVsc2UgaWYgKC9eICo6LSsgKiQvLnRlc3QoaXRlbS5hbGlnbltpXSkpIHtcbiAgICAgICAgICAgIGl0ZW0uYWxpZ25baV0gPSAnbGVmdCc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGl0ZW0uYWxpZ25baV0gPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGwgPSBpdGVtLnJvd3MubGVuZ3RoO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgaXRlbS5yb3dzW2ldID0gc3BsaXRDZWxscyhpdGVtLnJvd3NbaV0sIGl0ZW0uaGVhZGVyLmxlbmd0aCkubWFwKGMgPT4geyByZXR1cm4geyB0ZXh0OiBjIH07IH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcGFyc2UgY2hpbGQgdG9rZW5zIGluc2lkZSBoZWFkZXJzIGFuZCBjZWxsc1xuXG4gICAgICAgIC8vIGhlYWRlciBjaGlsZCB0b2tlbnNcbiAgICAgICAgbCA9IGl0ZW0uaGVhZGVyLmxlbmd0aDtcbiAgICAgICAgZm9yIChqID0gMDsgaiA8IGw7IGorKykge1xuICAgICAgICAgIGl0ZW0uaGVhZGVyW2pdLnRva2VucyA9IHRoaXMubGV4ZXIuaW5saW5lKGl0ZW0uaGVhZGVyW2pdLnRleHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2VsbCBjaGlsZCB0b2tlbnNcbiAgICAgICAgbCA9IGl0ZW0ucm93cy5sZW5ndGg7XG4gICAgICAgIGZvciAoaiA9IDA7IGogPCBsOyBqKyspIHtcbiAgICAgICAgICByb3cgPSBpdGVtLnJvd3Nbal07XG4gICAgICAgICAgZm9yIChrID0gMDsgayA8IHJvdy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgcm93W2tdLnRva2VucyA9IHRoaXMubGV4ZXIuaW5saW5lKHJvd1trXS50ZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBsaGVhZGluZyhzcmMpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmJsb2NrLmxoZWFkaW5nLmV4ZWMoc3JjKTtcbiAgICBpZiAoY2FwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnaGVhZGluZycsXG4gICAgICAgIHJhdzogY2FwWzBdLFxuICAgICAgICBkZXB0aDogY2FwWzJdLmNoYXJBdCgwKSA9PT0gJz0nID8gMSA6IDIsXG4gICAgICAgIHRleHQ6IGNhcFsxXSxcbiAgICAgICAgdG9rZW5zOiB0aGlzLmxleGVyLmlubGluZShjYXBbMV0pXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIHBhcmFncmFwaChzcmMpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmJsb2NrLnBhcmFncmFwaC5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgY29uc3QgdGV4dCA9IGNhcFsxXS5jaGFyQXQoY2FwWzFdLmxlbmd0aCAtIDEpID09PSAnXFxuJ1xuICAgICAgICA/IGNhcFsxXS5zbGljZSgwLCAtMSlcbiAgICAgICAgOiBjYXBbMV07XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAncGFyYWdyYXBoJyxcbiAgICAgICAgcmF3OiBjYXBbMF0sXG4gICAgICAgIHRleHQsXG4gICAgICAgIHRva2VuczogdGhpcy5sZXhlci5pbmxpbmUodGV4dClcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgdGV4dChzcmMpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmJsb2NrLnRleHQuZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgcmF3OiBjYXBbMF0sXG4gICAgICAgIHRleHQ6IGNhcFswXSxcbiAgICAgICAgdG9rZW5zOiB0aGlzLmxleGVyLmlubGluZShjYXBbMF0pXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGVzY2FwZShzcmMpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmlubGluZS5lc2NhcGUuZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdlc2NhcGUnLFxuICAgICAgICByYXc6IGNhcFswXSxcbiAgICAgICAgdGV4dDogZXNjYXBlKGNhcFsxXSlcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgdGFnKHNyYykge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuaW5saW5lLnRhZy5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgaWYgKCF0aGlzLmxleGVyLnN0YXRlLmluTGluayAmJiAvXjxhIC9pLnRlc3QoY2FwWzBdKSkge1xuICAgICAgICB0aGlzLmxleGVyLnN0YXRlLmluTGluayA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMubGV4ZXIuc3RhdGUuaW5MaW5rICYmIC9ePFxcL2E+L2kudGVzdChjYXBbMF0pKSB7XG4gICAgICAgIHRoaXMubGV4ZXIuc3RhdGUuaW5MaW5rID0gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMubGV4ZXIuc3RhdGUuaW5SYXdCbG9jayAmJiAvXjwocHJlfGNvZGV8a2JkfHNjcmlwdCkoXFxzfD4pL2kudGVzdChjYXBbMF0pKSB7XG4gICAgICAgIHRoaXMubGV4ZXIuc3RhdGUuaW5SYXdCbG9jayA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMubGV4ZXIuc3RhdGUuaW5SYXdCbG9jayAmJiAvXjxcXC8ocHJlfGNvZGV8a2JkfHNjcmlwdCkoXFxzfD4pL2kudGVzdChjYXBbMF0pKSB7XG4gICAgICAgIHRoaXMubGV4ZXIuc3RhdGUuaW5SYXdCbG9jayA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiB0aGlzLm9wdGlvbnMuc2FuaXRpemVcbiAgICAgICAgICA/ICd0ZXh0J1xuICAgICAgICAgIDogJ2h0bWwnLFxuICAgICAgICByYXc6IGNhcFswXSxcbiAgICAgICAgaW5MaW5rOiB0aGlzLmxleGVyLnN0YXRlLmluTGluayxcbiAgICAgICAgaW5SYXdCbG9jazogdGhpcy5sZXhlci5zdGF0ZS5pblJhd0Jsb2NrLFxuICAgICAgICB0ZXh0OiB0aGlzLm9wdGlvbnMuc2FuaXRpemVcbiAgICAgICAgICA/ICh0aGlzLm9wdGlvbnMuc2FuaXRpemVyXG4gICAgICAgICAgICA/IHRoaXMub3B0aW9ucy5zYW5pdGl6ZXIoY2FwWzBdKVxuICAgICAgICAgICAgOiBlc2NhcGUoY2FwWzBdKSlcbiAgICAgICAgICA6IGNhcFswXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBsaW5rKHNyYykge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuaW5saW5lLmxpbmsuZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIGNvbnN0IHRyaW1tZWRVcmwgPSBjYXBbMl0udHJpbSgpO1xuICAgICAgaWYgKCF0aGlzLm9wdGlvbnMucGVkYW50aWMgJiYgL148Ly50ZXN0KHRyaW1tZWRVcmwpKSB7XG4gICAgICAgIC8vIGNvbW1vbm1hcmsgcmVxdWlyZXMgbWF0Y2hpbmcgYW5nbGUgYnJhY2tldHNcbiAgICAgICAgaWYgKCEoLz4kLy50ZXN0KHRyaW1tZWRVcmwpKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGVuZGluZyBhbmdsZSBicmFja2V0IGNhbm5vdCBiZSBlc2NhcGVkXG4gICAgICAgIGNvbnN0IHJ0cmltU2xhc2ggPSBydHJpbSh0cmltbWVkVXJsLnNsaWNlKDAsIC0xKSwgJ1xcXFwnKTtcbiAgICAgICAgaWYgKCh0cmltbWVkVXJsLmxlbmd0aCAtIHJ0cmltU2xhc2gubGVuZ3RoKSAlIDIgPT09IDApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGZpbmQgY2xvc2luZyBwYXJlbnRoZXNpc1xuICAgICAgICBjb25zdCBsYXN0UGFyZW5JbmRleCA9IGZpbmRDbG9zaW5nQnJhY2tldChjYXBbMl0sICcoKScpO1xuICAgICAgICBpZiAobGFzdFBhcmVuSW5kZXggPiAtMSkge1xuICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gY2FwWzBdLmluZGV4T2YoJyEnKSA9PT0gMCA/IDUgOiA0O1xuICAgICAgICAgIGNvbnN0IGxpbmtMZW4gPSBzdGFydCArIGNhcFsxXS5sZW5ndGggKyBsYXN0UGFyZW5JbmRleDtcbiAgICAgICAgICBjYXBbMl0gPSBjYXBbMl0uc3Vic3RyaW5nKDAsIGxhc3RQYXJlbkluZGV4KTtcbiAgICAgICAgICBjYXBbMF0gPSBjYXBbMF0uc3Vic3RyaW5nKDAsIGxpbmtMZW4pLnRyaW0oKTtcbiAgICAgICAgICBjYXBbM10gPSAnJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IGhyZWYgPSBjYXBbMl07XG4gICAgICBsZXQgdGl0bGUgPSAnJztcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMucGVkYW50aWMpIHtcbiAgICAgICAgLy8gc3BsaXQgcGVkYW50aWMgaHJlZiBhbmQgdGl0bGVcbiAgICAgICAgY29uc3QgbGluayA9IC9eKFteJ1wiXSpbXlxcc10pXFxzKyhbJ1wiXSkoLiopXFwyLy5leGVjKGhyZWYpO1xuXG4gICAgICAgIGlmIChsaW5rKSB7XG4gICAgICAgICAgaHJlZiA9IGxpbmtbMV07XG4gICAgICAgICAgdGl0bGUgPSBsaW5rWzNdO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aXRsZSA9IGNhcFszXSA/IGNhcFszXS5zbGljZSgxLCAtMSkgOiAnJztcbiAgICAgIH1cblxuICAgICAgaHJlZiA9IGhyZWYudHJpbSgpO1xuICAgICAgaWYgKC9ePC8udGVzdChocmVmKSkge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnBlZGFudGljICYmICEoLz4kLy50ZXN0KHRyaW1tZWRVcmwpKSkge1xuICAgICAgICAgIC8vIHBlZGFudGljIGFsbG93cyBzdGFydGluZyBhbmdsZSBicmFja2V0IHdpdGhvdXQgZW5kaW5nIGFuZ2xlIGJyYWNrZXRcbiAgICAgICAgICBocmVmID0gaHJlZi5zbGljZSgxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBocmVmID0gaHJlZi5zbGljZSgxLCAtMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBvdXRwdXRMaW5rKGNhcCwge1xuICAgICAgICBocmVmOiBocmVmID8gaHJlZi5yZXBsYWNlKHRoaXMucnVsZXMuaW5saW5lLl9lc2NhcGVzLCAnJDEnKSA6IGhyZWYsXG4gICAgICAgIHRpdGxlOiB0aXRsZSA/IHRpdGxlLnJlcGxhY2UodGhpcy5ydWxlcy5pbmxpbmUuX2VzY2FwZXMsICckMScpIDogdGl0bGVcbiAgICAgIH0sIGNhcFswXSwgdGhpcy5sZXhlcik7XG4gICAgfVxuICB9XG5cbiAgcmVmbGluayhzcmMsIGxpbmtzKSB7XG4gICAgbGV0IGNhcDtcbiAgICBpZiAoKGNhcCA9IHRoaXMucnVsZXMuaW5saW5lLnJlZmxpbmsuZXhlYyhzcmMpKVxuICAgICAgICB8fCAoY2FwID0gdGhpcy5ydWxlcy5pbmxpbmUubm9saW5rLmV4ZWMoc3JjKSkpIHtcbiAgICAgIGxldCBsaW5rID0gKGNhcFsyXSB8fCBjYXBbMV0pLnJlcGxhY2UoL1xccysvZywgJyAnKTtcbiAgICAgIGxpbmsgPSBsaW5rc1tsaW5rLnRvTG93ZXJDYXNlKCldO1xuICAgICAgaWYgKCFsaW5rKSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBjYXBbMF0uY2hhckF0KDApO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICByYXc6IHRleHQsXG4gICAgICAgICAgdGV4dFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIG91dHB1dExpbmsoY2FwLCBsaW5rLCBjYXBbMF0sIHRoaXMubGV4ZXIpO1xuICAgIH1cbiAgfVxuXG4gIGVtU3Ryb25nKHNyYywgbWFza2VkU3JjLCBwcmV2Q2hhciA9ICcnKSB7XG4gICAgbGV0IG1hdGNoID0gdGhpcy5ydWxlcy5pbmxpbmUuZW1TdHJvbmcubERlbGltLmV4ZWMoc3JjKTtcbiAgICBpZiAoIW1hdGNoKSByZXR1cm47XG5cbiAgICAvLyBfIGNhbid0IGJlIGJldHdlZW4gdHdvIGFscGhhbnVtZXJpY3MuIFxccHtMfVxccHtOfSBpbmNsdWRlcyBub24tZW5nbGlzaCBhbHBoYWJldC9udW1iZXJzIGFzIHdlbGxcbiAgICBpZiAobWF0Y2hbM10gJiYgcHJldkNoYXIubWF0Y2goL1tcXHB7TH1cXHB7Tn1dL3UpKSByZXR1cm47XG5cbiAgICBjb25zdCBuZXh0Q2hhciA9IG1hdGNoWzFdIHx8IG1hdGNoWzJdIHx8ICcnO1xuXG4gICAgaWYgKCFuZXh0Q2hhciB8fCAobmV4dENoYXIgJiYgKHByZXZDaGFyID09PSAnJyB8fCB0aGlzLnJ1bGVzLmlubGluZS5wdW5jdHVhdGlvbi5leGVjKHByZXZDaGFyKSkpKSB7XG4gICAgICBjb25zdCBsTGVuZ3RoID0gbWF0Y2hbMF0ubGVuZ3RoIC0gMTtcbiAgICAgIGxldCByRGVsaW0sIHJMZW5ndGgsIGRlbGltVG90YWwgPSBsTGVuZ3RoLCBtaWREZWxpbVRvdGFsID0gMDtcblxuICAgICAgY29uc3QgZW5kUmVnID0gbWF0Y2hbMF1bMF0gPT09ICcqJyA/IHRoaXMucnVsZXMuaW5saW5lLmVtU3Ryb25nLnJEZWxpbUFzdCA6IHRoaXMucnVsZXMuaW5saW5lLmVtU3Ryb25nLnJEZWxpbVVuZDtcbiAgICAgIGVuZFJlZy5sYXN0SW5kZXggPSAwO1xuXG4gICAgICAvLyBDbGlwIG1hc2tlZFNyYyB0byBzYW1lIHNlY3Rpb24gb2Ygc3RyaW5nIGFzIHNyYyAobW92ZSB0byBsZXhlcj8pXG4gICAgICBtYXNrZWRTcmMgPSBtYXNrZWRTcmMuc2xpY2UoLTEgKiBzcmMubGVuZ3RoICsgbExlbmd0aCk7XG5cbiAgICAgIHdoaWxlICgobWF0Y2ggPSBlbmRSZWcuZXhlYyhtYXNrZWRTcmMpKSAhPSBudWxsKSB7XG4gICAgICAgIHJEZWxpbSA9IG1hdGNoWzFdIHx8IG1hdGNoWzJdIHx8IG1hdGNoWzNdIHx8IG1hdGNoWzRdIHx8IG1hdGNoWzVdIHx8IG1hdGNoWzZdO1xuXG4gICAgICAgIGlmICghckRlbGltKSBjb250aW51ZTsgLy8gc2tpcCBzaW5nbGUgKiBpbiBfX2FiYyphYmNfX1xuXG4gICAgICAgIHJMZW5ndGggPSByRGVsaW0ubGVuZ3RoO1xuXG4gICAgICAgIGlmIChtYXRjaFszXSB8fCBtYXRjaFs0XSkgeyAvLyBmb3VuZCBhbm90aGVyIExlZnQgRGVsaW1cbiAgICAgICAgICBkZWxpbVRvdGFsICs9IHJMZW5ndGg7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSBpZiAobWF0Y2hbNV0gfHwgbWF0Y2hbNl0pIHsgLy8gZWl0aGVyIExlZnQgb3IgUmlnaHQgRGVsaW1cbiAgICAgICAgICBpZiAobExlbmd0aCAlIDMgJiYgISgobExlbmd0aCArIHJMZW5ndGgpICUgMykpIHtcbiAgICAgICAgICAgIG1pZERlbGltVG90YWwgKz0gckxlbmd0aDtcbiAgICAgICAgICAgIGNvbnRpbnVlOyAvLyBDb21tb25NYXJrIEVtcGhhc2lzIFJ1bGVzIDktMTBcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBkZWxpbVRvdGFsIC09IHJMZW5ndGg7XG5cbiAgICAgICAgaWYgKGRlbGltVG90YWwgPiAwKSBjb250aW51ZTsgLy8gSGF2ZW4ndCBmb3VuZCBlbm91Z2ggY2xvc2luZyBkZWxpbWl0ZXJzXG5cbiAgICAgICAgLy8gUmVtb3ZlIGV4dHJhIGNoYXJhY3RlcnMuICphKioqIC0+ICphKlxuICAgICAgICByTGVuZ3RoID0gTWF0aC5taW4ockxlbmd0aCwgckxlbmd0aCArIGRlbGltVG90YWwgKyBtaWREZWxpbVRvdGFsKTtcblxuICAgICAgICBjb25zdCByYXcgPSBzcmMuc2xpY2UoMCwgbExlbmd0aCArIG1hdGNoLmluZGV4ICsgKG1hdGNoWzBdLmxlbmd0aCAtIHJEZWxpbS5sZW5ndGgpICsgckxlbmd0aCk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGBlbWAgaWYgc21hbGxlc3QgZGVsaW1pdGVyIGhhcyBvZGQgY2hhciBjb3VudC4gKmEqKipcbiAgICAgICAgaWYgKE1hdGgubWluKGxMZW5ndGgsIHJMZW5ndGgpICUgMikge1xuICAgICAgICAgIGNvbnN0IHRleHQgPSByYXcuc2xpY2UoMSwgLTEpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnZW0nLFxuICAgICAgICAgICAgcmF3LFxuICAgICAgICAgICAgdGV4dCxcbiAgICAgICAgICAgIHRva2VuczogdGhpcy5sZXhlci5pbmxpbmVUb2tlbnModGV4dClcbiAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlICdzdHJvbmcnIGlmIHNtYWxsZXN0IGRlbGltaXRlciBoYXMgZXZlbiBjaGFyIGNvdW50LiAqKmEqKipcbiAgICAgICAgY29uc3QgdGV4dCA9IHJhdy5zbGljZSgyLCAtMik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgdHlwZTogJ3N0cm9uZycsXG4gICAgICAgICAgcmF3LFxuICAgICAgICAgIHRleHQsXG4gICAgICAgICAgdG9rZW5zOiB0aGlzLmxleGVyLmlubGluZVRva2Vucyh0ZXh0KVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvZGVzcGFuKHNyYykge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuaW5saW5lLmNvZGUuZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIGxldCB0ZXh0ID0gY2FwWzJdLnJlcGxhY2UoL1xcbi9nLCAnICcpO1xuICAgICAgY29uc3QgaGFzTm9uU3BhY2VDaGFycyA9IC9bXiBdLy50ZXN0KHRleHQpO1xuICAgICAgY29uc3QgaGFzU3BhY2VDaGFyc09uQm90aEVuZHMgPSAvXiAvLnRlc3QodGV4dCkgJiYgLyAkLy50ZXN0KHRleHQpO1xuICAgICAgaWYgKGhhc05vblNwYWNlQ2hhcnMgJiYgaGFzU3BhY2VDaGFyc09uQm90aEVuZHMpIHtcbiAgICAgICAgdGV4dCA9IHRleHQuc3Vic3RyaW5nKDEsIHRleHQubGVuZ3RoIC0gMSk7XG4gICAgICB9XG4gICAgICB0ZXh0ID0gZXNjYXBlKHRleHQsIHRydWUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ2NvZGVzcGFuJyxcbiAgICAgICAgcmF3OiBjYXBbMF0sXG4gICAgICAgIHRleHRcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgYnIoc3JjKSB7XG4gICAgY29uc3QgY2FwID0gdGhpcy5ydWxlcy5pbmxpbmUuYnIuZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdicicsXG4gICAgICAgIHJhdzogY2FwWzBdXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGRlbChzcmMpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmlubGluZS5kZWwuZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdkZWwnLFxuICAgICAgICByYXc6IGNhcFswXSxcbiAgICAgICAgdGV4dDogY2FwWzJdLFxuICAgICAgICB0b2tlbnM6IHRoaXMubGV4ZXIuaW5saW5lVG9rZW5zKGNhcFsyXSlcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgYXV0b2xpbmsoc3JjLCBtYW5nbGUpIHtcbiAgICBjb25zdCBjYXAgPSB0aGlzLnJ1bGVzLmlubGluZS5hdXRvbGluay5leGVjKHNyYyk7XG4gICAgaWYgKGNhcCkge1xuICAgICAgbGV0IHRleHQsIGhyZWY7XG4gICAgICBpZiAoY2FwWzJdID09PSAnQCcpIHtcbiAgICAgICAgdGV4dCA9IGVzY2FwZSh0aGlzLm9wdGlvbnMubWFuZ2xlID8gbWFuZ2xlKGNhcFsxXSkgOiBjYXBbMV0pO1xuICAgICAgICBocmVmID0gJ21haWx0bzonICsgdGV4dDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRleHQgPSBlc2NhcGUoY2FwWzFdKTtcbiAgICAgICAgaHJlZiA9IHRleHQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdsaW5rJyxcbiAgICAgICAgcmF3OiBjYXBbMF0sXG4gICAgICAgIHRleHQsXG4gICAgICAgIGhyZWYsXG4gICAgICAgIHRva2VuczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgIHJhdzogdGV4dCxcbiAgICAgICAgICAgIHRleHRcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgdXJsKHNyYywgbWFuZ2xlKSB7XG4gICAgbGV0IGNhcDtcbiAgICBpZiAoY2FwID0gdGhpcy5ydWxlcy5pbmxpbmUudXJsLmV4ZWMoc3JjKSkge1xuICAgICAgbGV0IHRleHQsIGhyZWY7XG4gICAgICBpZiAoY2FwWzJdID09PSAnQCcpIHtcbiAgICAgICAgdGV4dCA9IGVzY2FwZSh0aGlzLm9wdGlvbnMubWFuZ2xlID8gbWFuZ2xlKGNhcFswXSkgOiBjYXBbMF0pO1xuICAgICAgICBocmVmID0gJ21haWx0bzonICsgdGV4dDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGRvIGV4dGVuZGVkIGF1dG9saW5rIHBhdGggdmFsaWRhdGlvblxuICAgICAgICBsZXQgcHJldkNhcFplcm87XG4gICAgICAgIGRvIHtcbiAgICAgICAgICBwcmV2Q2FwWmVybyA9IGNhcFswXTtcbiAgICAgICAgICBjYXBbMF0gPSB0aGlzLnJ1bGVzLmlubGluZS5fYmFja3BlZGFsLmV4ZWMoY2FwWzBdKVswXTtcbiAgICAgICAgfSB3aGlsZSAocHJldkNhcFplcm8gIT09IGNhcFswXSk7XG4gICAgICAgIHRleHQgPSBlc2NhcGUoY2FwWzBdKTtcbiAgICAgICAgaWYgKGNhcFsxXSA9PT0gJ3d3dy4nKSB7XG4gICAgICAgICAgaHJlZiA9ICdodHRwOi8vJyArIGNhcFswXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBocmVmID0gY2FwWzBdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiAnbGluaycsXG4gICAgICAgIHJhdzogY2FwWzBdLFxuICAgICAgICB0ZXh0LFxuICAgICAgICBocmVmLFxuICAgICAgICB0b2tlbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICByYXc6IHRleHQsXG4gICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGlubGluZVRleHQoc3JjLCBzbWFydHlwYW50cykge1xuICAgIGNvbnN0IGNhcCA9IHRoaXMucnVsZXMuaW5saW5lLnRleHQuZXhlYyhzcmMpO1xuICAgIGlmIChjYXApIHtcbiAgICAgIGxldCB0ZXh0O1xuICAgICAgaWYgKHRoaXMubGV4ZXIuc3RhdGUuaW5SYXdCbG9jaykge1xuICAgICAgICB0ZXh0ID0gdGhpcy5vcHRpb25zLnNhbml0aXplID8gKHRoaXMub3B0aW9ucy5zYW5pdGl6ZXIgPyB0aGlzLm9wdGlvbnMuc2FuaXRpemVyKGNhcFswXSkgOiBlc2NhcGUoY2FwWzBdKSkgOiBjYXBbMF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0ZXh0ID0gZXNjYXBlKHRoaXMub3B0aW9ucy5zbWFydHlwYW50cyA/IHNtYXJ0eXBhbnRzKGNhcFswXSkgOiBjYXBbMF0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICByYXc6IGNhcFswXSxcbiAgICAgICAgdGV4dFxuICAgICAgfTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBCbG9jay1MZXZlbCBHcmFtbWFyXG4gKi9cbmNvbnN0IGJsb2NrID0ge1xuICBuZXdsaW5lOiAvXig/OiAqKD86XFxufCQpKSsvLFxuICBjb2RlOiAvXiggezR9W15cXG5dKyg/Olxcbig/OiAqKD86XFxufCQpKSopPykrLyxcbiAgZmVuY2VzOiAvXiB7MCwzfShgezMsfSg/PVteYFxcbl0qKD86XFxufCQpKXx+ezMsfSkoW15cXG5dKikoPzpcXG58JCkoPzp8KFtcXHNcXFNdKj8pKD86XFxufCQpKSg/OiB7MCwzfVxcMVt+YF0qICooPz1cXG58JCl8JCkvLFxuICBocjogL14gezAsM30oKD86LVtcXHQgXSopezMsfXwoPzpfWyBcXHRdKil7Myx9fCg/OlxcKlsgXFx0XSopezMsfSkoPzpcXG4rfCQpLyxcbiAgaGVhZGluZzogL14gezAsM30oI3sxLDZ9KSg/PVxcc3wkKSguKikoPzpcXG4rfCQpLyxcbiAgYmxvY2txdW90ZTogL14oIHswLDN9PiA/KHBhcmFncmFwaHxbXlxcbl0qKSg/OlxcbnwkKSkrLyxcbiAgbGlzdDogL14oIHswLDN9YnVsbCkoWyBcXHRdW15cXG5dKz8pPyg/OlxcbnwkKS8sXG4gIGh0bWw6ICdeIHswLDN9KD86JyAvLyBvcHRpb25hbCBpbmRlbnRhdGlvblxuICAgICsgJzwoc2NyaXB0fHByZXxzdHlsZXx0ZXh0YXJlYSlbXFxcXHM+XVtcXFxcc1xcXFxTXSo/KD86PC9cXFxcMT5bXlxcXFxuXSpcXFxcbit8JCknIC8vICgxKVxuICAgICsgJ3xjb21tZW50W15cXFxcbl0qKFxcXFxuK3wkKScgLy8gKDIpXG4gICAgKyAnfDxcXFxcP1tcXFxcc1xcXFxTXSo/KD86XFxcXD8+XFxcXG4qfCQpJyAvLyAoMylcbiAgICArICd8PCFbQS1aXVtcXFxcc1xcXFxTXSo/KD86PlxcXFxuKnwkKScgLy8gKDQpXG4gICAgKyAnfDwhXFxcXFtDREFUQVxcXFxbW1xcXFxzXFxcXFNdKj8oPzpcXFxcXVxcXFxdPlxcXFxuKnwkKScgLy8gKDUpXG4gICAgKyAnfDwvPyh0YWcpKD86ICt8XFxcXG58Lz8+KVtcXFxcc1xcXFxTXSo/KD86KD86XFxcXG4gKikrXFxcXG58JCknIC8vICg2KVxuICAgICsgJ3w8KD8hc2NyaXB0fHByZXxzdHlsZXx0ZXh0YXJlYSkoW2Etel1bXFxcXHctXSopKD86YXR0cmlidXRlKSo/ICovPz4oPz1bIFxcXFx0XSooPzpcXFxcbnwkKSlbXFxcXHNcXFxcU10qPyg/Oig/OlxcXFxuICopK1xcXFxufCQpJyAvLyAoNykgb3BlbiB0YWdcbiAgICArICd8PC8oPyFzY3JpcHR8cHJlfHN0eWxlfHRleHRhcmVhKVthLXpdW1xcXFx3LV0qXFxcXHMqPig/PVsgXFxcXHRdKig/OlxcXFxufCQpKVtcXFxcc1xcXFxTXSo/KD86KD86XFxcXG4gKikrXFxcXG58JCknIC8vICg3KSBjbG9zaW5nIHRhZ1xuICAgICsgJyknLFxuICBkZWY6IC9eIHswLDN9XFxbKGxhYmVsKVxcXTogKig/OlxcbiAqKT8oW148XFxzXVteXFxzXSp8PC4qPz4pKD86KD86ICsoPzpcXG4gKik/fCAqXFxuICopKHRpdGxlKSk/ICooPzpcXG4rfCQpLyxcbiAgdGFibGU6IG5vb3BUZXN0LFxuICBsaGVhZGluZzogL14oKD86LnxcXG4oPyFcXG4pKSs/KVxcbiB7MCwzfSg9K3wtKykgKig/Olxcbit8JCkvLFxuICAvLyByZWdleCB0ZW1wbGF0ZSwgcGxhY2Vob2xkZXJzIHdpbGwgYmUgcmVwbGFjZWQgYWNjb3JkaW5nIHRvIGRpZmZlcmVudCBwYXJhZ3JhcGhcbiAgLy8gaW50ZXJydXB0aW9uIHJ1bGVzIG9mIGNvbW1vbm1hcmsgYW5kIHRoZSBvcmlnaW5hbCBtYXJrZG93biBzcGVjOlxuICBfcGFyYWdyYXBoOiAvXihbXlxcbl0rKD86XFxuKD8haHJ8aGVhZGluZ3xsaGVhZGluZ3xibG9ja3F1b3RlfGZlbmNlc3xsaXN0fGh0bWx8dGFibGV8ICtcXG4pW15cXG5dKykqKS8sXG4gIHRleHQ6IC9eW15cXG5dKy9cbn07XG5cbmJsb2NrLl9sYWJlbCA9IC8oPyFcXHMqXFxdKSg/OlxcXFwufFteXFxbXFxdXFxcXF0pKy87XG5ibG9jay5fdGl0bGUgPSAvKD86XCIoPzpcXFxcXCI/fFteXCJcXFxcXSkqXCJ8J1teJ1xcbl0qKD86XFxuW14nXFxuXSspKlxcbj8nfFxcKFteKCldKlxcKSkvO1xuYmxvY2suZGVmID0gZWRpdChibG9jay5kZWYpXG4gIC5yZXBsYWNlKCdsYWJlbCcsIGJsb2NrLl9sYWJlbClcbiAgLnJlcGxhY2UoJ3RpdGxlJywgYmxvY2suX3RpdGxlKVxuICAuZ2V0UmVnZXgoKTtcblxuYmxvY2suYnVsbGV0ID0gLyg/OlsqKy1dfFxcZHsxLDl9Wy4pXSkvO1xuYmxvY2subGlzdEl0ZW1TdGFydCA9IGVkaXQoL14oICopKGJ1bGwpICovKVxuICAucmVwbGFjZSgnYnVsbCcsIGJsb2NrLmJ1bGxldClcbiAgLmdldFJlZ2V4KCk7XG5cbmJsb2NrLmxpc3QgPSBlZGl0KGJsb2NrLmxpc3QpXG4gIC5yZXBsYWNlKC9idWxsL2csIGJsb2NrLmJ1bGxldClcbiAgLnJlcGxhY2UoJ2hyJywgJ1xcXFxuKyg/PVxcXFwxPyg/Oig/Oi0gKil7Myx9fCg/Ol8gKil7Myx9fCg/OlxcXFwqICopezMsfSkoPzpcXFxcbit8JCkpJylcbiAgLnJlcGxhY2UoJ2RlZicsICdcXFxcbisoPz0nICsgYmxvY2suZGVmLnNvdXJjZSArICcpJylcbiAgLmdldFJlZ2V4KCk7XG5cbmJsb2NrLl90YWcgPSAnYWRkcmVzc3xhcnRpY2xlfGFzaWRlfGJhc2V8YmFzZWZvbnR8YmxvY2txdW90ZXxib2R5fGNhcHRpb24nXG4gICsgJ3xjZW50ZXJ8Y29sfGNvbGdyb3VwfGRkfGRldGFpbHN8ZGlhbG9nfGRpcnxkaXZ8ZGx8ZHR8ZmllbGRzZXR8ZmlnY2FwdGlvbidcbiAgKyAnfGZpZ3VyZXxmb290ZXJ8Zm9ybXxmcmFtZXxmcmFtZXNldHxoWzEtNl18aGVhZHxoZWFkZXJ8aHJ8aHRtbHxpZnJhbWUnXG4gICsgJ3xsZWdlbmR8bGl8bGlua3xtYWlufG1lbnV8bWVudWl0ZW18bWV0YXxuYXZ8bm9mcmFtZXN8b2x8b3B0Z3JvdXB8b3B0aW9uJ1xuICArICd8cHxwYXJhbXxzZWN0aW9ufHNvdXJjZXxzdW1tYXJ5fHRhYmxlfHRib2R5fHRkfHRmb290fHRofHRoZWFkfHRpdGxlfHRyJ1xuICArICd8dHJhY2t8dWwnO1xuYmxvY2suX2NvbW1lbnQgPSAvPCEtLSg/IS0/PilbXFxzXFxTXSo/KD86LS0+fCQpLztcbmJsb2NrLmh0bWwgPSBlZGl0KGJsb2NrLmh0bWwsICdpJylcbiAgLnJlcGxhY2UoJ2NvbW1lbnQnLCBibG9jay5fY29tbWVudClcbiAgLnJlcGxhY2UoJ3RhZycsIGJsb2NrLl90YWcpXG4gIC5yZXBsYWNlKCdhdHRyaWJ1dGUnLCAvICtbYS16QS1aOl9dW1xcdy46LV0qKD86ICo9ICpcIlteXCJcXG5dKlwifCAqPSAqJ1teJ1xcbl0qJ3wgKj0gKlteXFxzXCInPTw+YF0rKT8vKVxuICAuZ2V0UmVnZXgoKTtcblxuYmxvY2sucGFyYWdyYXBoID0gZWRpdChibG9jay5fcGFyYWdyYXBoKVxuICAucmVwbGFjZSgnaHInLCBibG9jay5ocilcbiAgLnJlcGxhY2UoJ2hlYWRpbmcnLCAnIHswLDN9I3sxLDZ9ICcpXG4gIC5yZXBsYWNlKCd8bGhlYWRpbmcnLCAnJykgLy8gc2V0ZXggaGVhZGluZ3MgZG9uJ3QgaW50ZXJydXB0IGNvbW1vbm1hcmsgcGFyYWdyYXBoc1xuICAucmVwbGFjZSgnfHRhYmxlJywgJycpXG4gIC5yZXBsYWNlKCdibG9ja3F1b3RlJywgJyB7MCwzfT4nKVxuICAucmVwbGFjZSgnZmVuY2VzJywgJyB7MCwzfSg/OmB7Myx9KD89W15gXFxcXG5dKlxcXFxuKXx+ezMsfSlbXlxcXFxuXSpcXFxcbicpXG4gIC5yZXBsYWNlKCdsaXN0JywgJyB7MCwzfSg/OlsqKy1dfDFbLildKSAnKSAvLyBvbmx5IGxpc3RzIHN0YXJ0aW5nIGZyb20gMSBjYW4gaW50ZXJydXB0XG4gIC5yZXBsYWNlKCdodG1sJywgJzwvPyg/OnRhZykoPzogK3xcXFxcbnwvPz4pfDwoPzpzY3JpcHR8cHJlfHN0eWxlfHRleHRhcmVhfCEtLSknKVxuICAucmVwbGFjZSgndGFnJywgYmxvY2suX3RhZykgLy8gcGFycyBjYW4gYmUgaW50ZXJydXB0ZWQgYnkgdHlwZSAoNikgaHRtbCBibG9ja3NcbiAgLmdldFJlZ2V4KCk7XG5cbmJsb2NrLmJsb2NrcXVvdGUgPSBlZGl0KGJsb2NrLmJsb2NrcXVvdGUpXG4gIC5yZXBsYWNlKCdwYXJhZ3JhcGgnLCBibG9jay5wYXJhZ3JhcGgpXG4gIC5nZXRSZWdleCgpO1xuXG4vKipcbiAqIE5vcm1hbCBCbG9jayBHcmFtbWFyXG4gKi9cblxuYmxvY2subm9ybWFsID0geyAuLi5ibG9jayB9O1xuXG4vKipcbiAqIEdGTSBCbG9jayBHcmFtbWFyXG4gKi9cblxuYmxvY2suZ2ZtID0ge1xuICAuLi5ibG9jay5ub3JtYWwsXG4gIHRhYmxlOiAnXiAqKFteXFxcXG4gXS4qXFxcXHwuKilcXFxcbicgLy8gSGVhZGVyXG4gICAgKyAnIHswLDN9KD86XFxcXHwgKik/KDo/LSs6PyAqKD86XFxcXHwgKjo/LSs6PyAqKSopKD86XFxcXHwgKik/JyAvLyBBbGlnblxuICAgICsgJyg/OlxcXFxuKCg/Oig/ISAqXFxcXG58aHJ8aGVhZGluZ3xibG9ja3F1b3RlfGNvZGV8ZmVuY2VzfGxpc3R8aHRtbCkuKig/OlxcXFxufCQpKSopXFxcXG4qfCQpJyAvLyBDZWxsc1xufTtcblxuYmxvY2suZ2ZtLnRhYmxlID0gZWRpdChibG9jay5nZm0udGFibGUpXG4gIC5yZXBsYWNlKCdocicsIGJsb2NrLmhyKVxuICAucmVwbGFjZSgnaGVhZGluZycsICcgezAsM30jezEsNn0gJylcbiAgLnJlcGxhY2UoJ2Jsb2NrcXVvdGUnLCAnIHswLDN9PicpXG4gIC5yZXBsYWNlKCdjb2RlJywgJyB7NH1bXlxcXFxuXScpXG4gIC5yZXBsYWNlKCdmZW5jZXMnLCAnIHswLDN9KD86YHszLH0oPz1bXmBcXFxcbl0qXFxcXG4pfH57Myx9KVteXFxcXG5dKlxcXFxuJylcbiAgLnJlcGxhY2UoJ2xpc3QnLCAnIHswLDN9KD86WyorLV18MVsuKV0pICcpIC8vIG9ubHkgbGlzdHMgc3RhcnRpbmcgZnJvbSAxIGNhbiBpbnRlcnJ1cHRcbiAgLnJlcGxhY2UoJ2h0bWwnLCAnPC8/KD86dGFnKSg/OiArfFxcXFxufC8/Pil8PCg/OnNjcmlwdHxwcmV8c3R5bGV8dGV4dGFyZWF8IS0tKScpXG4gIC5yZXBsYWNlKCd0YWcnLCBibG9jay5fdGFnKSAvLyB0YWJsZXMgY2FuIGJlIGludGVycnVwdGVkIGJ5IHR5cGUgKDYpIGh0bWwgYmxvY2tzXG4gIC5nZXRSZWdleCgpO1xuXG5ibG9jay5nZm0ucGFyYWdyYXBoID0gZWRpdChibG9jay5fcGFyYWdyYXBoKVxuICAucmVwbGFjZSgnaHInLCBibG9jay5ocilcbiAgLnJlcGxhY2UoJ2hlYWRpbmcnLCAnIHswLDN9I3sxLDZ9ICcpXG4gIC5yZXBsYWNlKCd8bGhlYWRpbmcnLCAnJykgLy8gc2V0ZXggaGVhZGluZ3MgZG9uJ3QgaW50ZXJydXB0IGNvbW1vbm1hcmsgcGFyYWdyYXBoc1xuICAucmVwbGFjZSgndGFibGUnLCBibG9jay5nZm0udGFibGUpIC8vIGludGVycnVwdCBwYXJhZ3JhcGhzIHdpdGggdGFibGVcbiAgLnJlcGxhY2UoJ2Jsb2NrcXVvdGUnLCAnIHswLDN9PicpXG4gIC5yZXBsYWNlKCdmZW5jZXMnLCAnIHswLDN9KD86YHszLH0oPz1bXmBcXFxcbl0qXFxcXG4pfH57Myx9KVteXFxcXG5dKlxcXFxuJylcbiAgLnJlcGxhY2UoJ2xpc3QnLCAnIHswLDN9KD86WyorLV18MVsuKV0pICcpIC8vIG9ubHkgbGlzdHMgc3RhcnRpbmcgZnJvbSAxIGNhbiBpbnRlcnJ1cHRcbiAgLnJlcGxhY2UoJ2h0bWwnLCAnPC8/KD86dGFnKSg/OiArfFxcXFxufC8/Pil8PCg/OnNjcmlwdHxwcmV8c3R5bGV8dGV4dGFyZWF8IS0tKScpXG4gIC5yZXBsYWNlKCd0YWcnLCBibG9jay5fdGFnKSAvLyBwYXJzIGNhbiBiZSBpbnRlcnJ1cHRlZCBieSB0eXBlICg2KSBodG1sIGJsb2Nrc1xuICAuZ2V0UmVnZXgoKTtcbi8qKlxuICogUGVkYW50aWMgZ3JhbW1hciAob3JpZ2luYWwgSm9obiBHcnViZXIncyBsb29zZSBtYXJrZG93biBzcGVjaWZpY2F0aW9uKVxuICovXG5cbmJsb2NrLnBlZGFudGljID0ge1xuICAuLi5ibG9jay5ub3JtYWwsXG4gIGh0bWw6IGVkaXQoXG4gICAgJ14gKig/OmNvbW1lbnQgKig/OlxcXFxufFxcXFxzKiQpJ1xuICAgICsgJ3w8KHRhZylbXFxcXHNcXFxcU10rPzwvXFxcXDE+ICooPzpcXFxcbnsyLH18XFxcXHMqJCknIC8vIGNsb3NlZCB0YWdcbiAgICArICd8PHRhZyg/OlwiW15cIl0qXCJ8XFwnW15cXCddKlxcJ3xcXFxcc1teXFwnXCIvPlxcXFxzXSopKj8vPz4gKig/OlxcXFxuezIsfXxcXFxccyokKSknKVxuICAgIC5yZXBsYWNlKCdjb21tZW50JywgYmxvY2suX2NvbW1lbnQpXG4gICAgLnJlcGxhY2UoL3RhZy9nLCAnKD8hKD86J1xuICAgICAgKyAnYXxlbXxzdHJvbmd8c21hbGx8c3xjaXRlfHF8ZGZufGFiYnJ8ZGF0YXx0aW1lfGNvZGV8dmFyfHNhbXB8a2JkfHN1YidcbiAgICAgICsgJ3xzdXB8aXxifHV8bWFya3xydWJ5fHJ0fHJwfGJkaXxiZG98c3Bhbnxicnx3YnJ8aW5zfGRlbHxpbWcpJ1xuICAgICAgKyAnXFxcXGIpXFxcXHcrKD8hOnxbXlxcXFx3XFxcXHNAXSpAKVxcXFxiJylcbiAgICAuZ2V0UmVnZXgoKSxcbiAgZGVmOiAvXiAqXFxbKFteXFxdXSspXFxdOiAqPD8oW15cXHM+XSspPj8oPzogKyhbXCIoXVteXFxuXStbXCIpXSkpPyAqKD86XFxuK3wkKS8sXG4gIGhlYWRpbmc6IC9eKCN7MSw2fSkoLiopKD86XFxuK3wkKS8sXG4gIGZlbmNlczogbm9vcFRlc3QsIC8vIGZlbmNlcyBub3Qgc3VwcG9ydGVkXG4gIGxoZWFkaW5nOiAvXiguKz8pXFxuIHswLDN9KD0rfC0rKSAqKD86XFxuK3wkKS8sXG4gIHBhcmFncmFwaDogZWRpdChibG9jay5ub3JtYWwuX3BhcmFncmFwaClcbiAgICAucmVwbGFjZSgnaHInLCBibG9jay5ocilcbiAgICAucmVwbGFjZSgnaGVhZGluZycsICcgKiN7MSw2fSAqW15cXG5dJylcbiAgICAucmVwbGFjZSgnbGhlYWRpbmcnLCBibG9jay5saGVhZGluZylcbiAgICAucmVwbGFjZSgnYmxvY2txdW90ZScsICcgezAsM30+JylcbiAgICAucmVwbGFjZSgnfGZlbmNlcycsICcnKVxuICAgIC5yZXBsYWNlKCd8bGlzdCcsICcnKVxuICAgIC5yZXBsYWNlKCd8aHRtbCcsICcnKVxuICAgIC5nZXRSZWdleCgpXG59O1xuXG4vKipcbiAqIElubGluZS1MZXZlbCBHcmFtbWFyXG4gKi9cbmNvbnN0IGlubGluZSA9IHtcbiAgZXNjYXBlOiAvXlxcXFwoWyFcIiMkJSYnKCkqKyxcXC0uLzo7PD0+P0BcXFtcXF1cXFxcXl9ge3x9fl0pLyxcbiAgYXV0b2xpbms6IC9ePChzY2hlbWU6W15cXHNcXHgwMC1cXHgxZjw+XSp8ZW1haWwpPi8sXG4gIHVybDogbm9vcFRlc3QsXG4gIHRhZzogJ15jb21tZW50J1xuICAgICsgJ3xePC9bYS16QS1aXVtcXFxcdzotXSpcXFxccyo+JyAvLyBzZWxmLWNsb3NpbmcgdGFnXG4gICAgKyAnfF48W2EtekEtWl1bXFxcXHctXSooPzphdHRyaWJ1dGUpKj9cXFxccyovPz4nIC8vIG9wZW4gdGFnXG4gICAgKyAnfF48XFxcXD9bXFxcXHNcXFxcU10qP1xcXFw/PicgLy8gcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiwgZS5nLiA8P3BocCA/PlxuICAgICsgJ3xePCFbYS16QS1aXStcXFxcc1tcXFxcc1xcXFxTXSo/PicgLy8gZGVjbGFyYXRpb24sIGUuZy4gPCFET0NUWVBFIGh0bWw+XG4gICAgKyAnfF48IVxcXFxbQ0RBVEFcXFxcW1tcXFxcc1xcXFxTXSo/XFxcXF1cXFxcXT4nLCAvLyBDREFUQSBzZWN0aW9uXG4gIGxpbms6IC9eIT9cXFsobGFiZWwpXFxdXFwoXFxzKihocmVmKSg/OlxccysodGl0bGUpKT9cXHMqXFwpLyxcbiAgcmVmbGluazogL14hP1xcWyhsYWJlbClcXF1cXFsocmVmKVxcXS8sXG4gIG5vbGluazogL14hP1xcWyhyZWYpXFxdKD86XFxbXFxdKT8vLFxuICByZWZsaW5rU2VhcmNoOiAncmVmbGlua3xub2xpbmsoPyFcXFxcKCknLFxuICBlbVN0cm9uZzoge1xuICAgIGxEZWxpbTogL14oPzpcXCorKD86KFtwdW5jdF9dKXxbXlxccypdKSl8Xl8rKD86KFtwdW5jdCpdKXwoW15cXHNfXSkpLyxcbiAgICAvLyAgICAgICAgKDEpIGFuZCAoMikgY2FuIG9ubHkgYmUgYSBSaWdodCBEZWxpbWl0ZXIuICgzKSBhbmQgKDQpIGNhbiBvbmx5IGJlIExlZnQuICAoNSkgYW5kICg2KSBjYW4gYmUgZWl0aGVyIExlZnQgb3IgUmlnaHQuXG4gICAgLy8gICAgICAgICAgKCkgU2tpcCBvcnBoYW4gaW5zaWRlIHN0cm9uZyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCkgQ29uc3VtZSB0byBkZWxpbSAgICAgKDEpICMqKiogICAgICAgICAgICAgICAgKDIpIGEqKiojLCBhKioqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMykgIyoqKmEsICoqKmEgICAgICAgICAgICAgICAgICg0KSAqKiojICAgICAgICAgICAgICAoNSkgIyoqKiMgICAgICAgICAgICAgICAgICg2KSBhKioqYVxuICAgIHJEZWxpbUFzdDogL14oPzpbXl8qXFxcXF18XFxcXC4pKj9cXF9cXF8oPzpbXl8qXFxcXF18XFxcXC4pKj9cXCooPzpbXl8qXFxcXF18XFxcXC4pKj8oPz1cXF9cXF8pfCg/OlteKlxcXFxdfFxcXFwuKSsoPz1bXipdKXxbcHVuY3RfXShcXCorKSg/PVtcXHNdfCQpfCg/OltecHVuY3QqX1xcc1xcXFxdfFxcXFwuKShcXCorKSg/PVtwdW5jdF9cXHNdfCQpfFtwdW5jdF9cXHNdKFxcKispKD89W15wdW5jdCpfXFxzXSl8W1xcc10oXFwqKykoPz1bcHVuY3RfXSl8W3B1bmN0X10oXFwqKykoPz1bcHVuY3RfXSl8KD86W15wdW5jdCpfXFxzXFxcXF18XFxcXC4pKFxcKispKD89W15wdW5jdCpfXFxzXSkvLFxuICAgIHJEZWxpbVVuZDogL14oPzpbXl8qXFxcXF18XFxcXC4pKj9cXCpcXCooPzpbXl8qXFxcXF18XFxcXC4pKj9cXF8oPzpbXl8qXFxcXF18XFxcXC4pKj8oPz1cXCpcXCopfCg/OlteX1xcXFxdfFxcXFwuKSsoPz1bXl9dKXxbcHVuY3QqXShcXF8rKSg/PVtcXHNdfCQpfCg/OltecHVuY3QqX1xcc1xcXFxdfFxcXFwuKShcXF8rKSg/PVtwdW5jdCpcXHNdfCQpfFtwdW5jdCpcXHNdKFxcXyspKD89W15wdW5jdCpfXFxzXSl8W1xcc10oXFxfKykoPz1bcHVuY3QqXSl8W3B1bmN0Kl0oXFxfKykoPz1bcHVuY3QqXSkvIC8vIF4tIE5vdCBhbGxvd2VkIGZvciBfXG4gIH0sXG4gIGNvZGU6IC9eKGArKShbXmBdfFteYF1bXFxzXFxTXSo/W15gXSlcXDEoPyFgKS8sXG4gIGJyOiAvXiggezIsfXxcXFxcKVxcbig/IVxccyokKS8sXG4gIGRlbDogbm9vcFRlc3QsXG4gIHRleHQ6IC9eKGArfFteYF0pKD86KD89IHsyLH1cXG4pfFtcXHNcXFNdKj8oPzooPz1bXFxcXDwhXFxbYCpfXXxcXGJffCQpfFteIF0oPz0gezIsfVxcbikpKS8sXG4gIHB1bmN0dWF0aW9uOiAvXihbXFxzcHVuY3R1YXRpb25dKS9cbn07XG5cbi8vIGxpc3Qgb2YgcHVuY3R1YXRpb24gbWFya3MgZnJvbSBDb21tb25NYXJrIHNwZWNcbi8vIHdpdGhvdXQgKiBhbmQgXyB0byBoYW5kbGUgdGhlIGRpZmZlcmVudCBlbXBoYXNpcyBtYXJrZXJzICogYW5kIF9cbmlubGluZS5fcHVuY3R1YXRpb24gPSAnIVwiIyQlJlxcJygpK1xcXFwtLiwvOjs8PT4/QFxcXFxbXFxcXF1gXnt8fX4nO1xuaW5saW5lLnB1bmN0dWF0aW9uID0gZWRpdChpbmxpbmUucHVuY3R1YXRpb24pLnJlcGxhY2UoL3B1bmN0dWF0aW9uL2csIGlubGluZS5fcHVuY3R1YXRpb24pLmdldFJlZ2V4KCk7XG5cbi8vIHNlcXVlbmNlcyBlbSBzaG91bGQgc2tpcCBvdmVyIFt0aXRsZV0obGluayksIGBjb2RlYCwgPGh0bWw+XG5pbmxpbmUuYmxvY2tTa2lwID0gL1xcW1teXFxdXSo/XFxdXFwoW15cXCldKj9cXCl8YFteYF0qP2B8PFtePl0qPz4vZztcbi8vIGxvb2tiZWhpbmQgaXMgbm90IGF2YWlsYWJsZSBvbiBTYWZhcmkgYXMgb2YgdmVyc2lvbiAxNlxuLy8gaW5saW5lLmVzY2FwZWRFbVN0ID0gLyg/PD0oPzpefFteXFxcXCkoPzpcXFxcW15dKSopXFxcXFsqX10vZztcbmlubGluZS5lc2NhcGVkRW1TdCA9IC8oPzpefFteXFxcXF0pKD86XFxcXFxcXFwpKlxcXFxbKl9dL2c7XG5cbmlubGluZS5fY29tbWVudCA9IGVkaXQoYmxvY2suX2NvbW1lbnQpLnJlcGxhY2UoJyg/Oi0tPnwkKScsICctLT4nKS5nZXRSZWdleCgpO1xuXG5pbmxpbmUuZW1TdHJvbmcubERlbGltID0gZWRpdChpbmxpbmUuZW1TdHJvbmcubERlbGltKVxuICAucmVwbGFjZSgvcHVuY3QvZywgaW5saW5lLl9wdW5jdHVhdGlvbilcbiAgLmdldFJlZ2V4KCk7XG5cbmlubGluZS5lbVN0cm9uZy5yRGVsaW1Bc3QgPSBlZGl0KGlubGluZS5lbVN0cm9uZy5yRGVsaW1Bc3QsICdnJylcbiAgLnJlcGxhY2UoL3B1bmN0L2csIGlubGluZS5fcHVuY3R1YXRpb24pXG4gIC5nZXRSZWdleCgpO1xuXG5pbmxpbmUuZW1TdHJvbmcuckRlbGltVW5kID0gZWRpdChpbmxpbmUuZW1TdHJvbmcuckRlbGltVW5kLCAnZycpXG4gIC5yZXBsYWNlKC9wdW5jdC9nLCBpbmxpbmUuX3B1bmN0dWF0aW9uKVxuICAuZ2V0UmVnZXgoKTtcblxuaW5saW5lLl9lc2NhcGVzID0gL1xcXFwoWyFcIiMkJSYnKCkqKyxcXC0uLzo7PD0+P0BcXFtcXF1cXFxcXl9ge3x9fl0pL2c7XG5cbmlubGluZS5fc2NoZW1lID0gL1thLXpBLVpdW2EtekEtWjAtOSsuLV17MSwzMX0vO1xuaW5saW5lLl9lbWFpbCA9IC9bYS16QS1aMC05LiEjJCUmJyorLz0/Xl9ge3x9fi1dKyhAKVthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPyg/OlxcLlthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykrKD8hWy1fXSkvO1xuaW5saW5lLmF1dG9saW5rID0gZWRpdChpbmxpbmUuYXV0b2xpbmspXG4gIC5yZXBsYWNlKCdzY2hlbWUnLCBpbmxpbmUuX3NjaGVtZSlcbiAgLnJlcGxhY2UoJ2VtYWlsJywgaW5saW5lLl9lbWFpbClcbiAgLmdldFJlZ2V4KCk7XG5cbmlubGluZS5fYXR0cmlidXRlID0gL1xccytbYS16QS1aOl9dW1xcdy46LV0qKD86XFxzKj1cXHMqXCJbXlwiXSpcInxcXHMqPVxccyonW14nXSonfFxccyo9XFxzKlteXFxzXCInPTw+YF0rKT8vO1xuXG5pbmxpbmUudGFnID0gZWRpdChpbmxpbmUudGFnKVxuICAucmVwbGFjZSgnY29tbWVudCcsIGlubGluZS5fY29tbWVudClcbiAgLnJlcGxhY2UoJ2F0dHJpYnV0ZScsIGlubGluZS5fYXR0cmlidXRlKVxuICAuZ2V0UmVnZXgoKTtcblxuaW5saW5lLl9sYWJlbCA9IC8oPzpcXFsoPzpcXFxcLnxbXlxcW1xcXVxcXFxdKSpcXF18XFxcXC58YFteYF0qYHxbXlxcW1xcXVxcXFxgXSkqPy87XG5pbmxpbmUuX2hyZWYgPSAvPCg/OlxcXFwufFteXFxuPD5cXFxcXSkrPnxbXlxcc1xceDAwLVxceDFmXSovO1xuaW5saW5lLl90aXRsZSA9IC9cIig/OlxcXFxcIj98W15cIlxcXFxdKSpcInwnKD86XFxcXCc/fFteJ1xcXFxdKSonfFxcKCg/OlxcXFxcXCk/fFteKVxcXFxdKSpcXCkvO1xuXG5pbmxpbmUubGluayA9IGVkaXQoaW5saW5lLmxpbmspXG4gIC5yZXBsYWNlKCdsYWJlbCcsIGlubGluZS5fbGFiZWwpXG4gIC5yZXBsYWNlKCdocmVmJywgaW5saW5lLl9ocmVmKVxuICAucmVwbGFjZSgndGl0bGUnLCBpbmxpbmUuX3RpdGxlKVxuICAuZ2V0UmVnZXgoKTtcblxuaW5saW5lLnJlZmxpbmsgPSBlZGl0KGlubGluZS5yZWZsaW5rKVxuICAucmVwbGFjZSgnbGFiZWwnLCBpbmxpbmUuX2xhYmVsKVxuICAucmVwbGFjZSgncmVmJywgYmxvY2suX2xhYmVsKVxuICAuZ2V0UmVnZXgoKTtcblxuaW5saW5lLm5vbGluayA9IGVkaXQoaW5saW5lLm5vbGluaylcbiAgLnJlcGxhY2UoJ3JlZicsIGJsb2NrLl9sYWJlbClcbiAgLmdldFJlZ2V4KCk7XG5cbmlubGluZS5yZWZsaW5rU2VhcmNoID0gZWRpdChpbmxpbmUucmVmbGlua1NlYXJjaCwgJ2cnKVxuICAucmVwbGFjZSgncmVmbGluaycsIGlubGluZS5yZWZsaW5rKVxuICAucmVwbGFjZSgnbm9saW5rJywgaW5saW5lLm5vbGluaylcbiAgLmdldFJlZ2V4KCk7XG5cbi8qKlxuICogTm9ybWFsIElubGluZSBHcmFtbWFyXG4gKi9cblxuaW5saW5lLm5vcm1hbCA9IHsgLi4uaW5saW5lIH07XG5cbi8qKlxuICogUGVkYW50aWMgSW5saW5lIEdyYW1tYXJcbiAqL1xuXG5pbmxpbmUucGVkYW50aWMgPSB7XG4gIC4uLmlubGluZS5ub3JtYWwsXG4gIHN0cm9uZzoge1xuICAgIHN0YXJ0OiAvXl9ffFxcKlxcKi8sXG4gICAgbWlkZGxlOiAvXl9fKD89XFxTKShbXFxzXFxTXSo/XFxTKV9fKD8hXyl8XlxcKlxcKig/PVxcUykoW1xcc1xcU10qP1xcUylcXCpcXCooPyFcXCopLyxcbiAgICBlbmRBc3Q6IC9cXCpcXCooPyFcXCopL2csXG4gICAgZW5kVW5kOiAvX18oPyFfKS9nXG4gIH0sXG4gIGVtOiB7XG4gICAgc3RhcnQ6IC9eX3xcXCovLFxuICAgIG1pZGRsZTogL14oKVxcKig/PVxcUykoW1xcc1xcU10qP1xcUylcXCooPyFcXCopfF5fKD89XFxTKShbXFxzXFxTXSo/XFxTKV8oPyFfKS8sXG4gICAgZW5kQXN0OiAvXFwqKD8hXFwqKS9nLFxuICAgIGVuZFVuZDogL18oPyFfKS9nXG4gIH0sXG4gIGxpbms6IGVkaXQoL14hP1xcWyhsYWJlbClcXF1cXCgoLio/KVxcKS8pXG4gICAgLnJlcGxhY2UoJ2xhYmVsJywgaW5saW5lLl9sYWJlbClcbiAgICAuZ2V0UmVnZXgoKSxcbiAgcmVmbGluazogZWRpdCgvXiE/XFxbKGxhYmVsKVxcXVxccypcXFsoW15cXF1dKilcXF0vKVxuICAgIC5yZXBsYWNlKCdsYWJlbCcsIGlubGluZS5fbGFiZWwpXG4gICAgLmdldFJlZ2V4KClcbn07XG5cbi8qKlxuICogR0ZNIElubGluZSBHcmFtbWFyXG4gKi9cblxuaW5saW5lLmdmbSA9IHtcbiAgLi4uaW5saW5lLm5vcm1hbCxcbiAgZXNjYXBlOiBlZGl0KGlubGluZS5lc2NhcGUpLnJlcGxhY2UoJ10pJywgJ358XSknKS5nZXRSZWdleCgpLFxuICBfZXh0ZW5kZWRfZW1haWw6IC9bQS1aYS16MC05Ll8rLV0rKEApW2EtekEtWjAtOS1fXSsoPzpcXC5bYS16QS1aMC05LV9dKlthLXpBLVowLTldKSsoPyFbLV9dKS8sXG4gIHVybDogL14oKD86ZnRwfGh0dHBzPyk6XFwvXFwvfHd3d1xcLikoPzpbYS16QS1aMC05XFwtXStcXC4/KStbXlxcczxdKnxeZW1haWwvLFxuICBfYmFja3BlZGFsOiAvKD86W14/IS4sOjsqXydcIn4oKSZdK3xcXChbXildKlxcKXwmKD8hW2EtekEtWjAtOV0rOyQpfFs/IS4sOjsqXydcIn4pXSsoPyEkKSkrLyxcbiAgZGVsOiAvXih+fj8pKD89W15cXHN+XSkoW1xcc1xcU10qP1teXFxzfl0pXFwxKD89W15+XXwkKS8sXG4gIHRleHQ6IC9eKFtgfl0rfFteYH5dKSg/Oig/PSB7Mix9XFxuKXwoPz1bYS16QS1aMC05LiEjJCUmJyorXFwvPT9fYHtcXHx9fi1dK0ApfFtcXHNcXFNdKj8oPzooPz1bXFxcXDwhXFxbYCp+X118XFxiX3xodHRwcz86XFwvXFwvfGZ0cDpcXC9cXC98d3d3XFwufCQpfFteIF0oPz0gezIsfVxcbil8W15hLXpBLVowLTkuISMkJSYnKitcXC89P19ge1xcfH1+LV0oPz1bYS16QS1aMC05LiEjJCUmJyorXFwvPT9fYHtcXHx9fi1dK0ApKSkvXG59O1xuXG5pbmxpbmUuZ2ZtLnVybCA9IGVkaXQoaW5saW5lLmdmbS51cmwsICdpJylcbiAgLnJlcGxhY2UoJ2VtYWlsJywgaW5saW5lLmdmbS5fZXh0ZW5kZWRfZW1haWwpXG4gIC5nZXRSZWdleCgpO1xuLyoqXG4gKiBHRk0gKyBMaW5lIEJyZWFrcyBJbmxpbmUgR3JhbW1hclxuICovXG5cbmlubGluZS5icmVha3MgPSB7XG4gIC4uLmlubGluZS5nZm0sXG4gIGJyOiBlZGl0KGlubGluZS5icikucmVwbGFjZSgnezIsfScsICcqJykuZ2V0UmVnZXgoKSxcbiAgdGV4dDogZWRpdChpbmxpbmUuZ2ZtLnRleHQpXG4gICAgLnJlcGxhY2UoJ1xcXFxiXycsICdcXFxcYl98IHsyLH1cXFxcbicpXG4gICAgLnJlcGxhY2UoL1xcezIsXFx9L2csICcqJylcbiAgICAuZ2V0UmVnZXgoKVxufTtcblxuLyoqXG4gKiBzbWFydHlwYW50cyB0ZXh0IHJlcGxhY2VtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICovXG5mdW5jdGlvbiBzbWFydHlwYW50cyh0ZXh0KSB7XG4gIHJldHVybiB0ZXh0XG4gICAgLy8gZW0tZGFzaGVzXG4gICAgLnJlcGxhY2UoLy0tLS9nLCAnXFx1MjAxNCcpXG4gICAgLy8gZW4tZGFzaGVzXG4gICAgLnJlcGxhY2UoLy0tL2csICdcXHUyMDEzJylcbiAgICAvLyBvcGVuaW5nIHNpbmdsZXNcbiAgICAucmVwbGFjZSgvKF58Wy1cXHUyMDE0LyhcXFt7XCJcXHNdKScvZywgJyQxXFx1MjAxOCcpXG4gICAgLy8gY2xvc2luZyBzaW5nbGVzICYgYXBvc3Ryb3BoZXNcbiAgICAucmVwbGFjZSgvJy9nLCAnXFx1MjAxOScpXG4gICAgLy8gb3BlbmluZyBkb3VibGVzXG4gICAgLnJlcGxhY2UoLyhefFstXFx1MjAxNC8oXFxbe1xcdTIwMThcXHNdKVwiL2csICckMVxcdTIwMWMnKVxuICAgIC8vIGNsb3NpbmcgZG91Ymxlc1xuICAgIC5yZXBsYWNlKC9cIi9nLCAnXFx1MjAxZCcpXG4gICAgLy8gZWxsaXBzZXNcbiAgICAucmVwbGFjZSgvXFwuezN9L2csICdcXHUyMDI2Jyk7XG59XG5cbi8qKlxuICogbWFuZ2xlIGVtYWlsIGFkZHJlc3Nlc1xuICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAqL1xuZnVuY3Rpb24gbWFuZ2xlKHRleHQpIHtcbiAgbGV0IG91dCA9ICcnLFxuICAgIGksXG4gICAgY2g7XG5cbiAgY29uc3QgbCA9IHRleHQubGVuZ3RoO1xuICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgY2ggPSB0ZXh0LmNoYXJDb2RlQXQoaSk7XG4gICAgaWYgKE1hdGgucmFuZG9tKCkgPiAwLjUpIHtcbiAgICAgIGNoID0gJ3gnICsgY2gudG9TdHJpbmcoMTYpO1xuICAgIH1cbiAgICBvdXQgKz0gJyYjJyArIGNoICsgJzsnO1xuICB9XG5cbiAgcmV0dXJuIG91dDtcbn1cblxuLyoqXG4gKiBCbG9jayBMZXhlclxuICovXG5jbGFzcyBMZXhlciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLnRva2VucyA9IFtdO1xuICAgIHRoaXMudG9rZW5zLmxpbmtzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IGRlZmF1bHRzO1xuICAgIHRoaXMub3B0aW9ucy50b2tlbml6ZXIgPSB0aGlzLm9wdGlvbnMudG9rZW5pemVyIHx8IG5ldyBUb2tlbml6ZXIoKTtcbiAgICB0aGlzLnRva2VuaXplciA9IHRoaXMub3B0aW9ucy50b2tlbml6ZXI7XG4gICAgdGhpcy50b2tlbml6ZXIub3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICB0aGlzLnRva2VuaXplci5sZXhlciA9IHRoaXM7XG4gICAgdGhpcy5pbmxpbmVRdWV1ZSA9IFtdO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBpbkxpbms6IGZhbHNlLFxuICAgICAgaW5SYXdCbG9jazogZmFsc2UsXG4gICAgICB0b3A6IHRydWVcbiAgICB9O1xuXG4gICAgY29uc3QgcnVsZXMgPSB7XG4gICAgICBibG9jazogYmxvY2subm9ybWFsLFxuICAgICAgaW5saW5lOiBpbmxpbmUubm9ybWFsXG4gICAgfTtcblxuICAgIGlmICh0aGlzLm9wdGlvbnMucGVkYW50aWMpIHtcbiAgICAgIHJ1bGVzLmJsb2NrID0gYmxvY2sucGVkYW50aWM7XG4gICAgICBydWxlcy5pbmxpbmUgPSBpbmxpbmUucGVkYW50aWM7XG4gICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuZ2ZtKSB7XG4gICAgICBydWxlcy5ibG9jayA9IGJsb2NrLmdmbTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuYnJlYWtzKSB7XG4gICAgICAgIHJ1bGVzLmlubGluZSA9IGlubGluZS5icmVha3M7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBydWxlcy5pbmxpbmUgPSBpbmxpbmUuZ2ZtO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnRva2VuaXplci5ydWxlcyA9IHJ1bGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cG9zZSBSdWxlc1xuICAgKi9cbiAgc3RhdGljIGdldCBydWxlcygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYmxvY2ssXG4gICAgICBpbmxpbmVcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFN0YXRpYyBMZXggTWV0aG9kXG4gICAqL1xuICBzdGF0aWMgbGV4KHNyYywgb3B0aW9ucykge1xuICAgIGNvbnN0IGxleGVyID0gbmV3IExleGVyKG9wdGlvbnMpO1xuICAgIHJldHVybiBsZXhlci5sZXgoc3JjKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGF0aWMgTGV4IElubGluZSBNZXRob2RcbiAgICovXG4gIHN0YXRpYyBsZXhJbmxpbmUoc3JjLCBvcHRpb25zKSB7XG4gICAgY29uc3QgbGV4ZXIgPSBuZXcgTGV4ZXIob3B0aW9ucyk7XG4gICAgcmV0dXJuIGxleGVyLmlubGluZVRva2VucyhzcmMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFByZXByb2Nlc3NpbmdcbiAgICovXG4gIGxleChzcmMpIHtcbiAgICBzcmMgPSBzcmNcbiAgICAgIC5yZXBsYWNlKC9cXHJcXG58XFxyL2csICdcXG4nKTtcblxuICAgIHRoaXMuYmxvY2tUb2tlbnMoc3JjLCB0aGlzLnRva2Vucyk7XG5cbiAgICBsZXQgbmV4dDtcbiAgICB3aGlsZSAobmV4dCA9IHRoaXMuaW5saW5lUXVldWUuc2hpZnQoKSkge1xuICAgICAgdGhpcy5pbmxpbmVUb2tlbnMobmV4dC5zcmMsIG5leHQudG9rZW5zKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy50b2tlbnM7XG4gIH1cblxuICAvKipcbiAgICogTGV4aW5nXG4gICAqL1xuICBibG9ja1Rva2VucyhzcmMsIHRva2VucyA9IFtdKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5wZWRhbnRpYykge1xuICAgICAgc3JjID0gc3JjLnJlcGxhY2UoL1xcdC9nLCAnICAgICcpLnJlcGxhY2UoL14gKyQvZ20sICcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3JjID0gc3JjLnJlcGxhY2UoL14oICopKFxcdCspL2dtLCAoXywgbGVhZGluZywgdGFicykgPT4ge1xuICAgICAgICByZXR1cm4gbGVhZGluZyArICcgICAgJy5yZXBlYXQodGFicy5sZW5ndGgpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgbGV0IHRva2VuLCBsYXN0VG9rZW4sIGN1dFNyYywgbGFzdFBhcmFncmFwaENsaXBwZWQ7XG5cbiAgICB3aGlsZSAoc3JjKSB7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmV4dGVuc2lvbnNcbiAgICAgICAgJiYgdGhpcy5vcHRpb25zLmV4dGVuc2lvbnMuYmxvY2tcbiAgICAgICAgJiYgdGhpcy5vcHRpb25zLmV4dGVuc2lvbnMuYmxvY2suc29tZSgoZXh0VG9rZW5pemVyKSA9PiB7XG4gICAgICAgICAgaWYgKHRva2VuID0gZXh0VG9rZW5pemVyLmNhbGwoeyBsZXhlcjogdGhpcyB9LCBzcmMsIHRva2VucykpIHtcbiAgICAgICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gbmV3bGluZVxuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIuc3BhY2Uoc3JjKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICBpZiAodG9rZW4ucmF3Lmxlbmd0aCA9PT0gMSAmJiB0b2tlbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIC8vIGlmIHRoZXJlJ3MgYSBzaW5nbGUgXFxuIGFzIGEgc3BhY2VyLCBpdCdzIHRlcm1pbmF0aW5nIHRoZSBsYXN0IGxpbmUsXG4gICAgICAgICAgLy8gc28gbW92ZSBpdCB0aGVyZSBzbyB0aGF0IHdlIGRvbid0IGdldCB1bmVjZXNzYXJ5IHBhcmFncmFwaCB0YWdzXG4gICAgICAgICAgdG9rZW5zW3Rva2Vucy5sZW5ndGggLSAxXS5yYXcgKz0gJ1xcbic7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBjb2RlXG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5jb2RlKHNyYykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgbGFzdFRva2VuID0gdG9rZW5zW3Rva2Vucy5sZW5ndGggLSAxXTtcbiAgICAgICAgLy8gQW4gaW5kZW50ZWQgY29kZSBibG9jayBjYW5ub3QgaW50ZXJydXB0IGEgcGFyYWdyYXBoLlxuICAgICAgICBpZiAobGFzdFRva2VuICYmIChsYXN0VG9rZW4udHlwZSA9PT0gJ3BhcmFncmFwaCcgfHwgbGFzdFRva2VuLnR5cGUgPT09ICd0ZXh0JykpIHtcbiAgICAgICAgICBsYXN0VG9rZW4ucmF3ICs9ICdcXG4nICsgdG9rZW4ucmF3O1xuICAgICAgICAgIGxhc3RUb2tlbi50ZXh0ICs9ICdcXG4nICsgdG9rZW4udGV4dDtcbiAgICAgICAgICB0aGlzLmlubGluZVF1ZXVlW3RoaXMuaW5saW5lUXVldWUubGVuZ3RoIC0gMV0uc3JjID0gbGFzdFRva2VuLnRleHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBmZW5jZXNcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLmZlbmNlcyhzcmMpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGhlYWRpbmdcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLmhlYWRpbmcoc3JjKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBoclxuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIuaHIoc3JjKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBibG9ja3F1b3RlXG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5ibG9ja3F1b3RlKHNyYykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gbGlzdFxuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIubGlzdChzcmMpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGh0bWxcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLmh0bWwoc3JjKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBkZWZcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLmRlZihzcmMpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIGxhc3RUb2tlbiA9IHRva2Vuc1t0b2tlbnMubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChsYXN0VG9rZW4gJiYgKGxhc3RUb2tlbi50eXBlID09PSAncGFyYWdyYXBoJyB8fCBsYXN0VG9rZW4udHlwZSA9PT0gJ3RleHQnKSkge1xuICAgICAgICAgIGxhc3RUb2tlbi5yYXcgKz0gJ1xcbicgKyB0b2tlbi5yYXc7XG4gICAgICAgICAgbGFzdFRva2VuLnRleHQgKz0gJ1xcbicgKyB0b2tlbi5yYXc7XG4gICAgICAgICAgdGhpcy5pbmxpbmVRdWV1ZVt0aGlzLmlubGluZVF1ZXVlLmxlbmd0aCAtIDFdLnNyYyA9IGxhc3RUb2tlbi50ZXh0O1xuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLnRva2Vucy5saW5rc1t0b2tlbi50YWddKSB7XG4gICAgICAgICAgdGhpcy50b2tlbnMubGlua3NbdG9rZW4udGFnXSA9IHtcbiAgICAgICAgICAgIGhyZWY6IHRva2VuLmhyZWYsXG4gICAgICAgICAgICB0aXRsZTogdG9rZW4udGl0bGVcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyB0YWJsZSAoZ2ZtKVxuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIudGFibGUoc3JjKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBsaGVhZGluZ1xuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIubGhlYWRpbmcoc3JjKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyB0b3AtbGV2ZWwgcGFyYWdyYXBoXG4gICAgICAvLyBwcmV2ZW50IHBhcmFncmFwaCBjb25zdW1pbmcgZXh0ZW5zaW9ucyBieSBjbGlwcGluZyAnc3JjJyB0byBleHRlbnNpb24gc3RhcnRcbiAgICAgIGN1dFNyYyA9IHNyYztcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucyAmJiB0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucy5zdGFydEJsb2NrKSB7XG4gICAgICAgIGxldCBzdGFydEluZGV4ID0gSW5maW5pdHk7XG4gICAgICAgIGNvbnN0IHRlbXBTcmMgPSBzcmMuc2xpY2UoMSk7XG4gICAgICAgIGxldCB0ZW1wU3RhcnQ7XG4gICAgICAgIHRoaXMub3B0aW9ucy5leHRlbnNpb25zLnN0YXJ0QmxvY2suZm9yRWFjaChmdW5jdGlvbihnZXRTdGFydEluZGV4KSB7XG4gICAgICAgICAgdGVtcFN0YXJ0ID0gZ2V0U3RhcnRJbmRleC5jYWxsKHsgbGV4ZXI6IHRoaXMgfSwgdGVtcFNyYyk7XG4gICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wU3RhcnQgPT09ICdudW1iZXInICYmIHRlbXBTdGFydCA+PSAwKSB7IHN0YXJ0SW5kZXggPSBNYXRoLm1pbihzdGFydEluZGV4LCB0ZW1wU3RhcnQpOyB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc3RhcnRJbmRleCA8IEluZmluaXR5ICYmIHN0YXJ0SW5kZXggPj0gMCkge1xuICAgICAgICAgIGN1dFNyYyA9IHNyYy5zdWJzdHJpbmcoMCwgc3RhcnRJbmRleCArIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zdGF0ZS50b3AgJiYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIucGFyYWdyYXBoKGN1dFNyYykpKSB7XG4gICAgICAgIGxhc3RUb2tlbiA9IHRva2Vuc1t0b2tlbnMubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChsYXN0UGFyYWdyYXBoQ2xpcHBlZCAmJiBsYXN0VG9rZW4udHlwZSA9PT0gJ3BhcmFncmFwaCcpIHtcbiAgICAgICAgICBsYXN0VG9rZW4ucmF3ICs9ICdcXG4nICsgdG9rZW4ucmF3O1xuICAgICAgICAgIGxhc3RUb2tlbi50ZXh0ICs9ICdcXG4nICsgdG9rZW4udGV4dDtcbiAgICAgICAgICB0aGlzLmlubGluZVF1ZXVlLnBvcCgpO1xuICAgICAgICAgIHRoaXMuaW5saW5lUXVldWVbdGhpcy5pbmxpbmVRdWV1ZS5sZW5ndGggLSAxXS5zcmMgPSBsYXN0VG9rZW4udGV4dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgbGFzdFBhcmFncmFwaENsaXBwZWQgPSAoY3V0U3JjLmxlbmd0aCAhPT0gc3JjLmxlbmd0aCk7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyB0ZXh0XG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci50ZXh0KHNyYykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgbGFzdFRva2VuID0gdG9rZW5zW3Rva2Vucy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKGxhc3RUb2tlbiAmJiBsYXN0VG9rZW4udHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgbGFzdFRva2VuLnJhdyArPSAnXFxuJyArIHRva2VuLnJhdztcbiAgICAgICAgICBsYXN0VG9rZW4udGV4dCArPSAnXFxuJyArIHRva2VuLnRleHQ7XG4gICAgICAgICAgdGhpcy5pbmxpbmVRdWV1ZS5wb3AoKTtcbiAgICAgICAgICB0aGlzLmlubGluZVF1ZXVlW3RoaXMuaW5saW5lUXVldWUubGVuZ3RoIC0gMV0uc3JjID0gbGFzdFRva2VuLnRleHQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3JjKSB7XG4gICAgICAgIGNvbnN0IGVyck1zZyA9ICdJbmZpbml0ZSBsb29wIG9uIGJ5dGU6ICcgKyBzcmMuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaWxlbnQpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVyck1zZyk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVyck1zZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnN0YXRlLnRvcCA9IHRydWU7XG4gICAgcmV0dXJuIHRva2VucztcbiAgfVxuXG4gIGlubGluZShzcmMsIHRva2VucyA9IFtdKSB7XG4gICAgdGhpcy5pbmxpbmVRdWV1ZS5wdXNoKHsgc3JjLCB0b2tlbnMgfSk7XG4gICAgcmV0dXJuIHRva2VucztcbiAgfVxuXG4gIC8qKlxuICAgKiBMZXhpbmcvQ29tcGlsaW5nXG4gICAqL1xuICBpbmxpbmVUb2tlbnMoc3JjLCB0b2tlbnMgPSBbXSkge1xuICAgIGxldCB0b2tlbiwgbGFzdFRva2VuLCBjdXRTcmM7XG5cbiAgICAvLyBTdHJpbmcgd2l0aCBsaW5rcyBtYXNrZWQgdG8gYXZvaWQgaW50ZXJmZXJlbmNlIHdpdGggZW0gYW5kIHN0cm9uZ1xuICAgIGxldCBtYXNrZWRTcmMgPSBzcmM7XG4gICAgbGV0IG1hdGNoO1xuICAgIGxldCBrZWVwUHJldkNoYXIsIHByZXZDaGFyO1xuXG4gICAgLy8gTWFzayBvdXQgcmVmbGlua3NcbiAgICBpZiAodGhpcy50b2tlbnMubGlua3MpIHtcbiAgICAgIGNvbnN0IGxpbmtzID0gT2JqZWN0LmtleXModGhpcy50b2tlbnMubGlua3MpO1xuICAgICAgaWYgKGxpbmtzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgd2hpbGUgKChtYXRjaCA9IHRoaXMudG9rZW5pemVyLnJ1bGVzLmlubGluZS5yZWZsaW5rU2VhcmNoLmV4ZWMobWFza2VkU3JjKSkgIT0gbnVsbCkge1xuICAgICAgICAgIGlmIChsaW5rcy5pbmNsdWRlcyhtYXRjaFswXS5zbGljZShtYXRjaFswXS5sYXN0SW5kZXhPZignWycpICsgMSwgLTEpKSkge1xuICAgICAgICAgICAgbWFza2VkU3JjID0gbWFza2VkU3JjLnNsaWNlKDAsIG1hdGNoLmluZGV4KSArICdbJyArIHJlcGVhdFN0cmluZygnYScsIG1hdGNoWzBdLmxlbmd0aCAtIDIpICsgJ10nICsgbWFza2VkU3JjLnNsaWNlKHRoaXMudG9rZW5pemVyLnJ1bGVzLmlubGluZS5yZWZsaW5rU2VhcmNoLmxhc3RJbmRleCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIE1hc2sgb3V0IG90aGVyIGJsb2Nrc1xuICAgIHdoaWxlICgobWF0Y2ggPSB0aGlzLnRva2VuaXplci5ydWxlcy5pbmxpbmUuYmxvY2tTa2lwLmV4ZWMobWFza2VkU3JjKSkgIT0gbnVsbCkge1xuICAgICAgbWFza2VkU3JjID0gbWFza2VkU3JjLnNsaWNlKDAsIG1hdGNoLmluZGV4KSArICdbJyArIHJlcGVhdFN0cmluZygnYScsIG1hdGNoWzBdLmxlbmd0aCAtIDIpICsgJ10nICsgbWFza2VkU3JjLnNsaWNlKHRoaXMudG9rZW5pemVyLnJ1bGVzLmlubGluZS5ibG9ja1NraXAubGFzdEluZGV4KTtcbiAgICB9XG5cbiAgICAvLyBNYXNrIG91dCBlc2NhcGVkIGVtICYgc3Ryb25nIGRlbGltaXRlcnNcbiAgICB3aGlsZSAoKG1hdGNoID0gdGhpcy50b2tlbml6ZXIucnVsZXMuaW5saW5lLmVzY2FwZWRFbVN0LmV4ZWMobWFza2VkU3JjKSkgIT0gbnVsbCkge1xuICAgICAgbWFza2VkU3JjID0gbWFza2VkU3JjLnNsaWNlKDAsIG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoIC0gMikgKyAnKysnICsgbWFza2VkU3JjLnNsaWNlKHRoaXMudG9rZW5pemVyLnJ1bGVzLmlubGluZS5lc2NhcGVkRW1TdC5sYXN0SW5kZXgpO1xuICAgICAgdGhpcy50b2tlbml6ZXIucnVsZXMuaW5saW5lLmVzY2FwZWRFbVN0Lmxhc3RJbmRleC0tO1xuICAgIH1cblxuICAgIHdoaWxlIChzcmMpIHtcbiAgICAgIGlmICgha2VlcFByZXZDaGFyKSB7XG4gICAgICAgIHByZXZDaGFyID0gJyc7XG4gICAgICB9XG4gICAgICBrZWVwUHJldkNoYXIgPSBmYWxzZTtcblxuICAgICAgLy8gZXh0ZW5zaW9uc1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5leHRlbnNpb25zXG4gICAgICAgICYmIHRoaXMub3B0aW9ucy5leHRlbnNpb25zLmlubGluZVxuICAgICAgICAmJiB0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucy5pbmxpbmUuc29tZSgoZXh0VG9rZW5pemVyKSA9PiB7XG4gICAgICAgICAgaWYgKHRva2VuID0gZXh0VG9rZW5pemVyLmNhbGwoeyBsZXhlcjogdGhpcyB9LCBzcmMsIHRva2VucykpIHtcbiAgICAgICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gZXNjYXBlXG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5lc2NhcGUoc3JjKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyB0YWdcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLnRhZyhzcmMpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIGxhc3RUb2tlbiA9IHRva2Vuc1t0b2tlbnMubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChsYXN0VG9rZW4gJiYgdG9rZW4udHlwZSA9PT0gJ3RleHQnICYmIGxhc3RUb2tlbi50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICBsYXN0VG9rZW4ucmF3ICs9IHRva2VuLnJhdztcbiAgICAgICAgICBsYXN0VG9rZW4udGV4dCArPSB0b2tlbi50ZXh0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gbGlua1xuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIubGluayhzcmMpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIHJlZmxpbmssIG5vbGlua1xuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIucmVmbGluayhzcmMsIHRoaXMudG9rZW5zLmxpbmtzKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICBsYXN0VG9rZW4gPSB0b2tlbnNbdG9rZW5zLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAobGFzdFRva2VuICYmIHRva2VuLnR5cGUgPT09ICd0ZXh0JyAmJiBsYXN0VG9rZW4udHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgbGFzdFRva2VuLnJhdyArPSB0b2tlbi5yYXc7XG4gICAgICAgICAgbGFzdFRva2VuLnRleHQgKz0gdG9rZW4udGV4dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGVtICYgc3Ryb25nXG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5lbVN0cm9uZyhzcmMsIG1hc2tlZFNyYywgcHJldkNoYXIpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIGNvZGVcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLmNvZGVzcGFuKHNyYykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gYnJcbiAgICAgIGlmICh0b2tlbiA9IHRoaXMudG9rZW5pemVyLmJyKHNyYykpIHtcbiAgICAgICAgc3JjID0gc3JjLnN1YnN0cmluZyh0b2tlbi5yYXcubGVuZ3RoKTtcbiAgICAgICAgdG9rZW5zLnB1c2godG9rZW4pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gZGVsIChnZm0pXG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5kZWwoc3JjKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBhdXRvbGlua1xuICAgICAgaWYgKHRva2VuID0gdGhpcy50b2tlbml6ZXIuYXV0b2xpbmsoc3JjLCBtYW5nbGUpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIHRva2Vucy5wdXNoKHRva2VuKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIHVybCAoZ2ZtKVxuICAgICAgaWYgKCF0aGlzLnN0YXRlLmluTGluayAmJiAodG9rZW4gPSB0aGlzLnRva2VuaXplci51cmwoc3JjLCBtYW5nbGUpKSkge1xuICAgICAgICBzcmMgPSBzcmMuc3Vic3RyaW5nKHRva2VuLnJhdy5sZW5ndGgpO1xuICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyB0ZXh0XG4gICAgICAvLyBwcmV2ZW50IGlubGluZVRleHQgY29uc3VtaW5nIGV4dGVuc2lvbnMgYnkgY2xpcHBpbmcgJ3NyYycgdG8gZXh0ZW5zaW9uIHN0YXJ0XG4gICAgICBjdXRTcmMgPSBzcmM7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmV4dGVuc2lvbnMgJiYgdGhpcy5vcHRpb25zLmV4dGVuc2lvbnMuc3RhcnRJbmxpbmUpIHtcbiAgICAgICAgbGV0IHN0YXJ0SW5kZXggPSBJbmZpbml0eTtcbiAgICAgICAgY29uc3QgdGVtcFNyYyA9IHNyYy5zbGljZSgxKTtcbiAgICAgICAgbGV0IHRlbXBTdGFydDtcbiAgICAgICAgdGhpcy5vcHRpb25zLmV4dGVuc2lvbnMuc3RhcnRJbmxpbmUuZm9yRWFjaChmdW5jdGlvbihnZXRTdGFydEluZGV4KSB7XG4gICAgICAgICAgdGVtcFN0YXJ0ID0gZ2V0U3RhcnRJbmRleC5jYWxsKHsgbGV4ZXI6IHRoaXMgfSwgdGVtcFNyYyk7XG4gICAgICAgICAgaWYgKHR5cGVvZiB0ZW1wU3RhcnQgPT09ICdudW1iZXInICYmIHRlbXBTdGFydCA+PSAwKSB7IHN0YXJ0SW5kZXggPSBNYXRoLm1pbihzdGFydEluZGV4LCB0ZW1wU3RhcnQpOyB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoc3RhcnRJbmRleCA8IEluZmluaXR5ICYmIHN0YXJ0SW5kZXggPj0gMCkge1xuICAgICAgICAgIGN1dFNyYyA9IHNyYy5zdWJzdHJpbmcoMCwgc3RhcnRJbmRleCArIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodG9rZW4gPSB0aGlzLnRva2VuaXplci5pbmxpbmVUZXh0KGN1dFNyYywgc21hcnR5cGFudHMpKSB7XG4gICAgICAgIHNyYyA9IHNyYy5zdWJzdHJpbmcodG9rZW4ucmF3Lmxlbmd0aCk7XG4gICAgICAgIGlmICh0b2tlbi5yYXcuc2xpY2UoLTEpICE9PSAnXycpIHsgLy8gVHJhY2sgcHJldkNoYXIgYmVmb3JlIHN0cmluZyBvZiBfX19fIHN0YXJ0ZWRcbiAgICAgICAgICBwcmV2Q2hhciA9IHRva2VuLnJhdy5zbGljZSgtMSk7XG4gICAgICAgIH1cbiAgICAgICAga2VlcFByZXZDaGFyID0gdHJ1ZTtcbiAgICAgICAgbGFzdFRva2VuID0gdG9rZW5zW3Rva2Vucy5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKGxhc3RUb2tlbiAmJiBsYXN0VG9rZW4udHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgbGFzdFRva2VuLnJhdyArPSB0b2tlbi5yYXc7XG4gICAgICAgICAgbGFzdFRva2VuLnRleHQgKz0gdG9rZW4udGV4dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChzcmMpIHtcbiAgICAgICAgY29uc3QgZXJyTXNnID0gJ0luZmluaXRlIGxvb3Agb24gYnl0ZTogJyArIHNyYy5jaGFyQ29kZUF0KDApO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNpbGVudCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyTXNnKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyTXNnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0b2tlbnM7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW5kZXJlclxuICovXG5jbGFzcyBSZW5kZXJlciB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IGRlZmF1bHRzO1xuICB9XG5cbiAgY29kZShjb2RlLCBpbmZvc3RyaW5nLCBlc2NhcGVkKSB7XG4gICAgY29uc3QgbGFuZyA9IChpbmZvc3RyaW5nIHx8ICcnKS5tYXRjaCgvXFxTKi8pWzBdO1xuICAgIGlmICh0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0KSB7XG4gICAgICBjb25zdCBvdXQgPSB0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0KGNvZGUsIGxhbmcpO1xuICAgICAgaWYgKG91dCAhPSBudWxsICYmIG91dCAhPT0gY29kZSkge1xuICAgICAgICBlc2NhcGVkID0gdHJ1ZTtcbiAgICAgICAgY29kZSA9IG91dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb2RlID0gY29kZS5yZXBsYWNlKC9cXG4kLywgJycpICsgJ1xcbic7XG5cbiAgICBpZiAoIWxhbmcpIHtcbiAgICAgIHJldHVybiAnPHByZT48Y29kZT4nXG4gICAgICAgICsgKGVzY2FwZWQgPyBjb2RlIDogZXNjYXBlKGNvZGUsIHRydWUpKVxuICAgICAgICArICc8L2NvZGU+PC9wcmU+XFxuJztcbiAgICB9XG5cbiAgICByZXR1cm4gJzxwcmU+PGNvZGUgY2xhc3M9XCInXG4gICAgICArIHRoaXMub3B0aW9ucy5sYW5nUHJlZml4XG4gICAgICArIGVzY2FwZShsYW5nKVxuICAgICAgKyAnXCI+J1xuICAgICAgKyAoZXNjYXBlZCA/IGNvZGUgOiBlc2NhcGUoY29kZSwgdHJ1ZSkpXG4gICAgICArICc8L2NvZGU+PC9wcmU+XFxuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcXVvdGVcbiAgICovXG4gIGJsb2NrcXVvdGUocXVvdGUpIHtcbiAgICByZXR1cm4gYDxibG9ja3F1b3RlPlxcbiR7cXVvdGV9PC9ibG9ja3F1b3RlPlxcbmA7XG4gIH1cblxuICBodG1sKGh0bWwpIHtcbiAgICByZXR1cm4gaHRtbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICAgKiBAcGFyYW0ge3N0cmluZ30gbGV2ZWxcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJhd1xuICAgKiBAcGFyYW0ge2FueX0gc2x1Z2dlclxuICAgKi9cbiAgaGVhZGluZyh0ZXh0LCBsZXZlbCwgcmF3LCBzbHVnZ2VyKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5oZWFkZXJJZHMpIHtcbiAgICAgIGNvbnN0IGlkID0gdGhpcy5vcHRpb25zLmhlYWRlclByZWZpeCArIHNsdWdnZXIuc2x1ZyhyYXcpO1xuICAgICAgcmV0dXJuIGA8aCR7bGV2ZWx9IGlkPVwiJHtpZH1cIj4ke3RleHR9PC9oJHtsZXZlbH0+XFxuYDtcbiAgICB9XG5cbiAgICAvLyBpZ25vcmUgSURzXG4gICAgcmV0dXJuIGA8aCR7bGV2ZWx9PiR7dGV4dH08L2gke2xldmVsfT5cXG5gO1xuICB9XG5cbiAgaHIoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy54aHRtbCA/ICc8aHIvPlxcbicgOiAnPGhyPlxcbic7XG4gIH1cblxuICBsaXN0KGJvZHksIG9yZGVyZWQsIHN0YXJ0KSB7XG4gICAgY29uc3QgdHlwZSA9IG9yZGVyZWQgPyAnb2wnIDogJ3VsJyxcbiAgICAgIHN0YXJ0YXR0ID0gKG9yZGVyZWQgJiYgc3RhcnQgIT09IDEpID8gKCcgc3RhcnQ9XCInICsgc3RhcnQgKyAnXCInKSA6ICcnO1xuICAgIHJldHVybiAnPCcgKyB0eXBlICsgc3RhcnRhdHQgKyAnPlxcbicgKyBib2R5ICsgJzwvJyArIHR5cGUgKyAnPlxcbic7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAgICovXG4gIGxpc3RpdGVtKHRleHQpIHtcbiAgICByZXR1cm4gYDxsaT4ke3RleHR9PC9saT5cXG5gO1xuICB9XG5cbiAgY2hlY2tib3goY2hlY2tlZCkge1xuICAgIHJldHVybiAnPGlucHV0ICdcbiAgICAgICsgKGNoZWNrZWQgPyAnY2hlY2tlZD1cIlwiICcgOiAnJylcbiAgICAgICsgJ2Rpc2FibGVkPVwiXCIgdHlwZT1cImNoZWNrYm94XCInXG4gICAgICArICh0aGlzLm9wdGlvbnMueGh0bWwgPyAnIC8nIDogJycpXG4gICAgICArICc+ICc7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAgICovXG4gIHBhcmFncmFwaCh0ZXh0KSB7XG4gICAgcmV0dXJuIGA8cD4ke3RleHR9PC9wPlxcbmA7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGhlYWRlclxuICAgKiBAcGFyYW0ge3N0cmluZ30gYm9keVxuICAgKi9cbiAgdGFibGUoaGVhZGVyLCBib2R5KSB7XG4gICAgaWYgKGJvZHkpIGJvZHkgPSBgPHRib2R5PiR7Ym9keX08L3Rib2R5PmA7XG5cbiAgICByZXR1cm4gJzx0YWJsZT5cXG4nXG4gICAgICArICc8dGhlYWQ+XFxuJ1xuICAgICAgKyBoZWFkZXJcbiAgICAgICsgJzwvdGhlYWQ+XFxuJ1xuICAgICAgKyBib2R5XG4gICAgICArICc8L3RhYmxlPlxcbic7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnRcbiAgICovXG4gIHRhYmxlcm93KGNvbnRlbnQpIHtcbiAgICByZXR1cm4gYDx0cj5cXG4ke2NvbnRlbnR9PC90cj5cXG5gO1xuICB9XG5cbiAgdGFibGVjZWxsKGNvbnRlbnQsIGZsYWdzKSB7XG4gICAgY29uc3QgdHlwZSA9IGZsYWdzLmhlYWRlciA/ICd0aCcgOiAndGQnO1xuICAgIGNvbnN0IHRhZyA9IGZsYWdzLmFsaWduXG4gICAgICA/IGA8JHt0eXBlfSBhbGlnbj1cIiR7ZmxhZ3MuYWxpZ259XCI+YFxuICAgICAgOiBgPCR7dHlwZX0+YDtcbiAgICByZXR1cm4gdGFnICsgY29udGVudCArIGA8LyR7dHlwZX0+XFxuYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBzcGFuIGxldmVsIHJlbmRlcmVyXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gICAqL1xuICBzdHJvbmcodGV4dCkge1xuICAgIHJldHVybiBgPHN0cm9uZz4ke3RleHR9PC9zdHJvbmc+YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICAgKi9cbiAgZW0odGV4dCkge1xuICAgIHJldHVybiBgPGVtPiR7dGV4dH08L2VtPmA7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAgICovXG4gIGNvZGVzcGFuKHRleHQpIHtcbiAgICByZXR1cm4gYDxjb2RlPiR7dGV4dH08L2NvZGU+YDtcbiAgfVxuXG4gIGJyKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMueGh0bWwgPyAnPGJyLz4nIDogJzxicj4nO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gICAqL1xuICBkZWwodGV4dCkge1xuICAgIHJldHVybiBgPGRlbD4ke3RleHR9PC9kZWw+YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaHJlZlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGl0bGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAgICovXG4gIGxpbmsoaHJlZiwgdGl0bGUsIHRleHQpIHtcbiAgICBocmVmID0gY2xlYW5VcmwodGhpcy5vcHRpb25zLnNhbml0aXplLCB0aGlzLm9wdGlvbnMuYmFzZVVybCwgaHJlZik7XG4gICAgaWYgKGhyZWYgPT09IG51bGwpIHtcbiAgICAgIHJldHVybiB0ZXh0O1xuICAgIH1cbiAgICBsZXQgb3V0ID0gJzxhIGhyZWY9XCInICsgaHJlZiArICdcIic7XG4gICAgaWYgKHRpdGxlKSB7XG4gICAgICBvdXQgKz0gJyB0aXRsZT1cIicgKyB0aXRsZSArICdcIic7XG4gICAgfVxuICAgIG91dCArPSAnPicgKyB0ZXh0ICsgJzwvYT4nO1xuICAgIHJldHVybiBvdXQ7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IGhyZWZcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRpdGxlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gICAqL1xuICBpbWFnZShocmVmLCB0aXRsZSwgdGV4dCkge1xuICAgIGhyZWYgPSBjbGVhblVybCh0aGlzLm9wdGlvbnMuc2FuaXRpemUsIHRoaXMub3B0aW9ucy5iYXNlVXJsLCBocmVmKTtcbiAgICBpZiAoaHJlZiA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfVxuXG4gICAgbGV0IG91dCA9IGA8aW1nIHNyYz1cIiR7aHJlZn1cIiBhbHQ9XCIke3RleHR9XCJgO1xuICAgIGlmICh0aXRsZSkge1xuICAgICAgb3V0ICs9IGAgdGl0bGU9XCIke3RpdGxlfVwiYDtcbiAgICB9XG4gICAgb3V0ICs9IHRoaXMub3B0aW9ucy54aHRtbCA/ICcvPicgOiAnPic7XG4gICAgcmV0dXJuIG91dDtcbiAgfVxuXG4gIHRleHQodGV4dCkge1xuICAgIHJldHVybiB0ZXh0O1xuICB9XG59XG5cbi8qKlxuICogVGV4dFJlbmRlcmVyXG4gKiByZXR1cm5zIG9ubHkgdGhlIHRleHR1YWwgcGFydCBvZiB0aGUgdG9rZW5cbiAqL1xuY2xhc3MgVGV4dFJlbmRlcmVyIHtcbiAgLy8gbm8gbmVlZCBmb3IgYmxvY2sgbGV2ZWwgcmVuZGVyZXJzXG4gIHN0cm9uZyh0ZXh0KSB7XG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cblxuICBlbSh0ZXh0KSB7XG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cblxuICBjb2Rlc3Bhbih0ZXh0KSB7XG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cblxuICBkZWwodGV4dCkge1xuICAgIHJldHVybiB0ZXh0O1xuICB9XG5cbiAgaHRtbCh0ZXh0KSB7XG4gICAgcmV0dXJuIHRleHQ7XG4gIH1cblxuICB0ZXh0KHRleHQpIHtcbiAgICByZXR1cm4gdGV4dDtcbiAgfVxuXG4gIGxpbmsoaHJlZiwgdGl0bGUsIHRleHQpIHtcbiAgICByZXR1cm4gJycgKyB0ZXh0O1xuICB9XG5cbiAgaW1hZ2UoaHJlZiwgdGl0bGUsIHRleHQpIHtcbiAgICByZXR1cm4gJycgKyB0ZXh0O1xuICB9XG5cbiAgYnIoKSB7XG4gICAgcmV0dXJuICcnO1xuICB9XG59XG5cbi8qKlxuICogU2x1Z2dlciBnZW5lcmF0ZXMgaGVhZGVyIGlkXG4gKi9cbmNsYXNzIFNsdWdnZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnNlZW4gPSB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAgICovXG4gIHNlcmlhbGl6ZSh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZVxuICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgIC50cmltKClcbiAgICAgIC8vIHJlbW92ZSBodG1sIHRhZ3NcbiAgICAgIC5yZXBsYWNlKC88WyFcXC9hLXpdLio/Pi9pZywgJycpXG4gICAgICAvLyByZW1vdmUgdW53YW50ZWQgY2hhcnNcbiAgICAgIC5yZXBsYWNlKC9bXFx1MjAwMC1cXHUyMDZGXFx1MkUwMC1cXHUyRTdGXFxcXCchXCIjJCUmKCkqKywuLzo7PD0+P0BbXFxdXmB7fH1+XS9nLCAnJylcbiAgICAgIC5yZXBsYWNlKC9cXHMvZywgJy0nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kcyB0aGUgbmV4dCBzYWZlICh1bmlxdWUpIHNsdWcgdG8gdXNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvcmlnaW5hbFNsdWdcbiAgICogQHBhcmFtIHtib29sZWFufSBpc0RyeVJ1blxuICAgKi9cbiAgZ2V0TmV4dFNhZmVTbHVnKG9yaWdpbmFsU2x1ZywgaXNEcnlSdW4pIHtcbiAgICBsZXQgc2x1ZyA9IG9yaWdpbmFsU2x1ZztcbiAgICBsZXQgb2NjdXJlbmNlQWNjdW11bGF0b3IgPSAwO1xuICAgIGlmICh0aGlzLnNlZW4uaGFzT3duUHJvcGVydHkoc2x1ZykpIHtcbiAgICAgIG9jY3VyZW5jZUFjY3VtdWxhdG9yID0gdGhpcy5zZWVuW29yaWdpbmFsU2x1Z107XG4gICAgICBkbyB7XG4gICAgICAgIG9jY3VyZW5jZUFjY3VtdWxhdG9yKys7XG4gICAgICAgIHNsdWcgPSBvcmlnaW5hbFNsdWcgKyAnLScgKyBvY2N1cmVuY2VBY2N1bXVsYXRvcjtcbiAgICAgIH0gd2hpbGUgKHRoaXMuc2Vlbi5oYXNPd25Qcm9wZXJ0eShzbHVnKSk7XG4gICAgfVxuICAgIGlmICghaXNEcnlSdW4pIHtcbiAgICAgIHRoaXMuc2VlbltvcmlnaW5hbFNsdWddID0gb2NjdXJlbmNlQWNjdW11bGF0b3I7XG4gICAgICB0aGlzLnNlZW5bc2x1Z10gPSAwO1xuICAgIH1cbiAgICByZXR1cm4gc2x1ZztcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IHN0cmluZyB0byB1bmlxdWUgaWRcbiAgICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zXVxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmRyeXJ1bl0gR2VuZXJhdGVzIHRoZSBuZXh0IHVuaXF1ZSBzbHVnIHdpdGhvdXRcbiAgICogdXBkYXRpbmcgdGhlIGludGVybmFsIGFjY3VtdWxhdG9yLlxuICAgKi9cbiAgc2x1Zyh2YWx1ZSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3Qgc2x1ZyA9IHRoaXMuc2VyaWFsaXplKHZhbHVlKTtcbiAgICByZXR1cm4gdGhpcy5nZXROZXh0U2FmZVNsdWcoc2x1Zywgb3B0aW9ucy5kcnlydW4pO1xuICB9XG59XG5cbi8qKlxuICogUGFyc2luZyAmIENvbXBpbGluZ1xuICovXG5jbGFzcyBQYXJzZXIge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCBkZWZhdWx0cztcbiAgICB0aGlzLm9wdGlvbnMucmVuZGVyZXIgPSB0aGlzLm9wdGlvbnMucmVuZGVyZXIgfHwgbmV3IFJlbmRlcmVyKCk7XG4gICAgdGhpcy5yZW5kZXJlciA9IHRoaXMub3B0aW9ucy5yZW5kZXJlcjtcbiAgICB0aGlzLnJlbmRlcmVyLm9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XG4gICAgdGhpcy50ZXh0UmVuZGVyZXIgPSBuZXcgVGV4dFJlbmRlcmVyKCk7XG4gICAgdGhpcy5zbHVnZ2VyID0gbmV3IFNsdWdnZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGF0aWMgUGFyc2UgTWV0aG9kXG4gICAqL1xuICBzdGF0aWMgcGFyc2UodG9rZW5zLCBvcHRpb25zKSB7XG4gICAgY29uc3QgcGFyc2VyID0gbmV3IFBhcnNlcihvcHRpb25zKTtcbiAgICByZXR1cm4gcGFyc2VyLnBhcnNlKHRva2Vucyk7XG4gIH1cblxuICAvKipcbiAgICogU3RhdGljIFBhcnNlIElubGluZSBNZXRob2RcbiAgICovXG4gIHN0YXRpYyBwYXJzZUlubGluZSh0b2tlbnMsIG9wdGlvbnMpIHtcbiAgICBjb25zdCBwYXJzZXIgPSBuZXcgUGFyc2VyKG9wdGlvbnMpO1xuICAgIHJldHVybiBwYXJzZXIucGFyc2VJbmxpbmUodG9rZW5zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSBMb29wXG4gICAqL1xuICBwYXJzZSh0b2tlbnMsIHRvcCA9IHRydWUpIHtcbiAgICBsZXQgb3V0ID0gJycsXG4gICAgICBpLFxuICAgICAgaixcbiAgICAgIGssXG4gICAgICBsMixcbiAgICAgIGwzLFxuICAgICAgcm93LFxuICAgICAgY2VsbCxcbiAgICAgIGhlYWRlcixcbiAgICAgIGJvZHksXG4gICAgICB0b2tlbixcbiAgICAgIG9yZGVyZWQsXG4gICAgICBzdGFydCxcbiAgICAgIGxvb3NlLFxuICAgICAgaXRlbUJvZHksXG4gICAgICBpdGVtLFxuICAgICAgY2hlY2tlZCxcbiAgICAgIHRhc2ssXG4gICAgICBjaGVja2JveCxcbiAgICAgIHJldDtcblxuICAgIGNvbnN0IGwgPSB0b2tlbnMubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgIHRva2VuID0gdG9rZW5zW2ldO1xuXG4gICAgICAvLyBSdW4gYW55IHJlbmRlcmVyIGV4dGVuc2lvbnNcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucyAmJiB0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucy5yZW5kZXJlcnMgJiYgdGhpcy5vcHRpb25zLmV4dGVuc2lvbnMucmVuZGVyZXJzW3Rva2VuLnR5cGVdKSB7XG4gICAgICAgIHJldCA9IHRoaXMub3B0aW9ucy5leHRlbnNpb25zLnJlbmRlcmVyc1t0b2tlbi50eXBlXS5jYWxsKHsgcGFyc2VyOiB0aGlzIH0sIHRva2VuKTtcbiAgICAgICAgaWYgKHJldCAhPT0gZmFsc2UgfHwgIVsnc3BhY2UnLCAnaHInLCAnaGVhZGluZycsICdjb2RlJywgJ3RhYmxlJywgJ2Jsb2NrcXVvdGUnLCAnbGlzdCcsICdodG1sJywgJ3BhcmFncmFwaCcsICd0ZXh0J10uaW5jbHVkZXModG9rZW4udHlwZSkpIHtcbiAgICAgICAgICBvdXQgKz0gcmV0IHx8ICcnO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHN3aXRjaCAodG9rZW4udHlwZSkge1xuICAgICAgICBjYXNlICdzcGFjZSc6IHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdocic6IHtcbiAgICAgICAgICBvdXQgKz0gdGhpcy5yZW5kZXJlci5ocigpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2hlYWRpbmcnOiB7XG4gICAgICAgICAgb3V0ICs9IHRoaXMucmVuZGVyZXIuaGVhZGluZyhcbiAgICAgICAgICAgIHRoaXMucGFyc2VJbmxpbmUodG9rZW4udG9rZW5zKSxcbiAgICAgICAgICAgIHRva2VuLmRlcHRoLFxuICAgICAgICAgICAgdW5lc2NhcGUodGhpcy5wYXJzZUlubGluZSh0b2tlbi50b2tlbnMsIHRoaXMudGV4dFJlbmRlcmVyKSksXG4gICAgICAgICAgICB0aGlzLnNsdWdnZXIpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2NvZGUnOiB7XG4gICAgICAgICAgb3V0ICs9IHRoaXMucmVuZGVyZXIuY29kZSh0b2tlbi50ZXh0LFxuICAgICAgICAgICAgdG9rZW4ubGFuZyxcbiAgICAgICAgICAgIHRva2VuLmVzY2FwZWQpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ3RhYmxlJzoge1xuICAgICAgICAgIGhlYWRlciA9ICcnO1xuXG4gICAgICAgICAgLy8gaGVhZGVyXG4gICAgICAgICAgY2VsbCA9ICcnO1xuICAgICAgICAgIGwyID0gdG9rZW4uaGVhZGVyLmxlbmd0aDtcbiAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgbDI7IGorKykge1xuICAgICAgICAgICAgY2VsbCArPSB0aGlzLnJlbmRlcmVyLnRhYmxlY2VsbChcbiAgICAgICAgICAgICAgdGhpcy5wYXJzZUlubGluZSh0b2tlbi5oZWFkZXJbal0udG9rZW5zKSxcbiAgICAgICAgICAgICAgeyBoZWFkZXI6IHRydWUsIGFsaWduOiB0b2tlbi5hbGlnbltqXSB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBoZWFkZXIgKz0gdGhpcy5yZW5kZXJlci50YWJsZXJvdyhjZWxsKTtcblxuICAgICAgICAgIGJvZHkgPSAnJztcbiAgICAgICAgICBsMiA9IHRva2VuLnJvd3MubGVuZ3RoO1xuICAgICAgICAgIGZvciAoaiA9IDA7IGogPCBsMjsgaisrKSB7XG4gICAgICAgICAgICByb3cgPSB0b2tlbi5yb3dzW2pdO1xuXG4gICAgICAgICAgICBjZWxsID0gJyc7XG4gICAgICAgICAgICBsMyA9IHJvdy5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgbDM7IGsrKykge1xuICAgICAgICAgICAgICBjZWxsICs9IHRoaXMucmVuZGVyZXIudGFibGVjZWxsKFxuICAgICAgICAgICAgICAgIHRoaXMucGFyc2VJbmxpbmUocm93W2tdLnRva2VucyksXG4gICAgICAgICAgICAgICAgeyBoZWFkZXI6IGZhbHNlLCBhbGlnbjogdG9rZW4uYWxpZ25ba10gfVxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBib2R5ICs9IHRoaXMucmVuZGVyZXIudGFibGVyb3coY2VsbCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG91dCArPSB0aGlzLnJlbmRlcmVyLnRhYmxlKGhlYWRlciwgYm9keSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnYmxvY2txdW90ZSc6IHtcbiAgICAgICAgICBib2R5ID0gdGhpcy5wYXJzZSh0b2tlbi50b2tlbnMpO1xuICAgICAgICAgIG91dCArPSB0aGlzLnJlbmRlcmVyLmJsb2NrcXVvdGUoYm9keSk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnbGlzdCc6IHtcbiAgICAgICAgICBvcmRlcmVkID0gdG9rZW4ub3JkZXJlZDtcbiAgICAgICAgICBzdGFydCA9IHRva2VuLnN0YXJ0O1xuICAgICAgICAgIGxvb3NlID0gdG9rZW4ubG9vc2U7XG4gICAgICAgICAgbDIgPSB0b2tlbi5pdGVtcy5sZW5ndGg7XG5cbiAgICAgICAgICBib2R5ID0gJyc7XG4gICAgICAgICAgZm9yIChqID0gMDsgaiA8IGwyOyBqKyspIHtcbiAgICAgICAgICAgIGl0ZW0gPSB0b2tlbi5pdGVtc1tqXTtcbiAgICAgICAgICAgIGNoZWNrZWQgPSBpdGVtLmNoZWNrZWQ7XG4gICAgICAgICAgICB0YXNrID0gaXRlbS50YXNrO1xuXG4gICAgICAgICAgICBpdGVtQm9keSA9ICcnO1xuICAgICAgICAgICAgaWYgKGl0ZW0udGFzaykge1xuICAgICAgICAgICAgICBjaGVja2JveCA9IHRoaXMucmVuZGVyZXIuY2hlY2tib3goY2hlY2tlZCk7XG4gICAgICAgICAgICAgIGlmIChsb29zZSkge1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnRva2Vucy5sZW5ndGggPiAwICYmIGl0ZW0udG9rZW5zWzBdLnR5cGUgPT09ICdwYXJhZ3JhcGgnKSB7XG4gICAgICAgICAgICAgICAgICBpdGVtLnRva2Vuc1swXS50ZXh0ID0gY2hlY2tib3ggKyAnICcgKyBpdGVtLnRva2Vuc1swXS50ZXh0O1xuICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0udG9rZW5zWzBdLnRva2VucyAmJiBpdGVtLnRva2Vuc1swXS50b2tlbnMubGVuZ3RoID4gMCAmJiBpdGVtLnRva2Vuc1swXS50b2tlbnNbMF0udHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0udG9rZW5zWzBdLnRva2Vuc1swXS50ZXh0ID0gY2hlY2tib3ggKyAnICcgKyBpdGVtLnRva2Vuc1swXS50b2tlbnNbMF0udGV4dDtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgaXRlbS50b2tlbnMudW5zaGlmdCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogY2hlY2tib3hcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpdGVtQm9keSArPSBjaGVja2JveDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpdGVtQm9keSArPSB0aGlzLnBhcnNlKGl0ZW0udG9rZW5zLCBsb29zZSk7XG4gICAgICAgICAgICBib2R5ICs9IHRoaXMucmVuZGVyZXIubGlzdGl0ZW0oaXRlbUJvZHksIHRhc2ssIGNoZWNrZWQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG91dCArPSB0aGlzLnJlbmRlcmVyLmxpc3QoYm9keSwgb3JkZXJlZCwgc3RhcnQpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2h0bWwnOiB7XG4gICAgICAgICAgLy8gVE9ETyBwYXJzZSBpbmxpbmUgY29udGVudCBpZiBwYXJhbWV0ZXIgbWFya2Rvd249MVxuICAgICAgICAgIG91dCArPSB0aGlzLnJlbmRlcmVyLmh0bWwodG9rZW4udGV4dCk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAncGFyYWdyYXBoJzoge1xuICAgICAgICAgIG91dCArPSB0aGlzLnJlbmRlcmVyLnBhcmFncmFwaCh0aGlzLnBhcnNlSW5saW5lKHRva2VuLnRva2VucykpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ3RleHQnOiB7XG4gICAgICAgICAgYm9keSA9IHRva2VuLnRva2VucyA/IHRoaXMucGFyc2VJbmxpbmUodG9rZW4udG9rZW5zKSA6IHRva2VuLnRleHQ7XG4gICAgICAgICAgd2hpbGUgKGkgKyAxIDwgbCAmJiB0b2tlbnNbaSArIDFdLnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgdG9rZW4gPSB0b2tlbnNbKytpXTtcbiAgICAgICAgICAgIGJvZHkgKz0gJ1xcbicgKyAodG9rZW4udG9rZW5zID8gdGhpcy5wYXJzZUlubGluZSh0b2tlbi50b2tlbnMpIDogdG9rZW4udGV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG91dCArPSB0b3AgPyB0aGlzLnJlbmRlcmVyLnBhcmFncmFwaChib2R5KSA6IGJvZHk7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgY29uc3QgZXJyTXNnID0gJ1Rva2VuIHdpdGggXCInICsgdG9rZW4udHlwZSArICdcIiB0eXBlIHdhcyBub3QgZm91bmQuJztcbiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNpbGVudCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJNc2cpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyTXNnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIElubGluZSBUb2tlbnNcbiAgICovXG4gIHBhcnNlSW5saW5lKHRva2VucywgcmVuZGVyZXIpIHtcbiAgICByZW5kZXJlciA9IHJlbmRlcmVyIHx8IHRoaXMucmVuZGVyZXI7XG4gICAgbGV0IG91dCA9ICcnLFxuICAgICAgaSxcbiAgICAgIHRva2VuLFxuICAgICAgcmV0O1xuXG4gICAgY29uc3QgbCA9IHRva2Vucy5sZW5ndGg7XG4gICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgdG9rZW4gPSB0b2tlbnNbaV07XG5cbiAgICAgIC8vIFJ1biBhbnkgcmVuZGVyZXIgZXh0ZW5zaW9uc1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5leHRlbnNpb25zICYmIHRoaXMub3B0aW9ucy5leHRlbnNpb25zLnJlbmRlcmVycyAmJiB0aGlzLm9wdGlvbnMuZXh0ZW5zaW9ucy5yZW5kZXJlcnNbdG9rZW4udHlwZV0pIHtcbiAgICAgICAgcmV0ID0gdGhpcy5vcHRpb25zLmV4dGVuc2lvbnMucmVuZGVyZXJzW3Rva2VuLnR5cGVdLmNhbGwoeyBwYXJzZXI6IHRoaXMgfSwgdG9rZW4pO1xuICAgICAgICBpZiAocmV0ICE9PSBmYWxzZSB8fCAhWydlc2NhcGUnLCAnaHRtbCcsICdsaW5rJywgJ2ltYWdlJywgJ3N0cm9uZycsICdlbScsICdjb2Rlc3BhbicsICdicicsICdkZWwnLCAndGV4dCddLmluY2x1ZGVzKHRva2VuLnR5cGUpKSB7XG4gICAgICAgICAgb3V0ICs9IHJldCB8fCAnJztcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzd2l0Y2ggKHRva2VuLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnZXNjYXBlJzoge1xuICAgICAgICAgIG91dCArPSByZW5kZXJlci50ZXh0KHRva2VuLnRleHQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2h0bWwnOiB7XG4gICAgICAgICAgb3V0ICs9IHJlbmRlcmVyLmh0bWwodG9rZW4udGV4dCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnbGluayc6IHtcbiAgICAgICAgICBvdXQgKz0gcmVuZGVyZXIubGluayh0b2tlbi5ocmVmLCB0b2tlbi50aXRsZSwgdGhpcy5wYXJzZUlubGluZSh0b2tlbi50b2tlbnMsIHJlbmRlcmVyKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnaW1hZ2UnOiB7XG4gICAgICAgICAgb3V0ICs9IHJlbmRlcmVyLmltYWdlKHRva2VuLmhyZWYsIHRva2VuLnRpdGxlLCB0b2tlbi50ZXh0KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdzdHJvbmcnOiB7XG4gICAgICAgICAgb3V0ICs9IHJlbmRlcmVyLnN0cm9uZyh0aGlzLnBhcnNlSW5saW5lKHRva2VuLnRva2VucywgcmVuZGVyZXIpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdlbSc6IHtcbiAgICAgICAgICBvdXQgKz0gcmVuZGVyZXIuZW0odGhpcy5wYXJzZUlubGluZSh0b2tlbi50b2tlbnMsIHJlbmRlcmVyKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnY29kZXNwYW4nOiB7XG4gICAgICAgICAgb3V0ICs9IHJlbmRlcmVyLmNvZGVzcGFuKHRva2VuLnRleHQpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2JyJzoge1xuICAgICAgICAgIG91dCArPSByZW5kZXJlci5icigpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ2RlbCc6IHtcbiAgICAgICAgICBvdXQgKz0gcmVuZGVyZXIuZGVsKHRoaXMucGFyc2VJbmxpbmUodG9rZW4udG9rZW5zLCByZW5kZXJlcikpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ3RleHQnOiB7XG4gICAgICAgICAgb3V0ICs9IHJlbmRlcmVyLnRleHQodG9rZW4udGV4dCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgIGNvbnN0IGVyck1zZyA9ICdUb2tlbiB3aXRoIFwiJyArIHRva2VuLnR5cGUgKyAnXCIgdHlwZSB3YXMgbm90IGZvdW5kLic7XG4gICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaWxlbnQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyTXNnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVyck1zZyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG4gIH1cbn1cblxuY2xhc3MgSG9va3Mge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCBkZWZhdWx0cztcbiAgfVxuXG4gIHN0YXRpYyBwYXNzVGhyb3VnaEhvb2tzID0gbmV3IFNldChbXG4gICAgJ3ByZXByb2Nlc3MnLFxuICAgICdwb3N0cHJvY2VzcydcbiAgXSk7XG5cbiAgLyoqXG4gICAqIFByb2Nlc3MgbWFya2Rvd24gYmVmb3JlIG1hcmtlZFxuICAgKi9cbiAgcHJlcHJvY2VzcyhtYXJrZG93bikge1xuICAgIHJldHVybiBtYXJrZG93bjtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9jZXNzIEhUTUwgYWZ0ZXIgbWFya2VkIGlzIGZpbmlzaGVkXG4gICAqL1xuICBwb3N0cHJvY2VzcyhodG1sKSB7XG4gICAgcmV0dXJuIGh0bWw7XG4gIH1cbn1cblxuZnVuY3Rpb24gb25FcnJvcihzaWxlbnQsIGFzeW5jLCBjYWxsYmFjaykge1xuICByZXR1cm4gKGUpID0+IHtcbiAgICBlLm1lc3NhZ2UgKz0gJ1xcblBsZWFzZSByZXBvcnQgdGhpcyB0byBodHRwczovL2dpdGh1Yi5jb20vbWFya2VkanMvbWFya2VkLic7XG5cbiAgICBpZiAoc2lsZW50KSB7XG4gICAgICBjb25zdCBtc2cgPSAnPHA+QW4gZXJyb3Igb2NjdXJyZWQ6PC9wPjxwcmU+J1xuICAgICAgICArIGVzY2FwZShlLm1lc3NhZ2UgKyAnJywgdHJ1ZSlcbiAgICAgICAgKyAnPC9wcmU+JztcbiAgICAgIGlmIChhc3luYykge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG1zZyk7XG4gICAgICB9XG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgbXNnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1zZztcbiAgICB9XG5cbiAgICBpZiAoYXN5bmMpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlKTtcbiAgICB9XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjayhlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhyb3cgZTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcGFyc2VNYXJrZG93bihsZXhlciwgcGFyc2VyKSB7XG4gIHJldHVybiAoc3JjLCBvcHQsIGNhbGxiYWNrKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBvcHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNhbGxiYWNrID0gb3B0O1xuICAgICAgb3B0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBvcmlnT3B0ID0geyAuLi5vcHQgfTtcbiAgICBvcHQgPSB7IC4uLm1hcmtlZC5kZWZhdWx0cywgLi4ub3JpZ09wdCB9O1xuICAgIGNvbnN0IHRocm93RXJyb3IgPSBvbkVycm9yKG9wdC5zaWxlbnQsIG9wdC5hc3luYywgY2FsbGJhY2spO1xuXG4gICAgLy8gdGhyb3cgZXJyb3IgaW4gY2FzZSBvZiBub24gc3RyaW5nIGlucHV0XG4gICAgaWYgKHR5cGVvZiBzcmMgPT09ICd1bmRlZmluZWQnIHx8IHNyYyA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHRocm93RXJyb3IobmV3IEVycm9yKCdtYXJrZWQoKTogaW5wdXQgcGFyYW1ldGVyIGlzIHVuZGVmaW5lZCBvciBudWxsJykpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNyYyAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiB0aHJvd0Vycm9yKG5ldyBFcnJvcignbWFya2VkKCk6IGlucHV0IHBhcmFtZXRlciBpcyBvZiB0eXBlICdcbiAgICAgICAgKyBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc3JjKSArICcsIHN0cmluZyBleHBlY3RlZCcpKTtcbiAgICB9XG5cbiAgICBjaGVja1Nhbml0aXplRGVwcmVjYXRpb24ob3B0KTtcblxuICAgIGlmIChvcHQuaG9va3MpIHtcbiAgICAgIG9wdC5ob29rcy5vcHRpb25zID0gb3B0O1xuICAgIH1cblxuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgY29uc3QgaGlnaGxpZ2h0ID0gb3B0LmhpZ2hsaWdodDtcbiAgICAgIGxldCB0b2tlbnM7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGlmIChvcHQuaG9va3MpIHtcbiAgICAgICAgICBzcmMgPSBvcHQuaG9va3MucHJlcHJvY2VzcyhzcmMpO1xuICAgICAgICB9XG4gICAgICAgIHRva2VucyA9IGxleGVyKHNyYywgb3B0KTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHRocm93RXJyb3IoZSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRvbmUgPSBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgbGV0IG91dDtcblxuICAgICAgICBpZiAoIWVycikge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAob3B0LndhbGtUb2tlbnMpIHtcbiAgICAgICAgICAgICAgbWFya2VkLndhbGtUb2tlbnModG9rZW5zLCBvcHQud2Fsa1Rva2Vucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvdXQgPSBwYXJzZXIodG9rZW5zLCBvcHQpO1xuICAgICAgICAgICAgaWYgKG9wdC5ob29rcykge1xuICAgICAgICAgICAgICBvdXQgPSBvcHQuaG9va3MucG9zdHByb2Nlc3Mob3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBlcnIgPSBlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG9wdC5oaWdobGlnaHQgPSBoaWdobGlnaHQ7XG5cbiAgICAgICAgcmV0dXJuIGVyclxuICAgICAgICAgID8gdGhyb3dFcnJvcihlcnIpXG4gICAgICAgICAgOiBjYWxsYmFjayhudWxsLCBvdXQpO1xuICAgICAgfTtcblxuICAgICAgaWYgKCFoaWdobGlnaHQgfHwgaGlnaGxpZ2h0Lmxlbmd0aCA8IDMpIHtcbiAgICAgICAgcmV0dXJuIGRvbmUoKTtcbiAgICAgIH1cblxuICAgICAgZGVsZXRlIG9wdC5oaWdobGlnaHQ7XG5cbiAgICAgIGlmICghdG9rZW5zLmxlbmd0aCkgcmV0dXJuIGRvbmUoKTtcblxuICAgICAgbGV0IHBlbmRpbmcgPSAwO1xuICAgICAgbWFya2VkLndhbGtUb2tlbnModG9rZW5zLCBmdW5jdGlvbih0b2tlbikge1xuICAgICAgICBpZiAodG9rZW4udHlwZSA9PT0gJ2NvZGUnKSB7XG4gICAgICAgICAgcGVuZGluZysrO1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgaGlnaGxpZ2h0KHRva2VuLnRleHQsIHRva2VuLmxhbmcsIGZ1bmN0aW9uKGVyciwgY29kZSkge1xuICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRvbmUoZXJyKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoY29kZSAhPSBudWxsICYmIGNvZGUgIT09IHRva2VuLnRleHQpIHtcbiAgICAgICAgICAgICAgICB0b2tlbi50ZXh0ID0gY29kZTtcbiAgICAgICAgICAgICAgICB0b2tlbi5lc2NhcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHBlbmRpbmctLTtcbiAgICAgICAgICAgICAgaWYgKHBlbmRpbmcgPT09IDApIHtcbiAgICAgICAgICAgICAgICBkb25lKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKHBlbmRpbmcgPT09IDApIHtcbiAgICAgICAgZG9uZSgpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG9wdC5hc3luYykge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShvcHQuaG9va3MgPyBvcHQuaG9va3MucHJlcHJvY2VzcyhzcmMpIDogc3JjKVxuICAgICAgICAudGhlbihzcmMgPT4gbGV4ZXIoc3JjLCBvcHQpKVxuICAgICAgICAudGhlbih0b2tlbnMgPT4gb3B0LndhbGtUb2tlbnMgPyBQcm9taXNlLmFsbChtYXJrZWQud2Fsa1Rva2Vucyh0b2tlbnMsIG9wdC53YWxrVG9rZW5zKSkudGhlbigoKSA9PiB0b2tlbnMpIDogdG9rZW5zKVxuICAgICAgICAudGhlbih0b2tlbnMgPT4gcGFyc2VyKHRva2Vucywgb3B0KSlcbiAgICAgICAgLnRoZW4oaHRtbCA9PiBvcHQuaG9va3MgPyBvcHQuaG9va3MucG9zdHByb2Nlc3MoaHRtbCkgOiBodG1sKVxuICAgICAgICAuY2F0Y2godGhyb3dFcnJvcik7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGlmIChvcHQuaG9va3MpIHtcbiAgICAgICAgc3JjID0gb3B0Lmhvb2tzLnByZXByb2Nlc3Moc3JjKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHRva2VucyA9IGxleGVyKHNyYywgb3B0KTtcbiAgICAgIGlmIChvcHQud2Fsa1Rva2Vucykge1xuICAgICAgICBtYXJrZWQud2Fsa1Rva2Vucyh0b2tlbnMsIG9wdC53YWxrVG9rZW5zKTtcbiAgICAgIH1cbiAgICAgIGxldCBodG1sID0gcGFyc2VyKHRva2Vucywgb3B0KTtcbiAgICAgIGlmIChvcHQuaG9va3MpIHtcbiAgICAgICAgaHRtbCA9IG9wdC5ob29rcy5wb3N0cHJvY2VzcyhodG1sKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBodG1sO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB0aHJvd0Vycm9yKGUpO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBNYXJrZWRcbiAqL1xuZnVuY3Rpb24gbWFya2VkKHNyYywgb3B0LCBjYWxsYmFjaykge1xuICByZXR1cm4gcGFyc2VNYXJrZG93bihMZXhlci5sZXgsIFBhcnNlci5wYXJzZSkoc3JjLCBvcHQsIGNhbGxiYWNrKTtcbn1cblxuLyoqXG4gKiBPcHRpb25zXG4gKi9cblxubWFya2VkLm9wdGlvbnMgPVxubWFya2VkLnNldE9wdGlvbnMgPSBmdW5jdGlvbihvcHQpIHtcbiAgbWFya2VkLmRlZmF1bHRzID0geyAuLi5tYXJrZWQuZGVmYXVsdHMsIC4uLm9wdCB9O1xuICBjaGFuZ2VEZWZhdWx0cyhtYXJrZWQuZGVmYXVsdHMpO1xuICByZXR1cm4gbWFya2VkO1xufTtcblxubWFya2VkLmdldERlZmF1bHRzID0gZ2V0RGVmYXVsdHM7XG5cbm1hcmtlZC5kZWZhdWx0cyA9IGRlZmF1bHRzO1xuXG4vKipcbiAqIFVzZSBFeHRlbnNpb25cbiAqL1xuXG5tYXJrZWQudXNlID0gZnVuY3Rpb24oLi4uYXJncykge1xuICBjb25zdCBleHRlbnNpb25zID0gbWFya2VkLmRlZmF1bHRzLmV4dGVuc2lvbnMgfHwgeyByZW5kZXJlcnM6IHt9LCBjaGlsZFRva2Vuczoge30gfTtcblxuICBhcmdzLmZvckVhY2goKHBhY2spID0+IHtcbiAgICAvLyBjb3B5IG9wdGlvbnMgdG8gbmV3IG9iamVjdFxuICAgIGNvbnN0IG9wdHMgPSB7IC4uLnBhY2sgfTtcblxuICAgIC8vIHNldCBhc3luYyB0byB0cnVlIGlmIGl0IHdhcyBzZXQgdG8gdHJ1ZSBiZWZvcmVcbiAgICBvcHRzLmFzeW5jID0gbWFya2VkLmRlZmF1bHRzLmFzeW5jIHx8IG9wdHMuYXN5bmMgfHwgZmFsc2U7XG5cbiAgICAvLyA9PS0tIFBhcnNlIFwiYWRkb25cIiBleHRlbnNpb25zIC0tPT0gLy9cbiAgICBpZiAocGFjay5leHRlbnNpb25zKSB7XG4gICAgICBwYWNrLmV4dGVuc2lvbnMuZm9yRWFjaCgoZXh0KSA9PiB7XG4gICAgICAgIGlmICghZXh0Lm5hbWUpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2V4dGVuc2lvbiBuYW1lIHJlcXVpcmVkJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV4dC5yZW5kZXJlcikgeyAvLyBSZW5kZXJlciBleHRlbnNpb25zXG4gICAgICAgICAgY29uc3QgcHJldlJlbmRlcmVyID0gZXh0ZW5zaW9ucy5yZW5kZXJlcnNbZXh0Lm5hbWVdO1xuICAgICAgICAgIGlmIChwcmV2UmVuZGVyZXIpIHtcbiAgICAgICAgICAgIC8vIFJlcGxhY2UgZXh0ZW5zaW9uIHdpdGggZnVuYyB0byBydW4gbmV3IGV4dGVuc2lvbiBidXQgZmFsbCBiYWNrIGlmIGZhbHNlXG4gICAgICAgICAgICBleHRlbnNpb25zLnJlbmRlcmVyc1tleHQubmFtZV0gPSBmdW5jdGlvbiguLi5hcmdzKSB7XG4gICAgICAgICAgICAgIGxldCByZXQgPSBleHQucmVuZGVyZXIuYXBwbHkodGhpcywgYXJncyk7XG4gICAgICAgICAgICAgIGlmIChyZXQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0ID0gcHJldlJlbmRlcmVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBleHRlbnNpb25zLnJlbmRlcmVyc1tleHQubmFtZV0gPSBleHQucmVuZGVyZXI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChleHQudG9rZW5pemVyKSB7IC8vIFRva2VuaXplciBFeHRlbnNpb25zXG4gICAgICAgICAgaWYgKCFleHQubGV2ZWwgfHwgKGV4dC5sZXZlbCAhPT0gJ2Jsb2NrJyAmJiBleHQubGV2ZWwgIT09ICdpbmxpbmUnKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiZXh0ZW5zaW9uIGxldmVsIG11c3QgYmUgJ2Jsb2NrJyBvciAnaW5saW5lJ1wiKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGV4dGVuc2lvbnNbZXh0LmxldmVsXSkge1xuICAgICAgICAgICAgZXh0ZW5zaW9uc1tleHQubGV2ZWxdLnVuc2hpZnQoZXh0LnRva2VuaXplcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGV4dGVuc2lvbnNbZXh0LmxldmVsXSA9IFtleHQudG9rZW5pemVyXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGV4dC5zdGFydCkgeyAvLyBGdW5jdGlvbiB0byBjaGVjayBmb3Igc3RhcnQgb2YgdG9rZW5cbiAgICAgICAgICAgIGlmIChleHQubGV2ZWwgPT09ICdibG9jaycpIHtcbiAgICAgICAgICAgICAgaWYgKGV4dGVuc2lvbnMuc3RhcnRCbG9jaykge1xuICAgICAgICAgICAgICAgIGV4dGVuc2lvbnMuc3RhcnRCbG9jay5wdXNoKGV4dC5zdGFydCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9ucy5zdGFydEJsb2NrID0gW2V4dC5zdGFydF07XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXh0LmxldmVsID09PSAnaW5saW5lJykge1xuICAgICAgICAgICAgICBpZiAoZXh0ZW5zaW9ucy5zdGFydElubGluZSkge1xuICAgICAgICAgICAgICAgIGV4dGVuc2lvbnMuc3RhcnRJbmxpbmUucHVzaChleHQuc3RhcnQpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGV4dGVuc2lvbnMuc3RhcnRJbmxpbmUgPSBbZXh0LnN0YXJ0XTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZXh0LmNoaWxkVG9rZW5zKSB7IC8vIENoaWxkIHRva2VucyB0byBiZSB2aXNpdGVkIGJ5IHdhbGtUb2tlbnNcbiAgICAgICAgICBleHRlbnNpb25zLmNoaWxkVG9rZW5zW2V4dC5uYW1lXSA9IGV4dC5jaGlsZFRva2VucztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBvcHRzLmV4dGVuc2lvbnMgPSBleHRlbnNpb25zO1xuICAgIH1cblxuICAgIC8vID09LS0gUGFyc2UgXCJvdmVyd3JpdGVcIiBleHRlbnNpb25zIC0tPT0gLy9cbiAgICBpZiAocGFjay5yZW5kZXJlcikge1xuICAgICAgY29uc3QgcmVuZGVyZXIgPSBtYXJrZWQuZGVmYXVsdHMucmVuZGVyZXIgfHwgbmV3IFJlbmRlcmVyKCk7XG4gICAgICBmb3IgKGNvbnN0IHByb3AgaW4gcGFjay5yZW5kZXJlcikge1xuICAgICAgICBjb25zdCBwcmV2UmVuZGVyZXIgPSByZW5kZXJlcltwcm9wXTtcbiAgICAgICAgLy8gUmVwbGFjZSByZW5kZXJlciB3aXRoIGZ1bmMgdG8gcnVuIGV4dGVuc2lvbiwgYnV0IGZhbGwgYmFjayBpZiBmYWxzZVxuICAgICAgICByZW5kZXJlcltwcm9wXSA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgbGV0IHJldCA9IHBhY2sucmVuZGVyZXJbcHJvcF0uYXBwbHkocmVuZGVyZXIsIGFyZ3MpO1xuICAgICAgICAgIGlmIChyZXQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICByZXQgPSBwcmV2UmVuZGVyZXIuYXBwbHkocmVuZGVyZXIsIGFyZ3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgb3B0cy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIH1cbiAgICBpZiAocGFjay50b2tlbml6ZXIpIHtcbiAgICAgIGNvbnN0IHRva2VuaXplciA9IG1hcmtlZC5kZWZhdWx0cy50b2tlbml6ZXIgfHwgbmV3IFRva2VuaXplcigpO1xuICAgICAgZm9yIChjb25zdCBwcm9wIGluIHBhY2sudG9rZW5pemVyKSB7XG4gICAgICAgIGNvbnN0IHByZXZUb2tlbml6ZXIgPSB0b2tlbml6ZXJbcHJvcF07XG4gICAgICAgIC8vIFJlcGxhY2UgdG9rZW5pemVyIHdpdGggZnVuYyB0byBydW4gZXh0ZW5zaW9uLCBidXQgZmFsbCBiYWNrIGlmIGZhbHNlXG4gICAgICAgIHRva2VuaXplcltwcm9wXSA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgICAgbGV0IHJldCA9IHBhY2sudG9rZW5pemVyW3Byb3BdLmFwcGx5KHRva2VuaXplciwgYXJncyk7XG4gICAgICAgICAgaWYgKHJldCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldCA9IHByZXZUb2tlbml6ZXIuYXBwbHkodG9rZW5pemVyLCBhcmdzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIG9wdHMudG9rZW5pemVyID0gdG9rZW5pemVyO1xuICAgIH1cblxuICAgIC8vID09LS0gUGFyc2UgSG9va3MgZXh0ZW5zaW9ucyAtLT09IC8vXG4gICAgaWYgKHBhY2suaG9va3MpIHtcbiAgICAgIGNvbnN0IGhvb2tzID0gbWFya2VkLmRlZmF1bHRzLmhvb2tzIHx8IG5ldyBIb29rcygpO1xuICAgICAgZm9yIChjb25zdCBwcm9wIGluIHBhY2suaG9va3MpIHtcbiAgICAgICAgY29uc3QgcHJldkhvb2sgPSBob29rc1twcm9wXTtcbiAgICAgICAgaWYgKEhvb2tzLnBhc3NUaHJvdWdoSG9va3MuaGFzKHByb3ApKSB7XG4gICAgICAgICAgaG9va3NbcHJvcF0gPSAoYXJnKSA9PiB7XG4gICAgICAgICAgICBpZiAobWFya2VkLmRlZmF1bHRzLmFzeW5jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocGFjay5ob29rc1twcm9wXS5jYWxsKGhvb2tzLCBhcmcpKS50aGVuKHJldCA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZXZIb29rLmNhbGwoaG9va3MsIHJldCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCByZXQgPSBwYWNrLmhvb2tzW3Byb3BdLmNhbGwoaG9va3MsIGFyZyk7XG4gICAgICAgICAgICByZXR1cm4gcHJldkhvb2suY2FsbChob29rcywgcmV0KTtcbiAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGhvb2tzW3Byb3BdID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgICAgIGxldCByZXQgPSBwYWNrLmhvb2tzW3Byb3BdLmFwcGx5KGhvb2tzLCBhcmdzKTtcbiAgICAgICAgICAgIGlmIChyZXQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIHJldCA9IHByZXZIb29rLmFwcGx5KGhvb2tzLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgb3B0cy5ob29rcyA9IGhvb2tzO1xuICAgIH1cblxuICAgIC8vID09LS0gUGFyc2UgV2Fsa1Rva2VucyBleHRlbnNpb25zIC0tPT0gLy9cbiAgICBpZiAocGFjay53YWxrVG9rZW5zKSB7XG4gICAgICBjb25zdCB3YWxrVG9rZW5zID0gbWFya2VkLmRlZmF1bHRzLndhbGtUb2tlbnM7XG4gICAgICBvcHRzLndhbGtUb2tlbnMgPSBmdW5jdGlvbih0b2tlbikge1xuICAgICAgICBsZXQgdmFsdWVzID0gW107XG4gICAgICAgIHZhbHVlcy5wdXNoKHBhY2sud2Fsa1Rva2Vucy5jYWxsKHRoaXMsIHRva2VuKSk7XG4gICAgICAgIGlmICh3YWxrVG9rZW5zKSB7XG4gICAgICAgICAgdmFsdWVzID0gdmFsdWVzLmNvbmNhdCh3YWxrVG9rZW5zLmNhbGwodGhpcywgdG9rZW4pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBtYXJrZWQuc2V0T3B0aW9ucyhvcHRzKTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIFJ1biBjYWxsYmFjayBmb3IgZXZlcnkgdG9rZW5cbiAqL1xuXG5tYXJrZWQud2Fsa1Rva2VucyA9IGZ1bmN0aW9uKHRva2VucywgY2FsbGJhY2spIHtcbiAgbGV0IHZhbHVlcyA9IFtdO1xuICBmb3IgKGNvbnN0IHRva2VuIG9mIHRva2Vucykge1xuICAgIHZhbHVlcyA9IHZhbHVlcy5jb25jYXQoY2FsbGJhY2suY2FsbChtYXJrZWQsIHRva2VuKSk7XG4gICAgc3dpdGNoICh0b2tlbi50eXBlKSB7XG4gICAgICBjYXNlICd0YWJsZSc6IHtcbiAgICAgICAgZm9yIChjb25zdCBjZWxsIG9mIHRva2VuLmhlYWRlcikge1xuICAgICAgICAgIHZhbHVlcyA9IHZhbHVlcy5jb25jYXQobWFya2VkLndhbGtUb2tlbnMoY2VsbC50b2tlbnMsIGNhbGxiYWNrKSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCByb3cgb2YgdG9rZW4ucm93cykge1xuICAgICAgICAgIGZvciAoY29uc3QgY2VsbCBvZiByb3cpIHtcbiAgICAgICAgICAgIHZhbHVlcyA9IHZhbHVlcy5jb25jYXQobWFya2VkLndhbGtUb2tlbnMoY2VsbC50b2tlbnMsIGNhbGxiYWNrKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnbGlzdCc6IHtcbiAgICAgICAgdmFsdWVzID0gdmFsdWVzLmNvbmNhdChtYXJrZWQud2Fsa1Rva2Vucyh0b2tlbi5pdGVtcywgY2FsbGJhY2spKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIGlmIChtYXJrZWQuZGVmYXVsdHMuZXh0ZW5zaW9ucyAmJiBtYXJrZWQuZGVmYXVsdHMuZXh0ZW5zaW9ucy5jaGlsZFRva2VucyAmJiBtYXJrZWQuZGVmYXVsdHMuZXh0ZW5zaW9ucy5jaGlsZFRva2Vuc1t0b2tlbi50eXBlXSkgeyAvLyBXYWxrIGFueSBleHRlbnNpb25zXG4gICAgICAgICAgbWFya2VkLmRlZmF1bHRzLmV4dGVuc2lvbnMuY2hpbGRUb2tlbnNbdG9rZW4udHlwZV0uZm9yRWFjaChmdW5jdGlvbihjaGlsZFRva2Vucykge1xuICAgICAgICAgICAgdmFsdWVzID0gdmFsdWVzLmNvbmNhdChtYXJrZWQud2Fsa1Rva2Vucyh0b2tlbltjaGlsZFRva2Vuc10sIGNhbGxiYWNrKSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAodG9rZW4udG9rZW5zKSB7XG4gICAgICAgICAgdmFsdWVzID0gdmFsdWVzLmNvbmNhdChtYXJrZWQud2Fsa1Rva2Vucyh0b2tlbi50b2tlbnMsIGNhbGxiYWNrKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbHVlcztcbn07XG5cbi8qKlxuICogUGFyc2UgSW5saW5lXG4gKiBAcGFyYW0ge3N0cmluZ30gc3JjXG4gKi9cbm1hcmtlZC5wYXJzZUlubGluZSA9IHBhcnNlTWFya2Rvd24oTGV4ZXIubGV4SW5saW5lLCBQYXJzZXIucGFyc2VJbmxpbmUpO1xuXG4vKipcbiAqIEV4cG9zZVxuICovXG5tYXJrZWQuUGFyc2VyID0gUGFyc2VyO1xubWFya2VkLnBhcnNlciA9IFBhcnNlci5wYXJzZTtcbm1hcmtlZC5SZW5kZXJlciA9IFJlbmRlcmVyO1xubWFya2VkLlRleHRSZW5kZXJlciA9IFRleHRSZW5kZXJlcjtcbm1hcmtlZC5MZXhlciA9IExleGVyO1xubWFya2VkLmxleGVyID0gTGV4ZXIubGV4O1xubWFya2VkLlRva2VuaXplciA9IFRva2VuaXplcjtcbm1hcmtlZC5TbHVnZ2VyID0gU2x1Z2dlcjtcbm1hcmtlZC5Ib29rcyA9IEhvb2tzO1xubWFya2VkLnBhcnNlID0gbWFya2VkO1xuXG5jb25zdCBvcHRpb25zID0gbWFya2VkLm9wdGlvbnM7XG5jb25zdCBzZXRPcHRpb25zID0gbWFya2VkLnNldE9wdGlvbnM7XG5jb25zdCB1c2UgPSBtYXJrZWQudXNlO1xuY29uc3Qgd2Fsa1Rva2VucyA9IG1hcmtlZC53YWxrVG9rZW5zO1xuY29uc3QgcGFyc2VJbmxpbmUgPSBtYXJrZWQucGFyc2VJbmxpbmU7XG5jb25zdCBwYXJzZSA9IG1hcmtlZDtcbmNvbnN0IHBhcnNlciA9IFBhcnNlci5wYXJzZTtcbmNvbnN0IGxleGVyID0gTGV4ZXIubGV4O1xuXG5leHBvcnQgeyBIb29rcywgTGV4ZXIsIFBhcnNlciwgUmVuZGVyZXIsIFNsdWdnZXIsIFRleHRSZW5kZXJlciwgVG9rZW5pemVyLCBkZWZhdWx0cywgZ2V0RGVmYXVsdHMsIGxleGVyLCBtYXJrZWQsIG9wdGlvbnMsIHBhcnNlLCBwYXJzZUlubGluZSwgcGFyc2VyLCBzZXRPcHRpb25zLCB1c2UsIHdhbGtUb2tlbnMgfTtcbiIsICJpbXBvcnQgeyBsb2FkUHJpc20gfSBmcm9tICdvYnNpZGlhbic7XG5cbi8vIEhhbmRsZSBQcmlzbWEgSGlnaGxpZ2h0aW5nIGZvciBjb2RlIGJsb2Nrc1xuZXhwb3J0IGZ1bmN0aW9uIHByaXNtSGlnaGxpZ2h0aW5nKG1lc3NhZ2VCbG9jazogeyBxdWVyeVNlbGVjdG9yQWxsOiAoYXJnMDogc3RyaW5nKSA9PiBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PjsgfSkge1xuICAgIGxvYWRQcmlzbSgpLnRoZW4oKFByaXNtKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvZGVCbG9ja3MgPSBtZXNzYWdlQmxvY2s/LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZXNzYWdlQmxvY2sgcHJlIGNvZGUnKTtcblxuICAgICAgICBjb2RlQmxvY2tzPy5mb3JFYWNoKChjb2RlQmxvY2s6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsYW5ndWFnZSA9IGNvZGVCbG9jay5jbGFzc05hbWUucmVwbGFjZSgnbGFuZ3VhZ2UtJywgJycpO1xuICAgICAgICAgICAgY29uc3QgY29kZSA9IGNvZGVCbG9jay50ZXh0Q29udGVudDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGxhbmd1YWdlICYmIFByaXNtLmxhbmd1YWdlc1tsYW5ndWFnZV0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBoaWdobGlnaHRlZENvZGUgPSBQcmlzbS5oaWdobGlnaHQoY29kZSwgUHJpc20ubGFuZ3VhZ2VzW2xhbmd1YWdlXSk7XG4gICAgICAgICAgICAgICAgY29kZUJsb2NrLmlubmVySFRNTCA9IGhpZ2hsaWdodGVkQ29kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59IiwgImltcG9ydCB7IE1vZGFsLCBOb3RpY2UsIHNldEljb24gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBCTU9TZXR0aW5ncywgY2hlY2tBY3RpdmVGaWxlIH0gZnJvbSAnc3JjL21haW4nO1xuaW1wb3J0IHsgQU5USFJPUElDX01PREVMUywgT1BFTkFJX01PREVMUywgYWN0aXZlRWRpdG9yLCBmaWxlbmFtZU1lc3NhZ2VIaXN0b3J5SlNPTiwgbGFzdEN1cnNvclBvc2l0aW9uLCBsYXN0Q3Vyc29yUG9zaXRpb25GaWxlLCBtZXNzYWdlSGlzdG9yeSB9IGZyb20gJ3NyYy92aWV3JztcbmltcG9ydCB7IGZldGNoT3BlbkFJQVBJRGF0YVN0cmVhbSwgZmV0Y2hPcGVuQUlBUElEYXRhLCBmZXRjaE9sbGFtYURhdGEsIGZldGNoT2xsYW1hRGF0YVN0cmVhbSwgZmV0Y2hBbnRocm9waWNBUElEYXRhLCBmZXRjaFJFU1RBUElVUkxEYXRhLCBmZXRjaFJFU1RBUElVUkxEYXRhU3RyZWFtLCBmZXRjaE1pc3RyYWxEYXRhU3RyZWFtLCBmZXRjaE1pc3RyYWxEYXRhLCBmZXRjaEdvb2dsZUdlbWluaURhdGEgfSBmcm9tICcuLi9GZXRjaE1vZGVsUmVzcG9uc2UnO1xuaW1wb3J0IHsgZ2V0QWN0aXZlRmlsZUNvbnRlbnQgfSBmcm9tICcuLi9lZGl0b3IvUmVmZXJlbmNlQ3VycmVudE5vdGUnO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnZW5lcmF0ZVVzZXJCdXR0b24oc2V0dGluZ3M6IEJNT1NldHRpbmdzKSB7XG4gICAgY29uc3QgcmVnZW5lcmF0ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIHJlZ2VuZXJhdGVCdXR0b24udGV4dENvbnRlbnQgPSAncmVnZW5lcmF0ZSc7XG4gICAgc2V0SWNvbihyZWdlbmVyYXRlQnV0dG9uLCAncmVmcmVzaC1jY3cnKTtcbiAgICByZWdlbmVyYXRlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3JlZ2VuZXJhdGUtYnV0dG9uJyk7XG4gICAgcmVnZW5lcmF0ZUJ1dHRvbi50aXRsZSA9ICdyZWdlbmVyYXRlJztcblxuICAgIGxldCBsYXN0Q2xpY2tlZEVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cbiAgICByZWdlbmVyYXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBsYXN0Q2xpY2tlZEVsZW1lbnQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgd2hpbGUgKGxhc3RDbGlja2VkRWxlbWVudCAmJiAhbGFzdENsaWNrZWRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygndXNlck1lc3NhZ2UnKSkge1xuICAgICAgICAgICAgbGFzdENsaWNrZWRFbGVtZW50ID0gbGFzdENsaWNrZWRFbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaW5kZXggPSAtMTtcblxuICAgICAgICBpZiAobGFzdENsaWNrZWRFbGVtZW50KSB7XG4gICAgICAgICAgICBjb25zdCB1c2VyTWVzc2FnZXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNtZXNzYWdlQ29udGFpbmVyIC51c2VyTWVzc2FnZScpKTtcbiAgICAgICAgICAgIGluZGV4ID0gdXNlck1lc3NhZ2VzLmluZGV4T2YobGFzdENsaWNrZWRFbGVtZW50KSAqIDI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBkZWxldGVNZXNzYWdlKGluZGV4KzEpO1xuICAgICAgICAgICAgaWYgKE9QRU5BSV9NT0RFTFMuaW5jbHVkZXMoc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCkgfHwgc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMub3BlbkFJLm9wZW5BSUJhc2VNb2RlbHMuaW5jbHVkZXMoc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCkpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMub3BlbkFJLmFsbG93T3BlbkFJQmFzZVVybERhdGFTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoT3BlbkFJQVBJRGF0YVN0cmVhbShzZXR0aW5ncywgaW5kZXgpOyBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoT3BlbkFJQVBJRGF0YShzZXR0aW5ncywgaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdFcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBjb21wbGV0aW9uOiAnICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24uUkVTVEFQSVVSTCAmJiBzZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYU1vZGVscy5pbmNsdWRlcyhzZXR0aW5ncy5nZW5lcmFsLm1vZGVsKSkge1xuICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLmFsbG93T2xsYW1hU3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoT2xsYW1hRGF0YVN0cmVhbShzZXR0aW5ncywgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2hPbGxhbWFEYXRhKHNldHRpbmdzLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoc2V0dGluZ3MuUkVTVEFQSVVSTENvbm5lY3Rpb24uUkVTVEFQSVVSTE1vZGVscy5pbmNsdWRlcyhzZXR0aW5ncy5nZW5lcmFsLm1vZGVsKSl7XG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLlJFU1RBUElVUkxDb25uZWN0aW9uLmFsbG93UkVTVEFQSVVSTERhdGFTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2hSRVNUQVBJVVJMRGF0YVN0cmVhbShzZXR0aW5ncywgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2hSRVNUQVBJVVJMRGF0YShzZXR0aW5ncywgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm1pc3RyYWwubWlzdHJhbE1vZGVscy5pbmNsdWRlcyhzZXR0aW5ncy5nZW5lcmFsLm1vZGVsKSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5BUElDb25uZWN0aW9ucy5taXN0cmFsLmFsbG93U3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaE1pc3RyYWxEYXRhU3RyZWFtKHNldHRpbmdzLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaE1pc3RyYWxEYXRhKHNldHRpbmdzLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChzZXR0aW5ncy5BUElDb25uZWN0aW9ucy5nb29nbGVHZW1pbmkuZ2VtaW5pTW9kZWxzLmluY2x1ZGVzKHNldHRpbmdzLmdlbmVyYWwubW9kZWwpKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2hHb29nbGVHZW1pbmlEYXRhKHNldHRpbmdzLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQU5USFJPUElDX01PREVMUy5pbmNsdWRlcyhzZXR0aW5ncy5nZW5lcmFsLm1vZGVsKSkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoQW50aHJvcGljQVBJRGF0YShzZXR0aW5ncywgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIG1vZGVscyBkZXRlY3RlZC4nKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZWdlbmVyYXRlQnV0dG9uO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheVVzZXJFZGl0QnV0dG9uIChzZXR0aW5nczogQk1PU2V0dGluZ3MsIHVzZXJQOiBIVE1MUGFyYWdyYXBoRWxlbWVudCkge1xuICAgIGNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBlZGl0QnV0dG9uLnRleHRDb250ZW50ID0gJ2VkaXQnO1xuICAgIHNldEljb24oZWRpdEJ1dHRvbiwgJ2VkaXQnKTsgLy8gQXNzdW1pbmcgc2V0SWNvbiBpcyBkZWZpbmVkIGVsc2V3aGVyZVxuICAgIGVkaXRCdXR0b24uY2xhc3NMaXN0LmFkZCgnZWRpdC1idXR0b24nKTtcbiAgICBlZGl0QnV0dG9uLnRpdGxlID0gJ2VkaXQnO1xuXG4gICAgbGV0IGxhc3RDbGlja2VkRWxlbWVudDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcblxuICAgIGVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgZWRpdENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBlZGl0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2VkaXQtY29udGFpbmVyJyk7XG4gICAgICAgIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgICAgICAgdGV4dEFyZWEuY2xhc3NMaXN0LmFkZCgnZWRpdC10ZXh0YXJlYScpO1xuICAgICAgICB0ZXh0QXJlYS52YWx1ZSA9IHVzZXJQLnRleHRDb250ZW50ID8/ICcnOyAvLyBDaGVjayBpZiB1c2VyUC50ZXh0Q29udGVudCBpcyBudWxsIGFuZCBwcm92aWRlIGEgZGVmYXVsdCB2YWx1ZVxuXG4gICAgICAgIGVkaXRDb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dEFyZWEpO1xuXG4gICAgICAgIGNvbnN0IHRleHRhcmVhRWRpdEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICAgICB0ZXh0YXJlYUVkaXRCdXR0b24udGV4dENvbnRlbnQgPSAnRWRpdCc7XG4gICAgICAgIHRleHRhcmVhRWRpdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd0ZXh0YXJlYS1lZGl0LWJ1dHRvbicpO1xuICAgICAgICB0ZXh0YXJlYUVkaXRCdXR0b24udGl0bGUgPSAnZWRpdCc7XG5cbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi50ZXh0Q29udGVudCA9ICdDYW5jZWwnO1xuICAgICAgICBjYW5jZWxCdXR0b24uY2xhc3NMaXN0LmFkZCgndGV4dGFyZWEtY2FuY2VsLWJ1dHRvbicpO1xuICAgICAgICBjYW5jZWxCdXR0b24udGl0bGUgPSAnY2FuY2VsJztcblxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgbGFzdENsaWNrZWRFbGVtZW50ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICAgIHdoaWxlIChsYXN0Q2xpY2tlZEVsZW1lbnQgJiYgIWxhc3RDbGlja2VkRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3VzZXJNZXNzYWdlJykpIHtcbiAgICAgICAgICAgIGxhc3RDbGlja2VkRWxlbWVudCA9IGxhc3RDbGlja2VkRWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dGFyZWFFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdXNlclAudGV4dENvbnRlbnQgPSB0ZXh0QXJlYS52YWx1ZTtcbiAgICAgICAgICAgIGVkaXRDb250YWluZXIucmVwbGFjZVdpdGgodXNlclApO1xuXG4gICAgICAgICAgICBpZiAobGFzdENsaWNrZWRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdXNlck1lc3NhZ2VzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjbWVzc2FnZUNvbnRhaW5lciAudXNlck1lc3NhZ2UnKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHVzZXJNZXNzYWdlcy5pbmRleE9mKGxhc3RDbGlja2VkRWxlbWVudCkgKiAyO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlSGlzdG9yeVtpbmRleF0uY29udGVudCA9IHRleHRBcmVhLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVNZXNzYWdlKGluZGV4KzEpO1xuICAgICAgICAgICAgICAgICAgICAvLyBGZXRjaCBPcGVuQUkgQVBJXG4gICAgICAgICAgICAgICAgICAgIGlmIChPUEVOQUlfTU9ERUxTLmluY2x1ZGVzKHNldHRpbmdzLmdlbmVyYWwubW9kZWwpIHx8IHNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm9wZW5BSS5vcGVuQUlCYXNlTW9kZWxzLmluY2x1ZGVzKHNldHRpbmdzLmdlbmVyYWwubW9kZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5BUElDb25uZWN0aW9ucy5vcGVuQUkuYWxsb3dPcGVuQUlCYXNlVXJsRGF0YVN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaE9wZW5BSUFQSURhdGFTdHJlYW0oc2V0dGluZ3MsIGluZGV4KTsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2hPcGVuQUlBUElEYXRhKHNldHRpbmdzLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgY29tcGxldGlvbjogJyArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKEFOVEhST1BJQ19NT0RFTFMuaW5jbHVkZXMoc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2hBbnRocm9waWNBUElEYXRhKHNldHRpbmdzLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5SRVNUQVBJVVJMICYmIHNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hTW9kZWxzLmluY2x1ZGVzKHNldHRpbmdzLmdlbmVyYWwubW9kZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5hbGxvd09sbGFtYVN0cmVhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoT2xsYW1hRGF0YVN0cmVhbShzZXR0aW5ncywgaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZmV0Y2hPbGxhbWFEYXRhKHNldHRpbmdzLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMubWlzdHJhbC5taXN0cmFsTW9kZWxzLmluY2x1ZGVzKHNldHRpbmdzLmdlbmVyYWwubW9kZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5BUElDb25uZWN0aW9ucy5taXN0cmFsLmFsbG93U3RyZWFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoTWlzdHJhbERhdGFTdHJlYW0oc2V0dGluZ3MsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoTWlzdHJhbERhdGEoc2V0dGluZ3MsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMuZ29vZ2xlR2VtaW5pLmdlbWluaU1vZGVscy5pbmNsdWRlcyhzZXR0aW5ncy5nZW5lcmFsLm1vZGVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaEdvb2dsZUdlbWluaURhdGEoc2V0dGluZ3MsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNldHRpbmdzLlJFU1RBUElVUkxDb25uZWN0aW9uLlJFU1RBUElVUkxNb2RlbHMuaW5jbHVkZXMoc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLlJFU1RBUElVUkxDb25uZWN0aW9uLmFsbG93UkVTVEFQSVVSTERhdGFTdHJlYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaFJFU1RBUElVUkxEYXRhU3RyZWFtKHNldHRpbmdzLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBmZXRjaFJFU1RBUElVUkxEYXRhKHNldHRpbmdzLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIG1vZGVscyBkZXRlY3RlZC4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWRpdENvbnRhaW5lci5yZXBsYWNlV2l0aCh1c2VyUCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGVkaXRDb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dGFyZWFFZGl0QnV0dG9uKTtcbiAgICAgICAgZWRpdENvbnRhaW5lci5hcHBlbmRDaGlsZChjYW5jZWxCdXR0b24pO1xuXG4gICAgICAgIGlmICh1c2VyUC5wYXJlbnROb2RlICE9PSBudWxsKSB7XG4gICAgICAgICAgICB1c2VyUC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChlZGl0Q29udGFpbmVyLCB1c2VyUCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBlZGl0QnV0dG9uO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheUJvdEVkaXRCdXR0b24gKHNldHRpbmdzOiBCTU9TZXR0aW5ncywgYm90UDogSFRNTFBhcmFncmFwaEVsZW1lbnQpIHtcbiAgICBjb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgZWRpdEJ1dHRvbi50ZXh0Q29udGVudCA9ICdlZGl0JztcbiAgICBzZXRJY29uKGVkaXRCdXR0b24sICdlZGl0Jyk7IC8vIEFzc3VtaW5nIHNldEljb24gaXMgZGVmaW5lZCBlbHNld2hlcmVcbiAgICBlZGl0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2VkaXQtYnV0dG9uJyk7XG4gICAgZWRpdEJ1dHRvbi50aXRsZSA9ICdlZGl0JztcblxuICAgIGxldCBsYXN0Q2xpY2tlZEVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cbiAgICBlZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IGVkaXRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZWRpdENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdlZGl0LWNvbnRhaW5lcicpO1xuICAgICAgICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG4gICAgICAgIHRleHRBcmVhLmNsYXNzTGlzdC5hZGQoJ2VkaXQtdGV4dGFyZWEnKTtcbiAgICAgICAgdGV4dEFyZWEudmFsdWUgPSBib3RQLnRleHRDb250ZW50ID8/ICcnOyAvLyBDaGVjayBpZiBib3RQLnRleHRDb250ZW50IGlzIG51bGwgYW5kIHByb3ZpZGUgYSBkZWZhdWx0IHZhbHVlXG5cbiAgICAgICAgY29uc3QgdGV4dGFyZWFFZGl0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIHRleHRhcmVhRWRpdEJ1dHRvbi50ZXh0Q29udGVudCA9ICdFZGl0JztcbiAgICAgICAgdGV4dGFyZWFFZGl0QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3RleHRhcmVhLWVkaXQtYnV0dG9uJyk7XG4gICAgICAgIHRleHRhcmVhRWRpdEJ1dHRvbi50aXRsZSA9ICdlZGl0JztcblxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgY2FuY2VsQnV0dG9uLnRleHRDb250ZW50ID0gJ0NhbmNlbCc7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd0ZXh0YXJlYS1jYW5jZWwtYnV0dG9uJyk7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi50aXRsZSA9ICdjYW5jZWwnO1xuXG4gICAgICAgIGVkaXRDb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dEFyZWEpO1xuXG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBsYXN0Q2xpY2tlZEVsZW1lbnQgPSBldmVudC50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgd2hpbGUgKGxhc3RDbGlja2VkRWxlbWVudCAmJiAhbGFzdENsaWNrZWRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnYm90TWVzc2FnZScpKSB7XG4gICAgICAgICAgICBsYXN0Q2xpY2tlZEVsZW1lbnQgPSBsYXN0Q2xpY2tlZEVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFzc3VtaW5nIGxhc3RDbGlja2VkRWxlbWVudCBpcyB0aGUgZWxlbWVudCB0aGF0IHdhcyBjbGlja2VkXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VCbG9jayA9IGxhc3RDbGlja2VkRWxlbWVudD8ucXVlcnlTZWxlY3RvcignLm1lc3NhZ2VCbG9jaycpO1xuICAgICAgICAvLyBBc3N1bWluZyBlZGl0Q29udGFpbmVyIGFuZCB0ZXh0QXJlYSBhcmUgYWxyZWFkeSBkZWZpbmVkXG4gICAgICAgIGlmIChtZXNzYWdlQmxvY2spIHtcbiAgICAgICAgICAgIC8vIElmIG1lc3NhZ2VCbG9jayBleGlzdHMsIHByb2NlZWQgdG8gYXBwZW5kIHRleHRBcmVhIHRvIGVkaXRDb250YWluZXJcbiAgICAgICAgICAgIG1lc3NhZ2VCbG9jay5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIG1lc3NhZ2VCbG9jay5hcHBlbmRDaGlsZChlZGl0Q29udGFpbmVyKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtZXNzYWdlQmxvY2sgbm90IGZvdW5kJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0YXJlYUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBib3RQLnRleHRDb250ZW50ID0gdGV4dEFyZWEudmFsdWU7XG4gICAgICAgICAgICBlZGl0Q29udGFpbmVyLnJlcGxhY2VXaXRoKGJvdFApO1xuXG4gICAgICAgICAgICBpZiAobGFzdENsaWNrZWRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYWxsTWVzc2FnZXMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNtZXNzYWdlQ29udGFpbmVyIGRpdi51c2VyTWVzc2FnZSwgI21lc3NhZ2VDb250YWluZXIgZGl2LmJvdE1lc3NhZ2UnKSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBhbGxNZXNzYWdlcy5pbmRleE9mKGxhc3RDbGlja2VkRWxlbWVudCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VIaXN0b3J5W2luZGV4XS5jb250ZW50ID0gdGV4dEFyZWEudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QganNvblN0cmluZyA9IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2VIaXN0b3J5LCBudWxsLCA0KTtcblxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmlsZW5hbWVNZXNzYWdlSGlzdG9yeUpTT04sIGpzb25TdHJpbmcpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igd3JpdGluZyB0byBtZXNzYWdlIGhpc3RvcnkgZmlsZTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIG1vZGVscyBkZXRlY3RlZC4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZWRpdENvbnRhaW5lci5yZXBsYWNlV2l0aChib3RQKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZWRpdENvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZXh0YXJlYUVkaXRCdXR0b24pO1xuICAgICAgICBlZGl0Q29udGFpbmVyLmFwcGVuZENoaWxkKGNhbmNlbEJ1dHRvbik7XG5cbiAgICAgICAgaWYgKGJvdFAucGFyZW50Tm9kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgYm90UC5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChlZGl0Q29udGFpbmVyLCBib3RQKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGVkaXRCdXR0b247XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5VXNlckNvcHlCdXR0b24gKHVzZXJQOiBIVE1MUGFyYWdyYXBoRWxlbWVudCkge1xuICAgIGNvbnN0IGNvcHlCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBjb3B5QnV0dG9uLnRleHRDb250ZW50ID0gJ2NvcHknO1xuICAgIHNldEljb24oY29weUJ1dHRvbiwgJ2NvcHknKTtcbiAgICBjb3B5QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NvcHktYnV0dG9uJyk7XG4gICAgY29weUJ1dHRvbi50aXRsZSA9ICdjb3B5JztcblxuICAgIGNvcHlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VUZXh0ID0gdXNlclAudGV4dENvbnRlbnQ7XG5cbiAgICAgICAgaWYgKG1lc3NhZ2VUZXh0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb3B5TWVzc2FnZVRvQ2xpcGJvYXJkKG1lc3NhZ2VUZXh0KTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0NvcGllZCB1c2VyIG1lc3NhZ2UuJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNZXNzYWdlIGNvbnRlbnQgaXMgbnVsbC4gQ2Fubm90IGNvcHkuJyk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gY29weUJ1dHRvbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlCb3RDb3B5QnV0dG9uIChzZXR0aW5nczogQk1PU2V0dGluZ3MsIG1lc3NhZ2U6IHN0cmluZykge1xuICAgIGNvbnN0IGNvcHlCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICBjb3B5QnV0dG9uLnRleHRDb250ZW50ID0gJ2NvcHknO1xuICAgIHNldEljb24oY29weUJ1dHRvbiwgJ2NvcHknKTtcbiAgICBjb3B5QnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NvcHktYnV0dG9uJyk7XG4gICAgY29weUJ1dHRvbi50aXRsZSA9ICdjb3B5JztcblxuICAgIGxldCBtZXNzYWdlVGV4dCA9IG1lc3NhZ2U7XG5cbiAgICBpZiAobWVzc2FnZVRleHQgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKEFOVEhST1BJQ19NT0RFTFMuaW5jbHVkZXMoc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGZ1bGxTdHJpbmcgPSBtZXNzYWdlO1xuICAgICAgICAgICAgY29uc3QgY2xlYW5TdHJpbmcgPSBmdWxsU3RyaW5nLnNwbGl0KCcgJykuc2xpY2UoMSkuam9pbignICcpLnRyaW0oKTtcbiAgICAgICAgICAgIG1lc3NhZ2VUZXh0ID0gY2xlYW5TdHJpbmc7XG4gICAgICAgIH0gXG4gICAgfSBlbHNlIHtcbiAgICAgICAgbmV3IE5vdGljZSgnTWVzc2FnZSBjb250ZW50IGlzIG51bGwuIENhbm5vdCBjb3B5LicpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdNZXNzYWdlIGNvbnRlbnQgaXMgbnVsbC4gQ2Fubm90IGNvcHkuJyk7XG4gICAgfVxuXG4gICAgY29weUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2VUZXh0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb3B5TWVzc2FnZVRvQ2xpcGJvYXJkKG1lc3NhZ2VUZXh0KTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0NvcGllZCBib3QgbWVzc2FnZS4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01lc3NhZ2UgY29udGVudCBpcyBudWxsLiBDYW5ub3QgY29weS4nKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBjb3B5QnV0dG9uO1xufVxuXG4vLyBDb3B5IGJ1dHRvbiBmb3IgY29kZSBibG9ja3NcbmV4cG9ydCBmdW5jdGlvbiBjb2RlQmxvY2tDb3B5QnV0dG9uKG1lc3NhZ2VCbG9jazogeyBxdWVyeVNlbGVjdG9yQWxsOiAoYXJnMDogc3RyaW5nKSA9PiAgTm9kZUxpc3RPZjxIVE1MRWxlbWVudD47IH0pIHtcbiAgICBjb25zdCBjb2RlQmxvY2tzID0gbWVzc2FnZUJsb2NrLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZXNzYWdlQmxvY2sgcHJlIGNvZGUnKTtcbiAgICBjb2RlQmxvY2tzLmZvckVhY2goKGNvZGVFbGVtZW50OiBIVE1MRWxlbWVudCkgPT4ge1xuICAgICAgICBjb25zdCBjb3B5QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgICAgIGNvcHlCdXR0b24udGV4dENvbnRlbnQgPSAnY29weSc7XG4gICAgICAgIHNldEljb24oY29weUJ1dHRvbiwgJ2NvcHknKTtcbiAgICAgICAgY29weUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdjb3B5LWJ1dHRvbicpO1xuICAgICAgICBjb3B5QnV0dG9uLnRpdGxlID0gJ2NvcHknO1xuICAgICAgICBpZiAoY29kZUVsZW1lbnQucGFyZW50Tm9kZSkge1xuICAgICAgICAgICAgY29kZUVsZW1lbnQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY29weUJ1dHRvbiwgY29kZUVsZW1lbnQubmV4dFNpYmxpbmcpO1xuICAgICAgICB9XG4gICAgICAgIGNvcHlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAvLyBFeHRyYWN0IHRoZSBsYW5ndWFnZSBmcm9tIHRoZSBjbGFzcyBhdHRyaWJ1dGVcbiAgICAgICAgICAgIGNvbnN0IGxhbmd1YWdlID0gY29kZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdjbGFzcycpPy5yZXBsYWNlKCdsYW5ndWFnZS0nLCAnJykgfHwgJyc7XG4gICAgICAgICAgICAvLyBGb3JtYXQgdGhlIGNvZGUgdGV4dCBpbiBtYXJrZG93biBjb2RlIGJsb2NrIHN5bnRheFxuICAgICAgICAgICAgY29uc3QgY29kZVRleHQgPSBgXFxgXFxgXFxgJHtsYW5ndWFnZX1cXG4ke2NvZGVFbGVtZW50LnRleHRDb250ZW50fVxcYFxcYFxcYGA7XG4gICAgICAgICAgICBpZiAoY29kZVRleHQpIHtcbiAgICAgICAgICAgICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChjb2RlVGV4dCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0NvcGllZCBjb2RlYmxvY2suJyk7XG4gICAgICAgICAgICAgICAgfSwgKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY29weSBjb2RlOiAnLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gY29weSBjb2RlOiAnLCBlcnIpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvcHlNZXNzYWdlVG9DbGlwYm9hcmQobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQobWVzc2FnZSkudGhlbihmdW5jdGlvbigpIHtcbiAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byBjb3B5IG1lc3NhZ2U6ICcsIGVycik7XG4gICAgfSk7XG59XG5cbi8vIEFwcGVuZCBidXR0b24gdG8gZWRpdG9yXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheUFwcGVuZEJ1dHRvbihzZXR0aW5nczogQk1PU2V0dGluZ3MsIG1lc3NhZ2U6IHN0cmluZykge1xuICAgIGNvbnN0IGFwcGVuZEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgIGFwcGVuZEJ1dHRvbi50ZXh0Q29udGVudCA9ICdhcHBlbmQnO1xuICAgIHNldEljb24oYXBwZW5kQnV0dG9uLCAncGx1cy1zcXVhcmUnKTtcbiAgICBhcHBlbmRCdXR0b24uY2xhc3NMaXN0LmFkZCgnYXBwZW5kLWJ1dHRvbicpO1xuICAgIGFwcGVuZEJ1dHRvbi50aXRsZSA9ICdhcHBlbmQnO1xuXG4gICAgY29uc3QgbWVzc2FnZVRleHQgPSBtZXNzYWdlO1xuXG4gICAgYXBwZW5kQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmIChjaGVja0FjdGl2ZUZpbGU/LmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGFjdGl2ZSBmaWxlIGlzIGRpZmZlcmVudCBmcm9tIHRoZSBmaWxlIG9mIHRoZSBsYXN0IGN1cnNvciBwb3NpdGlvblxuICAgICAgICAgICAgaWYgKChjaGVja0FjdGl2ZUZpbGUgIT09IGxhc3RDdXJzb3JQb3NpdGlvbkZpbGUpKSB7XG4gICAgICAgICAgICAgICAgLy8gQXBwZW5kIHRvIHRoZSBib3R0b20gb2YgdGhlIGZpbGVcbiAgICAgICAgICAgICAgICBnZXRBY3RpdmVGaWxlQ29udGVudChzZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdDb250ZW50ID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoY2hlY2tBY3RpdmVGaWxlKTtcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVkQ29udGVudCA9IGV4aXN0aW5nQ29udGVudCArICdcXG4nICsgbWVzc2FnZVRleHQ7XG4gICAgICAgICAgICAgICAgYXBwLnZhdWx0Lm1vZGlmeShjaGVja0FjdGl2ZUZpbGUsIHVwZGF0ZWRDb250ZW50KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQXBwZW5kIGF0IHRoZSBsYXN0IGN1cnNvciBwb3NpdGlvblxuICAgICAgICAgICAgICAgIGFjdGl2ZUVkaXRvcj8ucmVwbGFjZVJhbmdlKG1lc3NhZ2VUZXh0LCBsYXN0Q3Vyc29yUG9zaXRpb24pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0FwcGVuZGVkIHJlc3BvbnNlLicpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gYWN0aXZlIE1hcmtkb3duIGZpbGUgZGV0ZWN0ZWQuJyk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBhcHBlbmRCdXR0b247XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5VHJhc2hCdXR0b24gKCkge1xuICAgIGNvbnN0IHRyYXNoQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gICAgdHJhc2hCdXR0b24udGV4dENvbnRlbnQgPSAndHJhc2gnO1xuICAgIHNldEljb24odHJhc2hCdXR0b24sICd0cmFzaCcpO1xuICAgIHRyYXNoQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ3RyYXNoLWJ1dHRvbicpO1xuICAgIHRyYXNoQnV0dG9uLnRpdGxlID0gJ3RyYXNoJztcblxuICAgIGxldCBsYXN0Q2xpY2tlZEVsZW1lbnQ6IEhUTUxFbGVtZW50IHwgbnVsbCA9IG51bGw7XG5cbiAgICB0cmFzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgbGFzdENsaWNrZWRFbGVtZW50ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICAgIHdoaWxlIChsYXN0Q2xpY2tlZEVsZW1lbnQgJiYgIWxhc3RDbGlja2VkRWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ3VzZXJNZXNzYWdlJykpIHtcbiAgICAgICAgICAgIGxhc3RDbGlja2VkRWxlbWVudCA9IGxhc3RDbGlja2VkRWxlbWVudC5wYXJlbnRFbGVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxhc3RDbGlja2VkRWxlbWVudCkge1xuICAgICAgICAgICAgY29uc3QgdXNlck1lc3NhZ2VzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjbWVzc2FnZUNvbnRhaW5lciAudXNlck1lc3NhZ2UnKSk7XG4gICAgICAgIFxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB1c2VyTWVzc2FnZXMuaW5kZXhPZihsYXN0Q2xpY2tlZEVsZW1lbnQpICogMjtcbiAgICAgICAgXG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgTW9kYWwoYXBwKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBtb2RhbC5jb250ZW50RWwuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50XCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMj5EZWxldGUgTWVzc2FnZSBCbG9jay48L2gyPlxuICAgICAgICAgICAgICAgICAgICA8cD5BcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgbWVzc2FnZSBibG9jaz88L3A+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJjb25maXJtRGVsZXRlXCI+Q29uZmlybSBEZWxldGU8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBgO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY29uZmlybURlbGV0ZUJ1dHRvbiA9IG1vZGFsLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCcjY29uZmlybURlbGV0ZScpO1xuICAgICAgICAgICAgICAgIGNvbmZpcm1EZWxldGVCdXR0b24/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBkZWxldGVNZXNzYWdlKGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTWVzc2FnZSBkZWxldGVkLicpO1xuICAgICAgICAgICAgICAgICAgICAvLyBoaWRlQWxsRHJvcGRvd25zKCk7XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRyYXNoQnV0dG9uO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlTWVzc2FnZShpbmRleDogbnVtYmVyKSB7XG4gICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJyk7XG5cbiAgICBjb25zdCBkaXZFbGVtZW50cyA9IG1lc3NhZ2VDb250YWluZXI/LnF1ZXJ5U2VsZWN0b3JBbGwoJ2Rpdi5ib3RNZXNzYWdlLCBkaXYudXNlck1lc3NhZ2UnKTtcblxuICAgIGlmIChkaXZFbGVtZW50cyAmJiBkaXZFbGVtZW50cy5sZW5ndGggPiAwICYmIGluZGV4ID49IDAgJiYgaW5kZXggPCBkaXZFbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBzcGVjaWZpZWQgbWVzc2FnZSBhbmQgdGhlIG5leHQgb25lIGlmIGl0IGV4aXN0c1xuICAgICAgICBtZXNzYWdlQ29udGFpbmVyPy5yZW1vdmVDaGlsZChkaXZFbGVtZW50c1tpbmRleF0pO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgbmV4dCBtZXNzYWdlIGlzIGZyb20gdGhlIGFzc2lzdGFudCBhbmQgcmVtb3ZlIGl0IGlmIGl0IGlzXG4gICAgICAgIGlmIChpbmRleCArIDEgPCBkaXZFbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRNZXNzYWdlID0gZGl2RWxlbWVudHNbaW5kZXggKyAxXTtcbiAgICAgICAgICAgIGlmIChuZXh0TWVzc2FnZS5jbGFzc0xpc3QuY29udGFpbnMoJ2JvdE1lc3NhZ2UnKSkge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VDb250YWluZXI/LnJlbW92ZUNoaWxkKG5leHRNZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB0aGUgbWVzc2FnZUhpc3RvcnkgYnkgcmVtb3ZpbmcgdGhlIHNwZWNpZmllZCBpbmRleCBhbmQgcG90ZW50aWFsbHkgdGhlIG5leHQgb25lXG4gICAgaWYgKG1lc3NhZ2VIaXN0b3J5W2luZGV4ICsgMV0gJiYgbWVzc2FnZUhpc3RvcnlbaW5kZXggKyAxXS5yb2xlID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICBtZXNzYWdlSGlzdG9yeS5zcGxpY2UoaW5kZXgsIDIpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG1lc3NhZ2VIaXN0b3J5LnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeShtZXNzYWdlSGlzdG9yeSwgbnVsbCwgNCk7XG5cbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYWRhcHRlci53cml0ZShmaWxlbmFtZU1lc3NhZ2VIaXN0b3J5SlNPTiwganNvblN0cmluZyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igd3JpdGluZyBtZXNzYWdlSGlzdG9yeS5qc29uJywgZXJyb3IpO1xuICAgIH1cbn0iLCAiaW1wb3J0IHsgQk1PU2V0dGluZ3MgfSBmcm9tICdzcmMvbWFpbic7XG5cbmxldCByZWZlcmVuY2VDdXJyZW50Tm90ZUNvbnRlbnQgPSAnJztcblxuLy8gUmVmZXJlbmNlIEN1cnJlbnQgTm90ZSBJbmRpY2F0b3JcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBY3RpdmVGaWxlQ29udGVudChzZXR0aW5nczogQk1PU2V0dGluZ3MpIHtcbiAgICBjb25zdCBkb3RFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRvdEluZGljYXRvcicpO1xuICAgIHJlZmVyZW5jZUN1cnJlbnROb3RlQ29udGVudCA9ICcnO1xuICAgIGlmIChzZXR0aW5ncy5nZW5lcmFsLmFsbG93UmVmZXJlbmNlQ3VycmVudE5vdGUgPT09IHRydWUpIHtcbiAgICAgICAgaWYgKGRvdEVsZW1lbnQpIHtcbiAgICAgICAgICAgIChkb3RFbGVtZW50IGFzIEhUTUxFbGVtZW50KS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2RhMmMyYyc7XG4gICAgICAgICAgICByZWZlcmVuY2VDdXJyZW50Tm90ZUNvbnRlbnQgPSAnJztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGlmIChhY3RpdmVGaWxlPy5leHRlbnNpb24gPT09ICdtZCcpIHtcbiAgICAgICAgICAgIGlmIChkb3RFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgKGRvdEVsZW1lbnQgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdncmVlbic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgYXBwLnZhdWx0LnJlYWQoYWN0aXZlRmlsZSk7XG4gICAgICAgICAgICBjb25zdCBjbGVhcllhbWxDb250ZW50ID0gY29udGVudC5yZXBsYWNlKC8tLS1bXFxzXFxTXSs/LS0tLywgJycpLnRyaW0oKTtcbiAgICAgICAgICAgIHJlZmVyZW5jZUN1cnJlbnROb3RlQ29udGVudCA9ICdSZWZlcmVuY2UgTm90ZTonICsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdcXG5cXG4nICsgY2xlYXJZYW1sQ29udGVudCArICdcXG5cXG4nO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZWZlcmVuY2VDdXJyZW50Tm90ZUNvbnRlbnQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDdXJyZW50Tm90ZUNvbnRlbnQoKSB7XG4gICAgcmV0dXJuIHJlZmVyZW5jZUN1cnJlbnROb3RlQ29udGVudDtcbn0iLCAiaW1wb3J0IHsgZmlsZW5hbWVNZXNzYWdlSGlzdG9yeUpTT04sIG1lc3NhZ2VIaXN0b3J5IH0gZnJvbSAnc3JjL3ZpZXcnO1xuaW1wb3J0IHsgZGlzcGxheUFwcGVuZEJ1dHRvbiwgZGlzcGxheUJvdENvcHlCdXR0b24sIGRpc3BsYXlCb3RFZGl0QnV0dG9uIH0gZnJvbSAnLi9CdXR0b25zJztcbmltcG9ydCB7IEJNT1NldHRpbmdzIH0gZnJvbSAnc3JjL21haW4nO1xuXG4vLyBBZGQgYSBuZXcgbWVzc2FnZSB0byB0aGUgbWVzc2FnZUhpc3RvcnkgYXJyYXkgYW5kIHNhdmUgaXQgdG8gdGhlIGZpbGVcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRNZXNzYWdlKGlucHV0OiBzdHJpbmcsIG1lc3NhZ2VUeXBlOiAndXNlck1lc3NhZ2UnIHwgJ2JvdE1lc3NhZ2UnLCBzZXR0aW5nczogQk1PU2V0dGluZ3MsIGluZGV4OiBudW1iZXIpIHtcbiAgICBjb25zdCBtZXNzYWdlT2JqOiB7IHJvbGU6IHN0cmluZzsgY29udGVudDogc3RyaW5nIH0gPSB7XG4gICAgICAgIHJvbGU6ICcnLFxuICAgICAgICBjb250ZW50OiAnJ1xuICAgIH07XG5cbiAgICBpZiAobWVzc2FnZVR5cGUgPT09ICd1c2VyTWVzc2FnZScpIHtcbiAgICAgICAgbWVzc2FnZU9iai5yb2xlID0gJ3VzZXInO1xuICAgICAgICBtZXNzYWdlT2JqLmNvbnRlbnQgPSBpbnB1dDtcbiAgICB9IGVsc2UgaWYgKG1lc3NhZ2VUeXBlID09PSAnYm90TWVzc2FnZScpIHtcbiAgICAgICAgbWVzc2FnZU9iai5yb2xlID0gJ2Fzc2lzdGFudCc7ICBcbiAgICAgICAgbWVzc2FnZU9iai5jb250ZW50ID0gaW5wdXQ7XG5cbiAgICAgICAgLy8gQWRkIGJ1dHRvbnMgdG8gYm90TWVzc2FnZSBhZnRlciBmZXRjaGluZyBtZXNzYWdlXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXJFbERpdnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjbWVzc2FnZUNvbnRhaW5lciBkaXYudXNlck1lc3NhZ2UsICNtZXNzYWdlQ29udGFpbmVyIGRpdi5ib3RNZXNzYWdlJyk7XG4gICAgICAgIGNvbnN0IHRhcmdldFVzZXJNZXNzYWdlID0gbWVzc2FnZUNvbnRhaW5lckVsRGl2c1tpbmRleF07XG4gICAgICAgIGNvbnN0IHRhcmdldEJvdE1lc3NhZ2UgPSB0YXJnZXRVc2VyTWVzc2FnZS5uZXh0RWxlbWVudFNpYmxpbmc7XG5cbiAgICAgICAgY29uc3QgYm90TWVzc2FnZVRvb2xCYXJEaXYgPSB0YXJnZXRCb3RNZXNzYWdlPy5xdWVyeVNlbGVjdG9yKCcuYm90TWVzc2FnZVRvb2xCYXInKTtcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lckRpdi5jbGFzc05hbWUgPSAnYnV0dG9uLWNvbnRhaW5lcic7XG4gICAgICAgIGJvdE1lc3NhZ2VUb29sQmFyRGl2Py5hcHBlbmRDaGlsZChidXR0b25Db250YWluZXJEaXYpO1xuXG4gICAgICAgIGNvbnN0IG5ld0JvdFAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICAgIG5ld0JvdFAuaW5uZXJIVE1MID0gbWVzc2FnZU9iai5jb250ZW50O1xuICAgICAgICBcbiAgICAgICAgaWYgKCFtZXNzYWdlT2JqLmNvbnRlbnQuaW5jbHVkZXMoJ2RpdiBjbGFzcz1cImNvbW1hbmRCb3RNZXNzYWdlXCInKSAmJiAhbWVzc2FnZU9iai5jb250ZW50LmluY2x1ZGVzKCdlcnJvckJvdE1lc3NhZ2UnKSkge1xuICAgICAgICAgICAgY29uc3QgZWRpdEJ1dHRvbiA9IGRpc3BsYXlCb3RFZGl0QnV0dG9uKHNldHRpbmdzLCBuZXdCb3RQKTtcbiAgICAgICAgICAgIGNvbnN0IGNvcHlCb3RCdXR0b24gPSBkaXNwbGF5Qm90Q29weUJ1dHRvbihzZXR0aW5ncywgbWVzc2FnZU9iai5jb250ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IGFwcGVuZEJ1dHRvbiA9IGRpc3BsYXlBcHBlbmRCdXR0b24oc2V0dGluZ3MsIG1lc3NhZ2VPYmouY29udGVudCk7XG4gICAgICAgICAgICBidXR0b25Db250YWluZXJEaXYuYXBwZW5kQ2hpbGQoZWRpdEJ1dHRvbik7XG4gICAgICAgICAgICBidXR0b25Db250YWluZXJEaXYuYXBwZW5kQ2hpbGQoY29weUJvdEJ1dHRvbik7XG4gICAgICAgICAgICBidXR0b25Db250YWluZXJEaXYuYXBwZW5kQ2hpbGQoYXBwZW5kQnV0dG9uKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgbWVzc2FnZUhpc3Rvcnkuc3BsaWNlKGluZGV4KzEsIDAsIG1lc3NhZ2VPYmopO1xuXG4gICAgY29uc3QganNvblN0cmluZyA9IEpTT04uc3RyaW5naWZ5KG1lc3NhZ2VIaXN0b3J5LCBudWxsLCA0KTtcblxuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoZmlsZW5hbWVNZXNzYWdlSGlzdG9yeUpTT04sIGpzb25TdHJpbmcpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHdyaXRpbmcgdG8gbWVzc2FnZSBoaXN0b3J5IGZpbGU6JywgZXJyb3IpO1xuICAgIH1cbn1cblxuLy8gQWRkIGxpbmUgYnJlYWsgYmV0d2VlbiBjb25zZWN1dGl2ZSA8cD4gZWxlbWVudHNcbmV4cG9ydCBmdW5jdGlvbiBhZGRQYXJhZ3JhcGhCcmVha3MobWVzc2FnZUJsb2NrOiB7IHF1ZXJ5U2VsZWN0b3JBbGw6IChhcmcwOiBzdHJpbmcpID0+ICBOb2RlTGlzdE9mPEhUTUxFbGVtZW50PjsgfSkge1xuICAgIGNvbnN0IHBhcmFncmFwaHMgPSBtZXNzYWdlQmxvY2sucXVlcnlTZWxlY3RvckFsbCgncCcpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFyYWdyYXBocy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBwID0gcGFyYWdyYXBoc1tpXTtcbiAgICAgICAgY29uc3QgbmV4dFNpYmxpbmcgPSBwLm5leHRFbGVtZW50U2libGluZztcbiAgICAgICAgaWYgKG5leHRTaWJsaW5nICYmIG5leHRTaWJsaW5nLm5vZGVOYW1lID09PSAnUCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGJyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnInKTtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHAucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGJyLCBuZXh0U2libGluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCAiaW1wb3J0IHsgQk1PU2V0dGluZ3MgfSBmcm9tICdzcmMvbWFpbic7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQcm9tcHQoc2V0dGluZ3M6IEJNT1NldHRpbmdzKSB7XG5cbiAgICBpZiAoc2V0dGluZ3MucHJvbXB0cy5wcm9tcHQudHJpbSgpID09PSAnJykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcHJvbXB0RmlsZVBhdGggPSBzZXR0aW5ncy5wcm9tcHRzLnByb21wdEZvbGRlclBhdGggKyAnLycgKyBzZXR0aW5ncy5wcm9tcHRzLnByb21wdDtcblxuICAgIHRyeSB7XG4gICAgICAgIC8vIEF3YWl0IHRoZSByZWFkaW5nIG9mIHRoZSBmaWxlIGFuZCByZXR1cm4gaXRzIGNvbnRlbnRcbiAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLnJlYWQocHJvbXB0RmlsZVBhdGgpO1xuICAgICAgICAvLyBSZW1vdmUgWUFNTCBmcm9udCBtYXR0ZXIgaWYgcHJlc2VudFxuICAgICAgICBjb25zdCBjbGVhcllhbWxDb250ZW50ID0gY29udGVudC5yZXBsYWNlKC8tLS1bXFxzXFxTXSs/LS0tLywgJycpLnRyaW0oKTtcbiAgICAgICAgcmV0dXJuIGNsZWFyWWFtbENvbnRlbnQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcmVhZGluZyBmaWxlICR7cHJvbXB0RmlsZVBhdGh9OmAsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIG51bGw7IFxuICAgIH1cbn1cbiIsICIvLyBGdW5jdGlvbiB0byBjb252ZXJ0IEhTTCBvciBSR0IgdG8gSEVYXG5leHBvcnQgZnVuY3Rpb24gY29sb3JUb0hleChjb2xvclZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmIChjb2xvclZhbHVlLnN0YXJ0c1dpdGgoJ2hzbCcpKSB7XG4gICAgICAvLyBDb252ZXJ0IEhTTCB0byBIRVhcbiAgICAgIGNvbnN0IG1hdGNoID0gY29sb3JWYWx1ZS5tYXRjaCgvKFxcZCsoXFwuXFxkKyk/KSU/L2cpO1xuICAgICAgaWYgKG1hdGNoID09PSBudWxsIHx8IG1hdGNoLmxlbmd0aCA8IDMpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgSFNMIHZhbHVlJyk7XG5cdH1cblxuICAgICAgY29uc3QgaCA9IHBhcnNlSW50KG1hdGNoWzBdKSAvIDM2MDtcbiAgICAgIGNvbnN0IHMgPSBwYXJzZUludChtYXRjaFsxXSkgLyAxMDA7XG4gICAgICBjb25zdCBsID0gcGFyc2VJbnQobWF0Y2hbMl0pIC8gMTAwO1xuICBcbiAgICAgIGNvbnN0IHEgPSBsIDwgMC41ID8gbCAqICgxICsgcykgOiBsICsgcyAtIGwgKiBzO1xuICAgICAgY29uc3QgcCA9IDIgKiBsIC0gcTtcbiAgICAgIGNvbnN0IHIgPSBodWUycmdiKHAsIHEsIGggKyAxIC8gMyk7XG4gICAgICBjb25zdCBnID0gaHVlMnJnYihwLCBxLCBoKTtcbiAgICAgIGNvbnN0IGIgPSBodWUycmdiKHAsIHEsIGggLSAxIC8gMyk7XG4gIFxuICAgICAgY29uc3QgdG9IZXggPSBmdW5jdGlvbiAoYzogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGhleCA9IE1hdGgucm91bmQoYyAqIDI1NSkudG9TdHJpbmcoMTYpO1xuICAgICAgICByZXR1cm4gaGV4Lmxlbmd0aCA9PT0gMSA/ICcwJyArIGhleCA6IGhleDtcbiAgICAgIH07XG4gIFxuICAgICAgY29uc3QgaGV4ID0gJyMnICsgdG9IZXgocikgKyB0b0hleChnKSArIHRvSGV4KGIpO1xuICAgICAgcmV0dXJuIGhleDtcbiAgICB9IGVsc2UgaWYgKGNvbG9yVmFsdWUuc3RhcnRzV2l0aCgncmdiJykpIHtcbiAgICAgIC8vIENvbnZlcnQgUkdCIHRvIEhFWFxuICAgICAgY29uc3Qgc2VwID0gY29sb3JWYWx1ZS5pbmRleE9mKCcsJykgPiAtMSA/ICcsJyA6ICcgJztcbiAgICAgIGNvbnN0IHJnYkFycmF5ID0gY29sb3JWYWx1ZS5zdWJzdHIoNCkuc3BsaXQoJyknKVswXS5zcGxpdChzZXApO1xuICBcbiAgICAgIGxldCByID0gKCtyZ2JBcnJheVswXSkudG9TdHJpbmcoMTYpLFxuICAgICAgICBnID0gKCtyZ2JBcnJheVsxXSkudG9TdHJpbmcoMTYpLFxuICAgICAgICBiID0gKCtyZ2JBcnJheVsyXSkudG9TdHJpbmcoMTYpO1xuICBcbiAgICAgIGlmIChyLmxlbmd0aCA9PSAxKVxuICAgICAgICByID0gJzAnICsgcjtcbiAgICAgIGlmIChnLmxlbmd0aCA9PSAxKVxuICAgICAgICBnID0gJzAnICsgZztcbiAgICAgIGlmIChiLmxlbmd0aCA9PSAxKVxuICAgICAgICBiID0gJzAnICsgYjtcbiAgXG4gICAgICByZXR1cm4gJyMnICsgciArIGcgKyBiO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiB0aGUgY29sb3JWYWx1ZSBpcyBuZWl0aGVyIFJHQiBub3IgSFNMLCByZXR1cm4gdGhlIGlucHV0XG4gICAgICByZXR1cm4gY29sb3JWYWx1ZTtcbiAgICB9XG59XG5cbi8vIEZ1bmN0aW9uIHRvIGNvbnZlcnQgSFNMIHRvIFJHQlxuZnVuY3Rpb24gaHVlMnJnYihwOiBudW1iZXIsIHE6IG51bWJlciwgdDogbnVtYmVyKSB7XG5cdGlmICh0IDwgMCkgdCArPSAxO1xuXHRpZiAodCA+IDEpIHQgLT0gMTtcblx0aWYgKHQgPCAxIC8gNikgcmV0dXJuIHAgKyAocSAtIHApICogNiAqIHQ7XG5cdGlmICh0IDwgMSAvIDIpIHJldHVybiBxO1xuXHRpZiAodCA8IDIgLyAzKSByZXR1cm4gcCArIChxIC0gcCkgKiAoMiAvIDMgLSB0KSAqIDY7XG5cdHJldHVybiBwO1xufSIsICJpbXBvcnQgeyBCTU9TZXR0aW5ncywgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJ3NyYy9tYWluJztcbmltcG9ydCB7IGNvbG9yVG9IZXggfSBmcm9tICdzcmMvdXRpbHMvQ29sb3JDb252ZXJ0ZXInO1xuaW1wb3J0IHsgY29kZUJsb2NrQ29weUJ1dHRvbiwgZGlzcGxheUFwcGVuZEJ1dHRvbiwgZGlzcGxheUJvdENvcHlCdXR0b24sIGRpc3BsYXlCb3RFZGl0QnV0dG9uIH0gZnJvbSAnLi9CdXR0b25zJztcbmltcG9ydCB7IEFOVEhST1BJQ19NT0RFTFMgfSBmcm9tICdzcmMvdmlldyc7XG5pbXBvcnQgeyBtYXJrZWQgfSBmcm9tICdtYXJrZWQnO1xuaW1wb3J0IHsgcHJpc21IaWdobGlnaHRpbmcgfSBmcm9tICcuLi9QcmlzbWFIaWdobGlnaHRpbmcnO1xuaW1wb3J0IHsgYWRkTWVzc2FnZSwgYWRkUGFyYWdyYXBoQnJlYWtzIH0gZnJvbSAnLi9NZXNzYWdlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGRpc3BsYXlCb3RNZXNzYWdlKHNldHRpbmdzOiBCTU9TZXR0aW5ncywgbWVzc2FnZUhpc3Rvcnk6IHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfVtdLCBtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICBjb25zdCBib3RNZXNzYWdlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYm90TWVzc2FnZURpdi5jbGFzc05hbWUgPSAnYm90TWVzc2FnZSc7XG4gICAgXG4gICAgYm90TWVzc2FnZURpdi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvclRvSGV4KHNldHRpbmdzLmFwcGVhcmFuY2UuYm90TWVzc2FnZUJhY2tncm91bmRDb2xvciB8fFxuICAgICAgICBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoREVGQVVMVF9TRVRUSU5HUy5hcHBlYXJhbmNlLmJvdE1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IpLnRyaW0oKSk7XG5cbiAgICBjb25zdCBib3RNZXNzYWdlVG9vbEJhckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGJvdE1lc3NhZ2VUb29sQmFyRGl2LmNsYXNzTmFtZSA9ICdib3RNZXNzYWdlVG9vbEJhcic7XG5cbiAgICBjb25zdCBidXR0b25Db250YWluZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBidXR0b25Db250YWluZXJEaXYuY2xhc3NOYW1lID0gJ2J1dHRvbi1jb250YWluZXInO1xuXG4gICAgY29uc3QgYm90TmFtZVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7IFxuICAgIGJvdE5hbWVTcGFuLnRleHRDb250ZW50ID0gc2V0dGluZ3MuYXBwZWFyYW5jZS5jaGF0Ym90TmFtZSB8fCBERUZBVUxUX1NFVFRJTkdTLmFwcGVhcmFuY2UuY2hhdGJvdE5hbWU7XG4gICAgYm90TmFtZVNwYW4uY2xhc3NOYW1lID0gJ2NoYXRib3ROYW1lJztcblxuICAgIGxldCBib3RQID0gJyc7XG5cbiAgICBjb25zdCBtZXNzYWdlVGV4dCA9IG1lc3NhZ2U7XG4gICAgaWYgKG1lc3NhZ2VIaXN0b3J5Lmxlbmd0aCA+PSAxKSB7XG4gICAgICAgIGlmIChBTlRIUk9QSUNfTU9ERUxTLmluY2x1ZGVzKHNldHRpbmdzLmdlbmVyYWwubW9kZWwpKSB7XG4gICAgICAgICAgICBjb25zdCBjbGVhblN0cmluZyA9IG1lc3NhZ2VUZXh0LnNwbGl0KCcgJykuc2xpY2UoMSkuam9pbignICcpLnRyaW0oKTtcbiAgICAgICAgICAgIGJvdFAgPSBtYXJrZWQoY2xlYW5TdHJpbmcpO1xuICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UuaW5jbHVkZXMoJ2NvbW1hbmRCb3RNZXNzYWdlJykgfHwgbWVzc2FnZS5pbmNsdWRlcygnZXJyb3JCb3RNZXNzYWdlJykpIHtcbiAgICAgICAgICAgIGJvdFAgPSBtZXNzYWdlO1xuICAgICAgICB9IFxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGJvdFAgPSBtYXJrZWQobWVzc2FnZSk7XG4gICAgICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgfVxuXG4gICAgY29uc3QgbmV3Qm90UCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBuZXdCb3RQLmlubmVySFRNTCA9IGJvdFA7XG5cbiAgICBib3RNZXNzYWdlVG9vbEJhckRpdi5hcHBlbmRDaGlsZChib3ROYW1lU3Bhbik7XG4gICAgYm90TWVzc2FnZVRvb2xCYXJEaXYuYXBwZW5kQ2hpbGQoYnV0dG9uQ29udGFpbmVyRGl2KTtcbiAgICBjb25zdCBtZXNzYWdlQmxvY2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBtZXNzYWdlQmxvY2tEaXYuY2xhc3NOYW1lID0gJ21lc3NhZ2VCbG9jayc7XG5cbiAgICBpZiAoIW1lc3NhZ2UuaW5jbHVkZXMoJ2NvbW1hbmRCb3RNZXNzYWdlJykgJiYgIW1lc3NhZ2UuaW5jbHVkZXMoJ2Vycm9yQm90TWVzc2FnZScpKSB7XG4gICAgICAgIGNvbnN0IGVkaXRCdXR0b24gPSBkaXNwbGF5Qm90RWRpdEJ1dHRvbihzZXR0aW5ncywgbmV3Qm90UCk7XG4gICAgICAgIGNvbnN0IGNvcHlCb3RCdXR0b24gPSBkaXNwbGF5Qm90Q29weUJ1dHRvbihzZXR0aW5ncywgbWVzc2FnZSk7XG4gICAgICAgIGNvbnN0IGFwcGVuZEJ1dHRvbiA9IGRpc3BsYXlBcHBlbmRCdXR0b24oc2V0dGluZ3MsIG1lc3NhZ2UpO1xuICAgICAgICBidXR0b25Db250YWluZXJEaXYuYXBwZW5kQ2hpbGQoZWRpdEJ1dHRvbik7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChjb3B5Qm90QnV0dG9uKTtcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyRGl2LmFwcGVuZENoaWxkKGFwcGVuZEJ1dHRvbik7XG4gICAgICAgIHByaXNtSGlnaGxpZ2h0aW5nKG1lc3NhZ2VCbG9ja0Rpdik7XG4gICAgICAgIGNvZGVCbG9ja0NvcHlCdXR0b24obWVzc2FnZUJsb2NrRGl2KTtcbiAgICAgICAgYWRkUGFyYWdyYXBoQnJlYWtzKG1lc3NhZ2VCbG9ja0Rpdik7ICBcbiAgICB9XG5cbiAgICBib3RNZXNzYWdlRGl2LmFwcGVuZENoaWxkKGJvdE1lc3NhZ2VUb29sQmFyRGl2KTtcbiAgICBtZXNzYWdlQmxvY2tEaXYuYXBwZW5kQ2hpbGQobmV3Qm90UCk7XG4gICAgYm90TWVzc2FnZURpdi5hcHBlbmRDaGlsZChtZXNzYWdlQmxvY2tEaXYpO1xuXG4gICAgcmV0dXJuIGJvdE1lc3NhZ2VEaXY7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5TG9hZGluZ0JvdE1lc3NhZ2Uoc2V0dGluZ3M6IEJNT1NldHRpbmdzKSB7XG4gICAgY29uc3QgYm90TWVzc2FnZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGJvdE1lc3NhZ2VEaXYuY2xhc3NOYW1lID0gJ2JvdE1lc3NhZ2UnO1xuICAgIGJvdE1lc3NhZ2VEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3JUb0hleChzZXR0aW5ncy5hcHBlYXJhbmNlLmJvdE1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IgfHxcbiAgICAgICAgZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKERFRkFVTFRfU0VUVElOR1MuYXBwZWFyYW5jZS5ib3RNZXNzYWdlQmFja2dyb3VuZENvbG9yKS50cmltKCkpO1xuXG4gICAgY29uc3QgYm90TWVzc2FnZVRvb2xCYXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBib3RNZXNzYWdlVG9vbEJhckRpdi5jbGFzc05hbWUgPSAnYm90TWVzc2FnZVRvb2xCYXInO1xuXG4gICAgY29uc3QgYm90TmFtZVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7IFxuICAgIGJvdE5hbWVTcGFuLnRleHRDb250ZW50ID0gc2V0dGluZ3MuYXBwZWFyYW5jZS5jaGF0Ym90TmFtZSB8fCBERUZBVUxUX1NFVFRJTkdTLmFwcGVhcmFuY2UuY2hhdGJvdE5hbWU7XG4gICAgYm90TmFtZVNwYW4uY2xhc3NOYW1lID0gJ2NoYXRib3ROYW1lJztcblxuICAgIGNvbnN0IG1lc3NhZ2VCbG9ja0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIG1lc3NhZ2VCbG9ja0Rpdi5jbGFzc05hbWUgPSAnbWVzc2FnZUJsb2NrJztcblxuICAgIGNvbnN0IGxvYWRpbmdFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBsb2FkaW5nRWwuc2V0QXR0cmlidXRlKCdpZCcsICdsb2FkaW5nJyk7IFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGRvdFNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIGRvdFNwYW4udGV4dENvbnRlbnQgPSAnLic7XG4gICAgICAgIGxvYWRpbmdFbC5hcHBlbmRDaGlsZChkb3RTcGFuKTtcbiAgICB9XG5cbiAgICBib3RNZXNzYWdlVG9vbEJhckRpdi5hcHBlbmRDaGlsZChib3ROYW1lU3Bhbik7XG4gICAgYm90TWVzc2FnZURpdi5hcHBlbmRDaGlsZChib3RNZXNzYWdlVG9vbEJhckRpdik7XG4gICAgYm90TWVzc2FnZURpdi5hcHBlbmRDaGlsZChtZXNzYWdlQmxvY2tEaXYpO1xuXG4gICAgLy8gRGlzcGFseSBsb2FkaW5nIGFuaW1hdGlvblxuICAgIGJvdE1lc3NhZ2VEaXYuYXBwZW5kQ2hpbGQobG9hZGluZ0VsKTtcblxuICAgIHJldHVybiBib3RNZXNzYWdlRGl2O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGlzcGxheUNvbW1hbmRCb3RNZXNzYWdlKHNldHRpbmdzOiBCTU9TZXR0aW5ncywgbWVzc2FnZUhpc3Rvcnk6IHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfVtdLCBtZXNzYWdlOiBzdHJpbmcpe1xuICAgIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBib3RNZXNzYWdlRGl2LmNsYXNzTmFtZSA9ICdib3RNZXNzYWdlJztcbiAgICBib3RNZXNzYWdlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yVG9IZXgoc2V0dGluZ3MuYXBwZWFyYW5jZS5ib3RNZXNzYWdlQmFja2dyb3VuZENvbG9yIHx8XG4gICAgICAgIGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShERUZBVUxUX1NFVFRJTkdTLmFwcGVhcmFuY2UuYm90TWVzc2FnZUJhY2tncm91bmRDb2xvcikudHJpbSgpKTtcblxuICAgIGNvbnN0IGJvdE1lc3NhZ2VUb29sQmFyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYm90TWVzc2FnZVRvb2xCYXJEaXYuY2xhc3NOYW1lID0gJ2JvdE1lc3NhZ2VUb29sQmFyJztcblxuICAgIGNvbnN0IGJvdE5hbWVTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOyBcbiAgICBib3ROYW1lU3Bhbi50ZXh0Q29udGVudCA9IHNldHRpbmdzLmFwcGVhcmFuY2UuY2hhdGJvdE5hbWUgfHwgREVGQVVMVF9TRVRUSU5HUy5hcHBlYXJhbmNlLmNoYXRib3ROYW1lO1xuICAgIGJvdE5hbWVTcGFuLmNsYXNzTmFtZSA9ICdjaGF0Ym90TmFtZSc7XG5cbiAgICBjb25zdCBtZXNzYWdlQmxvY2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBtZXNzYWdlQmxvY2tEaXYuY2xhc3NOYW1lID0gJ21lc3NhZ2VCbG9jayc7XG5cbiAgICBjb25zdCBkaXNwbGF5Q29tbWFuZEJvdE1lc3NhZ2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkaXNwbGF5Q29tbWFuZEJvdE1lc3NhZ2VEaXYuY2xhc3NOYW1lID0gJ2NvbW1hbmRCb3RNZXNzYWdlJztcbiAgICBkaXNwbGF5Q29tbWFuZEJvdE1lc3NhZ2VEaXYuaW5uZXJIVE1MID0gbWVzc2FnZTtcblxuICAgIG1lc3NhZ2VCbG9ja0Rpdi5hcHBlbmRDaGlsZChkaXNwbGF5Q29tbWFuZEJvdE1lc3NhZ2VEaXYpO1xuICAgIGJvdE1lc3NhZ2VUb29sQmFyRGl2LmFwcGVuZENoaWxkKGJvdE5hbWVTcGFuKTtcbiAgICBib3RNZXNzYWdlRGl2LmFwcGVuZENoaWxkKGJvdE1lc3NhZ2VUb29sQmFyRGl2KTtcbiAgICBib3RNZXNzYWdlRGl2LmFwcGVuZENoaWxkKG1lc3NhZ2VCbG9ja0Rpdik7XG5cbiAgICBjb25zdCBpbmRleCA9IG1lc3NhZ2VIaXN0b3J5Lmxlbmd0aCAtIDE7XG5cbiAgICBhZGRNZXNzYWdlKG1lc3NhZ2VCbG9ja0Rpdi5pbm5lckhUTUwsICdib3RNZXNzYWdlJywgdGhpcy5zZXR0aW5ncywgaW5kZXgpO1xuXG4gICAgcmV0dXJuIGJvdE1lc3NhZ2VEaXY7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5RXJyb3JCb3RNZXNzYWdlKHNldHRpbmdzOiBCTU9TZXR0aW5ncywgbWVzc2FnZUhpc3Rvcnk6IHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfVtdLCBtZXNzYWdlOiBzdHJpbmcpe1xuICAgIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBib3RNZXNzYWdlRGl2LmNsYXNzTmFtZSA9ICdib3RNZXNzYWdlJztcbiAgICBib3RNZXNzYWdlRGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGNvbG9yVG9IZXgoc2V0dGluZ3MuYXBwZWFyYW5jZS5ib3RNZXNzYWdlQmFja2dyb3VuZENvbG9yIHx8XG4gICAgICAgIGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShERUZBVUxUX1NFVFRJTkdTLmFwcGVhcmFuY2UuYm90TWVzc2FnZUJhY2tncm91bmRDb2xvcikudHJpbSgpKTtcblxuICAgIGNvbnN0IGJvdE1lc3NhZ2VUb29sQmFyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYm90TWVzc2FnZVRvb2xCYXJEaXYuY2xhc3NOYW1lID0gJ2JvdE1lc3NhZ2VUb29sQmFyJztcblxuICAgIGNvbnN0IGJvdE5hbWVTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOyBcbiAgICBib3ROYW1lU3Bhbi50ZXh0Q29udGVudCA9IHNldHRpbmdzLmFwcGVhcmFuY2UuY2hhdGJvdE5hbWUgfHwgREVGQVVMVF9TRVRUSU5HUy5hcHBlYXJhbmNlLmNoYXRib3ROYW1lO1xuICAgIGJvdE5hbWVTcGFuLmNsYXNzTmFtZSA9ICdjaGF0Ym90TmFtZSc7XG5cbiAgICBjb25zdCBtZXNzYWdlQmxvY2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBtZXNzYWdlQmxvY2tEaXYuY2xhc3NOYW1lID0gJ21lc3NhZ2VCbG9jayc7XG5cbiAgICBjb25zdCBkaXNwbGF5RXJyb3JCb3RNZXNzYWdlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGlzcGxheUVycm9yQm90TWVzc2FnZURpdi5jbGFzc05hbWUgPSAnZXJyb3JCb3RNZXNzYWdlJztcblxuICAgIGNvbnN0IEJvdFAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgQm90UC50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG5cbiAgICBjb25zb2xlLmVycm9yKG1lc3NhZ2UpO1xuXG4gICAgbWVzc2FnZUJsb2NrRGl2LmFwcGVuZENoaWxkKGRpc3BsYXlFcnJvckJvdE1lc3NhZ2VEaXYpO1xuICAgIGRpc3BsYXlFcnJvckJvdE1lc3NhZ2VEaXYuYXBwZW5kQ2hpbGQoQm90UCk7XG4gICAgYm90TWVzc2FnZVRvb2xCYXJEaXYuYXBwZW5kQ2hpbGQoYm90TmFtZVNwYW4pO1xuICAgIGJvdE1lc3NhZ2VEaXYuYXBwZW5kQ2hpbGQoYm90TWVzc2FnZVRvb2xCYXJEaXYpO1xuICAgIGJvdE1lc3NhZ2VEaXYuYXBwZW5kQ2hpbGQobWVzc2FnZUJsb2NrRGl2KTtcblxuICAgIGNvbnN0IGluZGV4ID0gbWVzc2FnZUhpc3RvcnkubGVuZ3RoIC0gMTtcblxuICAgIGFkZE1lc3NhZ2UobWVzc2FnZUJsb2NrRGl2LmlubmVySFRNTCwgJ2JvdE1lc3NhZ2UnLCB0aGlzLnNldHRpbmdzLCBpbmRleCk7XG5cbiAgICByZXR1cm4gYm90TWVzc2FnZURpdjtcbn0iLCAiaW1wb3J0IHsgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgQk1PU2V0dGluZ3MsIERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuLi8uLi9tYWluJztcbmltcG9ydCB7IGNvbG9yVG9IZXggfSBmcm9tICcuLi8uLi91dGlscy9Db2xvckNvbnZlcnRlcic7XG5pbXBvcnQgeyBmaWxlbmFtZU1lc3NhZ2VIaXN0b3J5SlNPTiwgbWVzc2FnZUhpc3RvcnkgfSBmcm9tICcuLi8uLi92aWV3JztcbmltcG9ydCBCTU9HUFQgZnJvbSAnLi4vLi4vbWFpbic7XG5pbXBvcnQgeyBnZXRBYm9ydENvbnRyb2xsZXIgfSBmcm9tICcuLi9GZXRjaE1vZGVsUmVzcG9uc2UnO1xuaW1wb3J0IHsgZmV0Y2hNb2RlbFJlbmFtZVRpdGxlIH0gZnJvbSAnLi4vZWRpdG9yL0ZldGNoUmVuYW1lTm90ZVRpdGxlJztcbmltcG9ydCB7IGRpc3BsYXlDb21tYW5kQm90TWVzc2FnZSB9IGZyb20gJy4vQm90TWVzc2FnZSc7XG5cbi8vIENvbW1hbmRzXG5leHBvcnQgZnVuY3Rpb24gZXhlY3V0ZUNvbW1hbmQoaW5wdXQ6IHN0cmluZywgc2V0dGluZ3M6IEJNT1NldHRpbmdzLCBwbHVnaW46IEJNT0dQVCkge1xuICBjb25zdCBjb21tYW5kID0gaW5wdXQuc3BsaXQoJyAnKVswXTsgLy8gR2V0IHRoZSBmaXJzdCB3b3JkIGZyb20gdGhlIGlucHV0XG4gIFxuICBzd2l0Y2ggKGNvbW1hbmQpIHtcbiAgICAgIGNhc2UgJy9jb21tYW5kcyc6XG4gICAgICBjYXNlICcvaGVscCc6XG4gICAgICBjYXNlICcvaCc6XG4gICAgICAgICAgY29tbWFuZEhlbHAoc2V0dGluZ3MpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnL21vZGVsJzpcbiAgICAgIGNhc2UgJy9tb2RlbHMnOlxuICAgICAgICAgIHJldHVybiBjb21tYW5kTW9kZWwoaW5wdXQsIHNldHRpbmdzLCBwbHVnaW4pO1xuICAgICAgY2FzZSAnL3Byb21wdCc6XG4gICAgICBjYXNlICcvcHJvbXB0cyc6XG4gICAgICAgICAgcmV0dXJuIGNvbW1hbmRQcm9tcHQoaW5wdXQsIHNldHRpbmdzLCBwbHVnaW4pO1xuICAgICAgY2FzZSAnL3JlZmVyZW5jZSc6XG4gICAgICBjYXNlICcvcmVmJzpcbiAgICAgICAgICBjb21tYW5kUmVmZXJlbmNlKGlucHV0LCBzZXR0aW5ncywgcGx1Z2luKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJy90ZW1wJzpcbiAgICAgICAgICBjb21tYW5kVGVtcGVyYXR1cmUoaW5wdXQsIHNldHRpbmdzLCBwbHVnaW4pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnL21heHRva2Vucyc6XG4gICAgICAgICAgY29tbWFuZE1heFRva2VucyhpbnB1dCwgc2V0dGluZ3MsIHBsdWdpbik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICcvc3lzdGVtJzpcbiAgICAgICAgICBjb21tYW5kU3lzdGVtKGlucHV0LCBzZXR0aW5ncywgcGx1Z2luKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJy9hcHBlbmQnOlxuICAgICAgICAgIGNvbW1hbmRBcHBlbmQoc2V0dGluZ3MpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnL3NhdmUnOlxuICAgICAgICAgIGNvbW1hbmRTYXZlKHNldHRpbmdzKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJy9jbGVhcic6XG4gICAgICBjYXNlICcvYyc6XG4gICAgICAgICAgcmVtb3ZlTWVzc2FnZVRocmVhZCgwKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJy9zdG9wJzpcbiAgICAgIGNhc2UgJy9zJzpcbiAgICAgICAgICBjb21tYW5kU3RvcCgpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBjb21tYW5kRmFsc2Uoc2V0dGluZ3MsIHBsdWdpbik7XG4gIH1cbn1cblxuLy8gRnVuY3Rpb24gdG8gY3JlYXRlIGFuZCBhcHBlbmQgYSBib3QgbWVzc2FnZVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUJvdE1lc3NhZ2Uoc2V0dGluZ3M6IEJNT1NldHRpbmdzKTogSFRNTERpdkVsZW1lbnQge1xuICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKTtcbiAgY29uc3QgYm90TWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBib3RNZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ2JvdE1lc3NhZ2UnKTtcbiAgYm90TWVzc2FnZS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjb2xvclRvSGV4KFxuICAgIHNldHRpbmdzLmFwcGVhcmFuY2UuYm90TWVzc2FnZUJhY2tncm91bmRDb2xvciB8fFxuICAgICAgZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKERFRkFVTFRfU0VUVElOR1MuYXBwZWFyYW5jZS5ib3RNZXNzYWdlQmFja2dyb3VuZENvbG9yKS50cmltKClcbiAgKTtcbiAgbWVzc2FnZUNvbnRhaW5lcj8uYXBwZW5kQ2hpbGQoYm90TWVzc2FnZSk7XG5cbiAgY29uc3QgYm90TmFtZVNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gIGJvdE5hbWVTcGFuLnRleHRDb250ZW50ID0gc2V0dGluZ3MuYXBwZWFyYW5jZS5jaGF0Ym90TmFtZSB8fCBERUZBVUxUX1NFVFRJTkdTLmFwcGVhcmFuY2UuY2hhdGJvdE5hbWU7XG4gIGJvdE5hbWVTcGFuLmNsYXNzTmFtZSA9ICdjaGF0Ym90TmFtZSc7XG4gIGJvdE1lc3NhZ2UuYXBwZW5kQ2hpbGQoYm90TmFtZVNwYW4pO1xuXG4gIGNvbnN0IG1lc3NhZ2VCbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBtZXNzYWdlQmxvY2suY2xhc3NMaXN0LmFkZCgnbWVzc2FnZUJsb2NrJyk7XG4gIGJvdE1lc3NhZ2UuYXBwZW5kQ2hpbGQobWVzc2FnZUJsb2NrKTtcblxuICByZXR1cm4gbWVzc2FnZUJsb2NrO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tbWFuZEZhbHNlKHNldHRpbmdzOiBCTU9TZXR0aW5ncywgcGx1Z2luOiBCTU9HUFQpIHtcbiAgY29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJykgYXMgSFRNTERpdkVsZW1lbnQ7XG4gIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkaXNwbGF5Q29tbWFuZEJvdE1lc3NhZ2Uoc2V0dGluZ3MsIG1lc3NhZ2VIaXN0b3J5LCAnQ29tbWFuZCBub3QgcmVjb2duaXplZC4nKTtcbiAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RNZXNzYWdlRGl2KTtcbiAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09IENPTU1BTkQgRlVOQ1RJT05TID09PT09PT09PT09PT09PT09PT1cblxuLy8gYC9oZWxwYCBmb3IgaGVscCBjb21tYW5kc1xuZXhwb3J0IGZ1bmN0aW9uIGNvbW1hbmRIZWxwKHNldHRpbmdzOiBCTU9TZXR0aW5ncykge1xuXG4gIGNvbnN0IGNvbW1hbmRCb3RNZXNzYWdlID1cbiAgYDxoMj5Db21tYW5kczwvaDI+XG4gIDxwPjxjb2RlPi9tb2RlbCBcIltNT0RFTC1OQU1FXVwiIG9yIFtWQUxVRV08L2NvZGU+IC0gTGlzdCBvciBjaGFuZ2UgbW9kZWwuPC9wPlxuICA8cD48Y29kZT4vcHJvbXB0IFwiW1BST01QVC1OQU1FXVwiIG9yIFtWQUxVRV08L2NvZGU+IC0gTGlzdCBvciBjaGFuZ2UgcHJvbXB0LjwvcD5cbiAgPHA+PGNvZGU+L3Byb21wdCBjbGVhcjwvY29kZT4gLSBDbGVhciBwcm9tcHQuPC9wPlxuICA8cD48Y29kZT4vc3lzdGVtIFwiW1BST01QVF1cIjwvY29kZT4gLSBDaGFuZ2Ugc3lzdGVtIHNldHRpbmcuPC9wPlxuICA8cD48Y29kZT4vbWF4dG9rZW5zIFtWQUxVRV08L2NvZGU+IC0gU2V0IG1heCB0b2tlbnMuPC9wPlxuICA8cD48Y29kZT4vdGVtcCBbVkFMVUVdPC9jb2RlPiAtIENoYW5nZSB0ZW1wZXJhdHVyZSByYW5nZSAwIGZyb20gdG8gMS48L3A+XG4gIDxwPjxjb2RlPi9yZWYgb24gfCBvZmY8L2NvZGU+IC0gVHVybiBvbiBvciBvZmYgXCJyZWZlcmVuY2UgY3VycmVudCBub3RlXCIuPC9wPlxuICA8cD48Y29kZT4vYXBwZW5kPC9jb2RlPiAtIEFwcGVuZCBjdXJyZW50IGNoYXQgaGlzdG9yeSB0byBjdXJyZW50IGFjdGl2ZSBub3RlLjwvcD5cbiAgPHA+PGNvZGU+L3NhdmU8L2NvZGU+IC0gU2F2ZSBjdXJyZW50IGNoYXQgaGlzdG9yeSB0byBhIG5vdGUuPC9wPlxuICA8cD48Y29kZT4vY2xlYXI8L2NvZGU+IG9yIDxjb2RlPi9jPC9jb2RlPiAtIENsZWFyIGNoYXQgaGlzdG9yeS48L3A+XG4gIDxwPjxjb2RlPi9zdG9wPC9jb2RlPiBvciA8Y29kZT4vczwvY29kZT4gLSBbU1RSRUFNSU5HIE1PREVMUyBPTkxZXTogU3RvcCBmZXRjaGluZyByZXNwb25zZS48L3A+YDtcblxuICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgY29uc3QgYm90TWVzc2FnZURpdiA9IGRpc3BsYXlDb21tYW5kQm90TWVzc2FnZShzZXR0aW5ncywgbWVzc2FnZUhpc3RvcnksIGNvbW1hbmRCb3RNZXNzYWdlKTtcbiAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RNZXNzYWdlRGl2KTtcbn1cblxuLy8gYC9tb2RlbCBcIltWQUxVRV1cImAgdG8gY2hhbmdlIG1vZGVsLlxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbW1hbmRNb2RlbChpbnB1dDogc3RyaW5nLCBzZXR0aW5nczogQk1PU2V0dGluZ3MsIHBsdWdpbjogQk1PR1BUKSB7XG4gIGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpIGFzIEhUTUxEaXZFbGVtZW50O1xuICAvLyBDaGVjayBpZiB0aGUgdXNlciBoYXMgbm90IHNwZWNpZmllZCBhIG1vZGVsIGFmdGVyIHRoZSBcIi9tb2RlbFwiIGNvbW1hbmRcbiAgaWYgKCFpbnB1dC5zcGxpdCgnICcpWzFdKSB7XG5cbiAgICAvLyBMb29wIHRocm91Z2ggYWxsTW9kZWxzIGFuZCBjcmVhdGUgbGlzdCBpdGVtc1xuICAgIGNvbnN0IG1vZGVsTGlzdEl0ZW1zID0gc2V0dGluZ3MuYWxsTW9kZWxzLm1hcChtb2RlbCA9PiBgPGxpPiR7bW9kZWx9PC9saT5gKS5qb2luKCcnKTtcblxuICAgIGxldCBjdXJyZW50TW9kZWwgPSBzZXR0aW5ncy5nZW5lcmFsLm1vZGVsO1xuXG4gICAgLy8gQ2hlY2sgaWYgY3VycmVudE1vZGVsIGlzIGVtcHR5LCBhbmQgc2V0IGl0IHRvIFwiRW1wdHlcIiBpZiBpdCBpc1xuICAgIGlmICghY3VycmVudE1vZGVsKSB7XG4gICAgICBjdXJyZW50TW9kZWwgPSAnRW1wdHknO1xuICAgIH1cbiAgXG4gICAgY29uc3QgY29tbWFuZEJvdE1lc3NhZ2UgPSBcbiAgICBgPGgyPk1vZGVsczwvaDI+XG4gICAgPHA+PGI+Q3VycmVudCBNb2RlbDo8L2I+ICR7Y3VycmVudE1vZGVsfTwvcD5cbiAgICA8b2w+JHttb2RlbExpc3RJdGVtc308L29sPmA7XG5cbiAgICBjb25zdCBib3RNZXNzYWdlRGl2ID0gZGlzcGxheUNvbW1hbmRCb3RNZXNzYWdlKHNldHRpbmdzLCBtZXNzYWdlSGlzdG9yeSwgY29tbWFuZEJvdE1lc3NhZ2UpO1xuICAgIG1lc3NhZ2VDb250YWluZXIuYXBwZW5kQ2hpbGQoYm90TWVzc2FnZURpdik7XG4gIH1cblxuICAvLyBDaGVjayBpZiB0aGUgdXNlciBoYXMgc3BlY2lmaWVkIGEgbW9kZWwgYWZ0ZXIgdGhlIFwiL21vZGVsXCIgY29tbWFuZFxuICBpZiAoaW5wdXQuc3BsaXQoJyAnKVsxXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgaW5wdXRNb2RlbCA9IGlucHV0LnNwbGl0KCcgJylbMV0ucmVwbGFjZSgvXlwiKC4qKVwiJC8sICckMScpO1xuXG4gICAgY29uc3QgbW9kZWxBbGlhc2VzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge307XG5cbiAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBzZXR0aW5ncy5hbGxNb2RlbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IG1vZGVsID0gc2V0dGluZ3MuYWxsTW9kZWxzW2kgLSAxXTtcbiAgICAgIG1vZGVsQWxpYXNlc1tpXSA9IG1vZGVsO1xuICAgIH1cblxuICAgIGlmIChPYmplY3QuZW50cmllcyhtb2RlbEFsaWFzZXMpLmZpbmQoKFtrZXksIHZhbF0pID0+IGtleSA9PT0gaW5wdXRNb2RlbCkpe1xuICAgICAgc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCA9IG1vZGVsQWxpYXNlc1tpbnB1dE1vZGVsXTtcbiAgICAgIGNvbnN0IGNvbW1hbmRCb3RNZXNzYWdlID0gYFVwZGF0ZWQgTW9kZWwgdG8gPGI+JHtzZXR0aW5ncy5nZW5lcmFsLm1vZGVsfTwvYj5gO1xuICAgICAgY29uc3QgYm90TWVzc2FnZURpdiA9IGRpc3BsYXlDb21tYW5kQm90TWVzc2FnZShzZXR0aW5ncywgbWVzc2FnZUhpc3RvcnksIGNvbW1hbmRCb3RNZXNzYWdlKTtcbiAgICAgIG1lc3NhZ2VDb250YWluZXIuYXBwZW5kQ2hpbGQoYm90TWVzc2FnZURpdik7XG4gICAgfVxuICAgIGVsc2UgaWYgKE9iamVjdC5lbnRyaWVzKG1vZGVsQWxpYXNlcykuZmluZCgoW2tleSwgdmFsXSkgPT4gdmFsID09PSBpbnB1dE1vZGVsKSkge1xuICAgICAgc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCA9IG1vZGVsQWxpYXNlc1tPYmplY3Qua2V5cyhtb2RlbEFsaWFzZXMpLmZpbmQoa2V5ID0+IG1vZGVsQWxpYXNlc1trZXldID09PSBpbnB1dE1vZGVsKSB8fCAnJ107XG4gICAgICBjb25zdCBjb21tYW5kQm90TWVzc2FnZSA9IGBVcGRhdGVkIE1vZGVsIHRvIDxiPiR7c2V0dGluZ3MuZ2VuZXJhbC5tb2RlbH08L2I+YDtcbiAgICAgIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkaXNwbGF5Q29tbWFuZEJvdE1lc3NhZ2Uoc2V0dGluZ3MsIG1lc3NhZ2VIaXN0b3J5LCBjb21tYW5kQm90TWVzc2FnZSk7XG4gICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGJvdE1lc3NhZ2VEaXYpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IGNvbW1hbmRCb3RNZXNzYWdlID0gYE1vZGVsICcke2lucHV0TW9kZWx9JyBkb2VzIG5vdCBleGlzdCBmb3IgdGhpcyBBUEkga2V5LmA7XG4gICAgICBjb25zdCBib3RNZXNzYWdlRGl2ID0gZGlzcGxheUNvbW1hbmRCb3RNZXNzYWdlKHNldHRpbmdzLCBtZXNzYWdlSGlzdG9yeSwgY29tbWFuZEJvdE1lc3NhZ2UpO1xuICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RNZXNzYWdlRGl2KTtcbiAgICAgIG5ldyBOb3RpY2UoJ0ludmFsaWQgbW9kZWwuJyk7XG4gICAgfVxuXG4gICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgIHJldHVybiBzZXR0aW5ncztcbiAgfVxufVxuXG4vLyBgL3Byb21wdCBcIltWQUxVRV1cImAgdG8gY2hhbmdlIHByb21wdC5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb21tYW5kUHJvbXB0KGlucHV0OiBzdHJpbmcsIHNldHRpbmdzOiBCTU9TZXR0aW5ncywgcGx1Z2luOiBCTU9HUFQpIHtcbiAgY29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJykgYXMgSFRNTERpdkVsZW1lbnQ7XG5cbiAgaWYgKCFzZXR0aW5ncy5wcm9tcHRzLnByb21wdEZvbGRlclBhdGgpIHtcbiAgICBuZXcgTm90aWNlKCdQcm9tcHQgZm9sZGVyIHBhdGggbm90IHNldC4nKTtcbiAgICBjb25zdCBjb21tYW5kQm90TWVzc2FnZSA9ICc8cD5Qcm9tcHQgZm9sZGVyIHBhdGggbm90IHNldC48L3A+JztcblxuICAgIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkaXNwbGF5Q29tbWFuZEJvdE1lc3NhZ2Uoc2V0dGluZ3MsIG1lc3NhZ2VIaXN0b3J5LCBjb21tYW5kQm90TWVzc2FnZSk7XG4gICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RNZXNzYWdlRGl2KTtcbiAgICByZXR1cm47XG4gIH1cblxuICAvLyBGZXRjaGluZyBmaWxlcyBmcm9tIHRoZSBzcGVjaWZpZWQgZm9sZGVyXG4gIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldEZpbGVzKCkuZmlsdGVyKChmaWxlKSA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aChwbHVnaW4uc2V0dGluZ3MucHJvbXB0cy5wcm9tcHRGb2xkZXJQYXRoKSk7XG5cbiAgLy8gU29ydGluZyB0aGUgZmlsZXMgYXJyYXkgYWxwaGFiZXRpY2FsbHkgYnkgZmlsZSBuYW1lXG4gIGZpbGVzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xuXG4gIC8vIENoZWNrIGlmIHRoZSB1c2VyIGhhcyBub3Qgc3BlY2lmaWVkIGEgcHJvbXB0IGFmdGVyIHRoZSBcIi9wcm9tcHRcIiBjb21tYW5kXG4gIGlmICghaW5wdXQuc3BsaXQoJyAnKVsxXSkge1xuXG4gICAgLy8gTG9vcCB0aHJvdWdoIGZpbGVzIGFuZCBjcmVhdGUgbGlzdCBpdGVtcywgcmVtb3ZpbmcgdGhlIGZpbGUgZXh0ZW5zaW9uXG4gICAgY29uc3QgZmlsZUxpc3RJdGVtcyA9IGZpbGVzLm1hcChmaWxlID0+IHtcbiAgICAgIGNvbnN0IGZpbGVOYW1lV2l0aG91dEV4dGVuc2lvbiA9IGZpbGUubmFtZS5yZXBsYWNlKC9cXC5bXi8uXSskLywgJycpOyAvLyBSZW1vdmluZyB0aGUgbGFzdCBkb3QgYW5kIHdoYXQgZm9sbG93c1xuICAgICAgcmV0dXJuIGA8bGk+JHtmaWxlTmFtZVdpdGhvdXRFeHRlbnNpb259PC9saT5gO1xuICAgIH0pLmpvaW4oJycpO1xuXG4gICAgbGV0IGN1cnJlbnRQcm9tcHQgPSBzZXR0aW5ncy5wcm9tcHRzLnByb21wdC5yZXBsYWNlKC9cXC5bXi8uXSskLywgJycpOyAvLyBSZW1vdmluZyB0aGUgZmlsZSBleHRlbnNpb25cblxuICAgIC8vIENoZWNrIGlmIGN1cnJlbnRQcm9tcHQgaXMgZW1wdHksIGFuZCBzZXQgaXQgdG8gXCJFbXB0eVwiIGlmIGl0IGlzXG4gICAgaWYgKCFjdXJyZW50UHJvbXB0KSB7XG4gICAgICBjdXJyZW50UHJvbXB0ID0gJ0VtcHR5JztcbiAgICB9XG5cbiAgICBjb25zdCBjb21tYW5kQm90TWVzc2FnZSA9IFxuICAgIGA8aDI+UHJvbXB0czwvaDI+XG4gICAgICA8cD48Yj5DdXJyZW50IHByb21wdDo8L2I+ICR7Y3VycmVudFByb21wdH08L3A+XG4gICAgICA8b2w+JHtmaWxlTGlzdEl0ZW1zfTwvb2w+YDtcblxuICAgIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkaXNwbGF5Q29tbWFuZEJvdE1lc3NhZ2Uoc2V0dGluZ3MsIG1lc3NhZ2VIaXN0b3J5LCBjb21tYW5kQm90TWVzc2FnZSk7XG4gICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RNZXNzYWdlRGl2KTtcblxuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIENoZWNrIGlmIHRoZSB1c2VyIGhhcyBzcGVjaWZpZWQgYSBwcm9tcHQgYWZ0ZXIgdGhlIFwiL3Byb21wdFwiIGNvbW1hbmRcbiAgaWYgKGlucHV0LnN0YXJ0c1dpdGgoJy9wcm9tcHQnKSkge1xuICAgIGxldCBpbnB1dFZhbHVlID0gaW5wdXQuc3Vic3RyaW5nKCcvcHJvbXB0ICcubGVuZ3RoKS50cmltKCk7XG5cbiAgICAvLyBSZW1vdmUgcXVvdGF0aW9uIG1hcmtzIGlmIHByZXNlbnRcbiAgICBpZiAoKGlucHV0VmFsdWUuc3RhcnRzV2l0aCgnXCInKSAmJiBpbnB1dFZhbHVlLmVuZHNXaXRoKCdcIicpKSB8fFxuICAgICAgICAoaW5wdXRWYWx1ZS5zdGFydHNXaXRoKCdcXCcnKSAmJiBpbnB1dFZhbHVlLmVuZHNXaXRoKCdcXCcnKSkpIHtcbiAgICAgIGlucHV0VmFsdWUgPSBpbnB1dFZhbHVlLnN1YnN0cmluZygxLCBpbnB1dFZhbHVlLmxlbmd0aCAtIDEpO1xuICAgIH1cblxuICAgIC8vIFNldCB0byBkZWZhdWx0IG9yIGVtcHR5IGlmIHRoZSBpbnB1dCBpcyAnY2xlYXInIG9yICdjJ1xuICAgIGlmIChpbnB1dFZhbHVlID09PSAnY2xlYXInIHx8IGlucHV0VmFsdWUgPT09ICdjJykge1xuICAgICAgc2V0dGluZ3MucHJvbXB0cy5wcm9tcHQgPSAnJzsgLy8gU2V0IHRvIGRlZmF1bHQgb3IgZW1wdHlcbiAgICAgIGNvbnN0IGNvbW1hbmRCb3RNZXNzYWdlID0gJ1Byb21wdCBjbGVhcmVkLic7XG4gICAgICBjb25zdCBib3RNZXNzYWdlRGl2ID0gZGlzcGxheUNvbW1hbmRCb3RNZXNzYWdlKHNldHRpbmdzLCBtZXNzYWdlSGlzdG9yeSwgY29tbWFuZEJvdE1lc3NhZ2UpO1xuICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RNZXNzYWdlRGl2KTtcblxuICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgcmV0dXJuIHNldHRpbmdzO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBwcm9tcHRBbGlhc2VzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge307XG4gICAgXG4gICAgLy8gQ3JlYXRlIGFsaWFzZXMgZm9yIGVhY2ggZmlsZSAocHJvbXB0KVxuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IGZpbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBmaWxlTmFtZVdpdGhvdXRFeHRlbnNpb24gPSBmaWxlc1tpIC0gMV0ubmFtZS5yZXBsYWNlKC9cXC5bXi8uXSskLywgJycpO1xuICAgICAgcHJvbXB0QWxpYXNlc1tpLnRvU3RyaW5nKCldID0gZmlsZU5hbWVXaXRob3V0RXh0ZW5zaW9uO1xuICAgIH1cblxuICAgIGxldCBjdXJyZW50TW9kZWw7XG4gICAgaWYgKHByb21wdEFsaWFzZXNbaW5wdXRWYWx1ZV0pIHtcbiAgICAgIC8vIElmIGlucHV0IG1hdGNoZXMgYSBrZXkgaW4gcHJvbXB0QWxpYXNlc1xuICAgICAgc2V0dGluZ3MucHJvbXB0cy5wcm9tcHQgPSBwcm9tcHRBbGlhc2VzW2lucHV0VmFsdWVdICsgJy5tZCc7XG4gICAgICBjdXJyZW50TW9kZWwgPSBzZXR0aW5ncy5wcm9tcHRzLnByb21wdC5yZXBsYWNlKC9cXC5bXi8uXSskLywgJycpOyAvLyBSZW1vdmluZyB0aGUgZmlsZSBleHRlbnNpb25cbiAgICAgIGNvbnN0IGNvbW1hbmRCb3RNZXNzYWdlID0gYDxiPlVwZGF0ZWQgUHJvbXB0IHRvPC9iPiAnJHtjdXJyZW50TW9kZWx9J2A7XG4gICAgICBjb25zdCBib3RNZXNzYWdlRGl2ID0gZGlzcGxheUNvbW1hbmRCb3RNZXNzYWdlKHNldHRpbmdzLCBtZXNzYWdlSGlzdG9yeSwgY29tbWFuZEJvdE1lc3NhZ2UpO1xuICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RNZXNzYWdlRGl2KTtcbiAgICB9IGVsc2UgaWYgKE9iamVjdC52YWx1ZXMocHJvbXB0QWxpYXNlcykuaW5jbHVkZXMoaW5wdXRWYWx1ZSkpIHtcbiAgICAgIC8vIElmIGlucHV0IG1hdGNoZXMgYSB2YWx1ZSBpbiBwcm9tcHRBbGlhc2VzXG4gICAgICBzZXR0aW5ncy5wcm9tcHRzLnByb21wdCA9IGlucHV0VmFsdWUgKyAnLm1kJztcbiAgICAgIGN1cnJlbnRNb2RlbCA9IHNldHRpbmdzLnByb21wdHMucHJvbXB0LnJlcGxhY2UoL1xcLlteLy5dKyQvLCAnJyk7IC8vIFJlbW92aW5nIHRoZSBmaWxlIGV4dGVuc2lvblxuICAgICAgY29uc3QgY29tbWFuZEJvdE1lc3NhZ2UgPSBgPGI+VXBkYXRlZCBQcm9tcHQgdG88L2I+ICcke2N1cnJlbnRNb2RlbH0nYDtcbiAgICAgIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkaXNwbGF5Q29tbWFuZEJvdE1lc3NhZ2Uoc2V0dGluZ3MsIG1lc3NhZ2VIaXN0b3J5LCBjb21tYW5kQm90TWVzc2FnZSk7XG4gICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGJvdE1lc3NhZ2VEaXYpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiB0aGUgaW5wdXQgcHJvbXB0IGRvZXMgbm90IGV4aXN0XG4gICAgICBjb25zdCBjb21tYW5kQm90TWVzc2FnZSA9IGBQcm9tcHQgJyR7aW5wdXRWYWx1ZX0nIGRvZXMgbm90IGV4aXN0LmA7XG4gICAgICBjb25zdCBib3RNZXNzYWdlRGl2ID0gZGlzcGxheUNvbW1hbmRCb3RNZXNzYWdlKHNldHRpbmdzLCBtZXNzYWdlSGlzdG9yeSwgY29tbWFuZEJvdE1lc3NhZ2UpO1xuICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RNZXNzYWdlRGl2KTtcbiAgICAgIG5ldyBOb3RpY2UoJ0ludmFsaWQgcHJvbXB0LicpO1xuICAgIH1cblxuICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICByZXR1cm4gc2V0dGluZ3M7XG4gIH1cblxufVxuXG4vLyBgL3JlZmAgdG8gdHVybiBvbi9vZmYgcmVmZXJlbmNlQ3VycmVudE5vdGUuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tbWFuZFJlZmVyZW5jZShpbnB1dDogc3RyaW5nLCBzZXR0aW5nczogQk1PU2V0dGluZ3MsIHBsdWdpbjogQk1PR1BUKSB7XG4gIGxldCBjb21tYW5kQm90TWVzc2FnZSA9ICcnO1xuICBjb25zdCByZWZlcmVuY2VDdXJyZW50Tm90ZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVmZXJlbmNlQ3VycmVudE5vdGUnKTtcbiAgY29uc3QgaW5wdXRWYWx1ZSA9IGlucHV0LnNwbGl0KCcgJylbMV0/LnRvTG93ZXJDYXNlKCk7XG5cbiAgaWYgKGlucHV0VmFsdWUgPT09ICd0cnVlJyB8fCBpbnB1dFZhbHVlID09PSAnb24nKSB7XG4gICAgc2V0dGluZ3MuZ2VuZXJhbC5hbGxvd1JlZmVyZW5jZUN1cnJlbnROb3RlID0gdHJ1ZTtcbiAgICAgIGlmIChyZWZlcmVuY2VDdXJyZW50Tm90ZUVsZW1lbnQpIHtcbiAgICAgICAgICByZWZlcmVuY2VDdXJyZW50Tm90ZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICB9XG4gICAgICBjb21tYW5kQm90TWVzc2FnZSArPSAnPHA+PHN0cm9uZz5SZWZlcmVuY2UgdXBkYXRlZDogb248L3N0cm9uZz48L3A+JztcbiAgfSBlbHNlIGlmIChpbnB1dFZhbHVlID09PSAnZmFsc2UnIHx8IGlucHV0VmFsdWUgPT09ICdvZmYnKSB7XG4gICAgc2V0dGluZ3MuZ2VuZXJhbC5hbGxvd1JlZmVyZW5jZUN1cnJlbnROb3RlID0gZmFsc2U7XG4gICAgICBpZiAocmVmZXJlbmNlQ3VycmVudE5vdGVFbGVtZW50KSB7XG4gICAgICAgICAgcmVmZXJlbmNlQ3VycmVudE5vdGVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICB9XG4gICAgICBjb21tYW5kQm90TWVzc2FnZSArPSAnPHA+PHN0cm9uZz5SZWZlcmVuY2UgdXBkYXRlZDogb2ZmPC9zdHJvbmc+PC9wPic7XG4gIH0gZWxzZSB7XG4gICAgY29tbWFuZEJvdE1lc3NhZ2UgKz0gJzxwPjxzdHJvbmc+VHlwZSBgL3JlZiBvbmAgb3IgYC9yZWYgb2ZmYCB0byB0dXJuIG9uL29mZiByZWZlcmVuY2UgY3VycmVudCBub3RlLjwvc3Ryb25nPjwvcD4nO1xuICB9XG5cbiAgY29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJykgYXMgSFRNTERpdkVsZW1lbnQ7XG4gIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkaXNwbGF5Q29tbWFuZEJvdE1lc3NhZ2Uoc2V0dGluZ3MsIG1lc3NhZ2VIaXN0b3J5LCBjb21tYW5kQm90TWVzc2FnZSk7XG4gIG1lc3NhZ2VDb250YWluZXIuYXBwZW5kQ2hpbGQoYm90TWVzc2FnZURpdik7XG5cbiAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xufVxuXG4vLyBgL3RlbXAgXCJWQUxVRVwiYCB0byBjaGFuZ2UgdGhlIHRlbXBlcmF0dXJlLlxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbW1hbmRUZW1wZXJhdHVyZShpbnB1dDogc3RyaW5nLCBzZXR0aW5nczogQk1PU2V0dGluZ3MsIHBsdWdpbjogQk1PR1BUKSB7XG4gIGNvbnN0IGlucHV0VmFsdWUgPSBpbnB1dC5zcGxpdCgnICcpWzFdO1xuICBjb25zdCBmbG9hdFZhbHVlID0gcGFyc2VGbG9hdChpbnB1dFZhbHVlKTtcbiAgbGV0IHRlbXBlcmF0dXJlU2V0dGluZ01lc3NhZ2U6IHN0cmluZztcblxuICBpZiAoc2V0dGluZ3MgJiYgIWlzTmFOKGZsb2F0VmFsdWUpKSB7XG4gICAgaWYgKGZsb2F0VmFsdWUgPCAwLjAwKSB7XG4gICAgICBzZXR0aW5ncy5nZW5lcmFsLnRlbXBlcmF0dXJlID0gJzAuMDAnO1xuICAgIH0gZWxzZSBpZiAoZmxvYXRWYWx1ZSA+IDIuMDApIHtcbiAgICAgIHNldHRpbmdzLmdlbmVyYWwudGVtcGVyYXR1cmUgPSAnMi4wMCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldHRpbmdzLmdlbmVyYWwudGVtcGVyYXR1cmUgPSBmbG9hdFZhbHVlLnRvRml4ZWQoMik7XG4gICAgfVxuICAgIHRlbXBlcmF0dXJlU2V0dGluZ01lc3NhZ2UgPSBgVGVtcGVyYXR1cmUgdXBkYXRlZDogJHtzZXR0aW5ncy5nZW5lcmFsLnRlbXBlcmF0dXJlfWA7XG4gIH0gZWxzZSB7XG4gICAgdGVtcGVyYXR1cmVTZXR0aW5nTWVzc2FnZSA9IGBDdXJyZW50IHRlbXBlcmF0dXJlOiAke3NldHRpbmdzLmdlbmVyYWwudGVtcGVyYXR1cmV9YDtcbiAgfVxuXG4gIGNvbnN0IGNvbW1hbmRCb3RNZXNzYWdlID0gYDxwPjxzdHJvbmc+JHt0ZW1wZXJhdHVyZVNldHRpbmdNZXNzYWdlfTwvc3Ryb25nPjwvcD5gO1xuXG4gIGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpIGFzIEhUTUxEaXZFbGVtZW50O1xuICBjb25zdCBib3RNZXNzYWdlRGl2ID0gZGlzcGxheUNvbW1hbmRCb3RNZXNzYWdlKHNldHRpbmdzLCBtZXNzYWdlSGlzdG9yeSwgY29tbWFuZEJvdE1lc3NhZ2UpO1xuICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGJvdE1lc3NhZ2VEaXYpO1xuXG4gIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbn1cblxuLy8gYC9tYXh0b2tlbnNgIHRvIGNoYW5nZSBtYXhfdG9rZW5zLlxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbW1hbmRNYXhUb2tlbnMoaW5wdXQ6IHN0cmluZywgc2V0dGluZ3M6IEJNT1NldHRpbmdzLCBwbHVnaW46IEJNT0dQVCkge1xuICBsZXQgY29tbWFuZEJvdE1lc3NhZ2UgPSAnJztcbiAgY29uc3QgY29tbWFuZFBhcnRzID0gaW5wdXQuc3BsaXQoJyAnKTtcbiAgY29uc3QgY29tbWFuZEFjdGlvbiA9IGNvbW1hbmRQYXJ0c1sxXSA/IGNvbW1hbmRQYXJ0c1sxXS50b0xvd2VyQ2FzZSgpIDogJyc7XG4gIGxldCBtYXhUb2tlbnNTZXR0aW5nTWVzc2FnZTogc3RyaW5nO1xuXG4gIC8vIENoZWNrIGZvciBjbGVhciBjb21tYW5kIGZpcnN0XG4gIGlmIChjb21tYW5kQWN0aW9uID09PSAnYycgfHwgY29tbWFuZEFjdGlvbiA9PT0gJ2NsZWFyJykge1xuICAgIHNldHRpbmdzLmdlbmVyYWwubWF4X3Rva2VucyA9ICcnO1xuICAgIG1heFRva2Vuc1NldHRpbmdNZXNzYWdlID0gJ01heCB0b2tlbnMgY2xlYXJlZC4nO1xuICB9IGVsc2UgaWYgKGNvbW1hbmRBY3Rpb24gIT09ICcnKSB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZSA9IHBhcnNlSW50KGNvbW1hbmRBY3Rpb24pO1xuXG4gICAgaWYgKCFpc05hTihpbnB1dFZhbHVlKSAmJiBpbnB1dFZhbHVlID49IDApIHtcbiAgICAgIC8vIFVwZGF0ZSBtYXhfdG9rZW5zIHdpdGggdGhlIHZhbGlkIGludGVnZXIgdmFsdWVcbiAgICAgIHNldHRpbmdzLmdlbmVyYWwubWF4X3Rva2VucyA9IGlucHV0VmFsdWUudG9TdHJpbmcoKTtcbiAgICAgIG1heFRva2Vuc1NldHRpbmdNZXNzYWdlID0gYE1heCB0b2tlbnMgdXBkYXRlZDogJHtpbnB1dFZhbHVlfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElucHV0IGlzIG5vdCBhIHZhbGlkIGludGVnZXIgb3IgaXMgbmVnYXRpdmVcbiAgICAgIG1heFRva2Vuc1NldHRpbmdNZXNzYWdlID0gJ01heCB0b2tlbnMgdXBkYXRlOiBpbnZhbGlkJztcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gTm8gYWN0aW9uIHNwZWNpZmllZFxuICAgIGlmIChzZXR0aW5ncy5nZW5lcmFsLm1heF90b2tlbnMgPT09ICcnKSB7XG4gICAgICBtYXhUb2tlbnNTZXR0aW5nTWVzc2FnZSA9ICdDdXJyZW50IG1heCB0b2tlbnM6IEVtcHR5JztcbiAgICB9IGVsc2Uge1xuICAgICAgbWF4VG9rZW5zU2V0dGluZ01lc3NhZ2UgPSBgQ3VycmVudCBtYXggdG9rZW5zOiAke3NldHRpbmdzLmdlbmVyYWwubWF4X3Rva2Vuc31gO1xuICAgIH1cbiAgfVxuICBcbiAgY29tbWFuZEJvdE1lc3NhZ2UgKz0gYDxwPjxzdHJvbmc+JHttYXhUb2tlbnNTZXR0aW5nTWVzc2FnZX08L3N0cm9uZz48L3A+YDtcbiAgY29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJykgYXMgSFRNTERpdkVsZW1lbnQ7XG4gIGNvbnN0IGJvdE1lc3NhZ2VEaXYgPSBkaXNwbGF5Q29tbWFuZEJvdE1lc3NhZ2Uoc2V0dGluZ3MsIG1lc3NhZ2VIaXN0b3J5LCBjb21tYW5kQm90TWVzc2FnZSk7XG4gIG1lc3NhZ2VDb250YWluZXIuYXBwZW5kQ2hpbGQoYm90TWVzc2FnZURpdik7XG5cbiAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xufVxuXG4vLyBgL3N5c3RlbSBcIltWQUxVRV1cImAgdG8gY2hhbmdlIHN5c3RlbSBwcm9tcHRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb21tYW5kU3lzdGVtKGlucHV0OiBzdHJpbmcsIHNldHRpbmdzOiBCTU9TZXR0aW5ncywgcGx1Z2luOiBCTU9HUFQpIHtcbiAgbGV0IGNvbW1hbmRCb3RNZXNzYWdlID0gJyc7XG4gIGNvbnN0IGNvbW1hbmRQYXJ0cyA9IGlucHV0LnNwbGl0KCcgJyk7XG4gIGNvbnN0IGNvbW1hbmRBY3Rpb24gPSBjb21tYW5kUGFydHNbMV0gPyBjb21tYW5kUGFydHNbMV0udG9Mb3dlckNhc2UoKSA6ICcnO1xuICBsZXQgc3lzdGVtU2V0dGluZ01lc3NhZ2U6IHN0cmluZztcblxuICAvLyBDaGVjayBmb3IgY2xlYXIgY29tbWFuZCBmaXJzdFxuICBpZiAoY29tbWFuZEFjdGlvbiA9PT0gJ2MnIHx8IGNvbW1hbmRBY3Rpb24gPT09ICdjbGVhcicpIHtcbiAgICBzZXR0aW5ncy5nZW5lcmFsLnN5c3RlbV9yb2xlID0gJyc7XG4gICAgc3lzdGVtU2V0dGluZ01lc3NhZ2UgPSAnU3lzdGVtIGNsZWFyZWQuJztcbiAgfSBlbHNlIGlmIChjb21tYW5kQWN0aW9uICE9PSAnJykge1xuICAgIGNvbnN0IHN5c3RlbVByb21wdFZhbHVlID0gaW5wdXQubWF0Y2goL1snXCJdKFteJ1wiXSspWydcIl0vKSB8fCBbbnVsbCwgY29tbWFuZEFjdGlvbl07XG5cbiAgICBpZiAoc3lzdGVtUHJvbXB0VmFsdWVbMV0gIT09IG51bGwpIHtcbiAgICAgIC8vIFVwZGF0ZSBzeXN0ZW1fcm9sZSB3aXRoIHRoZSBwcm92aWRlZCB2YWx1ZVxuICAgICAgc2V0dGluZ3MuZ2VuZXJhbC5zeXN0ZW1fcm9sZSA9IHN5c3RlbVByb21wdFZhbHVlWzFdO1xuICAgICAgc3lzdGVtU2V0dGluZ01lc3NhZ2UgPSBgU3lzdGVtIHVwZGF0ZWQ6IFwiJHtzeXN0ZW1Qcm9tcHRWYWx1ZVsxXX1cImA7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEhhbmRsZSBjYXNlIHdoZXJlIG5vIHZhbGlkIHN5c3RlbSB2YWx1ZSBpcyBwcm92aWRlZFxuICAgICAgc3lzdGVtU2V0dGluZ01lc3NhZ2UgPSBgQ3VycmVudCBzeXN0ZW06IFwiJHtzZXR0aW5ncy5nZW5lcmFsLnN5c3RlbV9yb2xlfVwiYDtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gTm8gYWN0aW9uIHNwZWNpZmllZFxuICAgIHN5c3RlbVNldHRpbmdNZXNzYWdlID0gYEN1cnJlbnQgc3lzdGVtOiBcIiR7c2V0dGluZ3MuZ2VuZXJhbC5zeXN0ZW1fcm9sZX1cImA7XG4gIH1cbiAgXG4gIGNvbW1hbmRCb3RNZXNzYWdlICs9IGA8cD48c3Ryb25nPiR7c3lzdGVtU2V0dGluZ01lc3NhZ2V9PC9zdHJvbmc+PC9wPmA7XG4gIGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpIGFzIEhUTUxEaXZFbGVtZW50O1xuICBjb25zdCBib3RNZXNzYWdlRGl2ID0gZGlzcGxheUNvbW1hbmRCb3RNZXNzYWdlKHNldHRpbmdzLCBtZXNzYWdlSGlzdG9yeSwgY29tbWFuZEJvdE1lc3NhZ2UpO1xuICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGJvdE1lc3NhZ2VEaXYpO1xuXG4gIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbn1cblxuLy8gYC9hcHBlbmRgIHRvIGFwcGVuZCBjdXJyZW50IGNoYXQgaGlzdG9yeSB0byBjdXJyZW50IGFjdGl2ZSBub3RlLlxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbW1hbmRBcHBlbmQoc2V0dGluZ3M6IEJNT1NldHRpbmdzKSB7XG4gIGxldCBtYXJrZG93bkNvbnRlbnQgPSAnJztcblxuICBjb25zdCBhY3RpdmVGaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cbiAgaWYgKGFjdGl2ZUZpbGU/LmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgIGNvbnN0IGV4aXN0aW5nQ29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGFjdGl2ZUZpbGUpO1xuXG4gICAgLy8gUmV0cmlldmUgdXNlciBhbmQgY2hhdGJvdCBuYW1lc1xuICAgIGNvbnN0IHVzZXJOYW1lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy51c2VyTmFtZScpIGFzIE5vZGVMaXN0T2Y8SFRNTEhlYWRpbmdFbGVtZW50PjtcblxuICAgIGxldCB1c2VyTmFtZVRleHQgPSAnVVNFUic7XG4gICAgaWYgKHVzZXJOYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHVzZXJOYW1lTm9kZSA9IHVzZXJOYW1lc1swXTtcbiAgICAgICAgQXJyYXkuZnJvbSh1c2VyTmFtZU5vZGUuY2hpbGROb2RlcykuZm9yRWFjaCgobm9kZSkgPT4ge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIG5vZGUgaXMgYSB0ZXh0IG5vZGUgYW5kIGl0cyB0ZXh0Q29udGVudCBpcyBub3QgbnVsbFxuICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFICYmIG5vZGUudGV4dENvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICB1c2VyTmFtZVRleHQgPSBub2RlLnRleHRDb250ZW50LnRyaW0oKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBjaGF0Ym90TmFtZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhdGJvdE5hbWUnKSBhcyBOb2RlTGlzdE9mPEhUTUxIZWFkaW5nRWxlbWVudD47XG4gICAgY29uc3QgY2hhdGJvdE5hbWVUZXh0ID0gY2hhdGJvdE5hbWVzLmxlbmd0aCA+IDAgJiYgY2hhdGJvdE5hbWVzWzBdLnRleHRDb250ZW50ID8gY2hhdGJvdE5hbWVzWzBdLnRleHRDb250ZW50LnRvVXBwZXJDYXNlKCkgOiAnQVNTSVNUQU5UJztcblxuICAgIC8vIENoZWNrIGFuZCByZWFkIHRoZSBKU09OIGZpbGVcbiAgICBpZiAoYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZmlsZW5hbWVNZXNzYWdlSGlzdG9yeUpTT04pKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBqc29uQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIucmVhZChmaWxlbmFtZU1lc3NhZ2VIaXN0b3J5SlNPTik7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gSlNPTi5wYXJzZShqc29uQ29udGVudCk7XG5cbiAgICAgICAgLy8gRmlsdGVyIG91dCBtZXNzYWdlcyBzdGFydGluZyB3aXRoICcvJywgYW5kIHRoZSBhc3Npc3RhbnQncyByZXNwb25zZSBpbW1lZGlhdGVseSBmb2xsb3dpbmcgaXRcbiAgICAgICAgbGV0IHNraXBOZXh0ID0gZmFsc2U7XG4gICAgICAgIG1hcmtkb3duQ29udGVudCArPSBtZXNzYWdlc1xuICAgICAgICAuZmlsdGVyKChtZXNzYWdlSGlzdG9yeTogeyByb2xlOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZzsgfSwgaW5kZXg6IG51bWJlciwgYXJyYXk6IHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmc7IH1bXSkgPT4ge1xuICAgICAgICAgIGlmIChza2lwTmV4dCAmJiBtZXNzYWdlSGlzdG9yeS5yb2xlID09PSAnYXNzaXN0YW50Jykge1xuICAgICAgICAgICAgc2tpcE5leHQgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG1lc3NhZ2VIaXN0b3J5LmNvbnRlbnQuc3RhcnRzV2l0aCgnLycpIHx8IG1lc3NhZ2VIaXN0b3J5LmNvbnRlbnQuaW5jbHVkZXMoJ2Vycm9yQm90TWVzc2FnZScpKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBuZXh0IG1lc3NhZ2UgaXMgYWxzbyBmcm9tIHVzZXIgYW5kIHN0YXJ0cyB3aXRoICcvJyBvciBpZiBjdXJyZW50IGFzc2lzdGFudCBtZXNzYWdlIGNvbnRhaW5zIFwiZGlzcGxheUVycm9yQm90TWVzc2FnZVwiXG4gICAgICAgICAgICBza2lwTmV4dCA9IChpbmRleCArIDEgPCBhcnJheS5sZW5ndGggJiYgYXJyYXlbaW5kZXggKyAxXS5yb2xlID09PSAnYXNzaXN0YW50JykgfHwgbWVzc2FnZUhpc3Rvcnkucm9sZSA9PT0gJ2Fzc2lzdGFudCc7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KVxuICAgICAgICAubWFwKChtZXNzYWdlOiB7IHJvbGU6IHN0cmluZzsgY29udGVudDogc3RyaW5nOyB9KSA9PiB7XG4gICAgICAgICAgbGV0IHJvbGVUZXh0ID0gbWVzc2FnZS5yb2xlLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgcm9sZVRleHQgPSByb2xlVGV4dCA9PT0gJ1VTRVInID8gdXNlck5hbWVUZXh0IDogcm9sZVRleHQ7XG4gICAgICAgICAgcm9sZVRleHQgPSByb2xlVGV4dCA9PT0gJ0FTU0lTVEFOVCcgPyBjaGF0Ym90TmFtZVRleHQgOiByb2xlVGV4dDtcbiAgICAgICAgICByZXR1cm4gYCMjIyMjIyAke3JvbGVUZXh0fVxcbiR7bWVzc2FnZS5jb250ZW50fVxcbmA7XG4gICAgICAgIH0pXG4gICAgICAgIC5qb2luKCdcXG4nKTtcblxuICAgICAgICAgIGNvbnN0IGNvbW1hbmRCb3RNZXNzYWdlID0gJzxwPjxzdHJvbmc+TWVzc2FnZSBoaXN0b3J5IGFwcGVuZGVkLjwvc3Ryb25nPjwvcD4nO1xuXG4gICAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJykgYXMgSFRNTERpdkVsZW1lbnQ7XG4gICAgICAgICAgY29uc3QgYm90TWVzc2FnZURpdiA9IGRpc3BsYXlDb21tYW5kQm90TWVzc2FnZShzZXR0aW5ncywgbWVzc2FnZUhpc3RvcnksIGNvbW1hbmRCb3RNZXNzYWdlKTtcbiAgICAgICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGJvdE1lc3NhZ2VEaXYpO1xuXG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgICAgY29uc3QgYm90TWVzc2FnZURpdiA9IGRpc3BsYXlDb21tYW5kQm90TWVzc2FnZShzZXR0aW5ncywgbWVzc2FnZUhpc3RvcnksIGVycm9yKTtcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChib3RNZXNzYWdlRGl2KTtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBtZXNzYWdlIGhpc3Rvcnk6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjb25zdCB1cGRhdGVkQ29udGVudCA9IGV4aXN0aW5nQ29udGVudCArICdcXG4nICsgbWFya2Rvd25Db250ZW50O1xuXG4gICAgLy8gU2F2ZSB0aGUgdXBkYXRlZCBjb250ZW50IGJhY2sgdG8gdGhlIGFjdGl2ZSBmaWxlXG4gICAgYXdhaXQgYXBwLnZhdWx0Lm1vZGlmeShhY3RpdmVGaWxlLCB1cGRhdGVkQ29udGVudCk7XG4gICAgbmV3IE5vdGljZSgnQXBwZW5kZWQgY29udmVyc2F0aW9uLicpO1xuICB9XG4gIGVsc2Uge1xuICAgIG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBNYXJrZG93biBmaWxlIGRldGVjdGVkLicpO1xuICB9XG59XG5cblxuLy8gYC9zYXZlYCB0byBzYXZlIGN1cnJlbnQgY2hhdCBoaXN0b3J5IHRvIGEgbm90ZS5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb21tYW5kU2F2ZShzZXR0aW5nczogQk1PU2V0dGluZ3MpIHtcblxuICBsZXQgZm9sZGVyTmFtZSA9IHNldHRpbmdzLmNoYXRIaXN0b3J5LmNoYXRIaXN0b3J5UGF0aDtcbiAgLy8gQ2hlY2sgaWYgdGhlIGZvbGRlciBleGlzdHMsIGNyZWF0ZSBpdCBpZiBub3RcbiAgaWYgKCFhd2FpdCBhcHAudmF1bHQuYWRhcHRlci5leGlzdHMoZm9sZGVyTmFtZSkpIHtcbiAgICBhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlck5hbWUpO1xuICB9XG4gIGNvbnN0IGJhc2VGaWxlTmFtZSA9ICdDaGF0IEhpc3RvcnknO1xuICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gJy5tZCc7XG5cbiAgaWYgKGZvbGRlck5hbWUgJiYgIWZvbGRlck5hbWUuZW5kc1dpdGgoJy8nKSkge1xuICAgIGZvbGRlck5hbWUgKz0gJy8nO1xuICB9XG4gIFxuICAvLyBDcmVhdGUgYSBkYXRldGltZSBzdHJpbmcgdG8gYXBwZW5kIHRvIHRoZSBmaWxlIG5hbWVcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgY29uc3QgZGF0ZVRpbWVTdGFtcCA9IG5vdy5nZXRGdWxsWWVhcigpICsgJy0nIFxuICAgICAgICAgICAgICAgICAgICAgICAgKyAobm93LmdldE1vbnRoKCkgKyAxKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykgKyAnLScgXG4gICAgICAgICAgICAgICAgICAgICAgICArIG5vdy5nZXREYXRlKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpICsgJyAnIFxuICAgICAgICAgICAgICAgICAgICAgICAgKyBub3cuZ2V0SG91cnMoKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJykgKyAnLScgXG4gICAgICAgICAgICAgICAgICAgICAgICArIG5vdy5nZXRNaW51dGVzKCkudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpICsgJy0nIFxuICAgICAgICAgICAgICAgICAgICAgICAgKyBub3cuZ2V0U2Vjb25kcygpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKTtcblxuICB0cnkge1xuICAgIGxldCBtYXJrZG93bkNvbnRlbnQgPSAnJztcbiAgICBjb25zdCBhbGxGaWxlcyA9IGFwcC52YXVsdC5nZXRGaWxlcygpOyAvLyBSZXRyaWV2ZSBhbGwgZmlsZXMgZnJvbSB0aGUgdmF1bHRcblxuICAgIC8vIFJldHJpZXZlIG1vZGVsIG5hbWVcbiAgICBjb25zdCBtb2RlbE5hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGVsTmFtZScpIGFzIEhUTUxIZWFkaW5nRWxlbWVudDtcbiAgICBsZXQgbW9kZWxOYW1lID0gJ1Vua25vd24nOyAvLyBEZWZhdWx0IG1vZGVsIG5hbWVcbiAgICBpZiAobW9kZWxOYW1lRWxlbWVudCAmJiBtb2RlbE5hbWVFbGVtZW50LnRleHRDb250ZW50KSB7XG4gICAgICAgIG1vZGVsTmFtZSA9IG1vZGVsTmFtZUVsZW1lbnQudGV4dENvbnRlbnQucmVwbGFjZSgnTW9kZWw6ICcsICcnKS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IHRlbXBsYXRlRmlsZSA9IGFsbEZpbGVzLmZpbmQoZmlsZSA9PiBmaWxlLnBhdGgudG9Mb3dlckNhc2UoKSA9PT0gc2V0dGluZ3MuY2hhdEhpc3RvcnkudGVtcGxhdGVGaWxlUGF0aC50b0xvd2VyQ2FzZSgpKTtcblxuICAgIGlmICh0ZW1wbGF0ZUZpbGUpIHtcbiAgICAgIGxldCBmaWxlQ29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKHRlbXBsYXRlRmlsZSk7XG4gIFxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpbGUgY29udGVudCBoYXMgWUFNTCBmcm9udCBtYXR0ZXJcbiAgICAgIGlmICgvXi0tLVxccypbXFxzXFxTXSo/LS0tLy50ZXN0KGZpbGVDb250ZW50KSkge1xuICAgICAgICAgIC8vIEluc2VydCBtb2RlbCBuYW1lIGludG8gZXhpc3RpbmcgZnJvbnQgbWF0dGVyXG4gICAgICAgICAgZmlsZUNvbnRlbnQgPSBmaWxlQ29udGVudC5yZXBsYWNlKC9eLS0tLywgYC0tLVxcbm1vZGVsOiAke21vZGVsTmFtZX1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUHJlcGVuZCBuZXcgZnJvbnQgbWF0dGVyXG4gICAgICAgICAgZmlsZUNvbnRlbnQgPSBgLS0tXG4gIG1vZGVsOiAke21vZGVsTmFtZX1cbi0tLVxcbmAgKyBmaWxlQ29udGVudDtcbiAgICAgIH1cbiAgICAgIG1hcmtkb3duQ29udGVudCArPSBmaWxlQ29udGVudDtcbiAgfSBlbHNlIHtcbiAgICAgIC8vIFlBTUwgZnJvbnQgbWF0dGVyXG4gICAgICBtYXJrZG93bkNvbnRlbnQgKz0gXG4gICAgICBgLS0tXG4gIG1vZGVsOiAke21vZGVsTmFtZX1cbi0tLVxcbmA7XG4gIH1cblxuICAgIC8vIFJldHJpZXZlIHVzZXIgYW5kIGNoYXRib3QgbmFtZXNcbiAgICBjb25zdCB1c2VyTmFtZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudXNlck5hbWUnKSBhcyBOb2RlTGlzdE9mPEhUTUxIZWFkaW5nRWxlbWVudD47XG5cbiAgICBsZXQgdXNlck5hbWVUZXh0ID0gJ1VTRVInO1xuICAgIGlmICh1c2VyTmFtZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCB1c2VyTmFtZU5vZGUgPSB1c2VyTmFtZXNbMF07XG4gICAgICAgIEFycmF5LmZyb20odXNlck5hbWVOb2RlLmNoaWxkTm9kZXMpLmZvckVhY2goKG5vZGUpID0+IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBub2RlIGlzIGEgdGV4dCBub2RlIGFuZCBpdHMgdGV4dENvbnRlbnQgaXMgbm90IG51bGxcbiAgICAgICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSAmJiBub2RlLnRleHRDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgdXNlck5hbWVUZXh0ID0gbm9kZS50ZXh0Q29udGVudC50cmltKCkudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgY2hhdGJvdE5hbWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYXRib3ROYW1lJykgYXMgTm9kZUxpc3RPZjxIVE1MSGVhZGluZ0VsZW1lbnQ+O1xuICAgIGNvbnN0IGNoYXRib3ROYW1lVGV4dCA9IGNoYXRib3ROYW1lcy5sZW5ndGggPiAwICYmIGNoYXRib3ROYW1lc1swXS50ZXh0Q29udGVudCA/IGNoYXRib3ROYW1lc1swXS50ZXh0Q29udGVudC50b1VwcGVyQ2FzZSgpIDogJ0FTU0lTVEFOVCc7XG5cbiAgICAvLyBDaGVjayBhbmQgcmVhZCB0aGUgSlNPTiBmaWxlXG4gICAgaWYgKGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlbmFtZU1lc3NhZ2VIaXN0b3J5SlNPTikpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGpzb25Db250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGZpbGVuYW1lTWVzc2FnZUhpc3RvcnlKU09OKTtcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBKU09OLnBhcnNlKGpzb25Db250ZW50KTtcblxuICAgICAgICAvLyBGaWx0ZXIgb3V0IG1lc3NhZ2VzIHN0YXJ0aW5nIHdpdGggJy8nLCBhbmQgdGhlIGFzc2lzdGFudCdzIHJlc3BvbnNlIGltbWVkaWF0ZWx5IGZvbGxvd2luZyBpdFxuICAgICAgICBsZXQgc2tpcE5leHQgPSBmYWxzZTtcbiAgICAgICAgbWFya2Rvd25Db250ZW50ICs9IG1lc3NhZ2VzXG4gICAgICAgIC5maWx0ZXIoKG1lc3NhZ2VIaXN0b3J5OiB7IHJvbGU6IHN0cmluZzsgY29udGVudDogc3RyaW5nOyB9LCBpbmRleDogbnVtYmVyLCBhcnJheTogeyByb2xlOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZzsgfVtdKSA9PiB7XG4gICAgICAgICAgaWYgKHNraXBOZXh0ICYmIG1lc3NhZ2VIaXN0b3J5LnJvbGUgPT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICAgICAgICBza2lwTmV4dCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobWVzc2FnZUhpc3RvcnkuY29udGVudC5zdGFydHNXaXRoKCcvJykgfHwgbWVzc2FnZUhpc3RvcnkuY29udGVudC5pbmNsdWRlcygnZXJyb3JCb3RNZXNzYWdlJykpIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIG5leHQgbWVzc2FnZSBpcyBhbHNvIGZyb20gdXNlciBhbmQgc3RhcnRzIHdpdGggJy8nIG9yIGlmIGN1cnJlbnQgYXNzaXN0YW50IG1lc3NhZ2UgY29udGFpbnMgXCJkaXNwbGF5RXJyb3JCb3RNZXNzYWdlXCJcbiAgICAgICAgICAgIHNraXBOZXh0ID0gKGluZGV4ICsgMSA8IGFycmF5Lmxlbmd0aCAmJiBhcnJheVtpbmRleCArIDFdLnJvbGUgPT09ICdhc3Npc3RhbnQnKSB8fCBtZXNzYWdlSGlzdG9yeS5yb2xlID09PSAnYXNzaXN0YW50JztcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pXG4gICAgICAgIC5tYXAoKG1lc3NhZ2U6IHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmc7IH0pID0+IHtcbiAgICAgICAgICBsZXQgcm9sZVRleHQgPSBtZXNzYWdlLnJvbGUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICByb2xlVGV4dCA9IHJvbGVUZXh0ID09PSAnVVNFUicgPyB1c2VyTmFtZVRleHQgOiByb2xlVGV4dDtcbiAgICAgICAgICByb2xlVGV4dCA9IHJvbGVUZXh0ID09PSAnQVNTSVNUQU5UJyA/IGNoYXRib3ROYW1lVGV4dCA6IHJvbGVUZXh0O1xuICAgICAgICAgIHJldHVybiBgIyMjIyMjICR7cm9sZVRleHR9XFxuJHttZXNzYWdlLmNvbnRlbnR9XFxuYDtcbiAgICAgICAgfSlcbiAgICAgICAgLmpvaW4oJ1xcbicpO1xuXG4gICAgICAgICAgY29uc3QgY29tbWFuZEJvdE1lc3NhZ2UgPSAnPHA+PHN0cm9uZz5NZXNzYWdlIGhpc3Rvcnkgc2F2ZWQuPC9zdHJvbmc+PC9wPic7XG5cbiAgICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKSBhcyBIVE1MRGl2RWxlbWVudDtcbiAgICAgICAgICBjb25zdCBib3RNZXNzYWdlRGl2ID0gZGlzcGxheUNvbW1hbmRCb3RNZXNzYWdlKHNldHRpbmdzLCBtZXNzYWdlSGlzdG9yeSwgY29tbWFuZEJvdE1lc3NhZ2UpO1xuICAgICAgICAgIG1lc3NhZ2VDb250YWluZXIuYXBwZW5kQ2hpbGQoYm90TWVzc2FnZURpdik7XG5cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpIGFzIEhUTUxEaXZFbGVtZW50O1xuICAgICAgICBjb25zdCBib3RNZXNzYWdlRGl2ID0gZGlzcGxheUNvbW1hbmRCb3RNZXNzYWdlKHNldHRpbmdzLCBtZXNzYWdlSGlzdG9yeSwgZXJyb3IpO1xuICAgICAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGJvdE1lc3NhZ2VEaXYpO1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIG1lc3NhZ2UgaGlzdG9yeTonLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IGZpbGVOYW1lID0gJyc7XG5cbiAgICBpZiAoc2V0dGluZ3MuY2hhdEhpc3RvcnkuYWxsb3dSZW5hbWVOb3RlVGl0bGUpIHtcbiAgICAgIGxldCB1bmlxdWVOYW1lRm91bmQgPSBmYWxzZTtcbiAgICAgIGxldCBtb2RlbFJlbmFtZVRpdGxlO1xuXG4gICAgICAvLyBGdW5jdGlvbiB0byBjaGVjayBpZiBhIGZpbGUgbmFtZSBhbHJlYWR5IGV4aXN0c1xuICAgICAgY29uc3QgZmlsZU5hbWVFeGlzdHMgPSAobmFtZTogc3RyaW5nIHwgbnVsbCkgPT4ge1xuICAgICAgICAgIHJldHVybiBhbGxGaWxlcy5zb21lKChmaWxlKSA9PiBmaWxlLnBhdGggPT09IGZvbGRlck5hbWUgKyBuYW1lICsgZmlsZUV4dGVuc2lvbik7XG4gICAgICB9O1xuICAgIFxuICAgICAgd2hpbGUgKCF1bmlxdWVOYW1lRm91bmQpIHtcbiAgICAgICAgICBtb2RlbFJlbmFtZVRpdGxlID0gYXdhaXQgZmV0Y2hNb2RlbFJlbmFtZVRpdGxlKHNldHRpbmdzLCAgbWFya2Rvd25Db250ZW50KTtcbiAgICAgIFxuICAgICAgICAgIGlmICghZmlsZU5hbWVFeGlzdHMobW9kZWxSZW5hbWVUaXRsZSkpIHtcbiAgICAgICAgICAgICAgdW5pcXVlTmFtZUZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZpbGVOYW1lID0gZm9sZGVyTmFtZSArIG1vZGVsUmVuYW1lVGl0bGUgKyBmaWxlRXh0ZW5zaW9uO1xuICAgICAgXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZmlsZU5hbWUgPSBmb2xkZXJOYW1lICsgYmFzZUZpbGVOYW1lICsgJyAnICsgZGF0ZVRpbWVTdGFtcCArIGZpbGVFeHRlbnNpb247XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHRoZSBuZXcgbm90ZSB3aXRoIGZvcm1hdHRlZCBNYXJrZG93biBjb250ZW50XG4gICAgY29uc3QgZmlsZSA9IGF3YWl0IGFwcC52YXVsdC5jcmVhdGUoZmlsZU5hbWUsIG1hcmtkb3duQ29udGVudCk7XG4gICAgaWYgKGZpbGUpIHtcbiAgICAgIG5ldyBOb3RpY2UoJ1NhdmVkIGNvbnZlcnNhdGlvbi4nKTtcblxuICAgICAgLy8gT3BlbiB0aGUgbmV3bHkgY3JlYXRlZCBub3RlIGluIGEgbmV3IHBhbmVcbiAgICAgIGFwcC53b3Jrc3BhY2Uub3BlbkxpbmtUZXh0KGZpbGVOYW1lLCAnJywgdHJ1ZSwgeyBhY3RpdmU6IHRydWUgfSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjcmVhdGUgbm90ZTonLCBlcnJvcik7XG4gIH1cbn1cblxuLy8gYC9zdG9wYCB0byBzdG9wIGZldGNoaW5nIHJlc3BvbnNlXG5leHBvcnQgZnVuY3Rpb24gY29tbWFuZFN0b3AoKSB7XG4gIGNvbnN0IGNvbnRyb2xsZXIgPSBnZXRBYm9ydENvbnRyb2xsZXIoKTtcbiAgaWYgKGNvbnRyb2xsZXIpIHtcbiAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVtb3ZlTWVzc2FnZVRocmVhZChpbmRleDogbnVtYmVyKSB7XG4gIGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpO1xuXG4gIGNvbnN0IGRpdkVsZW1lbnRzID0gbWVzc2FnZUNvbnRhaW5lcj8ucXVlcnlTZWxlY3RvckFsbCgnZGl2LmJvdE1lc3NhZ2UsIGRpdi51c2VyTWVzc2FnZScpO1xuXG4gIGlmIChkaXZFbGVtZW50cyAmJiBkaXZFbGVtZW50cy5sZW5ndGggPiAwICYmIGluZGV4ID49IDAgJiYgaW5kZXggPCBkaXZFbGVtZW50cy5sZW5ndGgpIHtcbiAgICBmb3IgKGxldCBpID0gaW5kZXg7IGkgPCBkaXZFbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgbWVzc2FnZUNvbnRhaW5lcj8ucmVtb3ZlQ2hpbGQoZGl2RWxlbWVudHNbaV0pO1xuICAgIH1cbiAgfVxuXG4gIG1lc3NhZ2VIaXN0b3J5LnNwbGljZShpbmRleCk7XG4gIGNvbnN0IGpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeShtZXNzYWdlSGlzdG9yeSwgbnVsbCwgNCk7XG5cbiAgdHJ5IHtcbiAgICAgIGF3YWl0IGFwcC52YXVsdC5hZGFwdGVyLndyaXRlKGZpbGVuYW1lTWVzc2FnZUhpc3RvcnlKU09OLCBqc29uU3RyaW5nKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHdyaXRpbmcgbWVzc2FnZUhpc3RvcnkuanNvbicsIGVycm9yKTtcbiAgfVxufSIsICJpbXBvcnQgeyBOb3RpY2UsIHJlcXVlc3RVcmwgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgT3BlbkFJIGZyb20gJ29wZW5haSc7XG5pbXBvcnQgeyBCTU9TZXR0aW5ncyB9IGZyb20gJ3NyYy9tYWluJztcbmltcG9ydCB7IEFOVEhST1BJQ19NT0RFTFMsIE9QRU5BSV9NT0RFTFMgfSBmcm9tICdzcmMvdmlldyc7XG5cbi8vIFJlbmFtZSBub3RlIHRpdGxlIGJhc2VkIG9uIHNwZWNpZmllZCBtb2RlbFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoTW9kZWxSZW5hbWVUaXRsZShzZXR0aW5nczogQk1PU2V0dGluZ3MsIHJlZmVyZW5jZUN1cnJlbnROb3RlQ29udGVudDogc3RyaW5nKSB7XG4gICAgY29uc3QgY2xlYXJZYW1sQ29udGVudCA9IHJlZmVyZW5jZUN1cnJlbnROb3RlQ29udGVudC5yZXBsYWNlKC8tLS1bXFxzXFxTXSs/LS0tLywgJycpLnRyaW0oKTtcbiAgICBcbiAgICBjb25zdCBwcm9tcHQgPSBgWW91IGFyZSBhIHRpdGxlIGdlbmVyYXRvci4gWW91IHdpbGwgZ2l2ZSBzdWNjaW5jdCB0aXRsZXMgdGhhdCBkb2VzIG5vdCBjb250YWluIGJhY2tzbGFzaGVzLFxuICAgICAgICAgICAgICAgICAgICBmb3J3YXJkIHNsYXNoZXMsIG9yIGNvbG9ucy4gR2VuZXJhdGUgYSB0aXRsZSBhcyB5b3VyIHJlc3BvbnNlLlxcblxcbmA7XG5cbiAgICB0cnkge1xuICAgICAgICBpZiAoT1BFTkFJX01PREVMUy5pbmNsdWRlcyhzZXR0aW5ncy5nZW5lcmFsLm1vZGVsKSB8fCAoc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMub3BlbkFJLm9wZW5BSUJhc2VNb2RlbHMuaW5jbHVkZXMoc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCkpKSB7XG4gICAgICAgICAgICBjb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHtcbiAgICAgICAgICAgICAgICBhcGlLZXk6IHNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm9wZW5BSS5BUElLZXksXG4gICAgICAgICAgICAgICAgYmFzZVVSTDogc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMub3BlbkFJLm9wZW5BSUJhc2VVcmwsXG4gICAgICAgICAgICAgICAgZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXI6IHRydWUsIC8vIGFwaUtleSBpcyBzdG9yZWQgd2l0aGluIGRhdGEuanNvblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGNoYXRDb21wbGV0aW9uID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgICAgICAgICAgICBtb2RlbDogc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCxcbiAgICAgICAgICAgICAgICBtYXhfdG9rZW5zOiA0MCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiBwcm9tcHQgKyBjbGVhcllhbWxDb250ZW50fSxcbiAgICAgICAgICAgICAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICcnfVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbGV0IHRpdGxlID0gY2hhdENvbXBsZXRpb24uY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQ7XG4gICAgICAgICAgICAvLyBSZW1vdmUgYmFja3NsYXNoZXMsIGZvcndhcmQgc2xhc2hlcywgY29sb25zLCBhbmQgcXVvdGVzXG4gICAgICAgICAgICBpZiAodGl0bGUpIHtcbiAgICAgICAgICAgICAgICB0aXRsZSA9IHRpdGxlLnJlcGxhY2UoL1tcXFxcLzpcIl0vZywgJycpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGl0bGU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5SRVNUQVBJVVJMICYmIHNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hTW9kZWxzLmluY2x1ZGVzKHNldHRpbmdzLmdlbmVyYWwubW9kZWwpKSB7XG4gICAgICAgICAgICBjb25zdCB1cmwgPSBzZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLlJFU1RBUElVUkwgKyAnL2FwaS9nZW5lcmF0ZSc7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xuICAgICAgICAgICAgICAgIHByb21wdDogcHJvbXB0ICsgJ1xcblxcbicgKyBjbGVhcllhbWxDb250ZW50ICsgJ1xcblxcbicsXG4gICAgICAgICAgICAgICAgbW9kZWw6IHNldHRpbmdzLmdlbmVyYWwubW9kZWwsXG4gICAgICAgICAgICAgICAgc3RyZWFtOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiBwYXJzZUludChzZXR0aW5ncy5nZW5lcmFsLnRlbXBlcmF0dXJlKSxcbiAgICAgICAgICAgICAgICAgICAgbnVtX3ByZWRpY3Q6IDI1LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgICAgICB1cmwsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHBhcnNlVGV4dCA9IEpTT04ucGFyc2UocmVzcG9uc2UudGV4dCk7XG4gICAgICAgICAgICBsZXQgdGl0bGUgPSBwYXJzZVRleHQucmVzcG9uc2U7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSBiYWNrc2xhc2hlcywgZm9yd2FyZCBzbGFzaGVzLCBjb2xvbnMsIGFuZCBxdW90ZXNcbiAgICAgICAgICAgIGlmICh0aXRsZSkge1xuICAgICAgICAgICAgICAgIHRpdGxlID0gdGl0bGUucmVwbGFjZSgvW1xcXFwvOlwiXS9nLCAnJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aXRsZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZXR0aW5ncy5SRVNUQVBJVVJMQ29ubmVjdGlvbi5SRVNUQVBJVVJMTW9kZWxzLmluY2x1ZGVzKHNldHRpbmdzLmdlbmVyYWwubW9kZWwpKSB7XG4gICAgICAgICAgICBjb25zdCB1cmxzID0gW1xuICAgICAgICAgICAgICAgIHNldHRpbmdzLlJFU1RBUElVUkxDb25uZWN0aW9uLlJFU1RBUElVUkwgKyAnL3YxL2NoYXQvY29tcGxldGlvbnMnLFxuICAgICAgICAgICAgICAgIHNldHRpbmdzLlJFU1RBUElVUkxDb25uZWN0aW9uLlJFU1RBUElVUkwgKyAnL2FwaS92MS9jaGF0L2NvbXBsZXRpb25zJ1xuICAgICAgICAgICAgXTtcbiAgICAgICAgXG4gICAgICAgICAgICBsZXQgbGFzdEVycm9yID0gbnVsbDtcblxuICAgICAgICBcbiAgICAgICAgICAgIGZvciAoY29uc3QgdXJsIG9mIHVybHMpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3NldHRpbmdzLlJFU1RBUElVUkxDb25uZWN0aW9uLkFQSUtleX1gXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsOiBzZXR0aW5ncy5nZW5lcmFsLm1vZGVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IHByb21wdCArIGNsZWFyWWFtbENvbnRlbnR9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ1xcbid9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhfdG9rZW5zOiA0MCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGxldCB0aXRsZSA9IHJlc3BvbnNlLmpzb24uY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgICAgIC8vIGxldCB0aXRsZSA9IGNoYXRDb21wbGV0aW9uLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50O1xuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgYmFja3NsYXNoZXMsIGZvcndhcmQgc2xhc2hlcywgY29sb25zLCBhbmQgcXVvdGVzXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aXRsZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSB0aXRsZS5yZXBsYWNlKC9bXFxcXC86XCJdL2csICcnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGl0bGU7XG4gICAgICAgIFxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RFcnJvciA9IGVycm9yOyAvLyBTdG9yZSB0aGUgbGFzdCBlcnJvciBhbmQgY29udGludWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIElmIGFsbCByZXF1ZXN0cyBmYWlsZWQsIHRocm93IHRoZSBsYXN0IGVuY291bnRlcmVkIGVycm9yXG4gICAgICAgICAgICBpZiAobGFzdEVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbWFraW5nIEFQSSByZXF1ZXN0OicsIGxhc3RFcnJvcik7XG4gICAgICAgICAgICAgICAgdGhyb3cgbGFzdEVycm9yO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMubWlzdHJhbC5taXN0cmFsTW9kZWxzLmluY2x1ZGVzKHNldHRpbmdzLmdlbmVyYWwubW9kZWwpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgICAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vYXBpLm1pc3RyYWwuYWkvdjEvY2hhdC9jb21wbGV0aW9ucycsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7c2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMubWlzdHJhbC5BUElLZXl9YFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbDogc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogcHJvbXB0ICsgY2xlYXJZYW1sQ29udGVudH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdcXG4nfVxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IDQwLFxuICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICBcbiAgICAgICAgICAgICAgICBsZXQgdGl0bGUgPSByZXNwb25zZS5qc29uLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50O1xuICAgICAgICAgICAgICAgIC8vIGxldCB0aXRsZSA9IGNoYXRDb21wbGV0aW9uLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50O1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBiYWNrc2xhc2hlcywgZm9yd2FyZCBzbGFzaGVzLCBjb2xvbnMsIGFuZCBxdW90ZXNcbiAgICAgICAgICAgICAgICBpZiAodGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSB0aXRsZS5yZXBsYWNlKC9bXFxcXC86XCJdL2csICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpdGxlO1xuICAgIFxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLmdvb2dsZUdlbWluaS5nZW1pbmlNb2RlbHMuaW5jbHVkZXMoc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCkpIHtcbiAgICAgICAgICAgIHRyeSB7ICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBc3N1bWluZyBzZXR0aW5ncy5BUElDb25uZWN0aW9ucy5nb29nbGVHZW1pbmkuQVBJS2V5IGNvbnRhaW5zIHlvdXIgQVBJIGtleVxuICAgICAgICAgICAgICAgIGNvbnN0IEFQSV9LRVkgPSBzZXR0aW5ncy5BUElDb25uZWN0aW9ucy5nb29nbGVHZW1pbmkuQVBJS2V5O1xuICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudHM6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJ0czogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0ZXh0OiBwcm9tcHQgKyBjbGVhcllhbWxDb250ZW50fVxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBgaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjFiZXRhL21vZGVscy9nZW1pbmktcHJvOmdlbmVyYXRlQ29udGVudD9rZXk9JHtBUElfS0VZfWAsXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3RCb2R5KSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBsZXQgdGl0bGUgPSByZXNwb25zZS5qc29uLmNhbmRpZGF0ZXNbMF0uY29udGVudC5wYXJ0c1swXS50ZXh0O1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBiYWNrc2xhc2hlcywgZm9yd2FyZCBzbGFzaGVzLCBjb2xvbnMsIGFuZCBxdW90ZXNcbiAgICAgICAgICAgICAgICBpZiAodGl0bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSB0aXRsZS5yZXBsYWNlKC9bXFxcXC86XCJdL2csICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpdGxlO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKEFOVEhST1BJQ19NT0RFTFMuaW5jbHVkZXMoc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgJ2FudGhyb3BpYy12ZXJzaW9uJzogJzIwMjMtMDYtMDEnLFxuICAgICAgICAgICAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ3gtYXBpLWtleSc6IHNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLmFudGhyb3BpYy5BUElLZXksXG4gICAgICAgICAgICAgIH07XG4gICAgICAgICAgXG4gICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xuICAgICAgICAgICAgICAgICAgbW9kZWw6IHNldHRpbmdzLmdlbmVyYWwubW9kZWwsXG4gICAgICAgICAgICAgICAgICBwcm9tcHQ6ICBgXFxuXFxuSHVtYW46ICR7cHJvbXB0fVxcblxcbkFzc2lzdGFudDpgLFxuICAgICAgICAgICAgICAgICAgbWF4X3Rva2Vuc190b19zYW1wbGU6IDQwLFxuICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHBhcnNlSW50KHNldHRpbmdzLmdlbmVyYWwudGVtcGVyYXR1cmUpLFxuICAgICAgICAgICAgICAgICAgc3RyZWFtOiB0cnVlLFxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcbiAgICAgICAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vYXBpLmFudGhyb3BpYy5jb20vdjEvY29tcGxldGUnLFxuICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpLFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IHJlc3BvbnNlLnRleHQ7XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSBtZXNzYWdlLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgICAgICAgICBsZXQgdGl0bGUgPSAnJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgICAgICAgICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aCgnZGF0YTonKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBldmVudERhdGEgPSBKU09OLnBhcnNlKGxpbmUuc2xpY2UoJ2RhdGE6Jy5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50RGF0YS5jb21wbGV0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdGl0bGUgKz0gZXZlbnREYXRhLmNvbXBsZXRpb247XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgYmFja3NsYXNoZXMsIGZvcndhcmQgc2xhc2hlcywgY29sb25zLCBhbmQgcXVvdGVzXG4gICAgICAgICAgICAgICAgaWYgKHRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlID0gdGl0bGUucmVwbGFjZSgvW1xcXFwvOlwiXS9nLCAnJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRpdGxlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3IgbWFraW5nIEFQSSByZXF1ZXN0OicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtYWtpbmcgQVBJIHJlcXVlc3Q6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbW9kZWwgc2VsZWN0ZWQgZm9yIHJlbmFtaW5nIG5vdGUgdGl0bGUuIFBsZWFzZSBjaGVjayB5b3VyIHNldHRpbmdzLicpO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0VSUk9SJyk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvci5yZXNwb25zZT8uZGF0YT8uZXJyb3IgfHwgZXJyb3IubWVzc2FnZSk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBCTU9TZXR0aW5ncywgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJ3NyYy9tYWluJztcbmltcG9ydCB7IGNvbG9yVG9IZXggfSBmcm9tICdzcmMvdXRpbHMvQ29sb3JDb252ZXJ0ZXInO1xuaW1wb3J0IHsgZGlzcGxheVVzZXJFZGl0QnV0dG9uLCBkaXNwbGF5VHJhc2hCdXR0b24sIGRpc3BsYXlVc2VyQ29weUJ1dHRvbiwgcmVnZW5lcmF0ZVVzZXJCdXR0b24gfSBmcm9tICcuL0J1dHRvbnMnO1xuaW1wb3J0IHsgQU5USFJPUElDX01PREVMUyB9IGZyb20gJ3NyYy92aWV3JztcbmltcG9ydCB7IG1hcmtlZCB9IGZyb20gJ21hcmtlZCc7XG5cbmV4cG9ydCBmdW5jdGlvbiBkaXNwbGF5VXNlck1lc3NhZ2Uoc2V0dGluZ3M6IEJNT1NldHRpbmdzLCBtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICBjb25zdCB1c2VyTWVzc2FnZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHVzZXJNZXNzYWdlRGl2LmNsYXNzTmFtZSA9ICd1c2VyTWVzc2FnZSc7XG4gICAgdXNlck1lc3NhZ2VEaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gY29sb3JUb0hleChzZXR0aW5ncy5hcHBlYXJhbmNlLnVzZXJNZXNzYWdlQmFja2dyb3VuZENvbG9yIHx8IFxuICAgICAgICBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoREVGQVVMVF9TRVRUSU5HUy5hcHBlYXJhbmNlLnVzZXJNZXNzYWdlQmFja2dyb3VuZENvbG9yKS50cmltKCkpO1xuXG4gICAgY29uc3QgdXNlck1lc3NhZ2VUb29sQmFyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdXNlck1lc3NhZ2VUb29sQmFyRGl2LmNsYXNzTmFtZSA9ICd1c2VyTWVzc2FnZVRvb2xCYXInO1xuXG4gICAgY29uc3QgYnV0dG9uQ29udGFpbmVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYnV0dG9uQ29udGFpbmVyRGl2LmNsYXNzTmFtZSA9ICdidXR0b24tY29udGFpbmVyJztcblxuICAgIGNvbnN0IHVzZXJOYW1lU3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICB1c2VyTmFtZVNwYW4uY2xhc3NOYW1lID0gJ3VzZXJOYW1lJztcbiAgICB1c2VyTmFtZVNwYW4udGV4dENvbnRlbnQgPSBzZXR0aW5ncy5hcHBlYXJhbmNlLnVzZXJOYW1lIHx8IERFRkFVTFRfU0VUVElOR1MuYXBwZWFyYW5jZS51c2VyTmFtZTtcbiAgICBjb25zdCB1c2VyUCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcblxuICAgIGNvbnN0IHJlZ2VuZXJhdGVCdXR0b24gPSByZWdlbmVyYXRlVXNlckJ1dHRvbihzZXR0aW5ncyk7XG4gICAgY29uc3QgZWRpdEJ1dHRvbiA9IGRpc3BsYXlVc2VyRWRpdEJ1dHRvbihzZXR0aW5ncywgdXNlclApO1xuICAgIGNvbnN0IGNvcHlVc2VyQnV0dG9uID0gZGlzcGxheVVzZXJDb3B5QnV0dG9uKHVzZXJQKTtcbiAgICBjb25zdCB0cmFzaEJ1dHRvbiA9IGRpc3BsYXlUcmFzaEJ1dHRvbigpO1xuICAgIFxuICAgIHVzZXJNZXNzYWdlVG9vbEJhckRpdi5hcHBlbmRDaGlsZCh1c2VyTmFtZVNwYW4pO1xuICAgIHVzZXJNZXNzYWdlVG9vbEJhckRpdi5hcHBlbmRDaGlsZChidXR0b25Db250YWluZXJEaXYpO1xuXG4gICAgaWYgKCFtZXNzYWdlLnN0YXJ0c1dpdGgoJy8nKSkge1xuICAgICAgICBidXR0b25Db250YWluZXJEaXYuYXBwZW5kQ2hpbGQocmVnZW5lcmF0ZUJ1dHRvbik7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZChlZGl0QnV0dG9uKTtcbiAgICB9XG5cbiAgICBidXR0b25Db250YWluZXJEaXYuYXBwZW5kQ2hpbGQoY29weVVzZXJCdXR0b24pO1xuICAgIGJ1dHRvbkNvbnRhaW5lckRpdi5hcHBlbmRDaGlsZCh0cmFzaEJ1dHRvbik7XG4gICAgdXNlck1lc3NhZ2VEaXYuYXBwZW5kQ2hpbGQodXNlck1lc3NhZ2VUb29sQmFyRGl2KTtcbiAgICB1c2VyTWVzc2FnZURpdi5hcHBlbmRDaGlsZCh1c2VyUCk7XG5cbiAgICBpZiAoQU5USFJPUElDX01PREVMUy5pbmNsdWRlcyhzZXR0aW5ncy5nZW5lcmFsLm1vZGVsKSkge1xuICAgICAgICBjb25zdCBmdWxsU3RyaW5nID0gbWVzc2FnZTtcbiAgICAgICAgY29uc3QgY2xlYW5TdHJpbmcgPSBmdWxsU3RyaW5nLnNwbGl0KCcgJykuc2xpY2UoMSkuam9pbignICcpLnRyaW0oKTtcbiAgICAgICAgdXNlclAuaW5uZXJIVE1MID0gbWFya2VkKGNsZWFuU3RyaW5nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB1c2VyUC5pbm5lckhUTUwgPSBtYXJrZWQobWVzc2FnZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVzZXJNZXNzYWdlRGl2O1xufSIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgQk1PR1BUIGZyb20gJy4vbWFpbic7XG5pbXBvcnQgeyBhZGRHZW5lcmFsU2V0dGluZ3MgfSBmcm9tICcuL2NvbXBvbmVudHMvc2V0dGluZ3MvR2VuZXJhbFNldHRpbmdzJztcbmltcG9ydCB7IGFkZEFwcGVhcmFuY2VTZXR0aW5ncyB9IGZyb20gJy4vY29tcG9uZW50cy9zZXR0aW5ncy9BcHBlYXJhbmNlU2V0dGluZ3MnO1xuaW1wb3J0IHsgYWRkQ2hhdEhpc3RvcnlTZXR0aW5ncyB9IGZyb20gJy4vY29tcG9uZW50cy9zZXR0aW5ncy9DaGF0SGlzdG9yeVNldHRpbmdzJztcbmltcG9ydCB7IGFkZE9sbGFtYVNldHRpbmdzIH0gZnJvbSAnLi9jb21wb25lbnRzL3NldHRpbmdzL09sbGFtYVNldHRpbmdzJztcbmltcG9ydCB7IGFkZEFQSUNvbm5lY3Rpb25TZXR0aW5ncyB9IGZyb20gJy4vY29tcG9uZW50cy9zZXR0aW5ncy9Db25uZWN0aW9uU2V0dGluZ3MnO1xuaW1wb3J0IHsgYWRkUHJvbXB0U2V0dGluZ3MgfSBmcm9tICcuL2NvbXBvbmVudHMvc2V0dGluZ3MvUHJvbXB0U2V0dGluZ3MnO1xuaW1wb3J0IHsgYWRkUkVTVEFQSVVSTFNldHRpbmdzIH0gZnJvbSAnLi9jb21wb25lbnRzL3NldHRpbmdzL09wZW5BSVJlc3RBUElTZXR0aW5ncyc7XG5pbXBvcnQgeyBhZGRFZGl0b3JTZXR0aW5ncyB9IGZyb20gJy4vY29tcG9uZW50cy9zZXR0aW5ncy9FZGl0b3JTZXR0aW5ncyc7XG5cbmV4cG9ydCBjbGFzcyBCTU9TZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogQk1PR1BUO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IEJNT0dQVCkge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGFzeW5jIGRpc3BsYXkoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XG5cblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gxJywge3RleHQ6ICdCTU8gQ2hhdGJvdCBTZXR0aW5ncyd9KTtcblxuXHRcdGNvbnN0IGNoYW5nZUxvZ0xpbmsgPSBjb250YWluZXJFbC5jcmVhdGVFbCgnYScsIHtcblx0XHRcdHRleHQ6ICdDaGFuZ2Vsb2cnLFxuXHRcdFx0aHJlZjogJ2h0dHBzOi8vZ2l0aHViLmNvbS9sb25neTJrL29ic2lkaWFuLWJtby1jaGF0Ym90L3JlbGVhc2VzJyxcblx0XHR9KTtcblxuXHRcdGNoYW5nZUxvZ0xpbmsuc3R5bGUuZm9udFNpemUgPSAnMC44cmVtJzsgXG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgncCcsIHt0ZXh0OiAnVHlwZSBgL2hlbHBgIGluIGNoYXQgZm9yIGNvbW1hbmRzLid9KTtcblxuXHRcdC8vIERpc3BsYXkgc2V0dGluZ3Ncblx0XHRhZGRHZW5lcmFsU2V0dGluZ3ModGhpcy5jb250YWluZXJFbCwgdGhpcy5wbHVnaW4sIHRoaXMpO1xuXHRcdGFkZEFwcGVhcmFuY2VTZXR0aW5ncyh0aGlzLmNvbnRhaW5lckVsLCB0aGlzLnBsdWdpbiwgdGhpcyk7XG5cdFx0YWRkRWRpdG9yU2V0dGluZ3ModGhpcy5jb250YWluZXJFbCwgdGhpcy5wbHVnaW4sIHRoaXMpO1x0XHRcblx0XHRhZGRDaGF0SGlzdG9yeVNldHRpbmdzKHRoaXMuY29udGFpbmVyRWwsIHRoaXMucGx1Z2luLCB0aGlzKTtcblx0XHRhZGRQcm9tcHRTZXR0aW5ncyh0aGlzLmNvbnRhaW5lckVsLCB0aGlzLnBsdWdpbiwgdGhpcyk7XG5cblx0XHRjb25zdCBzZXBhcmF0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdocicpO1xuXHRcdHNlcGFyYXRvci5zdHlsZS5tYXJnaW4gPSAnMXJlbSAwJztcblx0XHR0aGlzLmNvbnRhaW5lckVsLmFwcGVuZENoaWxkKHNlcGFyYXRvcik7XG5cblx0XHRhZGRPbGxhbWFTZXR0aW5ncyh0aGlzLmNvbnRhaW5lckVsLCB0aGlzLnBsdWdpbiwgdGhpcyk7XG5cdFx0YWRkUkVTVEFQSVVSTFNldHRpbmdzKHRoaXMuY29udGFpbmVyRWwsIHRoaXMucGx1Z2luLCB0aGlzKTtcblx0XHRhZGRBUElDb25uZWN0aW9uU2V0dGluZ3ModGhpcy5jb250YWluZXJFbCwgdGhpcy5wbHVnaW4sIHRoaXMpO1xuXHR9XG59XG4iLCAiaW1wb3J0IHsgRHJvcGRvd25Db21wb25lbnQsIE5vdGljZSwgU2V0dGluZywgU2V0dGluZ1RhYiwgc2V0SWNvbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBCTU9HUFQsIHsgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJ3NyYy9tYWluJztcbmltcG9ydCB7IEFOVEhST1BJQ19NT0RFTFMsIE9QRU5BSV9NT0RFTFMgfSBmcm9tICdzcmMvdmlldyc7XG5pbXBvcnQgeyBmZXRjaEdvb2dsZUdlbWluaU1vZGVscywgZmV0Y2hNaXN0cmFsTW9kZWxzLCBmZXRjaE9sbGFtYU1vZGVscywgZmV0Y2hPcGVuQUlCYXNlTW9kZWxzLCBmZXRjaFJFU1RBUElVUkxNb2RlbHMgfSBmcm9tICcuLi9GZXRjaE1vZGVsTGlzdCc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRHZW5lcmFsU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBwbHVnaW46IEJNT0dQVCwgU2V0dGluZ1RhYjogU2V0dGluZ1RhYikge1xuICAgIGNvbnN0IHRvZ2dsZVNldHRpbmdDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICd0b2dnbGVTZXR0aW5nQ29udGFpbmVyJyB9KTtcbiAgICB0b2dnbGVTZXR0aW5nQ29udGFpbmVyLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnR2VuZXJhbCd9KTtcblxuICAgIGNvbnN0IGluaXRpYWxTdGF0ZSA9IHBsdWdpbi5zZXR0aW5ncy50b2dnbGVHZW5lcmFsU2V0dGluZ3M7XG4gICAgY29uc3QgY2hldnJvbkljb24gPSB0b2dnbGVTZXR0aW5nQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICdjaGV2cm9uLWljb24nIH0pO1xuICAgIHNldEljb24oY2hldnJvbkljb24sIGluaXRpYWxTdGF0ZSA/ICdjaGV2cm9uLWRvd24nIDogJ2NoZXZyb24tcmlnaHQnKTtcblxuICAgIC8vIENyZWF0ZSB0aGUgc2V0dGluZ3MgY29udGFpbmVyIHRvIGJlIHRvZ2dsZWRcbiAgICBjb25zdCBzZXR0aW5nc0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmdzQ29udGFpbmVyJyB9KTtcbiAgICBzZXR0aW5nc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gaW5pdGlhbFN0YXRlID8gJ2Jsb2NrJyA6ICdub25lJztcblxuICAgIC8vIFRvZ2dsZSB2aXNpYmlsaXR5XG4gICAgdG9nZ2xlU2V0dGluZ0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgaXNPcGVuID0gc2V0dGluZ3NDb250YWluZXIuc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnO1xuICAgICAgICBpZiAoaXNPcGVuKSB7XG4gICAgICAgICAgICBzZXRJY29uKGNoZXZyb25JY29uLCAnY2hldnJvbi1yaWdodCcpOyAvLyBDbG9zZSBzdGF0ZVxuICAgICAgICAgICAgc2V0dGluZ3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy50b2dnbGVHZW5lcmFsU2V0dGluZ3MgPSBmYWxzZTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0SWNvbihjaGV2cm9uSWNvbiwgJ2NoZXZyb24tZG93bicpOyAvLyBPcGVuIHN0YXRlXG4gICAgICAgICAgICBzZXR0aW5nc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy50b2dnbGVHZW5lcmFsU2V0dGluZ3MgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICB9KTtcblxuICAgIC8vIEZ1bmN0aW9uIHRvIGFkZCBvcHRpb25zIHRvIGRyb3Bkb3duXG4gICAgY29uc3QgYWRkT3B0aW9uc1RvRHJvcGRvd24gPSAoZHJvcGRvd246IERyb3Bkb3duQ29tcG9uZW50LCBtb2RlbHM6IHN0cmluZ1tdKSA9PiB7XG4gICAgICAgIG1vZGVscy5mb3JFYWNoKG1vZGVsID0+IHtcbiAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKG1vZGVsLCBtb2RlbCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUoJ01vZGVsJylcbiAgICAgICAgLnNldERlc2MoJ0Nob29zZSBhIG1vZGVsLicpXG4gICAgICAgIC5hZGREcm9wZG93bihhc3luYyBkcm9wZG93biA9PiB7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuYWxsTW9kZWxzID0gW107XG4gICAgICAgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm9wZW5BSS5BUElLZXkgJiYgKHBsdWdpbi5zZXR0aW5ncy5BUElDb25uZWN0aW9ucy5vcGVuQUkub3BlbkFJQmFzZVVybCA9PT0gREVGQVVMVF9TRVRUSU5HUy5BUElDb25uZWN0aW9ucy5vcGVuQUkub3BlbkFJQmFzZVVybCkpIHtcbiAgICAgICAgICAgICAgICBhZGRPcHRpb25zVG9Ecm9wZG93bihkcm9wZG93biwgT1BFTkFJX01PREVMUyk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb2RlbCBvZiBPUEVOQUlfTU9ERUxTKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLmFsbE1vZGVscy5pbmNsdWRlcyhtb2RlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5hbGxNb2RlbHMucHVzaChtb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24uUkVTVEFQSVVSTCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvbGxhbWFNb2RlbHMgPSBhd2FpdCBmZXRjaE9sbGFtYU1vZGVscyhwbHVnaW4pO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIG9sbGFtYU1vZGVscy5mb3JFYWNoKChtb2RlbDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24obW9kZWwsIG1vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLmFsbE1vZGVscy5pbmNsdWRlcyhtb2RlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuYWxsTW9kZWxzLnB1c2gobW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ09sbGFtYSBjb25uZWN0aW9uIGVycm9yLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwbHVnaW4uc2V0dGluZ3MuUkVTVEFQSVVSTENvbm5lY3Rpb24uUkVTVEFQSVVSTCAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBSRVNUQVBJVVJMTW9kZWxzID0gYXdhaXQgZmV0Y2hSRVNUQVBJVVJMTW9kZWxzKHBsdWdpbik7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgUkVTVEFQSVVSTE1vZGVscy5mb3JFYWNoKChtb2RlbDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24obW9kZWwsIG1vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcGx1Z2luLnNldHRpbmdzLmFsbE1vZGVscy5pbmNsdWRlcyhtb2RlbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuYWxsTW9kZWxzLnB1c2gobW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ09wZW5BSSBSRVNUIEFQSSBVUkwgY29ubmVjdGlvbiBlcnJvci4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm9wZW5BSS5BUElLZXkgJiYgKHBsdWdpbi5zZXR0aW5ncy5BUElDb25uZWN0aW9ucy5vcGVuQUkub3BlbkFJQmFzZVVybCAhPT0gREVGQVVMVF9TRVRUSU5HUy5BUElDb25uZWN0aW9ucy5vcGVuQUkub3BlbkFJQmFzZVVybCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcGVuQUlNb2RlbHMgPSBhd2FpdCBmZXRjaE9wZW5BSUJhc2VNb2RlbHMocGx1Z2luKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBvcGVuQUlNb2RlbHMuZm9yRWFjaCgobW9kZWw6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKG1vZGVsLCBtb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy5hbGxNb2RlbHMuaW5jbHVkZXMobW9kZWwpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmFsbE1vZGVscy5wdXNoKG1vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ09wZW5BSS1iYXNlZCB1cmwgY29ubmVjdGlvbiBlcnJvci4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm1pc3RyYWwuQVBJS2V5ICE9PSAnJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pc3RyYWxNb2RlbHMgPSBhd2FpdCBmZXRjaE1pc3RyYWxNb2RlbHMocGx1Z2luKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBtaXN0cmFsTW9kZWxzLmZvckVhY2goKG1vZGVsOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihtb2RlbCwgbW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwbHVnaW4uc2V0dGluZ3MuYWxsTW9kZWxzLmluY2x1ZGVzKG1vZGVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5hbGxNb2RlbHMucHVzaChtb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTWlzdHJhbCBjb25uZWN0aW9uIGVycm9yLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwbHVnaW4uc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMuZ29vZ2xlR2VtaW5pLkFQSUtleSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdvb2dsZUdlbWluaU1vZGVscyA9IGF3YWl0IGZldGNoR29vZ2xlR2VtaW5pTW9kZWxzKHBsdWdpbik7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZ29vZ2xlR2VtaW5pTW9kZWxzLmZvckVhY2goKG1vZGVsOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihtb2RlbCwgbW9kZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwbHVnaW4uc2V0dGluZ3MuYWxsTW9kZWxzLmluY2x1ZGVzKG1vZGVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5hbGxNb2RlbHMucHVzaChtb2RlbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnR29vZ2xlIEdlbWluaSBjb25uZWN0aW9uIGVycm9yLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwbHVnaW4uc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMuYW50aHJvcGljLkFQSUtleSkge1xuICAgICAgICAgICAgICAgIGFkZE9wdGlvbnNUb0Ryb3Bkb3duKGRyb3Bkb3duLCBBTlRIUk9QSUNfTU9ERUxTKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1vZGVsIG9mIEFOVEhST1BJQ19NT0RFTFMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwbHVnaW4uc2V0dGluZ3MuYWxsTW9kZWxzLmluY2x1ZGVzKG1vZGVsKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmFsbE1vZGVscy5wdXNoKG1vZGVsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5nZW5lcmFsLm1vZGVsIHx8IERFRkFVTFRfU0VUVElOR1MuZ2VuZXJhbC5tb2RlbClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5nZW5lcmFsLm1vZGVsID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kZWxOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vZGVsTmFtZScpIGFzIEhUTUxIZWFkaW5nRWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGVsTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxOYW1lLnRleHRDb250ZW50ID0gJ01vZGVsOiAnICsgcGx1Z2luLnNldHRpbmdzLmdlbmVyYWwubW9kZWwudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgICAgIC5zZXROYW1lKCdTeXN0ZW0nKVxuICAgICAgICAuc2V0RGVzYygnU3lzdGVtIHJvbGUgcHJvbXB0LicpXG4gICAgICAgIC5hZGRUZXh0QXJlYSh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50LicpXG4gICAgICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLmdlbmVyYWwuc3lzdGVtX3JvbGUgIT09IHVuZGVmaW5lZCA/IHBsdWdpbi5zZXR0aW5ncy5nZW5lcmFsLnN5c3RlbV9yb2xlIDogREVGQVVMVF9TRVRUSU5HUy5nZW5lcmFsLnN5c3RlbV9yb2xlKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5nZW5lcmFsLnN5c3RlbV9yb2xlID0gdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlIDogREVGQVVMVF9TRVRUSU5HUy5nZW5lcmFsLnN5c3RlbV9yb2xlO1xuICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUoJ01heCBUb2tlbnMnKVxuICAgICAgICAuc2V0RGVzYyhkZXNjTGluaygnVGhlIG1heGltdW0gbnVtYmVyIG9mIHRva2Vucywgb3Igd29yZHMsIHRoYXQgdGhlIG1vZGVsIGlzIGFsbG93ZWQgdG8gZ2VuZXJhdGUgaW4gaXRzIG91dHB1dC4nLCAnaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL3Rva2VuaXplcicpKVxuICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignNDA5NicpXG4gICAgICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLmdlbmVyYWwubWF4X3Rva2VucylcbiAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuZ2VuZXJhbC5tYXhfdG9rZW5zID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKHNldHRpbmdzQ29udGFpbmVyKVxuICAgICAgICAuc2V0TmFtZSgnVGVtcGVyYXR1cmUnKVxuICAgICAgICAuc2V0RGVzYygnVGVtcGVyYXR1cmUgY29udHJvbHMgaG93IHJhbmRvbSB0aGUgZ2VuZXJhdGVkIG91dHB1dCBpcy4gTG93ZXIgdmFsdWVzIG1ha2UgdGhlIHRleHQgbW9yZSBwcmVkaWN0YWJsZSwgd2hpbGUgaGlnaGVyIHZhbHVlcyBtYWtlIGl0IG1vcmUgY3JlYXRpdmUgYW5kIHVucHJlZGljdGFibGUuJylcbiAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJzEuMDAnKVxuICAgICAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5nZW5lcmFsLnRlbXBlcmF0dXJlKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZsb2F0VmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKTsgLy8gMTAgaXMgdGhlIHJhZGl4IHBhcmFtZXRlciB0byBlbnN1cmUgcGFyc2luZyBpcyBkb25lIGluIGJhc2UgMTBcblxuICAgICAgICAgICAgICAgIC8vIERldGVybWluZSBpZiB0aGUgZmxvYXQgdmFsdWUgaXMgYW4gaW50ZWdlclxuICAgICAgICAgICAgICAgIGlmICghaXNOYU4oZmxvYXRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihmbG9hdFZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZsb2F0VmFsdWUgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmdlbmVyYWwudGVtcGVyYXR1cmUgPSAnMC4wMCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGZsb2F0VmFsdWUgPiAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmdlbmVyYWwudGVtcGVyYXR1cmUgPSAnMi4wMCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5nZW5lcmFsLnRlbXBlcmF0dXJlID0gZmxvYXRWYWx1ZS50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmdlbmVyYWwudGVtcGVyYXR1cmUgPSBERUZBVUxUX1NFVFRJTkdTLmdlbmVyYWwudGVtcGVyYXR1cmU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayB0byB0aGUgZGVmYXVsdCB2YWx1ZSBpZiBpbnB1dCBpcyBub3QgYSB2YWxpZCBudW1iZXJcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmdlbmVyYWwudGVtcGVyYXR1cmUgPSBERUZBVUxUX1NFVFRJTkdTLmdlbmVyYWwudGVtcGVyYXR1cmU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBTZXR0aW5nVGFiLmRpc3BsYXkoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUoJ0FsbG93IFJlZmVyZW5jZSBDdXJyZW50IE5vdGUnKVxuICAgICAgICAuc2V0RGVzYygnQWxsb3cgY2hhdGJvdCB0byByZWZlcmVuY2UgY3VycmVudCBhY3RpdmUgbm90ZSBkdXJpbmcgY29udmVyc2F0aW9uLicpXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICAgIHRvZ2dsZS5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MuZ2VuZXJhbC5hbGxvd1JlZmVyZW5jZUN1cnJlbnROb3RlKS5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuZ2VuZXJhbC5hbGxvd1JlZmVyZW5jZUN1cnJlbnROb3RlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVmZXJlbmNlQ3VycmVudE5vdGVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3JlZmVyZW5jZUN1cnJlbnROb3RlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZmVyZW5jZUN1cnJlbnROb3RlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgIGZ1bmN0aW9uIGRlc2NMaW5rKHRleHQ6IHN0cmluZywgbGluazogc3RyaW5nKTogRG9jdW1lbnRGcmFnbWVudCB7XG4gICAgICAgIGNvbnN0IGZyYWcgPSBuZXcgRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICBjb25zdCBkZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBkZXNjLmlubmVyVGV4dCA9IHRleHQgKyAnICc7XG4gICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQoZGVzYyk7XG5cbiAgICAgICAgY29uc3QgYW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICBhbmNob3IuaHJlZiA9IGxpbms7XG4gICAgICAgIGFuY2hvci50YXJnZXQgPSAnX2JsYW5rJztcbiAgICAgICAgYW5jaG9yLnJlbCA9ICdub29wZW5lciBub3JlZmVycmVyJztcbiAgICAgICAgYW5jaG9yLmlubmVyVGV4dCA9ICcoaHR0cHM6Ly9wbGF0Zm9ybS5vcGVuYWkuY29tL3Rva2VuaXplciknO1xuICAgICAgICBmcmFnLmFwcGVuZENoaWxkKGFuY2hvcik7XG5cbiAgICAgICAgcmV0dXJuIGZyYWc7XG4gICAgfVxufSIsICJpbXBvcnQgeyByZXF1ZXN0VXJsIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IE9wZW5BSSBmcm9tICdvcGVuYWknO1xuaW1wb3J0IEJNT0dQVCBmcm9tICdzcmMvbWFpbic7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaE9wZW5BSUJhc2VNb2RlbHMocGx1Z2luOiBCTU9HUFQpIHtcbiAgICBjb25zdCBvcGVuYWkgPSBuZXcgT3BlbkFJKHtcbiAgICAgICAgYXBpS2V5OiBwbHVnaW4uc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMub3BlbkFJLkFQSUtleSxcbiAgICAgICAgYmFzZVVSTDogcGx1Z2luLnNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm9wZW5BSS5vcGVuQUlCYXNlVXJsLFxuICAgICAgICBkYW5nZXJvdXNseUFsbG93QnJvd3NlcjogdHJ1ZSwgLy8gYXBpS2V5IGlzIHN0b3JlZCB3aXRoaW4gZGF0YS5qc29uXG4gICAgfSk7XG5cblx0Y29uc3QgbGlzdCA9IGF3YWl0IG9wZW5haS5tb2RlbHMubGlzdCgpO1xuXG5cdGNvbnN0IG1vZGVscyA9IGxpc3QuZGF0YS5tYXAoKG1vZGVsKSA9PiBtb2RlbC5pZCk7XG5cdHBsdWdpbi5zZXR0aW5ncy5BUElDb25uZWN0aW9ucy5vcGVuQUkub3BlbkFJQmFzZU1vZGVscyA9IG1vZGVscztcblxuXHRyZXR1cm4gbW9kZWxzO1xufVxuXG4vLyBGZXRjaCBPTExBTUEgbW9kZWxzIGZyb20gT0xMQU1BIFJFU1QgQVBJXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hPbGxhbWFNb2RlbHMocGx1Z2luOiBCTU9HUFQpIHtcblx0Y29uc3Qgb2xsYW1hUkVTVEFQSVVSTCA9IHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLlJFU1RBUElVUkw7XG5cbiAgICAvLyBVUkwgVmFsaWRhdGlvblxuICAgIHRyeSB7XG4gICAgICAgIG5ldyBVUkwob2xsYW1hUkVTVEFQSVVSTCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgLy8gY29uc29sZS5lcnJvcignSW52YWxpZCBPTExBTUEgVVJMOicsIG9sbGFtYVJFU1RBUElVUkwpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG5cdHRyeSB7XG5cdFx0Y29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHtcblx0XHRcdHVybDogb2xsYW1hUkVTVEFQSVVSTCArICcvYXBpL3RhZ3MnLFxuXHRcdFx0bWV0aG9kOiAnR0VUJyxcblx0XHRcdGhlYWRlcnM6IHtcblx0XHRcdFx0J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcblx0XHRcdH0sXG5cdFx0fSk7XG5cblx0XHRjb25zdCBqc29uRGF0YSA9IHJlc3BvbnNlLmpzb247XG5cblx0XHRjb25zdCBtb2RlbHMgPSBqc29uRGF0YS5tb2RlbHMubWFwKChtb2RlbDogeyBuYW1lOiBzdHJpbmc7IH0pID0+IG1vZGVsLm5hbWUpO1xuXHRcdHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYU1vZGVscyA9IG1vZGVsczsgIFxuXG5cblx0XHRyZXR1cm4gbW9kZWxzO1xuXG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoUkVTVEFQSVVSTE1vZGVscyhwbHVnaW46IEJNT0dQVCkge1xuICAgIGNvbnN0IFJFU1RBUElVUkwgPSBwbHVnaW4uc2V0dGluZ3MuUkVTVEFQSVVSTENvbm5lY3Rpb24uUkVTVEFQSVVSTDtcblxuICAgIC8vIFVSTCBWYWxpZGF0aW9uXG4gICAgdHJ5IHtcbiAgICAgICAgbmV3IFVSTChSRVNUQVBJVVJMKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIE9wZW5BSSBSZXN0IEFQSSBVUkw6JywgUkVTVEFQSVVSTCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB1cmxzID0gW1xuICAgICAgICBSRVNUQVBJVVJMICsgJy92MS9tb2RlbHMnLFxuICAgICAgICBSRVNUQVBJVVJMICsgJy9hcGkvdjEvbW9kZWxzJ1xuICAgIF07XG5cbiAgICBsZXQgbGFzdEVycm9yID0gbnVsbDtcblxuICAgIGZvciAoY29uc3QgdXJsIG9mIHVybHMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgaGVhZGVycyB3aXRoIENvbnRlbnQtVHlwZSBvbmx5XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiBzdHJpbmc7IEF1dGhvcml6YXRpb24/OiBzdHJpbmcgfSA9IHtcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBJZiBBUElLZXkgaXMgcHJvdmlkZWQsIGFkZCBBdXRob3JpemF0aW9uIGhlYWRlclxuICAgICAgICAgICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5SRVNUQVBJVVJMQ29ubmVjdGlvbi5BUElLZXkpIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLkF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7cGx1Z2luLnNldHRpbmdzLlJFU1RBUElVUkxDb25uZWN0aW9uLkFQSUtleX1gO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgaGVhZGVyczogaGVhZGVycyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgcmVzcG9uc2UgaXMgdmFsaWRcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5qc29uICYmIChyZXNwb25zZS5qc29uLmRhdGEgfHwgQXJyYXkuaXNBcnJheShyZXNwb25zZS5qc29uKSkpIHtcblx0XHRcdFx0bGV0IG1vZGVscztcblx0XHRcdFx0aWYgKEFycmF5LmlzQXJyYXkocmVzcG9uc2UuanNvbikpIHtcblx0XHRcdFx0XHRtb2RlbHMgPSByZXNwb25zZS5qc29uLm1hcCgobW9kZWw6IHsgaWQ6IG51bWJlcjsgfSkgPT4gbW9kZWwuaWQpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdG1vZGVscyA9IHJlc3BvbnNlLmpzb24uZGF0YS5tYXAoKG1vZGVsOiB7IGlkOiBudW1iZXI7IH0pID0+IG1vZGVsLmlkKTtcblx0XHRcdFx0fVxuXG4gICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLlJFU1RBUElVUkxDb25uZWN0aW9uLlJFU1RBUElVUkxNb2RlbHMgPSBtb2RlbHM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1vZGVscztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxhc3RFcnJvciA9IGVycm9yOyAvLyBTdG9yZSB0aGUgbGFzdCBlcnJvciBhbmQgY29udGludWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIGFsbCByZXF1ZXN0cyBmYWlsZWQsIHRocm93IHRoZSBsYXN0IGVuY291bnRlcmVkIGVycm9yXG4gICAgaWYgKGxhc3RFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBtYWtpbmcgQVBJIHJlcXVlc3Q6JywgbGFzdEVycm9yKTtcbiAgICAgICAgdGhyb3cgbGFzdEVycm9yOyAvLyBSZW1vdmVkIHRoZSBOb3RpY2UgZm9yIHNpbXBsaWNpdHksIGFkZCBiYWNrIGlmIG5lZWRlZCBpbiB5b3VyIGVudmlyb25tZW50LlxuICAgIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoTWlzdHJhbE1vZGVscyhwbHVnaW46IEJNT0dQVCkge1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgICAgICB1cmw6ICdodHRwczovL2FwaS5taXN0cmFsLmFpL3YxL21vZGVscycsXG4gICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7cGx1Z2luLnNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm1pc3RyYWwuQVBJS2V5fWBcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSByZXNwb25zZSBpcyB2YWxpZFxuICAgICAgICBpZiAocmVzcG9uc2UuanNvbiAmJiByZXNwb25zZS5qc29uLmRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IG1vZGVscyA9IHJlc3BvbnNlLmpzb24uZGF0YS5tYXAoKG1vZGVsOiB7IGlkOiBudW1iZXI7IH0pID0+IG1vZGVsLmlkKTtcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5BUElDb25uZWN0aW9ucy5taXN0cmFsLm1pc3RyYWxNb2RlbHMgPSBtb2RlbHM7XG4gICAgICAgICAgICByZXR1cm4gbW9kZWxzO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIFxuICAgIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoR29vZ2xlR2VtaW5pTW9kZWxzKHBsdWdpbjogQk1PR1BUKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgQVBJX0tFWSA9IHBsdWdpbi5zZXR0aW5ncy5BUElDb25uZWN0aW9ucy5nb29nbGVHZW1pbmkuQVBJS2V5O1xuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgICAgICB1cmw6IGBodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbS92MWJldGEvbW9kZWxzP2tleT0ke0FQSV9LRVl9YCxcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSByZXNwb25zZSBpcyB2YWxpZCBhbmQgaGFzIGRhdGFcbiAgICAgICAgaWYgKHJlc3BvbnNlLmpzb24gJiYgcmVzcG9uc2UuanNvbi5tb2RlbHMpIHtcbiAgICAgICAgICAgIGNvbnN0IG1vZGVscyA9IHJlc3BvbnNlLmpzb24ubW9kZWxzLm1hcCgobW9kZWw6IHsgbmFtZTogc3RyaW5nOyB9KSA9PiBtb2RlbC5uYW1lKS5maWx0ZXIoKG1vZGVsOiBzdHJpbmcpID0+IG1vZGVsLmVuZHNXaXRoKCdtb2RlbHMvZ2VtaW5pLXBybycpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU3RvcmUgdGhlIG1vZGVscyBpbiB5b3VyIHBsdWdpbidzIHNldHRpbmdzIG9yIGhhbmRsZSB0aGVtIGFzIG5lZWRlZFxuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLmdvb2dsZUdlbWluaS5nZW1pbmlNb2RlbHMgPSBtb2RlbHM7XG4gICAgICAgICAgICByZXR1cm4gbW9kZWxzO1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfVxufVxuXG5cblxuIiwgImltcG9ydCB7IENvbG9yQ29tcG9uZW50LCBTZXR0aW5nLCBTZXR0aW5nVGFiLCBzZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IEJNT0dQVCwgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnc3JjL21haW4nO1xuaW1wb3J0IHsgY29sb3JUb0hleCB9IGZyb20gJ3NyYy91dGlscy9Db2xvckNvbnZlcnRlcic7XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRBcHBlYXJhbmNlU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBwbHVnaW46IEJNT0dQVCwgU2V0dGluZ1RhYjogU2V0dGluZ1RhYikge1xuICAgIGNvbnN0IHRvZ2dsZVNldHRpbmdDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICd0b2dnbGVTZXR0aW5nQ29udGFpbmVyJyB9KTtcbiAgICB0b2dnbGVTZXR0aW5nQ29udGFpbmVyLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnQXBwZWFyYW5jZSd9KTtcblxuICAgIGNvbnN0IGluaXRpYWxTdGF0ZSA9IHBsdWdpbi5zZXR0aW5ncy50b2dnbGVBcHBlYXJhbmNlU2V0dGluZ3M7XG4gICAgY29uc3QgY2hldnJvbkljb24gPSB0b2dnbGVTZXR0aW5nQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICdjaGV2cm9uLWljb24nIH0pO1xuICAgIHNldEljb24oY2hldnJvbkljb24sIGluaXRpYWxTdGF0ZSA/ICdjaGV2cm9uLWRvd24nIDogJ2NoZXZyb24tcmlnaHQnKTtcblxuICAgIC8vIENyZWF0ZSB0aGUgc2V0dGluZ3MgY29udGFpbmVyIHRvIGJlIHRvZ2dsZWRcbiAgICBjb25zdCBzZXR0aW5nc0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmdzQ29udGFpbmVyJyB9KTtcbiAgICBzZXR0aW5nc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gaW5pdGlhbFN0YXRlID8gJ2Jsb2NrJyA6ICdub25lJztcblxuICAgIC8vIFRvZ2dsZSB2aXNpYmlsaXR5XG4gICAgdG9nZ2xlU2V0dGluZ0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgaXNPcGVuID0gc2V0dGluZ3NDb250YWluZXIuc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnO1xuICAgICAgICBpZiAoaXNPcGVuKSB7XG4gICAgICAgICAgICBzZXRJY29uKGNoZXZyb25JY29uLCAnY2hldnJvbi1yaWdodCcpOyAvLyBDbG9zZSBzdGF0ZVxuICAgICAgICAgICAgc2V0dGluZ3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy50b2dnbGVBcHBlYXJhbmNlU2V0dGluZ3MgPSBmYWxzZTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0SWNvbihjaGV2cm9uSWNvbiwgJ2NoZXZyb24tZG93bicpOyAvLyBPcGVuIHN0YXRlXG4gICAgICAgICAgICBzZXR0aW5nc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy50b2dnbGVBcHBlYXJhbmNlU2V0dGluZ3MgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICB9KTtcbiAgICBcbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUoJ1VzZXIgTmFtZScpXG4gICAgICAgIC5zZXREZXNjKCdDcmVhdGUgYSB1c2VybmFtZS4nKVxuICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgdXNlciBuYW1lJylcbiAgICAgICAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MuYXBwZWFyYW5jZS51c2VyTmFtZSB8fCBERUZBVUxUX1NFVFRJTkdTLmFwcGVhcmFuY2UudXNlck5hbWUpXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmFwcGVhcmFuY2UudXNlck5hbWUgPSB2YWx1ZSA/IHZhbHVlLnRvVXBwZXJDYXNlKCkgOiBERUZBVUxUX1NFVFRJTkdTLmFwcGVhcmFuY2UudXNlck5hbWU7XG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm1heExlbmd0aCA9IDMwO1xuICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICBjb25zdCB1c2VyTmFtZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudXNlck5hbWUnKSBhcyBOb2RlTGlzdE9mPEhUTUxIZWFkaW5nRWxlbWVudD47XG4gICAgICAgICAgICAgICAgdXNlck5hbWVzLmZvckVhY2godXNlck5hbWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB1c2VyTmFtZS50ZXh0Q29udGVudCA9IHBsdWdpbi5zZXR0aW5ncy5hcHBlYXJhbmNlLnVzZXJOYW1lO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKHNldHRpbmdzQ29udGFpbmVyKVxuICAgICAgICAuc2V0TmFtZSgnQ2hhdGJvdCBOYW1lJylcbiAgICAgICAgLnNldERlc2MoJ05hbWUgeW91ciBjaGF0Ym90LicpXG4gICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciBjaGF0Ym90IG5hbWUnKVxuICAgICAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5hcHBlYXJhbmNlLmNoYXRib3ROYW1lIHx8IERFRkFVTFRfU0VUVElOR1MuYXBwZWFyYW5jZS5jaGF0Ym90TmFtZSlcbiAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuYXBwZWFyYW5jZS5jaGF0Ym90TmFtZSA9IHZhbHVlID8gdmFsdWUudG9VcHBlckNhc2UoKSA6IERFRkFVTFRfU0VUVElOR1MuYXBwZWFyYW5jZS5jaGF0Ym90TmFtZTtcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwubWF4TGVuZ3RoID0gMzA7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYXRib3ROYW1lSGVhZGluZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjaGF0Ym90TmFtZUhlYWRpbmcnKSBhcyBIVE1MSGVhZGluZ0VsZW1lbnQ7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hhdGJvdE5hbWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYXRib3ROYW1lJykgYXMgTm9kZUxpc3RPZjxIVE1MSGVhZGluZ0VsZW1lbnQ+O1xuICAgICAgICAgICAgICAgIGlmIChjaGF0Ym90TmFtZUhlYWRpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgY2hhdGJvdE5hbWVIZWFkaW5nLnRleHRDb250ZW50ID0gcGx1Z2luLnNldHRpbmdzLmFwcGVhcmFuY2UuY2hhdGJvdE5hbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNoYXRib3ROYW1lcy5mb3JFYWNoKGNoYXRib3ROYW1lID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2hhdGJvdE5hbWUudGV4dENvbnRlbnQgPSBwbHVnaW4uc2V0dGluZ3MuYXBwZWFyYW5jZS5jaGF0Ym90TmFtZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICBsZXQgY29sb3JQaWNrZXIxOiBDb2xvckNvbXBvbmVudDtcbiAgICBjb25zdCBkZWZhdWx0VXNlck1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoREVGQVVMVF9TRVRUSU5HUy5hcHBlYXJhbmNlLnVzZXJNZXNzYWdlQmFja2dyb3VuZENvbG9yKS50cmltKCk7XG4gICAgXG4gICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgICAgIC5zZXROYW1lKCdVc2VyIE1lc3NhZ2UgQmFja2dyb3VuZCBDb2xvcicpXG4gICAgICAgIC5zZXREZXNjKCdNb2RpZnkgdGhlIGJhY2tncm91bmQgY29sb3Igb2YgdGhlIHVzZXJNZXNzYWdlIGVsZW1lbnQuJylcbiAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnUmVzdG9yZSBEZWZhdWx0JylcbiAgICAgICAgICAgIC5zZXRJY29uKCdyb3RhdGUtY3cnKVxuICAgICAgICAgICAgLnNldENsYXNzKCdjbGlja2FibGUtaWNvbicpXG4gICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gY29sb3JUb0hleChkZWZhdWx0VXNlck1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IpO1xuICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyMS5zZXRWYWx1ZShkZWZhdWx0VmFsdWUpO1xuICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpO1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlQ29udGFpbmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJNZXNzYWdlcyA9IG1lc3NhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnVzZXJNZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJNZXNzYWdlcy5mb3JFYWNoKCh1c2VyTWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHVzZXJNZXNzYWdlIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgICAuYWRkQ29sb3JQaWNrZXIoKGNvbG9yKSA9PiB7XG4gICAgICAgICAgICBjb2xvclBpY2tlcjEgPSBjb2xvcjtcblxuICAgICAgICAgICAgbGV0IGRlZmF1bHRWYWx1ZSA9IHBsdWdpbi5zZXR0aW5ncy5hcHBlYXJhbmNlLnVzZXJNZXNzYWdlQmFja2dyb3VuZENvbG9yO1xuXG4gICAgICAgICAgICBpZiAocGx1Z2luLnNldHRpbmdzLmFwcGVhcmFuY2UudXNlck1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IgPT0gJy0tYmFja2dyb3VuZC1wcmltYXJ5Jykge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZSA9IGNvbG9yVG9IZXgoZGVmYXVsdFVzZXJNZXNzYWdlQmFja2dyb3VuZENvbG9yKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29sb3Iuc2V0VmFsdWUoZGVmYXVsdFZhbHVlKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhleFZhbHVlID0gY29sb3JUb0hleCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmFwcGVhcmFuY2UudXNlck1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IgPSBoZXhWYWx1ZTtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lc3NhZ2VDb250YWluZXInKTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZUNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyTWVzc2FnZXMgPSBtZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy51c2VyTWVzc2FnZScpO1xuICAgICAgICAgICAgICAgICAgICB1c2VyTWVzc2FnZXMuZm9yRWFjaCgodXNlck1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB1c2VyTWVzc2FnZSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gaGV4VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgIGxldCBjb2xvclBpY2tlcjI6IENvbG9yQ29tcG9uZW50O1xuICAgIGNvbnN0IGRlZmF1bHRCb3RNZXNzYWdlQmFja2dyb3VuZENvbG9yID0gZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKERFRkFVTFRfU0VUVElOR1MuYXBwZWFyYW5jZS5ib3RNZXNzYWdlQmFja2dyb3VuZENvbG9yKS50cmltKCk7XG5cbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUoJ0JvdCBNZXNzYWdlIEJhY2tncm91bmQgQ29sb3InKVxuICAgICAgICAuc2V0RGVzYygnTW9kaWZ5IHRoZSBiYWNrZ3JvdW5kIGNvbG9yIG9mIHRoZSBib3RNZXNzYWdlIGVsZW1lbnQuJylcbiAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXG4gICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnUmVzdG9yZSBEZWZhdWx0JylcbiAgICAgICAgICAgIC5zZXRJY29uKCdyb3RhdGUtY3cnKVxuICAgICAgICAgICAgLnNldENsYXNzKCdjbGlja2FibGUtaWNvbicpXG4gICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVmYXVsdFZhbHVlID0gY29sb3JUb0hleChkZWZhdWx0Qm90TWVzc2FnZUJhY2tncm91bmRDb2xvcik7XG4gICAgICAgICAgICAgICAgY29sb3JQaWNrZXIyLnNldFZhbHVlKGRlZmF1bHRWYWx1ZSk7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJyk7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VDb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYm90TWVzc2FnZXMgPSBtZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ib3RNZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgIGJvdE1lc3NhZ2VzLmZvckVhY2goKGJvdE1lc3NhZ2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBib3RNZXNzYWdlIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgICAuYWRkQ29sb3JQaWNrZXIoKGNvbG9yKSA9PiB7XG4gICAgICAgICAgICBjb2xvclBpY2tlcjIgPSBjb2xvcjtcblxuICAgICAgICAgICAgbGV0IGRlZmF1bHRWYWx1ZSA9IHBsdWdpbi5zZXR0aW5ncy5hcHBlYXJhbmNlLmJvdE1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3I7XG5cbiAgICAgICAgICAgIGlmIChwbHVnaW4uc2V0dGluZ3MuYXBwZWFyYW5jZS5ib3RNZXNzYWdlQmFja2dyb3VuZENvbG9yID09ICctLWJhY2tncm91bmQtc2Vjb25kYXJ5Jykge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZSA9IGNvbG9yVG9IZXgoZGVmYXVsdEJvdE1lc3NhZ2VCYWNrZ3JvdW5kQ29sb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb2xvci5zZXRWYWx1ZShkZWZhdWx0VmFsdWUpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoZXhWYWx1ZSA9IGNvbG9yVG9IZXgodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuYXBwZWFyYW5jZS5ib3RNZXNzYWdlQmFja2dyb3VuZENvbG9yID0gaGV4VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVzc2FnZUNvbnRhaW5lcicpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZUNvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYm90TWVzc2FnZXMgPSBtZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5ib3RNZXNzYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3RNZXNzYWdlcy5mb3JFYWNoKChib3RNZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGJvdE1lc3NhZ2UgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBoZXhWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgbGV0IGNvbG9yUGlja2VyMzogQ29sb3JDb21wb25lbnQ7XG4gICAgY29uc3QgZGVmYXVsdENoYXRCb3hCYWNrZ3JvdW5kQ29sb3IgPSBnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoREVGQVVMVF9TRVRUSU5HUy5hcHBlYXJhbmNlLmNoYXRCb3hCYWNrZ3JvdW5kQ29sb3IpLnRyaW0oKTtcblxuICAgIG5ldyBTZXR0aW5nKHNldHRpbmdzQ29udGFpbmVyKVxuICAgICAgICAuc2V0TmFtZSgnQ2hhdGJveCBCYWNrZ3JvdW5kIENvbG9yJylcbiAgICAgICAgLnNldERlc2MoJ01vZGlmeSB0aGUgYmFja2dyb3VuZCBjb2xvciBvZiB0aGUgY2hhdGJveC4nKVxuICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdSZXN0b3JlIERlZmF1bHQnKVxuICAgICAgICAgICAgLnNldEljb24oJ3JvdGF0ZS1jdycpXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2NsaWNrYWJsZS1pY29uJylcbiAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0VmFsdWUgPSBjb2xvclRvSGV4KGRlZmF1bHRDaGF0Qm94QmFja2dyb3VuZENvbG9yKTtcbiAgICAgICAgICAgICAgICBjb2xvclBpY2tlcjMuc2V0VmFsdWUoZGVmYXVsdFZhbHVlKTtcbiAgICBcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0Ym94IHRleHRhcmVhJyk7XG4gICAgICAgICAgICAgICAgaWYgKHRleHRhcmVhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0ZXh0YXJlYSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBkZWZhdWx0VmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgICAuYWRkQ29sb3JQaWNrZXIoKGNvbG9yKSA9PiB7XG4gICAgICAgICAgICBjb2xvclBpY2tlcjMgPSBjb2xvcjtcblxuICAgICAgICAgICAgbGV0IGRlZmF1bHRWYWx1ZSA9IHBsdWdpbi5zZXR0aW5ncy5hcHBlYXJhbmNlLmNoYXRCb3hCYWNrZ3JvdW5kQ29sb3I7XG5cbiAgICAgICAgICAgIGlmIChkZWZhdWx0VmFsdWUgPT0gJy0taW50ZXJhY3RpdmUtYWNjZW50Jykge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZSA9IGNvbG9yVG9IZXgoZGVmYXVsdENoYXRCb3hCYWNrZ3JvdW5kQ29sb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb2xvci5zZXRWYWx1ZShkZWZhdWx0VmFsdWUpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBoZXhWYWx1ZSA9IGNvbG9yVG9IZXgodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuYXBwZWFyYW5jZS5jaGF0Qm94QmFja2dyb3VuZENvbG9yID0gaGV4VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHRhcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXRib3ggdGV4dGFyZWEnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRleHRhcmVhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGV4dGFyZWEgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGhleFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5ib3JkZXJDb2xvciA9IGhleFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgbGV0IGNvbG9yUGlja2VyNDogQ29sb3JDb21wb25lbnQ7XG4gICAgY29uc3QgZGVmYXVsdENoYXRCb3hCb3JkZXJDb2xvciA9IGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZShERUZBVUxUX1NFVFRJTkdTLmFwcGVhcmFuY2UuY2hhdEJveEJvcmRlckNvbG9yKS50cmltKCk7XG5cbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUoJ0NoYXRib3ggQm9yZGVyIENvbG9yJylcbiAgICAgICAgLnNldERlc2MoJ01vZGlmeSB0aGUgYm9yZGVyIGNvbG9yIG9mIHRoZSBjaGF0Ym94LicpXG4gICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxuICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1Jlc3RvcmUgRGVmYXVsdCcpXG4gICAgICAgICAgICAuc2V0SWNvbigncm90YXRlLWN3JylcbiAgICAgICAgICAgIC5zZXRDbGFzcygnY2xpY2thYmxlLWljb24nKVxuICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRWYWx1ZSA9IGNvbG9yVG9IZXgoZGVmYXVsdENoYXRCb3hCb3JkZXJDb2xvcik7XG4gICAgICAgICAgICAgICAgY29sb3JQaWNrZXI0LnNldFZhbHVlKGRlZmF1bHRWYWx1ZSk7XG4gICAgXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdGJveCcpO1xuICAgICAgICAgICAgICAgIGlmICh0ZXh0YXJlYSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gdGV4dGFyZWEgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZGVmYXVsdFZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICAgLmFkZENvbG9yUGlja2VyKChjb2xvcikgPT4ge1xuICAgICAgICAgICAgY29sb3JQaWNrZXI0ID0gY29sb3I7XG5cbiAgICAgICAgICAgIGxldCBkZWZhdWx0VmFsdWUgPSBwbHVnaW4uc2V0dGluZ3MuYXBwZWFyYW5jZS5jaGF0Qm94Qm9yZGVyQ29sb3I7XG5cbiAgICAgICAgICAgIGlmIChwbHVnaW4uc2V0dGluZ3MuYXBwZWFyYW5jZS5jaGF0Qm94Qm9yZGVyQ29sb3IgPT0gJy0taW50ZXJhY3RpdmUtYWNjZW50Jykge1xuICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZSA9IGNvbG9yVG9IZXgoZGVmYXVsdENoYXRCb3hCb3JkZXJDb2xvcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbG9yLnNldFZhbHVlKGRlZmF1bHRWYWx1ZSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhleFZhbHVlID0gY29sb3JUb0hleCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5hcHBlYXJhbmNlLmNoYXRCb3hCb3JkZXJDb2xvciA9IGhleFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0Ym94Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0YXJlYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IHRleHRhcmVhIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBoZXhWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuYm9yZGVyQ29sb3IgPSBoZXhWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIG5ldyBTZXR0aW5nKHNldHRpbmdzQ29udGFpbmVyKVxuICAgIC5zZXROYW1lKCdBbGxvdyBIZWFkZXInKVxuICAgIC5zZXREZXNjKCdEaXNwbGF5IGNoYXRib3QgbmFtZSBhbmQgbW9kZWwgbmFtZSBpbiBoZWFkZXIuJylcbiAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG4gICAgICAgIHRvZ2dsZS5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MuYXBwZWFyYW5jZS5hbGxvd0hlYWRlcikub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuYXBwZWFyYW5jZS5hbGxvd0hlYWRlciA9IHZhbHVlO1xuICAgICAgICAgICAgY29uc3QgcmVmZXJlbmNlQ3VycmVudE5vdGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3JlZmVyZW5jZUN1cnJlbnROb3RlJykgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoZWFkZXInKSBhcyBIVE1MRWxlbWVudDtcblxuICAgICAgICAgICAgICAgIGlmIChoZWFkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VDdXJyZW50Tm90ZUVsZW1lbnQuc3R5bGUubWFyZ2luID0gJy0wLjVyZW0gMCAwLjVyZW0gMCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaGVhZGVyJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZXNzYWdlQ29udGFpbmVyJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgaWYgKGhlYWRlcikge1xuICAgICAgICAgICAgICAgICAgICBoZWFkZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5zdHlsZS5tYXhIZWlnaHQgPSAnY2FsYygxMDAlIC0gNjBweCknO1xuICAgICAgICAgICAgICAgICAgICByZWZlcmVuY2VDdXJyZW50Tm90ZUVsZW1lbnQuc3R5bGUubWFyZ2luID0gJzAuNXJlbSAwIDAuNXJlbSAwJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pXG4gICAgKTtcbn1cbiIsICJpbXBvcnQgeyBTZXR0aW5nLCBTZXR0aW5nVGFiLCBzZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IEJNT0dQVCwgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnc3JjL21haW4nO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2hhdEhpc3RvcnlTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHBsdWdpbjogQk1PR1BULCBTZXR0aW5nVGFiOiBTZXR0aW5nVGFiKSB7XG4gICAgY29uc3QgdG9nZ2xlU2V0dGluZ0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ3RvZ2dsZVNldHRpbmdDb250YWluZXInIH0pO1xuICAgIHRvZ2dsZVNldHRpbmdDb250YWluZXIuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICdDaGF0IEhpc3RvcnknfSk7XG5cbiAgICBjb25zdCBpbml0aWFsU3RhdGUgPSBwbHVnaW4uc2V0dGluZ3MudG9nZ2xlQ2hhdEhpc3RvcnlTZXR0aW5ncztcbiAgICBjb25zdCBjaGV2cm9uSWNvbiA9IHRvZ2dsZVNldHRpbmdDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ2NoZXZyb24taWNvbicgfSk7XG4gICAgc2V0SWNvbihjaGV2cm9uSWNvbiwgaW5pdGlhbFN0YXRlID8gJ2NoZXZyb24tZG93bicgOiAnY2hldnJvbi1yaWdodCcpO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBzZXR0aW5ncyBjb250YWluZXIgdG8gYmUgdG9nZ2xlZFxuICAgIGNvbnN0IHNldHRpbmdzQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiAnc2V0dGluZ3NDb250YWluZXInIH0pO1xuICAgIHNldHRpbmdzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBpbml0aWFsU3RhdGUgPyAnYmxvY2snIDogJ25vbmUnO1xuXG4gICAgLy8gVG9nZ2xlIHZpc2liaWxpdHlcbiAgICB0b2dnbGVTZXR0aW5nQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBpc09wZW4gPSBzZXR0aW5nc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZSc7XG4gICAgICAgIGlmIChpc09wZW4pIHtcbiAgICAgICAgICAgIHNldEljb24oY2hldnJvbkljb24sICdjaGV2cm9uLXJpZ2h0Jyk7IC8vIENsb3NlIHN0YXRlXG4gICAgICAgICAgICBzZXR0aW5nc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnRvZ2dsZUNoYXRIaXN0b3J5U2V0dGluZ3MgPSBmYWxzZTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0SWNvbihjaGV2cm9uSWNvbiwgJ2NoZXZyb24tZG93bicpOyAvLyBPcGVuIHN0YXRlXG4gICAgICAgICAgICBzZXR0aW5nc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy50b2dnbGVDaGF0SGlzdG9yeVNldHRpbmdzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUoJ0NoYXQgSGlzdG9yeSBGb2xkZXIgUGF0aCcpXG4gICAgICAgIC5zZXREZXNjKCdTYXZlIHlvdXIgY2hhdCBoaXN0b3J5IGluIGEgc3BlY2lmaWVkIGZvbGRlci4nKVxuICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignQk1PLycpXG4gICAgICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLmNoYXRIaXN0b3J5LmNoYXRIaXN0b3J5UGF0aCB8fCBERUZBVUxUX1NFVFRJTkdTLmNoYXRIaXN0b3J5LmNoYXRIaXN0b3J5UGF0aClcbiAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuY2hhdEhpc3RvcnkuY2hhdEhpc3RvcnlQYXRoID0gdmFsdWUgPyB2YWx1ZSA6IERFRkFVTFRfU0VUVElOR1MuY2hhdEhpc3RvcnkuY2hhdEhpc3RvcnlQYXRoO1xuICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUoJ1RlbXBsYXRlIEZpbGUgUGF0aCcpXG4gICAgICAgIC5zZXREZXNjKCdJbnNlcnQgeW91ciB0ZW1wbGF0ZSBmaWxlIHBhdGguJylcbiAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ3RlbXBsYXRlcy9ibW8ubWQnKVxuICAgICAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5jaGF0SGlzdG9yeS50ZW1wbGF0ZUZpbGVQYXRoIHx8IERFRkFVTFRfU0VUVElOR1MuY2hhdEhpc3RvcnkudGVtcGxhdGVGaWxlUGF0aClcbiAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuY2hhdEhpc3RvcnkudGVtcGxhdGVGaWxlUGF0aCA9IHZhbHVlID8gdmFsdWUgOiBERUZBVUxUX1NFVFRJTkdTLmNoYXRIaXN0b3J5LnRlbXBsYXRlRmlsZVBhdGg7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBwcm92aWRlZCBmaWxlIHBhdGggZW5kcyB3aXRoICcubWQnLCBpZiBub3QsIGFwcGVuZCBpdFxuICAgICAgICAgICAgICAgICAgICBpZiAoIXBsdWdpbi5zZXR0aW5ncy5jaGF0SGlzdG9yeS50ZW1wbGF0ZUZpbGVQYXRoLmVuZHNXaXRoKCcubWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmNoYXRIaXN0b3J5LnRlbXBsYXRlRmlsZVBhdGggKz0gJy5tZCc7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsRmlsZXMgPSBhcHAudmF1bHQuZ2V0RmlsZXMoKTsgLy8gUmV0cmlldmUgYWxsIGZpbGVzIGZyb20gdGhlIHZhdWx0XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHNwZWNpZmllZCBmaWxlIHBhdGggKGluY2x1ZGluZyBkaXJlY3RvcmllcykgZXhpc3RzIGluIHRoZSBhcnJheSBvZiBmaWxlc1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlRXhpc3RzID0gYWxsRmlsZXMuc29tZShmaWxlID0+IFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZS5wYXRoLnRvTG93ZXJDYXNlKCkgPT09IHBsdWdpbi5zZXR0aW5ncy5jaGF0SGlzdG9yeS50ZW1wbGF0ZUZpbGVQYXRoLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlRXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcIkZpbGUgZXhpc3RzIGluIHZhdWx0IVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS5ib3JkZXJDb2xvciA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJGaWxlIGRvZXMgbm90IGV4aXN0IGluIHZhdWx0LlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS5ib3JkZXJDb2xvciA9ICdyZWQnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlIGlucHV0IGlzIGVtcHR5LCByZXNldCB0aGUgYm9yZGVyIGNvbG9yXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS5ib3JkZXJDb2xvciA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuY2hhdEhpc3RvcnkudGVtcGxhdGVGaWxlUGF0aCA9IERFRkFVTFRfU0VUVElOR1MuY2hhdEhpc3RvcnkudGVtcGxhdGVGaWxlUGF0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgICAgIC5zZXROYW1lKCdBbGxvdyBSZW5hbWUgTm90ZSBUaXRsZScpXG4gICAgICAgIC5zZXREZXNjKCdBbGxvdyBtb2RlbCB0byByZW5hbWUgdGhlIG5vdGUgdGl0bGUgd2hlbiBzYXZpbmcgY2hhdCBoaXN0b3J5LicpXG4gICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICAgIHRvZ2dsZS5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MuY2hhdEhpc3RvcnkuYWxsb3dSZW5hbWVOb3RlVGl0bGUpLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5jaGF0SGlzdG9yeS5hbGxvd1JlbmFtZU5vdGVUaXRsZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG59IiwgImltcG9ydCB7IFNldHRpbmcsIFNldHRpbmdUYWIsIHNldEljb24gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgQk1PR1BULCB7IERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICdzcmMvbWFpbic7XG5pbXBvcnQgeyBhZGREZXNjcmlwdGlvbkxpbmsgfSBmcm9tICdzcmMvdXRpbHMvRGVzY3JpcHRpb25MaW5rJztcblxuLy8gT2xsYW1hIFNldHRpbmdzXG5leHBvcnQgZnVuY3Rpb24gYWRkT2xsYW1hU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBwbHVnaW46IEJNT0dQVCwgU2V0dGluZ1RhYjogU2V0dGluZ1RhYikge1xuICAgIGNvbnN0IHRvZ2dsZVNldHRpbmdDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICd0b2dnbGVTZXR0aW5nQ29udGFpbmVyJyB9KTtcbiAgICB0b2dnbGVTZXR0aW5nQ29udGFpbmVyLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnT2xsYW1hIENvbm5lY3Rpb24nfSk7XG5cbiAgICBjb25zdCBpbml0aWFsU3RhdGUgPSBwbHVnaW4uc2V0dGluZ3MudG9nZ2xlT2xsYW1hU2V0dGluZ3M7XG4gICAgY29uc3QgY2hldnJvbkljb24gPSB0b2dnbGVTZXR0aW5nQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICdjaGV2cm9uLWljb24nIH0pO1xuICAgIHNldEljb24oY2hldnJvbkljb24sIGluaXRpYWxTdGF0ZSA/ICdjaGV2cm9uLWRvd24nIDogJ2NoZXZyb24tcmlnaHQnKTtcblxuICAgIC8vIENyZWF0ZSB0aGUgc2V0dGluZ3MgY29udGFpbmVyIHRvIGJlIHRvZ2dsZWRcbiAgICBjb25zdCBzZXR0aW5nc0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmdzQ29udGFpbmVyJyB9KTtcbiAgICBzZXR0aW5nc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gaW5pdGlhbFN0YXRlID8gJ2Jsb2NrJyA6ICdub25lJztcblxuICAgIC8vIFRvZ2dsZSB2aXNpYmlsaXR5XG4gICAgdG9nZ2xlU2V0dGluZ0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgaXNPcGVuID0gc2V0dGluZ3NDb250YWluZXIuc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnO1xuICAgICAgICBpZiAoaXNPcGVuKSB7XG4gICAgICAgICAgICBzZXRJY29uKGNoZXZyb25JY29uLCAnY2hldnJvbi1yaWdodCcpOyAvLyBDbG9zZSBzdGF0ZVxuICAgICAgICAgICAgc2V0dGluZ3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy50b2dnbGVPbGxhbWFTZXR0aW5ncyA9IGZhbHNlO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRJY29uKGNoZXZyb25JY29uLCAnY2hldnJvbi1kb3duJyk7IC8vIE9wZW4gc3RhdGVcbiAgICAgICAgICAgIHNldHRpbmdzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnRvZ2dsZU9sbGFtYVNldHRpbmdzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUoJ09MTEFNQSBSRVNUIEFQSSBVUkwnKVxuICAgICAgICAuc2V0RGVzYyhhZGREZXNjcmlwdGlvbkxpbmsoJ0VudGVyIHlvdXIgUkVTVCBBUEkgVVJMIHVzaW5nJywgJ2h0dHBzOi8vb2xsYW1hLmFpLycsICcnLCAnT2xsYW1hJykpXG4gICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdodHRwOi8vbG9jYWxob3N0OjExNDM0JylcbiAgICAgICAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5SRVNUQVBJVVJMIHx8IERFRkFVTFRfU0VUVElOR1MuT2xsYW1hQ29ubmVjdGlvbi5SRVNUQVBJVVJMKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFNb2RlbHMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24uUkVTVEFQSVVSTCA9IHZhbHVlID8gdmFsdWUgOiBERUZBVUxUX1NFVFRJTkdTLk9sbGFtYUNvbm5lY3Rpb24uUkVTVEFQSVVSTDtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBTZXR0aW5nVGFiLmRpc3BsYXkoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUoJ0FsbG93IFN0cmVhbScpXG4gICAgICAgIC5zZXREZXNjKGFkZERlc2NyaXB0aW9uTGluaygnQWxsb3cgT2xsYW1hIG1vZGVscyB0byBzdHJlYW0gcmVzcG9uc2UuIEFkZGl0aW9uYWwgc2V0dXAgcmVxdWlyZWQ6ICcsICdodHRwczovL2dpdGh1Yi5jb20vbG9uZ3kyay9vYnNpZGlhbi1ibW8tY2hhdGJvdC93aWtpL0hvdy10by1zZXR1cC13aXRoLU9sbGFtYScsICcnLCAnW0luc3RydWN0aW9uc10nKSlcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLmFsbG93T2xsYW1hU3RyZWFtKS5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5hbGxvd09sbGFtYVN0cmVhbSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIHRvZ2dsZSBjb250YWluZXIgZm9yIEFkdmFuY2VkIFNldHRpbmdzIHdpdGhpbiB0aGUgbWFpbiBzZXR0aW5nc0NvbnRhaW5lclxuICAgIGNvbnN0IGFkdmFuY2VkVG9nZ2xlU2V0dGluZ0NvbnRhaW5lciA9IHNldHRpbmdzQ29udGFpbmVyLmNyZWF0ZURpdih7IGNsczogJ3RvZ2dsZVNldHRpbmdDb250YWluZXInIH0pO1xuICAgIGFkdmFuY2VkVG9nZ2xlU2V0dGluZ0NvbnRhaW5lci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdBZHZhbmNlZCBTZXR0aW5ncycgfSk7XG5cbiAgICAvLyBEZXRlcm1pbmUgdGhlIGluaXRpYWwgc3RhdGUgZm9yIEFkdmFuY2VkIFNldHRpbmdzIGZyb20gdGhlIHBsdWdpbidzIHNldHRpbmdzXG4gICAgY29uc3QgYWR2YW5jZWRJbml0aWFsU3RhdGUgPSBwbHVnaW4uc2V0dGluZ3MudG9nZ2xlQWR2YW5jZWRTZXR0aW5ncztcbiAgICBjb25zdCBhZHZhbmNlZENoZXZyb25JY29uID0gYWR2YW5jZWRUb2dnbGVTZXR0aW5nQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICdjaGV2cm9uLWljb24nIH0pO1xuICAgIHNldEljb24oYWR2YW5jZWRDaGV2cm9uSWNvbiwgYWR2YW5jZWRJbml0aWFsU3RhdGUgPyAnY2hldnJvbi1kb3duJyA6ICdjaGV2cm9uLXJpZ2h0Jyk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIGNvbnRhaW5lciBmb3IgQWR2YW5jZWQgU2V0dGluZ3MgdGhhdCB3aWxsIGJlIHRvZ2dsZWRcbiAgICBjb25zdCBhZHZhbmNlZFNldHRpbmdzQ29udGFpbmVyID0gc2V0dGluZ3NDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAnc2V0dGluZ3NDb250YWluZXInIH0pO1xuICAgIGFkdmFuY2VkU2V0dGluZ3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IGFkdmFuY2VkSW5pdGlhbFN0YXRlID8gJ2Jsb2NrJyA6ICdub25lJztcblxuICAgIC8vIFRvZ2dsZSB2aXNpYmlsaXR5IGZvciBBZHZhbmNlZCBTZXR0aW5nc1xuICAgIGFkdmFuY2VkVG9nZ2xlU2V0dGluZ0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgaXNPcGVuID0gYWR2YW5jZWRTZXR0aW5nc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZSc7XG4gICAgICAgIGlmIChpc09wZW4pIHtcbiAgICAgICAgICAgIHNldEljb24oYWR2YW5jZWRDaGV2cm9uSWNvbiwgJ2NoZXZyb24tcmlnaHQnKTsgLy8gQ2xvc2Ugc3RhdGVcbiAgICAgICAgICAgIGFkdmFuY2VkU2V0dGluZ3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy50b2dnbGVBZHZhbmNlZFNldHRpbmdzID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRJY29uKGFkdmFuY2VkQ2hldnJvbkljb24sICdjaGV2cm9uLWRvd24nKTsgLy8gT3BlbiBzdGF0ZVxuICAgICAgICAgICAgYWR2YW5jZWRTZXR0aW5nc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy50b2dnbGVBZHZhbmNlZFNldHRpbmdzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgfSk7XG5cblxuICAgIG5ldyBTZXR0aW5nKGFkdmFuY2VkU2V0dGluZ3NDb250YWluZXIpXG4gICAgICAgIC5zZXROYW1lKCdtaXJvc3RhdCcpXG4gICAgICAgIC5zZXREZXNjKCdFbmFibGUgTWlyb3N0YXQgc2FtcGxpbmcgZm9yIGNvbnRyb2xsaW5nIHBlcnBsZXhpdHkuIChkZWZhdWx0OiAwLCAwID0gZGlzYWJsZWQsIDEgPSBNaXJvc3RhdCwgMiA9IE1pcm9zdGF0IDIuMCknKVxuICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignMCcpXG4gICAgICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5taXJvc3RhdCB8fCBERUZBVUxUX1NFVFRJTkdTLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5taXJvc3RhdClcbiAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBQYXJzZSB0aGUgaW5wdXQgdmFsdWUgYXMgYW4gaW50ZWdlclxuICAgICAgICAgICAgICAgIGNvbnN0IGludFZhbHVlID0gcGFyc2VJbnQodmFsdWUsIDEwKTsgLy8gMTAgaXMgdGhlIHJhZGl4IHBhcmFtZXRlciB0byBlbnN1cmUgcGFyc2luZyBpcyBkb25lIGluIGJhc2UgMTBcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgcGFyc2VkIHZhbHVlIGlzIGEgdmFsaWQgaW50ZWdlciwgaWYgbm90LCBmYWxsYmFjayB0byB0aGUgZGVmYXVsdCBVUkxcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4oaW50VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMubWlyb3N0YXQgPSBERUZBVUxUX1NFVFRJTkdTLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5taXJvc3RhdDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLm1pcm9zdGF0ID0gaW50VmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIFNldHRpbmdUYWIuZGlzcGxheSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGFkdmFuY2VkU2V0dGluZ3NDb250YWluZXIpXG4gICAgLnNldE5hbWUoJ21pcm9zdGF0X2V0YScpXG4gICAgLnNldERlc2MoJ0luZmx1ZW5jZXMgaG93IHF1aWNrbHkgdGhlIGFsZ29yaXRobSByZXNwb25kcyB0byBmZWVkYmFjayBmcm9tIHRoZSBnZW5lcmF0ZWQgdGV4dC4gQSBsb3dlciBsZWFybmluZyByYXRlIHdpbGwgcmVzdWx0IGluIHNsb3dlciBhZGp1c3RtZW50cywgd2hpbGUgYSBoaWdoZXIgbGVhcm5pbmcgcmF0ZSB3aWxsIG1ha2UgdGhlIGFsZ29yaXRobSBtb3JlIHJlc3BvbnNpdmUuIChEZWZhdWx0OiAwLjEpJylcbiAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCcwLjEnKVxuICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5taXJvc3RhdF9ldGEgfHwgREVGQVVMVF9TRVRUSU5HUy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMubWlyb3N0YXRfZXRhKVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAvLyBQYXJzZSB0aGUgaW5wdXQgdmFsdWUgYXMgYW4gaW50ZWdlclxuICAgICAgICAgICAgY29uc3QgZmxvYXRWYWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpOyAvLyAxMCBpcyB0aGUgcmFkaXggcGFyYW1ldGVyIHRvIGVuc3VyZSBwYXJzaW5nIGlzIGRvbmUgaW4gYmFzZSAxMFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBEZXRlcm1pbmUgaWYgdGhlIGZsb2F0IHZhbHVlIGlzIGFuIGludGVnZXIgKHdob2xlIG51bWJlcilcbiAgICAgICAgICAgIGlmICghaXNOYU4oZmxvYXRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQodmFsdWUpID09PSBmbG9hdFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGl0J3MgYSB3aG9sZSBudW1iZXIsIGFwcGVuZCAnLjAnIHRvIG1ha2UgaXQgZXhwbGljaXRseSBhIGZsb2F0XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMubWlyb3N0YXRfZXRhID0gZmxvYXRWYWx1ZSArICcuMCc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSXQncyBhbHJlYWR5IGEgZmxvYXQsIHNvIGp1c3QgdXNlIGl0IGRpcmVjdGx5XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMubWlyb3N0YXRfZXRhID0gZmxvYXRWYWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gdGhlIGRlZmF1bHQgdmFsdWUgaWYgaW5wdXQgaXMgbm90IGEgdmFsaWQgbnVtYmVyXG4gICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5taXJvc3RhdF9ldGEgPSBERUZBVUxUX1NFVFRJTkdTLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5taXJvc3RhdF9ldGE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBTZXR0aW5nVGFiLmRpc3BsYXkoKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoYWR2YW5jZWRTZXR0aW5nc0NvbnRhaW5lcilcbiAgICAuc2V0TmFtZSgnbWlyb3N0YXRfdGF1JylcbiAgICAuc2V0RGVzYygnQ29udHJvbHMgdGhlIGJhbGFuY2UgYmV0d2VlbiBjb2hlcmVuY2UgYW5kIGRpdmVyc2l0eSBvZiB0aGUgb3V0cHV0LiBBIGxvd2VyIHZhbHVlIHdpbGwgcmVzdWx0IGluIG1vcmUgZm9jdXNlZCBhbmQgY29oZXJlbnQgdGV4dC4gKERlZmF1bHQ6IDUuMCknKVxuICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJzUuMCcpXG4gICAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLm1pcm9zdGF0X3RhdSB8fCBERUZBVUxUX1NFVFRJTkdTLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5taXJvc3RhdF90YXUpXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIC8vIFBhcnNlIHRoZSBpbnB1dCB2YWx1ZSBhcyBhbiBpbnRlZ2VyXG4gICAgICAgICAgICBjb25zdCBmbG9hdFZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7IC8vIDEwIGlzIHRoZSByYWRpeCBwYXJhbWV0ZXIgdG8gZW5zdXJlIHBhcnNpbmcgaXMgZG9uZSBpbiBiYXNlIDEwXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIERldGVybWluZSBpZiB0aGUgZmxvYXQgdmFsdWUgaXMgYW4gaW50ZWdlciAod2hvbGUgbnVtYmVyKVxuICAgICAgICAgICAgaWYgKCFpc05hTihmbG9hdFZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGlmIChwYXJzZUludCh2YWx1ZSkgPT09IGZsb2F0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgaXQncyBhIHdob2xlIG51bWJlciwgYXBwZW5kICcuMCcgdG8gbWFrZSBpdCBleHBsaWNpdGx5IGEgZmxvYXRcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5taXJvc3RhdF90YXUgPSBmbG9hdFZhbHVlICsgJy4wJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBJdCdzIGFscmVhZHkgYSBmbG9hdCwgc28ganVzdCB1c2UgaXQgZGlyZWN0bHlcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5taXJvc3RhdF90YXUgPSBmbG9hdFZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayB0byB0aGUgZGVmYXVsdCB2YWx1ZSBpZiBpbnB1dCBpcyBub3QgYSB2YWxpZCBudW1iZXJcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLm1pcm9zdGF0X3RhdSA9IERFRkFVTFRfU0VUVElOR1MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLm1pcm9zdGF0X3RhdTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KVxuICAgICAgICAuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIFNldHRpbmdUYWIuZGlzcGxheSgpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhhZHZhbmNlZFNldHRpbmdzQ29udGFpbmVyKVxuICAgIC5zZXROYW1lKCdudW1fY3R4JylcbiAgICAuc2V0RGVzYygnU2V0cyB0aGUgc2l6ZSBvZiB0aGUgY29udGV4dCB3aW5kb3cgdXNlZCB0byBnZW5lcmF0ZSB0aGUgbmV4dCB0b2tlbi4gKERlZmF1bHQ6IDIwNDgpJylcbiAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCcyMDQ4JylcbiAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMubnVtX2N0eCB8fCBERUZBVUxUX1NFVFRJTkdTLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5udW1fY3R4KVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAvLyBQYXJzZSB0aGUgaW5wdXQgdmFsdWUgYXMgYW4gaW50ZWdlclxuICAgICAgICAgICAgY29uc3QgaW50VmFsdWUgPSBwYXJzZUludCh2YWx1ZSwgMTApOyAvLyAxMCBpcyB0aGUgcmFkaXggcGFyYW1ldGVyIHRvIGVuc3VyZSBwYXJzaW5nIGlzIGRvbmUgaW4gYmFzZSAxMFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgcGFyc2VkIHZhbHVlIGlzIGEgdmFsaWQgaW50ZWdlciwgaWYgbm90LCBmYWxsYmFjayB0byB0aGUgZGVmYXVsdCBVUkxcbiAgICAgICAgICAgIGlmIChpc05hTihpbnRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLm51bV9jdHggPSBERUZBVUxUX1NFVFRJTkdTLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5udW1fY3R4O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLm51bV9jdHggPSBpbnRWYWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgU2V0dGluZ1RhYi5kaXNwbGF5KCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGFkdmFuY2VkU2V0dGluZ3NDb250YWluZXIpXG4gICAgLnNldE5hbWUoJ251bV9ncWEnKVxuICAgIC5zZXREZXNjKCdUaGUgbnVtYmVyIG9mIEdRQSBncm91cHMgaW4gdGhlIHRyYW5zZm9ybWVyIGxheWVyLiBSZXF1aXJlZCBmb3Igc29tZSBtb2RlbHMsIGZvciBleGFtcGxlIGl0IGlzIDggZm9yIGxsYW1hMjo3MGIuJylcbiAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCcwJylcbiAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMubnVtX2dxYSB8fCBERUZBVUxUX1NFVFRJTkdTLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5udW1fZ3FhKVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAvLyBQYXJzZSB0aGUgaW5wdXQgdmFsdWUgYXMgYW4gaW50ZWdlclxuICAgICAgICAgICAgY29uc3QgaW50VmFsdWUgPSBwYXJzZUludCh2YWx1ZSwgMTApOyAvLyAxMCBpcyB0aGUgcmFkaXggcGFyYW1ldGVyIHRvIGVuc3VyZSBwYXJzaW5nIGlzIGRvbmUgaW4gYmFzZSAxMFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgcGFyc2VkIHZhbHVlIGlzIGEgdmFsaWQgaW50ZWdlciwgaWYgbm90LCBmYWxsYmFjayB0byB0aGUgZGVmYXVsdCBVUkxcbiAgICAgICAgICAgIGlmIChpc05hTihpbnRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLm51bV9ncWEgPSBERUZBVUxUX1NFVFRJTkdTLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5udW1fZ3FhO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLm51bV9ncWEgPSBpbnRWYWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgU2V0dGluZ1RhYi5kaXNwbGF5KCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGFkdmFuY2VkU2V0dGluZ3NDb250YWluZXIpXG4gICAgLnNldE5hbWUoJ251bV90aHJlYWQnKVxuICAgIC5zZXREZXNjKCdTZXRzIHRoZSBudW1iZXIgb2YgdGhyZWFkcyB0byB1c2UgZHVyaW5nIGNvbXB1dGF0aW9uLiBCeSBkZWZhdWx0LCBPbGxhbWEgd2lsbCBkZXRlY3QgdGhpcyBmb3Igb3B0aW1hbCBwZXJmb3JtYW5jZS4gSXQgaXMgcmVjb21tZW5kZWQgdG8gc2V0IHRoaXMgdmFsdWUgdG8gdGhlIG51bWJlciBvZiBwaHlzaWNhbCBDUFUgY29yZXMgeW91ciBzeXN0ZW0gaGFzIChhcyBvcHBvc2VkIHRvIHRoZSBsb2dpY2FsIG51bWJlciBvZiBjb3JlcykuJylcbiAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCcwJylcbiAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMubnVtX3RocmVhZCB8fCBERUZBVUxUX1NFVFRJTkdTLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5udW1fdGhyZWFkKVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAvLyBQYXJzZSB0aGUgaW5wdXQgdmFsdWUgYXMgYW4gaW50ZWdlclxuICAgICAgICAgICAgY29uc3QgaW50VmFsdWUgPSBwYXJzZUludCh2YWx1ZSwgMTApOyAvLyAxMCBpcyB0aGUgcmFkaXggcGFyYW1ldGVyIHRvIGVuc3VyZSBwYXJzaW5nIGlzIGRvbmUgaW4gYmFzZSAxMFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGUgcGFyc2VkIHZhbHVlIGlzIGEgdmFsaWQgaW50ZWdlciwgaWYgbm90LCBmYWxsYmFjayB0byB0aGUgZGVmYXVsdCBVUkxcbiAgICAgICAgICAgIGlmIChpc05hTihpbnRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLm51bV90aHJlYWQgPSBERUZBVUxUX1NFVFRJTkdTLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5udW1fdGhyZWFkO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLm51bV90aHJlYWQgPSBpbnRWYWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgU2V0dGluZ1RhYi5kaXNwbGF5KCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGFkdmFuY2VkU2V0dGluZ3NDb250YWluZXIpXG4gICAgLnNldE5hbWUoJ3JlcGVhdF9sYXN0X24nKVxuICAgIC5zZXREZXNjKCdTZXRzIGhvdyBmYXIgYmFjayBmb3IgdGhlIG1vZGVsIHRvIGxvb2sgYmFjayB0byBwcmV2ZW50IHJlcGV0aXRpb24uIChEZWZhdWx0OiA2NCwgMCA9IGRpc2FibGVkLCAtMSA9IG51bV9jdHgpJylcbiAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCc2NCcpXG4gICAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLnJlcGVhdF9sYXN0X24gfHwgREVGQVVMVF9TRVRUSU5HUy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMucmVwZWF0X2xhc3RfbilcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgLy8gUGFyc2UgdGhlIGlucHV0IHZhbHVlIGFzIGFuIGludGVnZXJcbiAgICAgICAgICAgIGNvbnN0IGludFZhbHVlID0gcGFyc2VJbnQodmFsdWUsIDEwKTsgLy8gMTAgaXMgdGhlIHJhZGl4IHBhcmFtZXRlciB0byBlbnN1cmUgcGFyc2luZyBpcyBkb25lIGluIGJhc2UgMTBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHBhcnNlZCB2YWx1ZSBpcyBhIHZhbGlkIGludGVnZXIsIGlmIG5vdCwgZmFsbGJhY2sgdG8gdGhlIGRlZmF1bHQgVVJMXG4gICAgICAgICAgICBpZiAoaXNOYU4oaW50VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5yZXBlYXRfbGFzdF9uID0gREVGQVVMVF9TRVRUSU5HUy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMucmVwZWF0X2xhc3RfbjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5yZXBlYXRfbGFzdF9uID0gaW50VmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KVxuICAgICAgICAuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIFNldHRpbmdUYWIuZGlzcGxheSgpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhhZHZhbmNlZFNldHRpbmdzQ29udGFpbmVyKVxuICAgIC5zZXROYW1lKCdyZXBlYXRfcGVuYWx0eScpXG4gICAgLnNldERlc2MoJ1NldHMgaG93IHN0cm9uZ2x5IHRvIHBlbmFsaXplIHJlcGV0aXRpb25zLiBBIGhpZ2hlciB2YWx1ZSAoZS5nLiwgMS41KSB3aWxsIHBlbmFsaXplIHJlcGV0aXRpb25zIG1vcmUgc3Ryb25nbHksIHdoaWxlIGEgbG93ZXIgdmFsdWUgKGUuZy4sIDAuOSkgd2lsbCBiZSBtb3JlIGxlbmllbnQuIChEZWZhdWx0OiAxLjEpJylcbiAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCcxLjEnKVxuICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5yZXBlYXRfcGVuYWx0eSB8fCBERUZBVUxUX1NFVFRJTkdTLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5yZXBlYXRfcGVuYWx0eSlcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgLy8gUGFyc2UgdGhlIGlucHV0IHZhbHVlIGFzIGFuIGludGVnZXJcbiAgICAgICAgICAgIGNvbnN0IGZsb2F0VmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKTsgLy8gMTAgaXMgdGhlIHJhZGl4IHBhcmFtZXRlciB0byBlbnN1cmUgcGFyc2luZyBpcyBkb25lIGluIGJhc2UgMTBcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIGlmIHRoZSBmbG9hdCB2YWx1ZSBpcyBhbiBpbnRlZ2VyICh3aG9sZSBudW1iZXIpXG4gICAgICAgICAgICBpZiAoIWlzTmFOKGZsb2F0VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KHZhbHVlKSA9PT0gZmxvYXRWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBpdCdzIGEgd2hvbGUgbnVtYmVyLCBhcHBlbmQgJy4wJyB0byBtYWtlIGl0IGV4cGxpY2l0bHkgYSBmbG9hdFxuICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLnJlcGVhdF9wZW5hbHR5ID0gZmxvYXRWYWx1ZSArICcuMCc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSXQncyBhbHJlYWR5IGEgZmxvYXQsIHNvIGp1c3QgdXNlIGl0IGRpcmVjdGx5XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMucmVwZWF0X3BlbmFsdHkgPSBmbG9hdFZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBGYWxsYmFjayB0byB0aGUgZGVmYXVsdCB2YWx1ZSBpZiBpbnB1dCBpcyBub3QgYSB2YWxpZCBudW1iZXJcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLnJlcGVhdF9wZW5hbHR5ID0gREVGQVVMVF9TRVRUSU5HUy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMucmVwZWF0X3BlbmFsdHk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBTZXR0aW5nVGFiLmRpc3BsYXkoKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoYWR2YW5jZWRTZXR0aW5nc0NvbnRhaW5lcilcbiAgICAuc2V0TmFtZSgnc2VlZCcpXG4gICAgLnNldERlc2MoJ1NldHMgdGhlIHJhbmRvbSBudW1iZXIgc2VlZCB0byB1c2UgZm9yIGdlbmVyYXRpb24uIFNldHRpbmcgdGhpcyB0byBhIHNwZWNpZmljIG51bWJlciB3aWxsIG1ha2UgdGhlIG1vZGVsIGdlbmVyYXRlIHRoZSBzYW1lIHRleHQgZm9yIHRoZSBzYW1lIHByb21wdC4nKVxuICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJzAnKVxuICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5zZWVkIHx8IERFRkFVTFRfU0VUVElOR1MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLnNlZWQpXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIC8vIFBhcnNlIHRoZSBpbnB1dCB2YWx1ZSBhcyBhbiBpbnRlZ2VyXG4gICAgICAgICAgICBjb25zdCBpbnRWYWx1ZSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7IC8vIDEwIGlzIHRoZSByYWRpeCBwYXJhbWV0ZXIgdG8gZW5zdXJlIHBhcnNpbmcgaXMgZG9uZSBpbiBiYXNlIDEwXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBwYXJzZWQgdmFsdWUgaXMgYSB2YWxpZCBpbnRlZ2VyLCBpZiBub3QsIGZhbGxiYWNrIHRvIHRoZSBkZWZhdWx0IFVSTFxuICAgICAgICAgICAgaWYgKGlzTmFOKGludFZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMuc2VlZCA9IERFRkFVTFRfU0VUVElOR1MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLnNlZWQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMuc2VlZCA9IGludFZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBTZXR0aW5nVGFiLmRpc3BsYXkoKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoYWR2YW5jZWRTZXR0aW5nc0NvbnRhaW5lcilcbiAgICAuc2V0TmFtZSgnc3RvcCcpXG4gICAgLnNldERlc2MoJ1NldHMgdGhlIHN0b3Agc2VxdWVuY2VzIHRvIHVzZS4gV2hlbiB0aGlzIHBhdHRlcm4gaXMgZW5jb3VudGVyZWQsIHRoZSBMTE0gd2lsbCBzdG9wIGdlbmVyYXRpbmcgdGV4dCBhbmQgcmV0dXJuLiBNdWx0aXBsZSBzdG9wIHBhdHRlcm5zIG1heSBiZSBzZXQgYnkgc3BlY2lmeWluZyB0aGVtIGFzIGEgY29tbWEtc2VwYXJhdGVkIGxpc3QgaW4gdGhlIGlucHV0IGZpZWxkLicpXG4gICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgIC5zZXRQbGFjZWhvbGRlcignc3RvcCwgXFxcXG4sIHVzZXI6JylcbiAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMuc3RvcCAmJiBBcnJheS5pc0FycmF5KHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMuc3RvcCkgXG4gICAgICAgICAgICAgICAgICAgPyBwbHVnaW4uc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLnN0b3Auam9pbignLCAnKSBcbiAgICAgICAgICAgICAgICAgICA6IERFRkFVTFRfU0VUVElOR1MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLnN0b3Auam9pbignLCAnKSlcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFNwbGl0IHRoZSBpbnB1dCBzdHJpbmcgYnkgY29tbWFzLCB0cmltIHdoaXRlc3BhY2UsIGFuZCBlbnN1cmUgaXQncyBhbHdheXMgc3RvcmVkIGFzIGFuIGFycmF5XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RvcHNBcnJheSA9IHZhbHVlID8gdmFsdWUuc3BsaXQoJywnKS5tYXAocyA9PiBzLnRyaW0oKSkgOiBbLi4uREVGQVVMVF9TRVRUSU5HUy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMuc3RvcF07XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5zdG9wID0gc3RvcHNBcnJheTtcbiAgICAgICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIFNldHRpbmdUYWIuZGlzcGxheSgpO1xuICAgICAgICB9KVxuICAgICk7XG4gICAgXG4gICAgXG5cbiAgICBuZXcgU2V0dGluZyhhZHZhbmNlZFNldHRpbmdzQ29udGFpbmVyKVxuICAgIC5zZXROYW1lKCd0ZnNfeicpXG4gICAgLnNldERlc2MoJ1RhaWwgZnJlZSBzYW1wbGluZyBpcyB1c2VkIHRvIHJlZHVjZSB0aGUgaW1wYWN0IG9mIGxlc3MgcHJvYmFibGUgdG9rZW5zIGZyb20gdGhlIG91dHB1dC4gQSBoaWdoZXIgdmFsdWUgKGUuZy4sIDIuMCkgd2lsbCByZWR1Y2UgdGhlIGltcGFjdCBtb3JlLCB3aGlsZSBhIHZhbHVlIG9mIDEuMCBkaXNhYmxlcyB0aGlzIHNldHRpbmcuIChkZWZhdWx0OiAxKScpXG4gICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgIC5zZXRQbGFjZWhvbGRlcignMS4wJylcbiAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMudGZzX3ogfHwgREVGQVVMVF9TRVRUSU5HUy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMudGZzX3opXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIC8vIFBhcnNlIHRoZSBpbnB1dCB2YWx1ZSBhcyBhbiBpbnRlZ2VyXG4gICAgICAgICAgICBjb25zdCBmbG9hdFZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7IC8vIDEwIGlzIHRoZSByYWRpeCBwYXJhbWV0ZXIgdG8gZW5zdXJlIHBhcnNpbmcgaXMgZG9uZSBpbiBiYXNlIDEwXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIERldGVybWluZSBpZiB0aGUgZmxvYXQgdmFsdWUgaXMgYW4gaW50ZWdlciAod2hvbGUgbnVtYmVyKVxuICAgICAgICAgICAgaWYgKCFpc05hTihmbG9hdFZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGlmIChwYXJzZUludCh2YWx1ZSkgPT09IGZsb2F0VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgaXQncyBhIHdob2xlIG51bWJlciwgYXBwZW5kICcuMCcgdG8gbWFrZSBpdCBleHBsaWNpdGx5IGEgZmxvYXRcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy50ZnNfeiA9IGZsb2F0VmFsdWUgKyAnLjAnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEl0J3MgYWxyZWFkeSBhIGZsb2F0LCBzbyBqdXN0IHVzZSBpdCBkaXJlY3RseVxuICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLnRmc196ID0gZmxvYXRWYWx1ZS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gdGhlIGRlZmF1bHQgdmFsdWUgaWYgaW5wdXQgaXMgbm90IGEgdmFsaWQgbnVtYmVyXG4gICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy50ZnNfeiA9IERFRkFVTFRfU0VUVElOR1MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLnRmc196O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgU2V0dGluZ1RhYi5kaXNwbGF5KCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKGFkdmFuY2VkU2V0dGluZ3NDb250YWluZXIpXG4gICAgLnNldE5hbWUoJ3RvcF9rJylcbiAgICAuc2V0RGVzYygnUmVkdWNlcyB0aGUgcHJvYmFiaWxpdHkgb2YgZ2VuZXJhdGluZyBub25zZW5zZS4gQSBoaWdoZXIgdmFsdWUgKGUuZy4gMTAwKSB3aWxsIGdpdmUgbW9yZSBkaXZlcnNlIGFuc3dlcnMsIHdoaWxlIGEgbG93ZXIgdmFsdWUgKGUuZy4gMTApIHdpbGwgYmUgbW9yZSBjb25zZXJ2YXRpdmUuIChEZWZhdWx0OiA0MCknKVxuICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJzQwJylcbiAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMudG9wX2sgfHwgREVGQVVMVF9TRVRUSU5HUy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMudG9wX2spXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIC8vIFBhcnNlIHRoZSBpbnB1dCB2YWx1ZSBhcyBhbiBpbnRlZ2VyXG4gICAgICAgICAgICBjb25zdCBpbnRWYWx1ZSA9IHBhcnNlSW50KHZhbHVlLCAxMCk7IC8vIDEwIGlzIHRoZSByYWRpeCBwYXJhbWV0ZXIgdG8gZW5zdXJlIHBhcnNpbmcgaXMgZG9uZSBpbiBiYXNlIDEwXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBwYXJzZWQgdmFsdWUgaXMgYSB2YWxpZCBpbnRlZ2VyLCBpZiBub3QsIGZhbGxiYWNrIHRvIHRoZSBkZWZhdWx0IFVSTFxuICAgICAgICAgICAgaWYgKGlzTmFOKGludFZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMudG9wX2sgPSBERUZBVUxUX1NFVFRJTkdTLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy50b3BfaztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy50b3BfayA9IGludFZhbHVlLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBTZXR0aW5nVGFiLmRpc3BsYXkoKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoYWR2YW5jZWRTZXR0aW5nc0NvbnRhaW5lcilcbiAgICAuc2V0TmFtZSgndG9wX3AnKVxuICAgIC5zZXREZXNjKCdXb3JrcyB0b2dldGhlciB3aXRoIHRvcC1rLiBBIGhpZ2hlciB2YWx1ZSAoZS5nLiwgMC45NSkgd2lsbCBsZWFkIHRvIG1vcmUgZGl2ZXJzZSB0ZXh0LCB3aGlsZSBhIGxvd2VyIHZhbHVlIChlLmcuLCAwLjUpIHdpbGwgZ2VuZXJhdGUgbW9yZSBmb2N1c2VkIGFuZCBjb25zZXJ2YXRpdmUgdGV4dC4gKERlZmF1bHQ6IDAuOSknKVxuICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJzEuMCcpXG4gICAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLnRvcF9wIHx8IERFRkFVTFRfU0VUVElOR1MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLnRvcF9wKVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAvLyBQYXJzZSB0aGUgaW5wdXQgdmFsdWUgYXMgYW4gaW50ZWdlclxuICAgICAgICAgICAgY29uc3QgZmxvYXRWYWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpOyAvLyAxMCBpcyB0aGUgcmFkaXggcGFyYW1ldGVyIHRvIGVuc3VyZSBwYXJzaW5nIGlzIGRvbmUgaW4gYmFzZSAxMFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBEZXRlcm1pbmUgaWYgdGhlIGZsb2F0IHZhbHVlIGlzIGFuIGludGVnZXIgKHdob2xlIG51bWJlcilcbiAgICAgICAgICAgIGlmICghaXNOYU4oZmxvYXRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQodmFsdWUpID09PSBmbG9hdFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGl0J3MgYSB3aG9sZSBudW1iZXIsIGFwcGVuZCAnLjAnIHRvIG1ha2UgaXQgZXhwbGljaXRseSBhIGZsb2F0XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMudG9wX3AgPSBmbG9hdFZhbHVlICsgJy4wJztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBJdCdzIGFscmVhZHkgYSBmbG9hdCwgc28ganVzdCB1c2UgaXQgZGlyZWN0bHlcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy50b3BfcCA9IGZsb2F0VmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIHRoZSBkZWZhdWx0IHZhbHVlIGlmIGlucHV0IGlzIG5vdCBhIHZhbGlkIG51bWJlclxuICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMudG9wX3AgPSBERUZBVUxUX1NFVFRJTkdTLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy50b3BfcDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KVxuICAgICAgICAuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIFNldHRpbmdUYWIuZGlzcGxheSgpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhhZHZhbmNlZFNldHRpbmdzQ29udGFpbmVyKVxuICAgIC5zZXROYW1lKCdrZWVwX2FsaXZlJylcbiAgICAuc2V0RGVzYygnSWYgc2V0IHRvIGEgcG9zaXRpdmUgZHVyYXRpb24gKGUuZy4gMjBtLCAxaHIgb3IgMzApLCB0aGUgbW9kZWwgd2lsbCBzdGF5IGxvYWRlZCBmb3IgdGhlIHByb3ZpZGVkIGR1cmF0aW9uIGluIHNlY29uZHMuIElmIHNldCB0byBhIG5lZ2F0aXZlIGR1cmF0aW9uIChlLmcuIC0xKSwgdGhlIG1vZGVsIHdpbGwgc3RheSBsb2FkZWQgaW5kZWZpbml0ZWx5LiBJZiBzZXQgdG8gMCwgdGhlIG1vZGVsIHdpbGwgYmUgdW5sb2FkZWQgaW1tZWRpYXRlbHkgb25jZSBmaW5pc2hlZC4gSWYgbm90IHNldCwgdGhlIG1vZGVsIHdpbGwgc3RheSBsb2FkZWQgZm9yIDUgbWludXRlcyBieSBkZWZhdWx0LicpXG4gICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgIC5zZXRQbGFjZWhvbGRlcignMzBzJylcbiAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMua2VlcF9hbGl2ZSB8fCBERUZBVUxUX1NFVFRJTkdTLk9sbGFtYUNvbm5lY3Rpb24ub2xsYW1hUGFyYW1ldGVycy5rZWVwX2FsaXZlKVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAvLyBSZWd1bGFyIGV4cHJlc3Npb24gdG8gdmFsaWRhdGUgdGhlIGlucHV0IHZhbHVlIGFuZCBjYXB0dXJlIHRoZSBudW1iZXIgYW5kIHVuaXRcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gdmFsdWUubWF0Y2goL14oLT9cXGQrKShtfGhyfGgpPyQvKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbnVtID0gcGFyc2VJbnQobWF0Y2hbMV0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVuaXQgPSBtYXRjaFsyXTtcblxuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgdG8gc2Vjb25kcyBiYXNlZCBvbiB0aGUgdW5pdFxuICAgICAgICAgICAgICAgIGxldCBzZWNvbmRzO1xuICAgICAgICAgICAgICAgIGlmICh1bml0ID09PSAnbScpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kcyA9IG51bSAqIDYwOyAvLyBDb252ZXJ0IG1pbnV0ZXMgdG8gc2Vjb25kc1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodW5pdCA9PT0gJ2hyJyB8fCB1bml0ID09PSAnaCcpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kcyA9IG51bSAqIDM2MDA7IC8vIENvbnZlcnQgaG91cnMgdG8gc2Vjb25kc1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNlY29uZHMgPSBudW07IC8vIEFzc3VtZSBpdCdzIGFscmVhZHkgaW4gc2Vjb25kcyBpZiBubyB1bml0XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gU3RvcmUgdGhlIHZhbHVlIGluIHNlY29uZHNcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLmtlZXBfYWxpdmUgPSBzZWNvbmRzLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBpbnB1dCBpcyBpbnZhbGlkLCByZXZlcnQgdG8gdGhlIGRlZmF1bHQgc2V0dGluZ1xuICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYVBhcmFtZXRlcnMua2VlcF9hbGl2ZSA9IERFRkFVTFRfU0VUVElOR1MuT2xsYW1hQ29ubmVjdGlvbi5vbGxhbWFQYXJhbWV0ZXJzLmtlZXBfYWxpdmU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBTZXR0aW5nVGFiLmRpc3BsYXkoKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG59IiwgImV4cG9ydCBmdW5jdGlvbiBhZGREZXNjcmlwdGlvbkxpbmsodGV4dDogc3RyaW5nLCBsaW5rOiBzdHJpbmcsIGV4dHJhV29yZHM6IHN0cmluZywgaW5uZXJUZXh0OiBzdHJpbmcpOiBEb2N1bWVudEZyYWdtZW50IHtcbiAgICBjb25zdCBmcmFnID0gbmV3IERvY3VtZW50RnJhZ21lbnQoKTtcbiAgICBjb25zdCBkZXNjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIGRlc2MuaW5uZXJUZXh0ID0gdGV4dCArICcgJztcbiAgICBmcmFnLmFwcGVuZENoaWxkKGRlc2MpO1xuXG4gICAgY29uc3QgYW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIGFuY2hvci5ocmVmID0gbGluaztcbiAgICBhbmNob3IudGFyZ2V0ID0gJ19ibGFuayc7XG4gICAgYW5jaG9yLnJlbCA9ICdub29wZW5lciBub3JlZmVycmVyJztcbiAgICBhbmNob3IuaW5uZXJUZXh0ID0gaW5uZXJUZXh0O1xuICAgIGZyYWcuYXBwZW5kQ2hpbGQoYW5jaG9yKTtcblxuICAgIGNvbnN0IGV4dHJhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgIGV4dHJhLmlubmVyVGV4dCA9ICcgJyArIGV4dHJhV29yZHM7XG4gICAgZnJhZy5hcHBlbmRDaGlsZChleHRyYSk7XG5cbiAgICByZXR1cm4gZnJhZztcbn0iLCAiaW1wb3J0IHsgU2V0dGluZ1RhYiwgc2V0SWNvbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBCTU9HUFQgZnJvbSAnc3JjL21haW4nO1xuaW1wb3J0IHsgYWRkT3BlbkFJQ29ubmVjdGlvblNldHRpbmdzIH0gZnJvbSAnLi9BUElDb25uZWN0aW9ucy9PcGVuQUlDb25uZWN0aW9ucyc7XG5pbXBvcnQgeyBhZGRNaXN0cmFsQ29ubmVjdGlvblNldHRpbmdzIH0gZnJvbSAnLi9BUElDb25uZWN0aW9ucy9NaXN0cmFsQ29ubmVjdGlvbnMnO1xuaW1wb3J0IHsgYWRkR29vZ2xlR2VtaW5pQ29ubmVjdGlvblNldHRpbmdzIH0gZnJvbSAnLi9BUElDb25uZWN0aW9ucy9Hb29nbGVHZW1pbmlDb25uZWN0aW9ucyc7XG5pbXBvcnQgeyBhZGRBbnRocm9waWNDb25uZWN0aW9uU2V0dGluZ3MgfSBmcm9tICcuL0FQSUNvbm5lY3Rpb25zL0FudGhyb3BpY0Nvbm5lY3Rpb25zJztcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZEFQSUNvbm5lY3Rpb25TZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHBsdWdpbjogQk1PR1BULCBTZXR0aW5nVGFiOiBTZXR0aW5nVGFiKSB7XG4gICAgY29uc3QgdG9nZ2xlU2V0dGluZ0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ3RvZ2dsZVNldHRpbmdDb250YWluZXInIH0pO1xuICAgIHRvZ2dsZVNldHRpbmdDb250YWluZXIuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQVBJIENvbm5lY3Rpb25zJyB9KTtcblxuICAgIGNvbnN0IGluaXRpYWxTdGF0ZSA9IHBsdWdpbi5zZXR0aW5ncy50b2dnbGVBUElDb25uZWN0aW9uU2V0dGluZ3M7XG4gICAgY29uc3QgY2hldnJvbkljb24gPSB0b2dnbGVTZXR0aW5nQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyBjbHM6ICdjaGV2cm9uLWljb24nIH0pO1xuICAgIHNldEljb24oY2hldnJvbkljb24sIGluaXRpYWxTdGF0ZSA/ICdjaGV2cm9uLWRvd24nIDogJ2NoZXZyb24tcmlnaHQnKTtcblxuICAgIC8vIENyZWF0ZSB0aGUgc2V0dGluZ3MgY29udGFpbmVyIHRvIGJlIHRvZ2dsZWRcbiAgICBjb25zdCBzZXR0aW5nc0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ3NldHRpbmdzQ29udGFpbmVyJyB9KTtcbiAgICBzZXR0aW5nc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gaW5pdGlhbFN0YXRlID8gJ2Jsb2NrJyA6ICdub25lJztcblxuICAgIC8vIFRvZ2dsZSB2aXNpYmlsaXR5XG4gICAgdG9nZ2xlU2V0dGluZ0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgaXNPcGVuID0gc2V0dGluZ3NDb250YWluZXIuc3R5bGUuZGlzcGxheSAhPT0gJ25vbmUnO1xuICAgICAgICBpZiAoaXNPcGVuKSB7XG4gICAgICAgICAgICBzZXRJY29uKGNoZXZyb25JY29uLCAnY2hldnJvbi1yaWdodCcpOyAvLyBDbG9zZSBzdGF0ZVxuICAgICAgICAgICAgc2V0dGluZ3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy50b2dnbGVBUElDb25uZWN0aW9uU2V0dGluZ3MgPSBmYWxzZTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0SWNvbihjaGV2cm9uSWNvbiwgJ2NoZXZyb24tZG93bicpOyAvLyBPcGVuIHN0YXRlXG4gICAgICAgICAgICBzZXR0aW5nc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy50b2dnbGVBUElDb25uZWN0aW9uU2V0dGluZ3MgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICB9KTtcblxuICAgIGFkZE9wZW5BSUNvbm5lY3Rpb25TZXR0aW5ncyhzZXR0aW5nc0NvbnRhaW5lciwgcGx1Z2luLCBTZXR0aW5nVGFiKTtcbiAgICBhZGRNaXN0cmFsQ29ubmVjdGlvblNldHRpbmdzKHNldHRpbmdzQ29udGFpbmVyLCBwbHVnaW4sIFNldHRpbmdUYWIpO1xuICAgIGFkZEdvb2dsZUdlbWluaUNvbm5lY3Rpb25TZXR0aW5ncyhzZXR0aW5nc0NvbnRhaW5lciwgcGx1Z2luLCBTZXR0aW5nVGFiKTtcbiAgICBhZGRBbnRocm9waWNDb25uZWN0aW9uU2V0dGluZ3Moc2V0dGluZ3NDb250YWluZXIsIHBsdWdpbiwgU2V0dGluZ1RhYik7XG59XG5cbiIsICJpbXBvcnQgeyBTZXR0aW5nLCBTZXR0aW5nVGFiLCBzZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IEJNT0dQVCwgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnc3JjL21haW4nO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkT3BlbkFJQ29ubmVjdGlvblNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgcGx1Z2luOiBCTU9HUFQsIFNldHRpbmdUYWI6IFNldHRpbmdUYWIpIHtcbiAgICBjb25zdCB0b2dnbGVTZXR0aW5nQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiAndG9nZ2xlU2V0dGluZ0NvbnRhaW5lcicgfSk7XG4gICAgdG9nZ2xlU2V0dGluZ0NvbnRhaW5lci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdPcGVuQUknIH0pO1xuXG4gICAgY29uc3QgaW5pdGlhbFN0YXRlID0gcGx1Z2luLnNldHRpbmdzLnRvZ2dsZU9wZW5BSVNldHRpbmdzO1xuICAgIGNvbnN0IGNoZXZyb25JY29uID0gdG9nZ2xlU2V0dGluZ0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgY2xzOiAnY2hldnJvbi1pY29uJyB9KTtcbiAgICBzZXRJY29uKGNoZXZyb25JY29uLCBpbml0aWFsU3RhdGUgPyAnY2hldnJvbi1kb3duJyA6ICdjaGV2cm9uLXJpZ2h0Jyk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIHNldHRpbmdzIGNvbnRhaW5lciB0byBiZSB0b2dnbGVkXG4gICAgY29uc3Qgc2V0dGluZ3NDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nc0NvbnRhaW5lcicgfSk7XG4gICAgc2V0dGluZ3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IGluaXRpYWxTdGF0ZSA/ICdibG9jaycgOiAnbm9uZSc7XG5cbiAgICAvLyBUb2dnbGUgdmlzaWJpbGl0eVxuICAgIHRvZ2dsZVNldHRpbmdDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzT3BlbiA9IHNldHRpbmdzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJztcbiAgICAgICAgaWYgKGlzT3Blbikge1xuICAgICAgICAgICAgc2V0SWNvbihjaGV2cm9uSWNvbiwgJ2NoZXZyb24tcmlnaHQnKTsgLy8gQ2xvc2Ugc3RhdGVcbiAgICAgICAgICAgIHNldHRpbmdzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudG9nZ2xlT3BlbkFJU2V0dGluZ3MgPSBmYWxzZTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0SWNvbihjaGV2cm9uSWNvbiwgJ2NoZXZyb24tZG93bicpOyAvLyBPcGVuIHN0YXRlXG4gICAgICAgICAgICBzZXR0aW5nc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy50b2dnbGVPcGVuQUlTZXR0aW5ncyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgLnNldE5hbWUoJ09wZW5BSSBBUEkgS2V5JylcbiAgICAuc2V0RGVzYygnSW5zZXJ0IE9wZW5BSSBBUEkgS2V5LicpXG4gICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgIC5zZXRQbGFjZWhvbGRlcignaW5zZXJ0LWFwaS1rZXknKVxuICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm9wZW5BSS5BUElLZXkgPyBgJHtwbHVnaW4uc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMub3BlbkFJLkFQSUtleS5zbGljZSgwLCA2KX0tLi4uJHtwbHVnaW4uc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMub3BlbkFJLkFQSUtleS5zbGljZSgtNCl9YCA6ICcnKVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMub3BlbkFJLkFQSUtleSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KVxuICAgICAgICAuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIFNldHRpbmdUYWIuZGlzcGxheSgpO1xuICAgICAgICB9KVxuICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUoJ09wZW5BSS1CYXNlZCBVUkwnKVxuICAgICAgICAuc2V0RGVzYygnRW50ZXIgeW91ciBjdXN0b20gT3BlbkFJLUJhc2VkIFVSTC4nKVxuICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cbiAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdSZXN0b3JlIERlZmF1bHQnKVxuICAgICAgICAgICAgLnNldEljb24oJ3JvdGF0ZS1jdycpXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ2NsaWNrYWJsZS1pY29uJylcbiAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMub3BlbkFJLm9wZW5BSUJhc2VNb2RlbHMgPSBbXTtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMub3BlbkFJLm9wZW5BSUJhc2VVcmwgPSBERUZBVUxUX1NFVFRJTkdTLkFQSUNvbm5lY3Rpb25zLm9wZW5BSS5vcGVuQUlCYXNlVXJsO1xuICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICBTZXR0aW5nVGFiLmRpc3BsYXkoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2h0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEnKVxuICAgICAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5BUElDb25uZWN0aW9ucy5vcGVuQUkub3BlbkFJQmFzZVVybCB8fCBERUZBVUxUX1NFVFRJTkdTLkFQSUNvbm5lY3Rpb25zLm9wZW5BSS5vcGVuQUlCYXNlVXJsKVxuICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMub3BlbkFJLm9wZW5BSUJhc2VVcmwgPSB2YWx1ZSA/IHZhbHVlIDogREVGQVVMVF9TRVRUSU5HUy5BUElDb25uZWN0aW9ucy5vcGVuQUkub3BlbkFJQmFzZVVybDtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBTZXR0aW5nVGFiLmRpc3BsYXkoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgICAgLnNldE5hbWUoJ0FsbG93IFN0cmVhbScpXG4gICAgICAgIC5zZXREZXNjKCdBbGxvdyBzdHJlYW0gZm9yIE9wZW5BSS1CYXNlZCBtb2RlbHMuJylcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5BUElDb25uZWN0aW9ucy5vcGVuQUkuYWxsb3dPcGVuQUlCYXNlVXJsRGF0YVN0cmVhbSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm9wZW5BSS5hbGxvd09wZW5BSUJhc2VVcmxEYXRhU3RyZWFtID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbn0iLCAiaW1wb3J0IHsgU2V0dGluZywgU2V0dGluZ1RhYiwgc2V0SWNvbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBCTU9HUFQgZnJvbSAnc3JjL21haW4nO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkTWlzdHJhbENvbm5lY3Rpb25TZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHBsdWdpbjogQk1PR1BULCBTZXR0aW5nVGFiOiBTZXR0aW5nVGFiKSB7XG4gICAgY29uc3QgdG9nZ2xlU2V0dGluZ0NvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdih7IGNsczogJ3RvZ2dsZVNldHRpbmdDb250YWluZXInIH0pO1xuICAgIHRvZ2dsZVNldHRpbmdDb250YWluZXIuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnTWlzdHJhbCBBSScgfSk7XG5cbiAgICBjb25zdCBpbml0aWFsU3RhdGUgPSBwbHVnaW4uc2V0dGluZ3MudG9nZ2xlTWlzdHJhbFNldHRpbmdzO1xuICAgIGNvbnN0IGNoZXZyb25JY29uID0gdG9nZ2xlU2V0dGluZ0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgY2xzOiAnY2hldnJvbi1pY29uJyB9KTtcbiAgICBzZXRJY29uKGNoZXZyb25JY29uLCBpbml0aWFsU3RhdGUgPyAnY2hldnJvbi1kb3duJyA6ICdjaGV2cm9uLXJpZ2h0Jyk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIHNldHRpbmdzIGNvbnRhaW5lciB0byBiZSB0b2dnbGVkXG4gICAgY29uc3Qgc2V0dGluZ3NDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nc0NvbnRhaW5lcicgfSk7XG4gICAgc2V0dGluZ3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IGluaXRpYWxTdGF0ZSA/ICdibG9jaycgOiAnbm9uZSc7XG5cbiAgICAvLyBUb2dnbGUgdmlzaWJpbGl0eVxuICAgIHRvZ2dsZVNldHRpbmdDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzT3BlbiA9IHNldHRpbmdzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJztcbiAgICAgICAgaWYgKGlzT3Blbikge1xuICAgICAgICAgICAgc2V0SWNvbihjaGV2cm9uSWNvbiwgJ2NoZXZyb24tcmlnaHQnKTsgLy8gQ2xvc2Ugc3RhdGVcbiAgICAgICAgICAgIHNldHRpbmdzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudG9nZ2xlTWlzdHJhbFNldHRpbmdzID0gZmFsc2U7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldEljb24oY2hldnJvbkljb24sICdjaGV2cm9uLWRvd24nKTsgLy8gT3BlbiBzdGF0ZVxuICAgICAgICAgICAgc2V0dGluZ3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudG9nZ2xlTWlzdHJhbFNldHRpbmdzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAuc2V0TmFtZSgnTWlzdHJhbCBBUEkgS2V5JylcbiAgICAuc2V0RGVzYygnSW5zZXJ0IE1pc3RyYWwgQVBJIEtleS4nKVxuICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2luc2VydC1hcGkta2V5JylcbiAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5BUElDb25uZWN0aW9ucy5taXN0cmFsLkFQSUtleSA/IGAke3BsdWdpbi5zZXR0aW5ncy5BUElDb25uZWN0aW9ucy5taXN0cmFsLkFQSUtleS5zbGljZSgwLCA2KX0tLi4uJHtwbHVnaW4uc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMubWlzdHJhbC5BUElLZXkuc2xpY2UoLTQpfWAgOiAnJylcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm1pc3RyYWwuQVBJS2V5ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgU2V0dGluZ1RhYi5kaXNwbGF5KCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKHNldHRpbmdzQ29udGFpbmVyKVxuICAgIC5zZXROYW1lKCdBbGxvdyBTdHJlYW0nKVxuICAgIC5zZXREZXNjKCdBbGxvdyBzdHJlYW0gZm9yIE1pc3RyYWwgbW9kZWxzLicpXG4gICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PlxuICAgICAgICB0b2dnbGUuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm1pc3RyYWwuYWxsb3dTdHJlYW0pLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm1pc3RyYWwuYWxsb3dTdHJlYW0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfSlcbiAgICApO1xufSIsICJpbXBvcnQgeyBTZXR0aW5nLCBTZXR0aW5nVGFiLCBzZXRJY29uIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IEJNT0dQVCBmcm9tICdzcmMvbWFpbic7XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRHb29nbGVHZW1pbmlDb25uZWN0aW9uU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBwbHVnaW46IEJNT0dQVCwgU2V0dGluZ1RhYjogU2V0dGluZ1RhYikge1xuICAgIGNvbnN0IHRvZ2dsZVNldHRpbmdDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICd0b2dnbGVTZXR0aW5nQ29udGFpbmVyJyB9KTtcbiAgICB0b2dnbGVTZXR0aW5nQ29udGFpbmVyLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0dvb2dsZSBHZW1pbmknIH0pO1xuXG4gICAgY29uc3QgaW5pdGlhbFN0YXRlID0gcGx1Z2luLnNldHRpbmdzLnRvZ2dsZUdvb2dsZUdlbWluaVNldHRpbmdzO1xuICAgIGNvbnN0IGNoZXZyb25JY29uID0gdG9nZ2xlU2V0dGluZ0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgY2xzOiAnY2hldnJvbi1pY29uJyB9KTtcbiAgICBzZXRJY29uKGNoZXZyb25JY29uLCBpbml0aWFsU3RhdGUgPyAnY2hldnJvbi1kb3duJyA6ICdjaGV2cm9uLXJpZ2h0Jyk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIHNldHRpbmdzIGNvbnRhaW5lciB0byBiZSB0b2dnbGVkXG4gICAgY29uc3Qgc2V0dGluZ3NDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nc0NvbnRhaW5lcicgfSk7XG4gICAgc2V0dGluZ3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IGluaXRpYWxTdGF0ZSA/ICdibG9jaycgOiAnbm9uZSc7XG5cbiAgICAvLyBUb2dnbGUgdmlzaWJpbGl0eVxuICAgIHRvZ2dsZVNldHRpbmdDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzT3BlbiA9IHNldHRpbmdzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJztcbiAgICAgICAgaWYgKGlzT3Blbikge1xuICAgICAgICAgICAgc2V0SWNvbihjaGV2cm9uSWNvbiwgJ2NoZXZyb24tcmlnaHQnKTsgLy8gQ2xvc2Ugc3RhdGVcbiAgICAgICAgICAgIHNldHRpbmdzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudG9nZ2xlR29vZ2xlR2VtaW5pU2V0dGluZ3MgPSBmYWxzZTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0SWNvbihjaGV2cm9uSWNvbiwgJ2NoZXZyb24tZG93bicpOyAvLyBPcGVuIHN0YXRlXG4gICAgICAgICAgICBzZXR0aW5nc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy50b2dnbGVHb29nbGVHZW1pbmlTZXR0aW5ncyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgLnNldE5hbWUoJ0dvb2dsZSBHZW1pbmkgQVBJIEtleScpXG4gICAgLnNldERlc2MoJ0luc2VydCBHb29nbGUgR2VtaW5pIEFQSSBLZXkuJylcbiAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdpbnNlcnQtYXBpLWtleScpXG4gICAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMuZ29vZ2xlR2VtaW5pLkFQSUtleSA/IGAke3BsdWdpbi5zZXR0aW5ncy5BUElDb25uZWN0aW9ucy5nb29nbGVHZW1pbmkuQVBJS2V5LnNsaWNlKDAsIDYpfS0uLi4ke3BsdWdpbi5zZXR0aW5ncy5BUElDb25uZWN0aW9ucy5nb29nbGVHZW1pbmkuQVBJS2V5LnNsaWNlKC00KX1gIDogJycpXG4gICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5BUElDb25uZWN0aW9ucy5nb29nbGVHZW1pbmkuQVBJS2V5ID0gdmFsdWU7XG4gICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgU2V0dGluZ1RhYi5kaXNwbGF5KCk7XG4gICAgICAgIH0pXG4gICAgKTtcbn0iLCAiaW1wb3J0IHsgU2V0dGluZywgU2V0dGluZ1RhYiwgc2V0SWNvbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBCTU9HUFQgZnJvbSAnc3JjL21haW4nO1xuXG5leHBvcnQgZnVuY3Rpb24gYWRkQW50aHJvcGljQ29ubmVjdGlvblNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgcGx1Z2luOiBCTU9HUFQsIFNldHRpbmdUYWI6IFNldHRpbmdUYWIpIHtcbiAgICBjb25zdCB0b2dnbGVTZXR0aW5nQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiAndG9nZ2xlU2V0dGluZ0NvbnRhaW5lcicgfSk7XG4gICAgdG9nZ2xlU2V0dGluZ0NvbnRhaW5lci5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdBbnRocm9waWMnIH0pO1xuXG4gICAgY29uc3QgaW5pdGlhbFN0YXRlID0gcGx1Z2luLnNldHRpbmdzLnRvZ2dsZUFudGhyb3BpY1NldHRpbmdzO1xuICAgIGNvbnN0IGNoZXZyb25JY29uID0gdG9nZ2xlU2V0dGluZ0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgY2xzOiAnY2hldnJvbi1pY29uJyB9KTtcbiAgICBzZXRJY29uKGNoZXZyb25JY29uLCBpbml0aWFsU3RhdGUgPyAnY2hldnJvbi1kb3duJyA6ICdjaGV2cm9uLXJpZ2h0Jyk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIHNldHRpbmdzIGNvbnRhaW5lciB0byBiZSB0b2dnbGVkXG4gICAgY29uc3Qgc2V0dGluZ3NDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nc0NvbnRhaW5lcicgfSk7XG4gICAgc2V0dGluZ3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IGluaXRpYWxTdGF0ZSA/ICdibG9jaycgOiAnbm9uZSc7XG5cbiAgICAvLyBUb2dnbGUgdmlzaWJpbGl0eVxuICAgIHRvZ2dsZVNldHRpbmdDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzT3BlbiA9IHNldHRpbmdzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJztcbiAgICAgICAgaWYgKGlzT3Blbikge1xuICAgICAgICAgICAgc2V0SWNvbihjaGV2cm9uSWNvbiwgJ2NoZXZyb24tcmlnaHQnKTsgLy8gQ2xvc2Ugc3RhdGVcbiAgICAgICAgICAgIHNldHRpbmdzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudG9nZ2xlQW50aHJvcGljU2V0dGluZ3MgPSBmYWxzZTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0SWNvbihjaGV2cm9uSWNvbiwgJ2NoZXZyb24tZG93bicpOyAvLyBPcGVuIHN0YXRlXG4gICAgICAgICAgICBzZXR0aW5nc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy50b2dnbGVBbnRocm9waWNTZXR0aW5ncyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgLnNldE5hbWUoJ0FudGhyb3BpYyBBUEkgS2V5JylcbiAgICAuc2V0RGVzYygnSW5zZXJ0IEFudGhyb3BpYyBBUEkgS2V5LicpXG4gICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgIC5zZXRQbGFjZWhvbGRlcignaW5zZXJ0LWFwaS1rZXknKVxuICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLmFudGhyb3BpYy5BUElLZXkgPyBgJHtwbHVnaW4uc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMuYW50aHJvcGljLkFQSUtleS5zbGljZSgwLCA2KX0tLi4uJHtwbHVnaW4uc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMuYW50aHJvcGljLkFQSUtleS5zbGljZSgtNCl9YCA6ICcnKVxuICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMuYW50aHJvcGljLkFQSUtleSA9IHZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KVxuICAgICAgICAuaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIFNldHRpbmdUYWIuZGlzcGxheSgpO1xuICAgICAgICB9KVxuICAgICk7XG59IiwgImltcG9ydCB7IFNldHRpbmcsIFNldHRpbmdUYWIsIFRGb2xkZXIsIHNldEljb24gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgQk1PR1BULCB7IERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICdzcmMvbWFpbic7XG5cblxuLy8gUHJvbXB0IFNldHRpbmdzXG5leHBvcnQgZnVuY3Rpb24gYWRkUHJvbXB0U2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBwbHVnaW46IEJNT0dQVCwgU2V0dGluZ1RhYjogU2V0dGluZ1RhYikge1xuICAgIGNvbnN0IHRvZ2dsZVNldHRpbmdDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICd0b2dnbGVTZXR0aW5nQ29udGFpbmVyJyB9KTtcbiAgICB0b2dnbGVTZXR0aW5nQ29udGFpbmVyLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnUHJvbXB0cyd9KTtcblxuICAgIGNvbnN0IGluaXRpYWxTdGF0ZSA9IHBsdWdpbi5zZXR0aW5ncy50b2dnbGVQcm9tcHRTZXR0aW5ncztcbiAgICBjb25zdCBjaGV2cm9uSWNvbiA9IHRvZ2dsZVNldHRpbmdDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IGNsczogJ2NoZXZyb24taWNvbicgfSk7XG4gICAgc2V0SWNvbihjaGV2cm9uSWNvbiwgaW5pdGlhbFN0YXRlID8gJ2NoZXZyb24tZG93bicgOiAnY2hldnJvbi1yaWdodCcpO1xuXG4gICAgLy8gQ3JlYXRlIHRoZSBzZXR0aW5ncyBjb250YWluZXIgdG8gYmUgdG9nZ2xlZFxuICAgIGNvbnN0IHNldHRpbmdzQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KHsgY2xzOiAnc2V0dGluZ3NDb250YWluZXInIH0pO1xuICAgIHNldHRpbmdzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSBpbml0aWFsU3RhdGUgPyAnYmxvY2snIDogJ25vbmUnO1xuXG4gICAgLy8gVG9nZ2xlIHZpc2liaWxpdHlcbiAgICB0b2dnbGVTZXR0aW5nQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBpc09wZW4gPSBzZXR0aW5nc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ICE9PSAnbm9uZSc7XG4gICAgICAgIGlmIChpc09wZW4pIHtcbiAgICAgICAgICAgIHNldEljb24oY2hldnJvbkljb24sICdjaGV2cm9uLXJpZ2h0Jyk7IC8vIENsb3NlIHN0YXRlXG4gICAgICAgICAgICBzZXR0aW5nc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLnRvZ2dsZVByb21wdFNldHRpbmdzID0gZmFsc2U7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldEljb24oY2hldnJvbkljb24sICdjaGV2cm9uLWRvd24nKTsgLy8gT3BlbiBzdGF0ZVxuICAgICAgICAgICAgc2V0dGluZ3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudG9nZ2xlUHJvbXB0U2V0dGluZ3MgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICB9KTtcblxuICAgIG5ldyBTZXR0aW5nKHNldHRpbmdzQ29udGFpbmVyKVxuICAgICAgICAuc2V0TmFtZSgnUHJvbXB0IEZvbGRlciBQYXRoJylcbiAgICAgICAgLnNldERlc2MoJ1JlZmVyZW5jZSB5b3VyIHByb21wdHMgZnJvbSBhIHNwZWNpZmllZCBmb2xkZXIuJylcbiAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0JNTy9Qcm9tcHRzLycpXG4gICAgICAgICAgICAuc2V0VmFsdWUocGx1Z2luLnNldHRpbmdzLnByb21wdHMucHJvbXB0Rm9sZGVyUGF0aCB8fCBERUZBVUxUX1NFVFRJTkdTLnByb21wdHMucHJvbXB0Rm9sZGVyUGF0aClcbiAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MucHJvbXB0cy5wcm9tcHRGb2xkZXJQYXRoID0gdmFsdWUgPyB2YWx1ZSA6IERFRkFVTFRfU0VUVElOR1MucHJvbXB0cy5wcm9tcHRGb2xkZXJQYXRoO1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgZm9sZGVyUGF0aCA9IHBsdWdpbi5zZXR0aW5ncy5wcm9tcHRzLnByb21wdEZvbGRlclBhdGgudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRyYWlsaW5nICcvJyBpZiBpdCBleGlzdHNcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZvbGRlclBhdGguZW5kc1dpdGgoJy8nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9sZGVyUGF0aCA9IGZvbGRlclBhdGguc3Vic3RyaW5nKDAsIGZvbGRlclBhdGgubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZvbGRlciA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZm9sZGVyUGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoZm9sZGVyICYmIGZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS5ib3JkZXJDb2xvciA9ICcnOyBcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS5ib3JkZXJDb2xvciA9ICdyZWQnOyBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgU2V0dGluZ1RhYi5kaXNwbGF5KCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgICAgIC5zZXROYW1lKCdQcm9tcHQnKVxuICAgICAgICAuc2V0RGVzYygnU2VsZWN0IGEgcHJvbXB0LicpXG4gICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJycsICctLUVNUFRZLS0nKTtcblxuICAgICAgICAgICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5wcm9tcHRzLnByb21wdEZvbGRlclBhdGggIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgLy8gRmV0Y2hpbmcgZmlsZXMgZnJvbSB0aGUgc3BlY2lmaWVkIGZvbGRlclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gYXBwLnZhdWx0LmdldEZpbGVzKCkuZmlsdGVyKChmaWxlKSA9PiBmaWxlLnBhdGguc3RhcnRzV2l0aChwbHVnaW4uc2V0dGluZ3MucHJvbXB0cy5wcm9tcHRGb2xkZXJQYXRoKSk7XG4gICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFNvcnRpbmcgdGhlIGZpbGVzIGFycmF5IGFscGhhYmV0aWNhbGx5IGJ5IGZpbGUgbmFtZVxuICAgICAgICAgICAgICAgIGZpbGVzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xuXG4gICAgICAgICAgICAgICAgLy8gQWRkaW5nIGVhY2ggZmlsZSBuYW1lIGFzIGEgZHJvcGRvd24gb3B0aW9uXG4gICAgICAgICAgICAgICAgZmlsZXMuZm9yRWFjaCgoZmlsZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGZpbGUubmFtZS5yZXBsYWNlKC9cXC5bXi8uXSskLywgJycpOyAvLyBSZW1vdmluZyB0aGUgZmlsZSBleHRlbnNpb25cbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKGZpbGUubmFtZSwgZmlsZU5hbWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTZXQgdGhlIGRlZmF1bHQgb3B0aW9uIHRvIHRoZSBlbXB0eSBvbmVcbiAgICAgICAgICAgIGRyb3Bkb3duLnNldFZhbHVlKCcnKTtcblxuICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MucHJvbXB0cy5wcm9tcHQgfHwgREVGQVVMVF9TRVRUSU5HUy5wcm9tcHRzLnByb21wdClcbiAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MucHJvbXB0cy5wcm9tcHQgPSB2YWx1ZSA/IHZhbHVlIDogREVGQVVMVF9TRVRUSU5HUy5wcm9tcHRzLnByb21wdDtcbiAgICAgICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTtcbn0iLCAiaW1wb3J0IHsgU2V0dGluZywgU2V0dGluZ1RhYiwgc2V0SWNvbiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBCTU9HUFQsIHsgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJ3NyYy9tYWluJztcbmltcG9ydCB7IGFkZERlc2NyaXB0aW9uTGluayB9IGZyb20gJ3NyYy91dGlscy9EZXNjcmlwdGlvbkxpbmsnO1xuXG4vLyBPcGVuQUktQmFzZWQgUkVTVCBBUEkgVVJMIENvbm5lY3Rpb24gU2V0dGluZ3NcbmV4cG9ydCBmdW5jdGlvbiBhZGRSRVNUQVBJVVJMU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBwbHVnaW46IEJNT0dQVCwgU2V0dGluZ1RhYjogU2V0dGluZ1RhYikge1xuICAgIGNvbnN0IHRvZ2dsZVNldHRpbmdDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICd0b2dnbGVTZXR0aW5nQ29udGFpbmVyJyB9KTtcbiAgICB0b2dnbGVTZXR0aW5nQ29udGFpbmVyLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnUkVTVCBBUEkgVVJMIENvbm5lY3Rpb24nfSk7XG5cbiAgICBjb25zdCBpbml0aWFsU3RhdGUgPSBwbHVnaW4uc2V0dGluZ3MudG9nZ2xlUkVTVEFQSVVSTFNldHRpbmdzO1xuICAgIGNvbnN0IGNoZXZyb25JY29uID0gdG9nZ2xlU2V0dGluZ0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgY2xzOiAnY2hldnJvbi1pY29uJyB9KTtcbiAgICBzZXRJY29uKGNoZXZyb25JY29uLCBpbml0aWFsU3RhdGUgPyAnY2hldnJvbi1kb3duJyA6ICdjaGV2cm9uLXJpZ2h0Jyk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIHNldHRpbmdzIGNvbnRhaW5lciB0byBiZSB0b2dnbGVkXG4gICAgY29uc3Qgc2V0dGluZ3NDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nc0NvbnRhaW5lcicgfSk7XG4gICAgc2V0dGluZ3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IGluaXRpYWxTdGF0ZSA/ICdibG9jaycgOiAnbm9uZSc7XG5cbiAgICAvLyBUb2dnbGUgdmlzaWJpbGl0eVxuICAgIHRvZ2dsZVNldHRpbmdDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzT3BlbiA9IHNldHRpbmdzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJztcbiAgICAgICAgaWYgKGlzT3Blbikge1xuICAgICAgICAgICAgc2V0SWNvbihjaGV2cm9uSWNvbiwgJ2NoZXZyb24tcmlnaHQnKTsgLy8gQ2xvc2Ugc3RhdGVcbiAgICAgICAgICAgIHNldHRpbmdzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudG9nZ2xlUkVTVEFQSVVSTFNldHRpbmdzID0gZmFsc2U7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldEljb24oY2hldnJvbkljb24sICdjaGV2cm9uLWRvd24nKTsgLy8gT3BlbiBzdGF0ZVxuICAgICAgICAgICAgc2V0dGluZ3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudG9nZ2xlUkVTVEFQSVVSTFNldHRpbmdzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAuc2V0TmFtZSgnQVBJIEtleSAoT3B0aW9uYWwpJylcbiAgICAuc2V0RGVzYygnSW5zZXJ0IEFQSSBLZXkgKE9wdGlvbmFsKS4nKVxuICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2luc2VydC1hcGkta2V5JylcbiAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5SRVNUQVBJVVJMQ29ubmVjdGlvbi5BUElLZXkgPyBgJHtwbHVnaW4uc2V0dGluZ3MuUkVTVEFQSVVSTENvbm5lY3Rpb24uQVBJS2V5LnNsaWNlKDAsIDYpfS0uLi4ke3BsdWdpbi5zZXR0aW5ncy5SRVNUQVBJVVJMQ29ubmVjdGlvbi5BUElLZXkuc2xpY2UoLTQpfWAgOiAnJylcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLlJFU1RBUElVUkxDb25uZWN0aW9uLlJFU1RBUElVUkxNb2RlbHMgPSBbXTtcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5SRVNUQVBJVVJMQ29ubmVjdGlvbi5BUElLZXkgPSB2YWx1ZTtcbiAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBTZXR0aW5nVGFiLmRpc3BsYXkoKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgLnNldE5hbWUoJ1JFU1QgQVBJIFVSTCcpXG4gICAgLnNldERlc2MoJ0VudGVyIHlvdXIgUkVTVCBBUEkgVVJMLicpXG4gICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgIC5zZXRQbGFjZWhvbGRlcignaHR0cDovL2xvY2FsaG9zdDoxMjM0JylcbiAgICAgICAgLnNldFZhbHVlKHBsdWdpbi5zZXR0aW5ncy5SRVNUQVBJVVJMQ29ubmVjdGlvbi5SRVNUQVBJVVJMIHx8IERFRkFVTFRfU0VUVElOR1MuUkVTVEFQSVVSTENvbm5lY3Rpb24uUkVTVEFQSVVSTClcbiAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy5SRVNUQVBJVVJMQ29ubmVjdGlvbi5SRVNUQVBJVVJMTW9kZWxzID0gW107XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLlJFU1RBUElVUkxDb25uZWN0aW9uLlJFU1RBUElVUkwgPSB2YWx1ZSA/IHZhbHVlIDogREVGQVVMVF9TRVRUSU5HUy5SRVNUQVBJVVJMQ29ubmVjdGlvbi5SRVNUQVBJVVJMO1xuICAgICAgICAgICAgICAgIGF3YWl0IHBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIC5pbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgU2V0dGluZ1RhYi5kaXNwbGF5KCk7XG4gICAgICAgIH0pXG4gICAgKTtcblxuICAgIG5ldyBTZXR0aW5nKHNldHRpbmdzQ29udGFpbmVyKVxuICAgIC5zZXROYW1lKCdBbGxvdyBTdHJlYW0nKVxuICAgIC5zZXREZXNjKGFkZERlc2NyaXB0aW9uTGluaygnQWxsb3cgUkVTVCBBUEkgVVJMIG1vZGVscyB0byBzdHJlYW0gcmVzcG9uc2UuIEFkZGl0aW9uYWwgc2V0dXAgcmVxdWlyZWQ6ICcsICdodHRwczovL2dpdGh1Yi5jb20vbG9uZ3kyay9vYnNpZGlhbi1ibW8tY2hhdGJvdC93aWtpL0hvdy10by1zZXR1cC13aXRoLUxNLVN0dWRpbycsICcnLCAnW0luc3RydWN0aW9uc10nKSlcbiAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+XG4gICAgICAgIHRvZ2dsZS5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MuUkVTVEFQSVVSTENvbm5lY3Rpb24uYWxsb3dSRVNUQVBJVVJMRGF0YVN0cmVhbSkub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MuUkVTVEFQSVVSTENvbm5lY3Rpb24uYWxsb3dSRVNUQVBJVVJMRGF0YVN0cmVhbSA9IHZhbHVlO1xuICAgICAgICAgICAgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICB9KVxuICAgICk7XG59IiwgImltcG9ydCB7IFNldHRpbmcsIFNldHRpbmdUYWIsIHNldEljb24gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgQk1PR1BULCB7IERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICdzcmMvbWFpbic7XG5pbXBvcnQgeyBhZGREZXNjcmlwdGlvbkxpbmsgfSBmcm9tICdzcmMvdXRpbHMvRGVzY3JpcHRpb25MaW5rJztcblxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkRWRpdG9yU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBwbHVnaW46IEJNT0dQVCwgU2V0dGluZ1RhYjogU2V0dGluZ1RhYikge1xuICAgIGNvbnN0IHRvZ2dsZVNldHRpbmdDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICd0b2dnbGVTZXR0aW5nQ29udGFpbmVyJyB9KTtcbiAgICB0b2dnbGVTZXR0aW5nQ29udGFpbmVyLmNyZWF0ZUVsKCdoMicsIHt0ZXh0OiAnRWRpdG9yJ30pO1xuXG4gICAgY29uc3QgaW5pdGlhbFN0YXRlID0gcGx1Z2luLnNldHRpbmdzLnRvZ2dsZUVkaXRvclNldHRpbmdzO1xuICAgIGNvbnN0IGNoZXZyb25JY29uID0gdG9nZ2xlU2V0dGluZ0NvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgY2xzOiAnY2hldnJvbi1pY29uJyB9KTtcbiAgICBzZXRJY29uKGNoZXZyb25JY29uLCBpbml0aWFsU3RhdGUgPyAnY2hldnJvbi1kb3duJyA6ICdjaGV2cm9uLXJpZ2h0Jyk7XG5cbiAgICAvLyBDcmVhdGUgdGhlIHNldHRpbmdzIGNvbnRhaW5lciB0byBiZSB0b2dnbGVkXG4gICAgY29uc3Qgc2V0dGluZ3NDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdzZXR0aW5nc0NvbnRhaW5lcicgfSk7XG4gICAgc2V0dGluZ3NDb250YWluZXIuc3R5bGUuZGlzcGxheSA9IGluaXRpYWxTdGF0ZSA/ICdibG9jaycgOiAnbm9uZSc7XG5cbiAgICAvLyBUb2dnbGUgdmlzaWJpbGl0eVxuICAgIHRvZ2dsZVNldHRpbmdDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlzT3BlbiA9IHNldHRpbmdzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgIT09ICdub25lJztcbiAgICAgICAgaWYgKGlzT3Blbikge1xuICAgICAgICAgICAgc2V0SWNvbihjaGV2cm9uSWNvbiwgJ2NoZXZyb24tcmlnaHQnKTsgLy8gQ2xvc2Ugc3RhdGVcbiAgICAgICAgICAgIHNldHRpbmdzQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBwbHVnaW4uc2V0dGluZ3MudG9nZ2xlRWRpdG9yU2V0dGluZ3MgPSBmYWxzZTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0SWNvbihjaGV2cm9uSWNvbiwgJ2NoZXZyb24tZG93bicpOyAvLyBPcGVuIHN0YXRlXG4gICAgICAgICAgICBzZXR0aW5nc0NvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHBsdWdpbi5zZXR0aW5ncy50b2dnbGVFZGl0b3JTZXR0aW5ncyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgIH0pO1xuXG4gICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgICAgIC5zZXROYW1lKCdQcm9tcHQgU2VsZWN0IEdlbmVyYXRlIFN5c3RlbScpXG4gICAgICAgIC5zZXREZXNjKGFkZERlc2NyaXB0aW9uTGluaygnU3lzdGVtIHJvbGUgZm9yIFByb21wdCBTZWxlY3QgR2VuZXJhdGUuJywgJ2h0dHBzOi8vZ2l0aHViLmNvbS9sb25neTJrL29ic2lkaWFuLWJtby1jaGF0Ym90L3dpa2kvUHJvbXB0LS0tU2VsZWN0LS0tR2VuZXJhdGUtQ29tbWFuZCcsICcnLCAnW0luc3RydWN0aW9uc10nKSlcbiAgICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuJylcbiAgICAgICAgICAgIC5zZXRWYWx1ZShwbHVnaW4uc2V0dGluZ3MuZWRpdG9yLnN5c3RlbV9yb2xlX3Byb21wdF9zZWxlY3RfZ2VuZXJhdGUgIT09IHVuZGVmaW5lZCA/IHBsdWdpbi5zZXR0aW5ncy5lZGl0b3Iuc3lzdGVtX3JvbGVfcHJvbXB0X3NlbGVjdF9nZW5lcmF0ZSA6IERFRkFVTFRfU0VUVElOR1MuZWRpdG9yLnN5c3RlbV9yb2xlX3Byb21wdF9zZWxlY3RfZ2VuZXJhdGUpXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgcGx1Z2luLnNldHRpbmdzLmVkaXRvci5zeXN0ZW1fcm9sZV9wcm9tcHRfc2VsZWN0X2dlbmVyYXRlID0gdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlIDogREVGQVVMVF9TRVRUSU5HUy5lZGl0b3Iuc3lzdGVtX3JvbGVfcHJvbXB0X3NlbGVjdF9nZW5lcmF0ZTtcbiAgICAgICAgICAgICAgICBhd2FpdCBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG59IiwgImltcG9ydCB7IEJNT1NldHRpbmdzLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnc3JjL21haW4nO1xuaW1wb3J0IHsgZmV0Y2hNb2RlbFJlbmFtZVRpdGxlIH0gZnJvbSAnLi9GZXRjaFJlbmFtZU5vdGVUaXRsZSc7XG5pbXBvcnQgeyBNYXJrZG93blZpZXcsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEFOVEhST1BJQ19NT0RFTFMsIE9QRU5BSV9NT0RFTFMgfSBmcm9tICdzcmMvdmlldyc7XG5pbXBvcnQgeyBmZXRjaE9wZW5BSUJhc2VBUElEYXRhRWRpdG9yLCBmZXRjaE9sbGFtYURhdGFFZGl0b3IsIGZldGNoUkVTVEFQSVVSTERhdGFFZGl0b3IsIGZldGNoQW50aHJvcGljQVBJRGF0YUVkaXRvciwgZmV0Y2hNaXN0cmFsRGF0YUVkaXRvciwgZmV0Y2hHb29nbGVHZW1pbmlEYXRhRWRpdG9yIH0gZnJvbSAnLi4vRmV0Y2hNb2RlbEVkaXRvcic7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW5hbWVUaXRsZUNvbW1hbmQoc2V0dGluZ3M6IEJNT1NldHRpbmdzKSB7XG4gICAgbGV0IHVuaXF1ZU5hbWVGb3VuZCA9IGZhbHNlO1xuICAgIGxldCBtb2RlbFJlbmFtZVRpdGxlO1xuICAgIGxldCBmb2xkZXJOYW1lID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKT8ucGF0aCB8fCAnJyk/LnBhcmVudD8ucGF0aCB8fCAnJztcbiAgICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gJy5tZCc7XG4gICAgY29uc3QgYWxsRmlsZXMgPSBhcHAudmF1bHQuZ2V0RmlsZXMoKTsgLy8gUmV0cmlldmUgYWxsIGZpbGVzIGZyb20gdGhlIHZhdWx0XG4gICAgY29uc3QgYWN0aXZlRmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgIGxldCBmaWxlQ29udGVudCA9ICcnO1xuICBcbiAgICB0cnkge1xuICAgICAgICBuZXcgTm90aWNlKCdHZW5lcmF0aW5nIHRpdGxlLi4uJyk7XG5cbiAgICAgICAgaWYgKGFjdGl2ZUZpbGUpIHtcbiAgICAgICAgZmlsZUNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChhY3RpdmVGaWxlKTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBpZiAoZm9sZGVyTmFtZSAmJiAhZm9sZGVyTmFtZS5lbmRzV2l0aCgnLycpKSB7XG4gICAgICAgIGZvbGRlck5hbWUgKz0gJy8nO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIC8vIEZ1bmN0aW9uIHRvIGNoZWNrIGlmIGEgZmlsZSBuYW1lIGFscmVhZHkgZXhpc3RzXG4gICAgICAgIGNvbnN0IGZpbGVOYW1lRXhpc3RzID0gKG5hbWU6IHN0cmluZyB8IG51bGwpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBhbGxGaWxlcy5zb21lKChmaWxlKSA9PiBmaWxlLnBhdGggPT09IGZvbGRlck5hbWUgKyBuYW1lICsgZmlsZUV4dGVuc2lvbik7XG4gICAgICAgIH07XG4gICAgXG4gICAgICAgIHdoaWxlICghdW5pcXVlTmFtZUZvdW5kKSB7XG4gICAgICAgICAgICBtb2RlbFJlbmFtZVRpdGxlID0gYXdhaXQgZmV0Y2hNb2RlbFJlbmFtZVRpdGxlKHNldHRpbmdzLCBmaWxlQ29udGVudCk7XG4gICAgICAgIFxuICAgICAgICAgICAgaWYgKCFmaWxlTmFtZUV4aXN0cyhtb2RlbFJlbmFtZVRpdGxlKSkge1xuICAgICAgICAgICAgICAgIHVuaXF1ZU5hbWVGb3VuZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBmb2xkZXJOYW1lICsgbW9kZWxSZW5hbWVUaXRsZSArIGZpbGVFeHRlbnNpb247XG4gICAgXG4gICAgICAgIGlmIChhY3RpdmVGaWxlKSB7XG4gICAgICAgIGFwcC52YXVsdC5yZW5hbWUoYWN0aXZlRmlsZSwgZmlsZU5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgbmV3IE5vdGljZSgnUmVuYW1lZCBub3RlIHRpdGxlLicpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH1cbn1cblxuLy8gUHJvbXB0ICsgU2VsZWN0ICsgR2VuZXJhdGUgY29tbWFuZFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb21wdFNlbGVjdEdlbmVyYXRlQ29tbWFuZChzZXR0aW5nczogQk1PU2V0dGluZ3MpIHtcbiAgICBjb25zdCB2aWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICBjb25zdCBzZWxlY3QgPSB2aWV3LmVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICBpZiAodmlldyAmJiBzZWxlY3QgJiYgc2VsZWN0LnRyaW0oKSAhPT0gJycpIHtcbiAgICAgICAgLy8gRmV0Y2ggT3BlbkFJIEFQSSB3aXRoIHNlbGVjdGVkIG1vZGVscy5cbiAgICAgICAgaWYgKE9QRU5BSV9NT0RFTFMuaW5jbHVkZXMoc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCkpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnR2VuZXJhdGluZy4uLicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hPcGVuQUlCYXNlQVBJRGF0YUVkaXRvcihzZXR0aW5ncywgc2VsZWN0KTsgXG4gICAgICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGUgY3VycmVudCBzZWxlY3Rpb24gd2l0aCB0aGUgcmVzcG9uc2VcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJzb3JTdGFydCA9IHZpZXcuZWRpdG9yLmdldEN1cnNvcignZnJvbScpO1xuICAgICAgICAgICAgICAgIHZpZXcuZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24ocmVzcG9uc2UpO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIG5ldyBjdXJzb3IgcG9zaXRpb24gYmFzZWQgb24gdGhlIGxlbmd0aCBvZiB0aGUgcmVzcG9uc2VcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJzb3JFbmQgPSB7IFxuICAgICAgICAgICAgICAgICAgICBsaW5lOiBjdXJzb3JTdGFydC5saW5lLCBcbiAgICAgICAgICAgICAgICAgICAgY2g6IGN1cnNvclN0YXJ0LmNoICsgcmVzcG9uc2U/Lmxlbmd0aCBcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLy8gS2VlcCB0aGUgbmV3IHRleHQgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICB2aWV3LmVkaXRvci5zZXRTZWxlY3Rpb24oY3Vyc29yU3RhcnQsIGN1cnNvckVuZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdFcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBjb21wbGV0aW9uOiAnICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKHNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm9wZW5BSS5vcGVuQUlCYXNlVXJsICE9IERFRkFVTFRfU0VUVElOR1MuQVBJQ29ubmVjdGlvbnMub3BlbkFJLm9wZW5BSUJhc2VVcmwpICYmIHNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm9wZW5BSS5vcGVuQUlCYXNlTW9kZWxzLmluY2x1ZGVzKHNldHRpbmdzLmdlbmVyYWwubW9kZWwpKXtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnR2VuZXJhdGluZy4uLicpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hPcGVuQUlCYXNlQVBJRGF0YUVkaXRvcihzZXR0aW5ncywgc2VsZWN0KTsgXG4gICAgICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGUgY3VycmVudCBzZWxlY3Rpb24gd2l0aCB0aGUgcmVzcG9uc2VcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJzb3JTdGFydCA9IHZpZXcuZWRpdG9yLmdldEN1cnNvcignZnJvbScpO1xuICAgICAgICAgICAgICAgIHZpZXcuZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24ocmVzcG9uc2UpO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIG5ldyBjdXJzb3IgcG9zaXRpb24gYmFzZWQgb24gdGhlIGxlbmd0aCBvZiB0aGUgcmVzcG9uc2VcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJzb3JFbmQgPSB7IFxuICAgICAgICAgICAgICAgICAgICBsaW5lOiBjdXJzb3JTdGFydC5saW5lLCBcbiAgICAgICAgICAgICAgICAgICAgY2g6IGN1cnNvclN0YXJ0LmNoICsgcmVzcG9uc2U/Lmxlbmd0aCBcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLy8gS2VlcCB0aGUgbmV3IHRleHQgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICB2aWV3LmVkaXRvci5zZXRTZWxlY3Rpb24oY3Vyc29yU3RhcnQsIGN1cnNvckVuZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdFcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBjb21wbGV0aW9uOiAnICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQU5USFJPUElDX01PREVMUy5pbmNsdWRlcyhzZXR0aW5ncy5nZW5lcmFsLm1vZGVsKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdHZW5lcmF0aW5nLi4uJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaEFudGhyb3BpY0FQSURhdGFFZGl0b3Ioc2V0dGluZ3MsIHNlbGVjdCk7IFxuICAgICAgICAgICAgICAgIHZpZXcuZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24ocmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgY29tcGxldGlvbjogJyArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNldHRpbmdzLk9sbGFtYUNvbm5lY3Rpb24uUkVTVEFQSVVSTCAmJiBzZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLm9sbGFtYU1vZGVscy5pbmNsdWRlcyhzZXR0aW5ncy5nZW5lcmFsLm1vZGVsKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdHZW5lcmF0aW5nLi4uJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaE9sbGFtYURhdGFFZGl0b3Ioc2V0dGluZ3MsIHNlbGVjdCk7IFxuICAgICAgICAgICAgICAgIC8vIFJlcGxhY2UgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIHdpdGggdGhlIHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgY29uc3QgY3Vyc29yU3RhcnQgPSB2aWV3LmVkaXRvci5nZXRDdXJzb3IoJ2Zyb20nKTtcbiAgICAgICAgICAgICAgICB2aWV3LmVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKHJlc3BvbnNlKTtcblxuICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBuZXcgY3Vyc29yIHBvc2l0aW9uIGJhc2VkIG9uIHRoZSBsZW5ndGggb2YgdGhlIHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgY29uc3QgY3Vyc29yRW5kID0geyBcbiAgICAgICAgICAgICAgICAgICAgbGluZTogY3Vyc29yU3RhcnQubGluZSwgXG4gICAgICAgICAgICAgICAgICAgIGNoOiBjdXJzb3JTdGFydC5jaCArIHJlc3BvbnNlPy5sZW5ndGggXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8vIEtlZXAgdGhlIG5ldyB0ZXh0IHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgdmlldy5lZGl0b3Iuc2V0U2VsZWN0aW9uKGN1cnNvclN0YXJ0LCBjdXJzb3JFbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgY29tcGxldGlvbjogJyArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNldHRpbmdzLlJFU1RBUElVUkxDb25uZWN0aW9uLlJFU1RBUElVUkwgJiYgc2V0dGluZ3MuUkVTVEFQSVVSTENvbm5lY3Rpb24uUkVTVEFQSVVSTE1vZGVscy5pbmNsdWRlcyhzZXR0aW5ncy5nZW5lcmFsLm1vZGVsKSl7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0dlbmVyYXRpbmcuLi4nKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoUkVTVEFQSVVSTERhdGFFZGl0b3Ioc2V0dGluZ3MsIHNlbGVjdCk7IFxuICAgICAgICAgICAgICAgIC8vIFJlcGxhY2UgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIHdpdGggdGhlIHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgY29uc3QgY3Vyc29yU3RhcnQgPSB2aWV3LmVkaXRvci5nZXRDdXJzb3IoJ2Zyb20nKTtcbiAgICAgICAgICAgICAgICB2aWV3LmVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKHJlc3BvbnNlKTtcblxuICAgICAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBuZXcgY3Vyc29yIHBvc2l0aW9uIGJhc2VkIG9uIHRoZSBsZW5ndGggb2YgdGhlIHJlc3BvbnNlXG4gICAgICAgICAgICAgICAgY29uc3QgY3Vyc29yRW5kID0geyBcbiAgICAgICAgICAgICAgICAgICAgbGluZTogY3Vyc29yU3RhcnQubGluZSwgXG4gICAgICAgICAgICAgICAgICAgIGNoOiBjdXJzb3JTdGFydC5jaCArIHJlc3BvbnNlPy5sZW5ndGggXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIC8vIEtlZXAgdGhlIG5ldyB0ZXh0IHNlbGVjdGVkXG4gICAgICAgICAgICAgICAgdmlldy5lZGl0b3Iuc2V0U2VsZWN0aW9uKGN1cnNvclN0YXJ0LCBjdXJzb3JFbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRXJyb3Igb2NjdXJyZWQgd2hpbGUgZmV0Y2hpbmcgY29tcGxldGlvbjogJyArIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm1pc3RyYWwubWlzdHJhbE1vZGVscy5pbmNsdWRlcyhzZXR0aW5ncy5nZW5lcmFsLm1vZGVsKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdHZW5lcmF0aW5nLi4uJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaE1pc3RyYWxEYXRhRWRpdG9yKHNldHRpbmdzLCBzZWxlY3QpOyBcbiAgICAgICAgICAgICAgICAvLyBSZXBsYWNlIHRoZSBjdXJyZW50IHNlbGVjdGlvbiB3aXRoIHRoZSByZXNwb25zZVxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnNvclN0YXJ0ID0gdmlldy5lZGl0b3IuZ2V0Q3Vyc29yKCdmcm9tJyk7XG4gICAgICAgICAgICAgICAgdmlldy5lZGl0b3IucmVwbGFjZVNlbGVjdGlvbihyZXNwb25zZSk7XG5cbiAgICAgICAgICAgICAgICAvLyBDYWxjdWxhdGUgbmV3IGN1cnNvciBwb3NpdGlvbiBiYXNlZCBvbiB0aGUgbGVuZ3RoIG9mIHRoZSByZXNwb25zZVxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnNvckVuZCA9IHsgXG4gICAgICAgICAgICAgICAgICAgIGxpbmU6IGN1cnNvclN0YXJ0LmxpbmUsIFxuICAgICAgICAgICAgICAgICAgICBjaDogY3Vyc29yU3RhcnQuY2ggKyByZXNwb25zZT8ubGVuZ3RoIFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvLyBLZWVwIHRoZSBuZXcgdGV4dCBzZWxlY3RlZFxuICAgICAgICAgICAgICAgIHZpZXcuZWRpdG9yLnNldFNlbGVjdGlvbihjdXJzb3JTdGFydCwgY3Vyc29yRW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0Vycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIGNvbXBsZXRpb246ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzZXR0aW5ncy5BUElDb25uZWN0aW9ucy5nb29nbGVHZW1pbmkuZ2VtaW5pTW9kZWxzLmluY2x1ZGVzKHNldHRpbmdzLmdlbmVyYWwubW9kZWwpKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0dlbmVyYXRpbmcuLi4nKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoR29vZ2xlR2VtaW5pRGF0YUVkaXRvcihzZXR0aW5ncywgc2VsZWN0KTsgXG4gICAgICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGUgY3VycmVudCBzZWxlY3Rpb24gd2l0aCB0aGUgcmVzcG9uc2VcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJzb3JTdGFydCA9IHZpZXcuZWRpdG9yLmdldEN1cnNvcignZnJvbScpO1xuICAgICAgICAgICAgICAgIHZpZXcuZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24ocmVzcG9uc2UpO1xuXG4gICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIG5ldyBjdXJzb3IgcG9zaXRpb24gYmFzZWQgb24gdGhlIGxlbmd0aCBvZiB0aGUgcmVzcG9uc2VcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJzb3JFbmQgPSB7IFxuICAgICAgICAgICAgICAgICAgICBsaW5lOiBjdXJzb3JTdGFydC5saW5lLCBcbiAgICAgICAgICAgICAgICAgICAgY2g6IGN1cnNvclN0YXJ0LmNoICsgcmVzcG9uc2U/Lmxlbmd0aCBcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgLy8gS2VlcCB0aGUgbmV3IHRleHQgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICB2aWV3LmVkaXRvci5zZXRTZWxlY3Rpb24oY3Vyc29yU3RhcnQsIGN1cnNvckVuZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdFcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyBjb21wbGV0aW9uOiAnICsgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbmV3IE5vdGljZSgnR2VuZXJhdGlvbiBjb21wbGV0ZS4nKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIG5ldyBOb3RpY2UoJ05vIHRleHQgc2VsZWN0ZWQuJyk7ICAgIFxuICAgIH1cbn0iLCAiaW1wb3J0IHsgcmVxdWVzdFVybCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBPcGVuQUkgZnJvbSAnb3BlbmFpJztcbmltcG9ydCB7IEJNT1NldHRpbmdzIH0gZnJvbSAnc3JjL21haW4nO1xuXG4vLyBGZXRjaCBPcGVuQUktQmFzZWQgQVBJIEVkaXRvclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZldGNoT3BlbkFJQmFzZUFQSURhdGFFZGl0b3Ioc2V0dGluZ3M6IEJNT1NldHRpbmdzLCBzZWxlY3Rpb25TdHJpbmc6IHN0cmluZykge1xuICAgIGNvbnN0IG9wZW5haSA9IG5ldyBPcGVuQUkoe1xuICAgICAgICBhcGlLZXk6IHNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm9wZW5BSS5BUElLZXksXG4gICAgICAgIGJhc2VVUkw6IHNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLm9wZW5BSS5vcGVuQUlCYXNlVXJsLFxuICAgICAgICBkYW5nZXJvdXNseUFsbG93QnJvd3NlcjogdHJ1ZSwgLy8gYXBpS2V5IGlzIHN0b3JlZCB3aXRoaW4gZGF0YS5qc29uXG4gICAgfSk7XG5cbiAgICBjb25zdCBjb21wbGV0aW9uID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgICAgbW9kZWw6IHNldHRpbmdzLmdlbmVyYWwubW9kZWwsXG4gICAgICAgIG1heF90b2tlbnM6IHBhcnNlSW50KHNldHRpbmdzLmdlbmVyYWwubWF4X3Rva2VucyksXG4gICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiBzZXR0aW5ncy5lZGl0b3Iuc3lzdGVtX3JvbGVfcHJvbXB0X3NlbGVjdF9nZW5lcmF0ZSB9LFxuICAgICAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IHNlbGVjdGlvblN0cmluZ31cbiAgICAgICAgXSxcbiAgICB9KTtcblxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGNvbXBsZXRpb24uY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQ7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG59XG5cbi8vIFJlcXVlc3QgcmVzcG9uc2UgZnJvbSBPbGxhbWFcbi8vIE5PVEU6IEFib3J0IGRvZXMgbm90IHdvcmsgZm9yIHJlcXVlc3RVcmxcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaE9sbGFtYURhdGFFZGl0b3Ioc2V0dGluZ3M6IEJNT1NldHRpbmdzLCBzZWxlY3Rpb25TdHJpbmc6IHN0cmluZykge1xuICAgIGNvbnN0IG9sbGFtYVJFU1RBUElVUkwgPSBzZXR0aW5ncy5PbGxhbWFDb25uZWN0aW9uLlJFU1RBUElVUkw7XG5cbiAgICBpZiAoIW9sbGFtYVJFU1RBUElVUkwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgICAgICB1cmw6IG9sbGFtYVJFU1RBUElVUkwgKyAnL2FwaS9jaGF0JyxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIG1vZGVsOiBzZXR0aW5ncy5nZW5lcmFsLm1vZGVsLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IHNldHRpbmdzLmVkaXRvci5zeXN0ZW1fcm9sZV9wcm9tcHRfc2VsZWN0X2dlbmVyYXRlIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiBzZWxlY3Rpb25TdHJpbmd9XG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzdHJlYW06IGZhbHNlLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHBhcnNlSW50KHNldHRpbmdzLmdlbmVyYWwudGVtcGVyYXR1cmUpLFxuICAgICAgICAgICAgICAgICAgICBudW1fcHJlZGljdDogcGFyc2VJbnQoc2V0dGluZ3MuZ2VuZXJhbC5tYXhfdG9rZW5zKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSByZXNwb25zZS5qc29uLm1lc3NhZ2UuY29udGVudDtcblxuICAgICAgICByZXR1cm4gbWVzc2FnZTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG1ha2luZyBBUEkgcmVxdWVzdDonLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbn1cblxuLy8gUmVxdWVzdCByZXNwb25zZSBmcm9tIG9wZW5haS1iYXNlZCByZXN0IGFwaSB1cmwgKGVkaXRvcilcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaFJFU1RBUElVUkxEYXRhRWRpdG9yKHNldHRpbmdzOiBCTU9TZXR0aW5ncywgc2VsZWN0aW9uU3RyaW5nOiBzdHJpbmcpIHtcblxuICAgIGNvbnN0IHVybHMgPSBbXG4gICAgICAgIHNldHRpbmdzLlJFU1RBUElVUkxDb25uZWN0aW9uLlJFU1RBUElVUkwgKyAnL3YxL2NoYXQvY29tcGxldGlvbnMnLFxuICAgICAgICBzZXR0aW5ncy5SRVNUQVBJVVJMQ29ubmVjdGlvbi5SRVNUQVBJVVJMICsgJy9hcGkvdjEvY2hhdC9jb21wbGV0aW9ucydcbiAgICBdO1xuXG4gICAgbGV0IGxhc3RFcnJvciA9IG51bGw7XG5cbiAgICBmb3IgKGNvbnN0IHVybCBvZiB1cmxzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7c2V0dGluZ3MuUkVTVEFQSVVSTENvbm5lY3Rpb24uQVBJS2V5fWBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHNldHRpbmdzLmdlbmVyYWwubW9kZWwsXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiBzZXR0aW5ncy5lZGl0b3Iuc3lzdGVtX3JvbGVfcHJvbXB0X3NlbGVjdF9nZW5lcmF0ZSB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IHNlbGVjdGlvblN0cmluZ31cbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgbWF4X3Rva2VuczogcGFyc2VJbnQoc2V0dGluZ3MuZ2VuZXJhbC5tYXhfdG9rZW5zKSxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHBhcnNlSW50KHNldHRpbmdzLmdlbmVyYWwudGVtcGVyYXR1cmUpLFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSByZXNwb25zZS5qc29uLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50O1xuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7XG5cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGxhc3RFcnJvciA9IGVycm9yOyAvLyBTdG9yZSB0aGUgbGFzdCBlcnJvciBhbmQgY29udGludWVcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBJZiBhbGwgcmVxdWVzdHMgZmFpbGVkLCB0aHJvdyB0aGUgbGFzdCBlbmNvdW50ZXJlZCBlcnJvclxuICAgIGlmIChsYXN0RXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbWFraW5nIEFQSSByZXF1ZXN0OicsIGxhc3RFcnJvcik7XG4gICAgICAgIHRocm93IGxhc3RFcnJvcjtcbiAgICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaE1pc3RyYWxEYXRhRWRpdG9yKHNldHRpbmdzOiBCTU9TZXR0aW5ncywgc2VsZWN0aW9uU3RyaW5nOiBzdHJpbmcpIHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly9hcGkubWlzdHJhbC5haS92MS9jaGF0L2NvbXBsZXRpb25zJyxcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7c2V0dGluZ3MuQVBJQ29ubmVjdGlvbnMubWlzdHJhbC5BUElLZXl9YFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBtb2RlbDogc2V0dGluZ3MuZ2VuZXJhbC5tb2RlbCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgICAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiBzZXR0aW5ncy5lZGl0b3Iuc3lzdGVtX3JvbGVfcHJvbXB0X3NlbGVjdF9nZW5lcmF0ZSB9LFxuICAgICAgICAgICAgICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogc2VsZWN0aW9uU3RyaW5nfVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgbWF4X3Rva2VuczogcGFyc2VJbnQoc2V0dGluZ3MuZ2VuZXJhbC5tYXhfdG9rZW5zKSxcbiAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogcGFyc2VJbnQoc2V0dGluZ3MuZ2VuZXJhbC50ZW1wZXJhdHVyZSksXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHJlc3BvbnNlLmpzb24uY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQ7XG4gICAgICAgIHJldHVybiBtZXNzYWdlO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hHb29nbGVHZW1pbmlEYXRhRWRpdG9yKHNldHRpbmdzOiBCTU9TZXR0aW5ncywgc2VsZWN0aW9uU3RyaW5nOiBzdHJpbmcpIHtcbiAgICB0cnkgeyAgICAgICAgXG4gICAgICAgIC8vIEFzc3VtaW5nIHNldHRpbmdzLkFQSUNvbm5lY3Rpb25zLmdvb2dsZUdlbWluaS5BUElLZXkgY29udGFpbnMgeW91ciBBUEkga2V5XG4gICAgICAgIGNvbnN0IEFQSV9LRVkgPSBzZXR0aW5ncy5BUElDb25uZWN0aW9ucy5nb29nbGVHZW1pbmkuQVBJS2V5O1xuXG4gICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xuICAgICAgICAgICAgY29udGVudHM6IFt7XG4gICAgICAgICAgICAgICAgcGFydHM6IFtcbiAgICAgICAgICAgICAgICAgICAge3RleHQ6IHNldHRpbmdzLmVkaXRvci5zeXN0ZW1fcm9sZV9wcm9tcHRfc2VsZWN0X2dlbmVyYXRlICsgc2VsZWN0aW9uU3RyaW5nfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1dLFxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3RVcmwoe1xuICAgICAgICAgICAgdXJsOiBgaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjFiZXRhL21vZGVscy9nZW1pbmktcHJvOmdlbmVyYXRlQ29udGVudD9rZXk9JHtBUElfS0VZfWAsXG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpLFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSByZXNwb25zZS5qc29uLmNhbmRpZGF0ZXNbMF0uY29udGVudC5wYXJ0c1swXS50ZXh0O1xuICAgICAgICByZXR1cm4gbWVzc2FnZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9XG5cbn1cbiAgICBcbi8vIFJlcXVlc3QgcmVzcG9uc2UgZnJvbSBBbnRocm9waWMgRWRpdG9yXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hBbnRocm9waWNBUElEYXRhRWRpdG9yKHNldHRpbmdzOiBCTU9TZXR0aW5ncywgc2VsZWN0aW9uU3RyaW5nOiBzdHJpbmcpIHtcbiAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgJ2FudGhyb3BpYy12ZXJzaW9uJzogJzIwMjMtMDYtMDEnLFxuICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICd4LWFwaS1rZXknOiBzZXR0aW5ncy5BUElDb25uZWN0aW9ucy5hbnRocm9waWMuQVBJS2V5LFxuICAgIH07XG5cbiAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcbiAgICAgICAgbW9kZWw6IHNldHRpbmdzLmdlbmVyYWwubW9kZWwsXG4gICAgICAgIHByb21wdDogIGBcXG5cXG5IdW1hbjogJHtzZXR0aW5ncy5lZGl0b3Iuc3lzdGVtX3JvbGVfcHJvbXB0X3NlbGVjdF9nZW5lcmF0ZX1cXG5cXG4ke3NlbGVjdGlvblN0cmluZ31cXG5cXG5Bc3Npc3RhbnQ6YCxcbiAgICAgICAgbWF4X3Rva2Vuc190b19zYW1wbGU6IHBhcnNlSW50KHNldHRpbmdzLmdlbmVyYWwubWF4X3Rva2VucykgfHwgMTAwMDAwLFxuICAgICAgICB0ZW1wZXJhdHVyZTogcGFyc2VJbnQoc2V0dGluZ3MuZ2VuZXJhbC50ZW1wZXJhdHVyZSksXG4gICAgICAgIHN0cmVhbTogZmFsc2UsXG4gICAgfTtcbiAgXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVxdWVzdFVybCh7XG4gICAgICAgIHVybDogJ2h0dHBzOi8vYXBpLmFudGhyb3BpYy5jb20vdjEvY29tcGxldGUnLFxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVycyxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpLFxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbWFraW5nIEFQSSByZXF1ZXN0OicsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxpQkFBQUE7QUFBQTtBQUFBO0FBQUEsSUFBQUMsb0JBQThCOzs7QUNBOUIsSUFBQUMsbUJBQXFGOzs7QUNBckYsSUFBQUMsbUJBQW1DOzs7QUNBNUIsSUFBTSxVQUFVOzs7QUNVakIsSUFBTyxTQUFQLE1BQWE7Y0FNakIsVUFBOEIsWUFBNkI7U0FDekQsV0FBSztTQUNMLGFBQUs7U0FDTCxVQUFLLElBQVUsV0FBSTs7U0FHUixlQUFjO1FBQ3pCLENBQUEsS0FBSyxTQUFLLE1BQVM7c0JBQ1osTUFBVztZQUNoQixJQUFBLE1BQVUsbURBQU07O1VBRWxCLGNBQU0sSUFBYyxZQUFJO1VBRXhCLE9BQU0sNEJBQU8sS0FBbUMsU0FBSyxJQUFTO3FCQUNuRCxTQUFXLE1BQUk7aUJBQ25CLFFBQU0sWUFBUSxPQUFZLEtBQU0sR0FBQztvQkFDcEMsS0FB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RUFFQSxNQUFNLGVBQWU7QUFDcEIsU0FBSyxJQUFJLFVBQVUsbUJBQW1CLGlCQUFpQjtBQUV2RCxVQUFNLFlBQVksS0FBSyxJQUFJLFVBQVUsYUFBYSxLQUFLO0FBQ3ZELFdBQU0sdUNBQVcsYUFBYTtBQUFBLE1BQzdCLE1BQU07QUFBQSxNQUNOLFFBQVE7QUFBQSxJQUNUO0FBRUEsU0FBSyxJQUFJLFVBQVU7QUFBQSxNQUNsQixLQUFLLElBQUksVUFBVSxnQkFBZ0IsaUJBQWlCLEVBQUUsQ0FBQztBQUFBLElBQ3hEO0FBR0EsVUFBTSxXQUFXLFNBQVMsY0FBYyxtQkFBbUI7QUFFM0QsUUFBSSxVQUFVO0FBQ2IsZUFBUyxNQUFNLFVBQVU7QUFDekIsZUFBUyxNQUFNLGFBQWE7QUFFNUIsaUJBQVcsTUFBTTtBQUNoQixpQkFBUyxNQUFNO0FBQ2YsaUJBQVMsTUFBTSxVQUFVO0FBQUEsTUFDMUIsR0FBRyxFQUFFO0FBQUEsSUFDTjtBQUVBLFNBQUssSUFBSSxVQUFVO0FBQUEsTUFDbEIsS0FBSyxJQUFJLFVBQVUsZ0JBQWdCLGlCQUFpQixFQUFFLENBQUM7QUFBQSxJQUN4RDtBQUVBLFVBQU0sbUJBQW1CLFNBQVMsY0FBYyxtQkFBbUI7QUFDbkUsUUFBSSxrQkFBa0I7QUFDckIsdUJBQWlCLE9BQU87QUFBQSxRQUN2QixLQUFLLGlCQUFpQjtBQUFBLFFBQ3RCLFVBQVU7QUFBQSxNQUNYLENBQUM7QUFBQSxJQUNGO0FBQUEsRUFDRDtBQUFBLEVBR0EsTUFBTSxlQUFlO0FBQ3BCLFNBQUssV0FBVyxPQUFPLE9BQU8sQ0FBQyxHQUFHLGtCQUFrQixNQUFNLEtBQUssU0FBUyxDQUFDO0FBQUEsRUFDMUU7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNwQixVQUFNLEtBQUssU0FBUyxLQUFLLFFBQVE7QUFBQSxFQUNsQztBQUNEOyIsCiAgIm5hbWVzIjogWyJCTU9HUFQiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAiRmlsZSIsICJvcHRpb25zIiwgIl9hIiwgIm9wdHMiLCAiUGFnZSIsICJvcHRpb25zIiwgIl9hIiwgIm9wdGlvbnMiLCAiUGFnZSIsICJfYSIsICJvcHRpb25zIiwgIl9hIiwgIm9wdGlvbnMiLCAiVHJhbnNjcmlwdGlvbnMiLCAib3B0aW9ucyIsICJUcmFuc2xhdGlvbnMiLCAiQXVkaW8iLCAib3B0aW9ucyIsICJfYSIsICJDaGF0IiwgIkNvbXBsZXRpb25zIiwgIm9wdGlvbnMiLCAiX2EiLCAib3B0aW9ucyIsICJFbWJlZGRpbmdzIiwgIm9wdGlvbnMiLCAiRWRpdHMiLCAib3B0aW9ucyIsICJvcHRpb25zIiwgIl9hIiwgIm9wdGlvbnMiLCAiSm9icyIsICJGaW5lVHVuaW5nIiwgIm9wdGlvbnMiLCAiSW1hZ2VzIiwgIm9wdGlvbnMiLCAiTW9kZWxzIiwgIm9wdGlvbnMiLCAiTW9kZXJhdGlvbnMiLCAib3B0aW9ucyIsICJDb21wbGV0aW9ucyIsICJPcGVuQUkiLCAibm9vcFRlc3QiLCAibGV4ZXIiLCAib3B0aW9ucyIsICJ0ZXh0IiwgIm1hbmdsZSIsICJzbWFydHlwYW50cyIsICJwYXJzZXIiLCAic3JjIiwgImFyZ3MiLCAicmV0IiwgIndhbGtUb2tlbnMiLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgImhleCIsICJtZXNzYWdlSGlzdG9yeSIsICJyZWZlcmVuY2VDdXJyZW50Tm90ZUNvbnRlbnQiLCAiYm90TWVzc2FnZURpdiIsICJfYSIsICJ0YXJnZXRVc2VyTWVzc2FnZSIsICJ0YXJnZXRCb3RNZXNzYWdlIiwgIm1lc3NhZ2VDb250YWluZXJFbCIsICJtZXNzYWdlSGlzdG9yeSIsICJpbmRleCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgInJlZmVyZW5jZUN1cnJlbnROb3RlQ29udGVudCIsICJfYSIsICJfYSIsICJtZXNzYWdlSGlzdG9yeSIsICJmaWxlIiwgIm1lc3NhZ2VDb250YWluZXIiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiU2V0dGluZ1RhYiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiU2V0dGluZ1RhYiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiU2V0dGluZ1RhYiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiU2V0dGluZ1RhYiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIlNldHRpbmdUYWIiLCAiaW1wb3J0X29ic2lkaWFuIiwgIlNldHRpbmdUYWIiLCAiaW1wb3J0X29ic2lkaWFuIiwgIlNldHRpbmdUYWIiLCAiaW1wb3J0X29ic2lkaWFuIiwgIlNldHRpbmdUYWIiLCAiU2V0dGluZ1RhYiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiU2V0dGluZ1RhYiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiU2V0dGluZ1RhYiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiU2V0dGluZ1RhYiIsICJhcHAiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJCTU9HUFQiXQp9Cg==
